<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Prototype åŸå‹æ¨¡å¼</title>
    <link href="/2020/08/26/Prototype/"/>
    <url>/2020/08/26/Prototype/</url>
    
    <content type="html"><![CDATA[<h2 id="Prototypeå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼"><a href="#Prototypeå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼" class="headerlink" title="Prototypeå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼"></a>Prototypeå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼</h2><p>é€šè¿‡å¯¹è±¡åˆ›å»ºæ¨¡å¼ç»•å¼€<code>new</code>, æ¥é¿å…å¯¹è±¡åˆ›å»º (<code>new</code>) è¿‡ç¨‹ä¸­æ‰€å¯¼è‡´çš„ç´§è€¦åˆ(ä¾èµ–å…·ä½“ç±» )ï¼Œä»è€Œæ”¯æŒå¯¹è±¡åˆ›å»ºçš„ç¨³å®šã€‚ä»–æ˜¯æ¥å£æŠ½è±¡ä¹‹åçš„ç¬¬ä¸€æ­¥å·¥ä½œã€‚</p><p>å…¸å‹æ¨¡å¼æœ‰</p><ul><li>Factory Method</li><li>Abstract Factory</li><li>Prototype</li><li>Builder</li></ul><h2 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h2><ul><li>è¿™æ˜¯factory methodçš„åŠ¨æœº</li></ul><blockquote><p>åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œç»å¸¸é¢ä¸´ç€åˆ›å»ºå¯¹è±¡çš„å·¥ä½œï¼›ç”±äºéœ€æ±‚çš„å˜åŒ–ï¼Œ éœ€è¦åˆ›å»ºçš„å¯¹è±¡çš„å…·ä½“ç±»å‹ç»å¸¸å˜åŒ–ã€‚</p><p>å¦‚ä½•åº”å¯¹è¿™ç§å˜åŒ–ï¼Ÿå¦‚ä½•ç»•è¿‡å¸¸è§„çš„å¯¹è±¡åˆ›å»ºæ–¹æ³•(new)ï¼Œæä¾›ä¸€ ç§â€å°è£…æœºåˆ¶â€æ¥é¿å…å®¢æˆ·ç¨‹åºå’Œè¿™ç§â€å…·ä½“å¯¹è±¡åˆ›å»ºå·¥ä½œâ€çš„ç´§è€¦åˆï¼Ÿ</p></blockquote><ul><li>è¿™æ˜¯prototypeçš„åŠ¨æœº</li></ul><blockquote><p>åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œç»å¸¸é¢ä¸´ç€â€<u>æŸäº›ç»“æ„å¤æ‚çš„å¯¹è±¡</u>â€œçš„åˆ›å»ºå·¥ä½œï¼›ç”±äºéœ€æ±‚çš„å˜åŒ–ï¼Œ è¿™äº›å¯¹è±¡ç»å¸¸é¢ä¸´ç€å‰§çƒˆçš„å˜åŒ–ï¼Œä½†æ˜¯ä»–ä»¬å´æ‹¥æœ‰æ¯”è¾ƒç¨³å®šä¸€è‡´çš„æ¥å£ã€‚</p><p>å¦‚ä½•åº”å¯¹è¿™ç§å˜åŒ–ï¼Ÿå¦‚ä½•å‘â€å®¢æˆ·ç¨‹åº(ä½¿ç”¨è¿™äº›å¯¹è±¡çš„ç¨‹åº)â€éš”ç¦»å‡ºè¿™äº›â€æ˜“å˜å¯¹è±¡â€ï¼Œä»è€Œä½¿å¾—â€ä¾èµ–è¿™äº›æ˜“å˜å¯¹è±¡çš„å®¢æˆ·ç¨‹åºâ€ä¸éšç€éœ€æ±‚æ”¹å˜è€Œæ”¹å˜?</p><p>ï¼ˆmaybeç±»ä¼¼æ¸¸æˆè¯»æ¡£</p></blockquote><p>éå¸¸ç›¸ä¼¼æ˜¯ä¸æ˜¯ï¼ŒçŸ¥è¯†prototypeä¸­é¢å¯¹çš„æ˜¯ç»“æ„å¤æ‚çš„å¯¹è±¡</p><h2 id="æ¨¡å¼å®šä¹‰"><a href="#æ¨¡å¼å®šä¹‰" class="headerlink" title="æ¨¡å¼å®šä¹‰"></a>æ¨¡å¼å®šä¹‰</h2><p>ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œç„¶åé€šè¿‡<u>æ‹·è´</u>è¿™äº›åŸå‹æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><h4 id="è¿™æ˜¯Factory-methodä¸­ä½¿ç”¨çš„ä»£ç "><a href="#è¿™æ˜¯Factory-methodä¸­ä½¿ç”¨çš„ä»£ç " class="headerlink" title="è¿™æ˜¯Factory methodä¸­ä½¿ç”¨çš„ä»£ç "></a>è¿™æ˜¯Factory methodä¸­ä½¿ç”¨çš„ä»£ç </h4><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//æŠ½è±¡ç±»</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ISplitter</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">split</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-keyword">virtual</span> ~ISplitter() &#123;&#125;&#125;;<span class="hljs-comment">//å·¥å‚åŸºç±»</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SplitterFactory</span> &#123;</span><span class="hljs-keyword">public</span>:<span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> ISplitter* <span class="hljs-title">CreateSplitter</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-keyword">virtual</span> ~SplitterFactory()&#123;&#125;    &#125;&#125;;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//å…·ä½“ç±»</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BinarySpliter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TxtSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PictureSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VideoSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;  &#125;;<span class="hljs-comment">//å…·ä½“å·¥å‚</span>BinarySplitterFactory: <span class="hljs-keyword">public</span> SplitterFactory &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">CreateSplitter</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> BinarySplitter();    &#125;&#125;;TxtSplitterFactory: <span class="hljs-keyword">public</span> SplitterFactory &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">CreateSplitter</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> TxtSplitter();    &#125;&#125;;PictureSplitterFactory: <span class="hljs-keyword">public</span> SplitterFactory &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">CreateSplitter</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> PictureSplitter();    &#125;&#125;;VideoSplitterFactory: <span class="hljs-keyword">public</span> SplitterFactory &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">CreateSplitter</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> VideoSplitter();    &#125;&#125;;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainForm</span>:</span> <span class="hljs-keyword">public</span> Form &#123;    SplitterFactory* factory;<span class="hljs-keyword">public</span>:    MainForm(SplitterFactory* factory) &#123;        <span class="hljs-keyword">this</span>-&gt;factory = factory;    &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button1_Click</span><span class="hljs-params">()</span> </span>&#123;<span class="hljs-comment">//å¤šæ€new</span>ISplitter* splitter = factory-&gt;CreateSplitter();        splitter-&gt;split;    &#125;&#125;</code></pre></div><h4 id="åœ¨prototypeä¸­-åˆå¹¶ISplitter-SplitterFactory"><a href="#åœ¨prototypeä¸­-åˆå¹¶ISplitter-SplitterFactory" class="headerlink" title="åœ¨prototypeä¸­, åˆå¹¶ISplitter, SplitterFactory"></a>åœ¨prototypeä¸­, åˆå¹¶ISplitter, SplitterFactory</h4><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ISplitter</span> &#123;</span><span class="hljs-keyword">public</span>: <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">split</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> ISplitter* <span class="hljs-title">clone</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>; <span class="hljs-comment">//é€šè¿‡cloneè‡ªå·±æ¥åˆ›å»ºå¯¹è±¡</span>        <span class="hljs-keyword">virtual</span> ~ISplitter() &#123;&#125;&#125;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//å…·ä½“ç±»</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BinarySpliter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">clone</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> BinarySplitter(*<span class="hljs-keyword">this</span>);    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TxtSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">clone</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> TxtSplitter(*<span class="hljs-keyword">this</span>);    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PictureSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">clone</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> PictureSplitter(*<span class="hljs-keyword">this</span>);    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VideoSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;  <span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">clone</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> VideoSplitter(*<span class="hljs-keyword">this</span>);    &#125;&#125;;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainForm</span>:</span> <span class="hljs-keyword">public</span> Form &#123;    ISplitter* prototype;<span class="hljs-keyword">public</span>:    MainForm(SplitterFactory* prototype) &#123;        <span class="hljs-keyword">this</span>-&gt;prototype = prototype;<span class="hljs-comment">//åŸå‹å¯¹è±¡æ˜¯ä¾›cloneçš„</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button1_Click</span><span class="hljs-params">()</span> </span>&#123;ISplitter* splitter = prototype-&gt;clone();        splitter-&gt;split;    &#125;&#125;</code></pre></div><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p><img src="image-20200826132954596.png" srcset="/img/loading.gif" alt="image-20200826132954596" style="zoom:67%;" /></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>Prototypeæ¨¡å¼åŒæ ·ç”¨äºéš”ç¦»ç±»ç‹¬äº«çš„ä½¿ç”¨è€…å’Œå…·ä½“ç±»å‹(æ˜“å˜ç±»)ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œå®ƒåŒæ ·è¦æ±‚è¿™äº›â€æ˜“å˜ç±»â€æ‹¥æœ‰ç¨³å®šçš„æ¥å£</li><li>Prototypeæ¨¡å¼å¯¹äºâ€å¦‚ä½•åˆ›å»ºæ˜“å˜ç±»çš„å°¸ä½“å¯¹è±¡â€é‡‡ç”¨â€åŸå‹å…‹éš†â€çš„æ–¹æ³•æ¥åšï¼Œå®ƒä½¿å¾—æˆ‘ä»¬å¯ä»¥éå¸¸çµæ´»çš„åŠ¨æ€åˆ›å»ºâ€æ‹¥æœ‰æŸäº›ç¨³å®šæ¥å£â€çš„æ–°å¯¹è±¡â€”æ‰€éœ€å·¥ä½œä»…ä»…æ˜¯æ³¨å†Œä¸€ä¸ªæ–°ç±»çš„å¯¹è±¡(å³åŸå‹)ï¼Œç„¶ååœ¨ä»»ä½•éœ€è¦çš„åœ°æ–¹Clone</li><li>Prototypeæ¨¡å¼ä¸­çš„cloneæ–¹æ³•å¯ä»¥åˆ©ç”¨æŸäº›æ¡†æ¶ä¸­çš„åºåˆ—åŒ–æ¥å®ç°æ·±æ‹·è´ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>Design Patterns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Design Patterns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Terminal AddOns</title>
    <link href="/2020/08/23/AddOns/"/>
    <url>/2020/08/23/AddOns/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="https://github.com/romkatv/powerlevel10k" target="_blank" rel="noopener">powerlevel10k</a>: a theme for Zsh. It emphasizes <a href="https://github.com/romkatv/powerlevel10k#uncompromising-performance" target="_blank" rel="noopener">speed</a>, <a href="https://github.com/romkatv/powerlevel10k#extremely-customizable" target="_blank" rel="noopener">flexibility</a> and <a href="https://github.com/romkatv/powerlevel10k#configuration-wizard" target="_blank" rel="noopener">out-of-the-box experience</a>.</li></ul><ul><li><a href="https://github.com/SpaceVim/SpaceVim" target="_blank" rel="noopener">SpaceVim</a>: SpaceVim is a community-driven modular Vim distribution. It manages collections of plugins in layers, which help to collect related packages together to provide IDE-like features. SpaceVim is not just a vimrc but an ultimate Vim configuration, It contains many built-in features.</li></ul><p><img src="image-20200823172304012.png" srcset="/img/loading.gif" alt="image-20200823172304012" style="zoom:50%;" /></p><p><img src="image-20200823174451884.png" srcset="/img/loading.gif" alt="image-20200823174451884" style="zoom:50%;" /></p><ul><li><a href="https://github.com/Mayccoll/Gogh" target="_blank" rel="noopener">Gogh</a> : color theme</li></ul><p><img src="image-20200823172029258.png" srcset="/img/loading.gif" alt="image-20200823172029258" style="zoom:50%;" /></p><p><br></p><p>Vim clipboardæ— æ³•ä½¿ç”¨çš„é—®é¢˜:</p><ul><li>linux</li></ul><div class="hljs"><pre><code class="hljs shell">sudo apt-get install vim-gnome</code></pre></div><p>å®‰è£…åæ‰§è¡Œ</p><div class="hljs"><pre><code class="hljs shell">vim --version | grep "clipboard"</code></pre></div><p>å¯ä»¥å‘ç°clipboardå‰é¢æœ‰ä¸€ä¸ªåŠ å·</p><ul><li>MacOS</li></ul><p>å¼„äº†åŠå¤©è¿˜æ˜¯ä¸è¡Œï¼Œä¸æäº†ï¼Œå¯æ¶</p><p>é‚£å°±è¿™æ ·å§</p><p>To copy the current line, in command mode type:</p><div class="hljs"><pre><code class="hljs 1c"><span class="hljs-string">"*yy</span></code></pre></div><p>To copy the whole file/buffer, in command mode, first go to the beginning via <code>gg</code>, then type</p><div class="hljs"><pre><code class="hljs 1c"><span class="hljs-string">"*yG</span></code></pre></div><p><code>&quot;*5yy</code> says <code>5 lines yanked</code> </p>]]></content>
    
    
    
    <tags>
      
      <tag>Terminal</tag>
      
      <tag>Theme</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gem5lec1</title>
    <link href="/2020/08/21/gem5lec1/"/>
    <url>/2020/08/21/gem5lec1/</url>
    
    <content type="html"><![CDATA[<p>å®‰è£…</p><div class="hljs"><pre><code class="hljs shell">sudo apt install gitsudo apt install sconssudo apt install python-pipsudo apt-get install six</code></pre></div><div class="hljs"><pre><code class="hljs shell">sudo apt install build-essential git m4 scons zlib1g zlib1g-dev libprotobuf-dev protobuf-compiler libprotoc-dev libgoogle-perftools-dev python-dev python</code></pre></div><div class="hljs"><pre><code class="hljs shell">mkdir tempcd tempgit clone https://gem5.googlesource.com/public/gem5scons build/X86/gem5.opt -j5</code></pre></div><p>git clone çš„è¿™ä¸ªç½‘ç«™éœ€è¦vpn</p><p><img src="gem5lec1/image-20200821211421714.png" srcset="/img/loading.gif" alt="image-20200821211421714" style="zoom:50%;" /></p><h4 id="M4-macro-processor-not-installed"><a href="#M4-macro-processor-not-installed" class="headerlink" title="M4 macro processor not installed"></a>M4 macro processor not installed</h4><p>If the M4 macro processor isnâ€™t installed youâ€™ll see an error similar to this:</p><div class="hljs"><pre><code class="hljs subunit">...Checking for member exclude_host in struct perf_event_attr...yes<span class="hljs-keyword">Error: </span>Can't find version of M4 macro processor.  Please install M4 and try again.</code></pre></div><p>Just installing the M4 macro package may not solve this issue. You may nee to also install all of the <code>autoconf</code> tools. On Ubuntu, you can use the following command.</p><div class="hljs"><pre><code class="hljs routeros">sudo apt-<span class="hljs-builtin-name">get</span> install automake</code></pre></div><h4 id="gem5-architecture"><a href="#gem5-architecture" class="headerlink" title="gem5 architecture"></a>gem5 architecture</h4><ul><li>gem5 consists of <strong>SimObjects</strong></li></ul><p>most C++ objects in gem5 inherit from <code>class SimObject</code></p><p>Represent </p><ul><li>gem5 is a discrete event simulator</li></ul><h4 id="gem5-use-inteface"><a href="#gem5-use-inteface" class="headerlink" title="gem5 use inteface"></a>gem5 use inteface</h4>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>VMwareè™šæ‹Ÿæœºå…±äº«æœ¬æœºvpn</title>
    <link href="/2020/08/21/UbuntuNet/"/>
    <url>/2020/08/21/UbuntuNet/</url>
    
    <content type="html"><![CDATA[<ul><li>è®¾ç½®windowsä¸Šçš„vpnä¸ºå…è®¸å…¶ä»–è®¾å¤‡æ¥å…¥</li></ul><p><img src="image-20200821203437531.png" srcset="/img/loading.gif" alt="image-20200821203437531" style="zoom: 80%;" /></p><ul><li>æ‰¾åˆ°windowsçš„IPv4åœ°å€ã€‚æ‰“å¼€cmd, æ•²ä¸‹å‘½ä»¤</li></ul><div class="hljs"><pre><code class="hljs shell">ipconfig</code></pre></div><p><img src="image-20200821203549431.png" srcset="/img/loading.gif" alt="image-20200821203549431" style="zoom:80%;" /></p><ul><li>å°†è™šæ‹Ÿæœºçš„ç½‘ç»œæ›´æ”¹åˆ°æ¡¥æ¥NATæ¨¡å¼</li></ul><p><img src="826F8F12DC215AB8D882501214537913.png" srcset="/img/loading.gif" alt="826F8F12DC215AB8D882501214537913" style="zoom:80%;" /></p><ul><li>æ‰“å¼€ubuntuçš„ç½‘ç»œè®¾ç½®</li></ul><p><img src="image-20200821203806669.png" srcset="/img/loading.gif" alt="image-20200821203806669" style="zoom:67%;" /></p><ul><li>è®¾ç½®ä»£ç†æœåŠ¡å™¨</li></ul><p><img src="image-20200821203833106.png" srcset="/img/loading.gif" alt="image-20200821203833106" style="zoom:80%;" /></p><p>è¿™æ—¶æµè§ˆå™¨å·²ç»å¯ä»¥ä¸Šç½‘ï¼Œä½†æ˜¯å‘½ä»¤è¡Œè¿˜ä¸è¡Œï¼Œè¿˜éœ€è¦å¦å¤–è®¾ç½®ã€‚</p><ul><li>open ubuntu terminalï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹</li></ul><div class="hljs"><pre><code class="hljs shell">export http_proxy=...export https_proxy=......</code></pre></div><p><img src="image-20200821203938024.png" srcset="/img/loading.gif" alt="image-20200821203938024" style="zoom:80%;" /></p><ul><li>æœ€åï¼Œå¯ä»¥ä½¿ç”¨vpnğŸŒ¶ï¸</li></ul><p><img src="image-20200821204028331.png" srcset="/img/loading.gif" alt="image-20200821204028331"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Ubuntu VPN</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Abstract Factory</title>
    <link href="/2020/08/21/DesignPatterns/AbstractFactory/"/>
    <url>/2020/08/21/DesignPatterns/AbstractFactory/</url>
    
    <content type="html"><![CDATA[<h2 id="Abstract-Factoryå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼"><a href="#Abstract-Factoryå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼" class="headerlink" title="Abstract Factoryå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼"></a>Abstract Factoryå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼</h2><p>é€šè¿‡å¯¹è±¡åˆ›å»ºæ¨¡å¼ç»•å¼€<code>new</code>, æ¥é¿å…å¯¹è±¡åˆ›å»º (<code>new</code>) è¿‡ç¨‹ä¸­æ‰€å¯¼è‡´çš„ç´§è€¦åˆ(ä¾èµ–å…·ä½“ç±» )ï¼Œä»è€Œæ”¯æŒå¯¹è±¡åˆ›å»ºçš„ç¨³å®šã€‚ä»–æ˜¯æ¥å£æŠ½è±¡ä¹‹åçš„ç¬¬ä¸€æ­¥å·¥ä½œã€‚</p><p>å…¸å‹æ¨¡å¼æœ‰</p><ul><li>Factory Method</li><li>Abstract Factory</li><li>Prototype</li><li>Builder</li></ul><h2 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h2><ul><li><p>åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œç»å¸¸é¢ä¸´ç€â€<u>ä¸€ç³»åˆ—ç›¸äº’ä¾èµ–çš„å¯¹è±¡</u>â€œçš„åˆ›å»ºå·¥ä½œï¼›åŒæ—¶ï¼Œç”±äºéœ€æ±‚çš„å˜åŒ–ï¼Œå¾€å¾€å­˜åœ¨æ›´å¤šç³»åˆ—å¯¹è±¡çš„åˆ›å»ºå·¥ä½œã€‚</p></li><li><p>å¦‚ä½•åº”å¯¹è¿™ç§å˜åŒ–ï¼Ÿå¦‚ä½•ç»•è¿‡å¸¸è§„çš„å¯¹è±¡åˆ›å»ºæ–¹æ³•(new)ï¼Œæä¾›ä¸€ç§â€å°è£…æœºåˆ¶â€æ¥é¿å…å®¢æˆ·ç¨‹åºå’Œè¿™ç§â€å¤šç³»åˆ—å…·ä½“å¯¹è±¡åˆ›å»ºå·¥ä½œâ€ çš„ç´§è€¦åˆï¼Ÿ</p></li></ul><h2 id="æ¨¡å¼å®šä¹‰"><a href="#æ¨¡å¼å®šä¹‰" class="headerlink" title="æ¨¡å¼å®šä¹‰"></a>æ¨¡å¼å®šä¹‰</h2><p>æä¾›ä¸€ä¸ªæ¥å£ï¼Œè®©è¯¥æ¥å£è´Ÿè´£åˆ›å»ºä¸€ç³»åˆ—â€ç›¸å…³æˆ–è€…ç›¸äº’ä¾èµ–çš„å¯¹è±¡â€ï¼Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚</p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>ä»»åŠ¡æ˜¯å†™ä¸€ä¸ªæ•°æ®è®¿é—®å±‚ã€‚æ•°æ®åº“å¯èƒ½ä¼šæœ‰å„ç§å„æ ·çš„å˜åŒ–ã€‚å¯èƒ½æ˜¯sqlserver, oracel, mysql, å› æ­¤å¯¹åº”çš„ç±»å‹å°±éœ€è¦å˜åŒ–ã€‚ä½†æ˜¯ä¸‹é¢çš„ä»£ç çš„newå¹¶ä¸æ˜¯å¤šæ€new</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmployeeDAO</span>&#123;</span>    <span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;EmployeeDO&gt; <span class="hljs-title">GetEmployees</span><span class="hljs-params">()</span></span>&#123;        SqlConnection* connection =            <span class="hljs-keyword">new</span> SqlConnection();        connection-&gt;ConnectionString = <span class="hljs-string">"..."</span>;        SqlCommand* command =            <span class="hljs-keyword">new</span> SqlCommand();        command-&gt;CommandText=<span class="hljs-string">"..."</span>;        command-&gt;SetConnection(connection);        SqlDataReader* reader = command-&gt;ExecuteReader();        <span class="hljs-keyword">while</span> (reader-&gt;Read())&#123;        &#125;    &#125;&#125;;</code></pre></div><ul><li>é‡æ„</li></ul><p>è¦æ”¯æŒå¤šæ€new, é©¬ä¸Šå°±æƒ³åˆ°äº†factory method.</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//æ•°æ®åº“è®¿é—®æœ‰å…³çš„åŸºç±»</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IDBConnection</span>&#123;</span>    &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IDBConnectionFactory</span>&#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDBConnection* <span class="hljs-title">CreateDBConnection</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IDBCommand</span>&#123;</span>    &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IDBCommandFactory</span>&#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDBCommand* <span class="hljs-title">CreateDBCommand</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IDataReader</span>&#123;</span>    &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IDataReaderFactory</span>&#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDataReader* <span class="hljs-title">CreateDataReader</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;&#125;;<span class="hljs-comment">//æ”¯æŒSQL Server</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqlConnection</span>:</span> <span class="hljs-keyword">public</span> IDBConnection&#123;    &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqlConnectionFactory</span>:</span><span class="hljs-keyword">public</span> IDBConnectionFactory&#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqlCommand</span>:</span> <span class="hljs-keyword">public</span> IDBCommand&#123;    &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqlCommandFactory</span>:</span><span class="hljs-keyword">public</span> IDBCommandFactory&#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqlDataReader</span>:</span> <span class="hljs-keyword">public</span> IDataReader&#123;    &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqlDataReaderFactory</span>:</span><span class="hljs-keyword">public</span> IDataReaderFactory&#123;&#125;;<span class="hljs-comment">//æ”¯æŒOracle</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OracleConnection</span>:</span> <span class="hljs-keyword">public</span> IDBConnection&#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OracleCommand</span>:</span> <span class="hljs-keyword">public</span> IDBCommand&#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OracleDataReader</span>:</span> <span class="hljs-keyword">public</span> IDataReader&#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmployeeDAO</span>&#123;</span>    IDBConnectionFactory* dbConnectionFactory;    IDBCommandFactory* dbCommandFactory;    IDataReaderFactory* dataReaderFactory;    <span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;EmployeeDO&gt; <span class="hljs-title">GetEmployees</span><span class="hljs-params">()</span></span>&#123;        IDBConnection* connection =            dbConnectionFactory-&gt;CreateDBConnection();        connection-&gt;ConnectionString(<span class="hljs-string">"..."</span>);        IDBCommand* command =            dbCommandFactory-&gt;CreateDBCommand();        command-&gt;CommandText(<span class="hljs-string">"..."</span>);        command-&gt;SetConnection(connection); <span class="hljs-comment">//å…³è”æ€§</span>        IDBDataReader* reader = command-&gt;ExecuteReader(); <span class="hljs-comment">//å…³è”æ€§</span>        <span class="hljs-keyword">while</span> (reader-&gt;Read())&#123;        &#125;    &#125;&#125;;</code></pre></div><p>ä½†æ˜¯ï¼Œè¿™æ ·çš„é—®é¢˜æ˜¯IDBConnection, IDBCommand, IDBDataReaderå¯èƒ½å¹¶ä¸å¯¹åº”ï¼Œæ¯”å¦‚ä¸€ä¸ªæ˜¯oracelçš„connection, ä¸€ä¸ªæ˜¯mysqlçš„commandã€‚å› æ­¤äº§ç”Ÿå…³è”æ€§é—®é¢˜ã€‚</p><ul><li>ç»§ç»­é‡æ„</li></ul><p>æŠŠconnection, command, datareaderå‡èšåˆ°ä¸€ä¸ªç±»ä¸­, è¿™æ ·å°±èƒ½å¾—åˆ°å…³è”æ€§çš„ä¿è¯ã€‚</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//æ•°æ®åº“è®¿é—®æœ‰å…³çš„åŸºç±»</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IDBConnection</span>&#123;</span>    &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IDBCommand</span>&#123;</span>&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IDataReader</span>&#123;</span>    &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IDBFactory</span>&#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDBConnection* <span class="hljs-title">CreateDBConnection</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDBCommand* <span class="hljs-title">CreateDBCommand</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDataReader* <span class="hljs-title">CreateDataReader</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;    &#125;;<span class="hljs-comment">//æ”¯æŒSQL Server</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqlConnection</span>:</span> <span class="hljs-keyword">public</span> IDBConnection&#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqlCommand</span>:</span> <span class="hljs-keyword">public</span> IDBCommand&#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqlDataReader</span>:</span> <span class="hljs-keyword">public</span> IDataReader&#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqlDBFactory</span>:</span><span class="hljs-keyword">public</span> IDBFactory&#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDBConnection* <span class="hljs-title">CreateDBConnection</span><span class="hljs-params">()</span> </span>&#123;&#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDBCommand* <span class="hljs-title">CreateDBCommand</span><span class="hljs-params">()</span> </span>&#123;&#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDataReader* <span class="hljs-title">CreateDataReader</span><span class="hljs-params">()</span> </span>&#123;&#125; &#125;;<span class="hljs-comment">//æ”¯æŒOracle</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OracleConnection</span>:</span> <span class="hljs-keyword">public</span> IDBConnection&#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OracleCommand</span>:</span> <span class="hljs-keyword">public</span> IDBCommand&#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OracleDataReader</span>:</span> <span class="hljs-keyword">public</span> IDataReader&#123;  &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OracleDBFactory</span>:</span><span class="hljs-keyword">public</span> IDBFactory&#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDBConnection* <span class="hljs-title">CreateDBConnection</span><span class="hljs-params">()</span> </span>&#123;&#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDBCommand* <span class="hljs-title">CreateDBCommand</span><span class="hljs-params">()</span> </span>&#123;&#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> IDataReader* <span class="hljs-title">CreateDataReader</span><span class="hljs-params">()</span> </span>&#123;&#125; &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmployeeDAO</span>&#123;</span>    IDBFactory* dbFactory;    <span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;EmployeeDO&gt; <span class="hljs-title">GetEmployees</span><span class="hljs-params">()</span></span>&#123;        IDBConnection* connection =            dbFactory-&gt;CreateDBConnection();        connection-&gt;ConnectionString(<span class="hljs-string">"..."</span>);        IDBCommand* command =            dbFactory-&gt;CreateDBCommand();        command-&gt;CommandText(<span class="hljs-string">"..."</span>);        command-&gt;SetConnection(connection); <span class="hljs-comment">//å…³è”æ€§</span>        IDBDataReader* reader = command-&gt;ExecuteReader(); <span class="hljs-comment">//å…³è”æ€§</span>        <span class="hljs-keyword">while</span> (reader-&gt;Read())&#123;        &#125;    &#125;&#125;;</code></pre></div><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p><img src="image-20200821143526358.png" srcset="/img/loading.gif" alt="image-20200821143526358" style="zoom:50%;" /></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><p>å¦‚æœæ²¡æœ‰åº”å¯¹â€å¤šç³»åˆ—å¯¹è±¡æ„å»ºâ€çš„éœ€æ±‚å˜åŒ–ï¼Œåˆ™æ²¡æœ‰å¿…è¦ä½¿ç”¨ Abstract Factoryæ¨¡å¼ï¼Œè¿™æ—¶å€™ä½¿ç”¨ç®€å•çš„å·¥å‚å®Œå…¨å¯ä»¥ã€‚</p></li><li><p>â€œç³»åˆ—å¯¹è±¡â€æŒ‡çš„æ˜¯åœ¨æŸä¸€ç‰¹å®šç³»åˆ—ä¸‹çš„å¯¹è±¡ä¹‹é—´æœ‰ç›¸äº’ä¾èµ–ã€ æˆ–ä½œç”¨çš„å…³ç³»ã€‚ä¸åŒç³»åˆ—çš„å¯¹è±¡ä¹‹é—´ä¸èƒ½ç›¸äº’ä¾èµ–ã€‚</p></li><li><p>Abstract Factoryæ¨¡å¼ä¸»è¦åœ¨äºåº”å¯¹â€æ–°ç³»åˆ—â€çš„éœ€æ±‚å˜åŠ¨ã€‚å…¶ç¼º ç‚¹åœ¨äºéš¾ä»¥åº”å¯¹â€æ–°å¯¹è±¡â€çš„éœ€æ±‚å˜åŠ¨ã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Design Patterns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Design Patterns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Factory Method å·¥å‚æ¨¡å¼</title>
    <link href="/2020/08/14/DesignPatterns/FactoryMethod/"/>
    <url>/2020/08/14/DesignPatterns/FactoryMethod/</url>
    
    <content type="html"><![CDATA[<h2 id="Factory-Methodå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼"><a href="#Factory-Methodå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼" class="headerlink" title="Factory Methodå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼"></a>Factory Methodå±äºå¯¹è±¡åˆ›å»ºæ¨¡å¼</h2><p>é€šè¿‡å¯¹è±¡åˆ›å»ºæ¨¡å¼ç»•å¼€<code>new</code>, æ¥é¿å…å¯¹è±¡åˆ›å»º (<code>new</code>) è¿‡ç¨‹ä¸­æ‰€å¯¼è‡´çš„ç´§è€¦åˆ(ä¾èµ–å…·ä½“ç±» )ï¼Œä»è€Œæ”¯æŒå¯¹è±¡åˆ›å»ºçš„ç¨³å®šã€‚ä»–æ˜¯æ¥å£æŠ½è±¡ä¹‹åçš„ç¬¬ä¸€æ­¥å·¥ä½œã€‚</p><p>å…¸å‹æ¨¡å¼æœ‰</p><ul><li>Factory Method</li><li>Abstract Factory</li><li>Prototype</li><li>Builder</li></ul><h2 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h2><p>åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œç»å¸¸é¢ä¸´ç€åˆ›å»ºå¯¹è±¡çš„å·¥ä½œï¼›ç”±äºéœ€æ±‚çš„å˜åŒ–ï¼Œ éœ€è¦åˆ›å»ºçš„å¯¹è±¡çš„å…·ä½“ç±»å‹ç»å¸¸å˜åŒ–ã€‚</p><p>å¦‚ä½•åº”å¯¹è¿™ç§å˜åŒ–ï¼Ÿå¦‚ä½•ç»•è¿‡å¸¸è§„çš„å¯¹è±¡åˆ›å»ºæ–¹æ³•(new)ï¼Œæä¾›ä¸€ ç§â€å°è£…æœºåˆ¶â€æ¥é¿å…å®¢æˆ·ç¨‹åºå’Œè¿™ç§â€å…·ä½“å¯¹è±¡åˆ›å»ºå·¥ä½œâ€çš„ç´§è€¦åˆï¼Ÿ</p><h2 id="æ¨¡å¼å®šä¹‰"><a href="#æ¨¡å¼å®šä¹‰" class="headerlink" title="æ¨¡å¼å®šä¹‰"></a>æ¨¡å¼å®šä¹‰</h2><p>å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚ Factory Methodä½¿å¾—ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿï¼ˆç›®çš„ï¼šè§£è€¦ï¼Œ æ‰‹æ®µï¼šè™šå‡½æ•°ï¼‰åˆ°å­ç±»ã€‚</p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>åˆå§‹ä»£ç ï¼Œä¸€ä¸ªæ–‡ä»¶åˆ†å‰²å™¨ã€‚</p><p>è¿™ä¸ªä»£ç ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿè¦ä»å˜åŒ–çš„åœºæ™¯å»çœ‹ã€‚</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainForm</span>:</span> <span class="hljs-keyword">public</span> Form &#123;    TextBox* txtFilePath;    TextBox* txtFileNumber;    ProgressBar* progressBar;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button1_Click</span><span class="hljs-params">()</span> </span>&#123;FileSplitter* splitter = <span class="hljs-keyword">new</span> FileSplitter();        splitter-&gt;split;    &#125;&#125;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileSpitter</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">split</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;&#125;</code></pre></div><p>æœ€å¼€å§‹æˆ‘ä»¬è®²è¿‡ä¸€ä¸ªåŸåˆ™ï¼šé¢å‘æ¥å£çš„ç¼–ç¨‹ã€‚ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹åº”è¯¥å£°æ˜æˆæŠ½è±¡ç±»æˆ–è€…æ¥å£ï¼Œè€Œä¸åº”è¯¥å£°æ˜æˆå…·ä½“çš„ç±»ã€‚å¦‚æœå£°æ˜æˆå…·ä½“çš„ç±»ï¼Œå°±æŠŠä»–å®šæ­»äº†ï¼Œæ— æ³•åº”å¯¹æœªæ¥çš„å˜åŒ–ã€‚</p><p>å‡è®¾æˆ‘ä»¬äº§ç”Ÿäº†æ–°çš„éœ€æ±‚ï¼š</p><p>éœ€è¦æ”¯æŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œtxtæ–‡ä»¶ï¼Œå›¾ç‰‡æ–‡ä»¶ï¼Œè§†é¢‘æ–‡ä»¶çš„åˆ†å‰²</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ISplitter</span> &#123;</span> <span class="hljs-comment">//æ¥å£</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">split</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-keyword">virtual</span> ~ISplitter() &#123;&#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BinarySpliter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TxtSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PictureSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VideoSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;  &#125;;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainForm</span>:</span> <span class="hljs-keyword">public</span> Form &#123;    TextBox* txtFilePath;    TextBox* txtFileNumber;    ProgressBar* progressBar;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button1_Click</span><span class="hljs-params">()</span> </span>&#123;<span class="hljs-comment">/*******************é—®é¢˜äº§ç”Ÿäº†******************/</span>ISplitter* splitter = <span class="hljs-keyword">new</span> BinarySplitter(); <span class="hljs-comment">//??????æ€ä¹ˆåˆä¾èµ–ç»†èŠ‚äº†ï¼Ÿï¼Ÿï¼Ÿ</span>        splitter-&gt;split;    &#125;&#125;</code></pre></div><div class="note note-warning">            <p><code>new</code>ä¸èƒ½newæŠ½è±¡ç±»ï¼Œ<code>new</code>åªèƒ½newå…·ä½“ç±»ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦çš„æ˜¯å¤šæ€<code>new</code>ã€‚æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p>          </div><ul><li>å¼€å§‹é‡æ„</li></ul><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SplitterFactory</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function">ISplitter* <span class="hljs-title">CreateSplitter</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//return new ISplitter(...);//è¿™æ ·ä¹Ÿæ˜¯ä¸å¯¹çš„ï¼Œå› ä¸ºä¸èƒ½newæŠ½è±¡ç±»</span>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> BinarySplitter();    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ISplitter</span> &#123;</span> <span class="hljs-comment">//æ¥å£</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">split</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-keyword">virtual</span> ~ISplitter() &#123;&#125;&#125;;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainForm</span>:</span> <span class="hljs-keyword">public</span> Form &#123;    TextBox* txtFilePath;    TextBox* txtFileNumber;    ProgressBar* progressBar;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button1_Click</span><span class="hljs-params">()</span> </span>&#123;SplitterFactory factory;ISplitter* splitter = factory.CreateSplitter();        splitter-&gt;split;    &#125;&#125;</code></pre></div><p>ä½†æ˜¯è¿™ç§å®ç°æ ¹æœ¬æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œ<code>ISplitter* splitter = factory.CreateSplitter();</code>ä¾ç„¶ä¾èµ–äºå…·ä½“çš„ç±»BinarySplitter</p><ul><li>ç»§ç»­é‡æ„</li></ul><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//æŠ½è±¡ç±»</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ISplitter</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">split</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-keyword">virtual</span> ~ISplitter() &#123;&#125;&#125;;<span class="hljs-comment">//å·¥å‚åŸºç±»</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SplitterFactory</span> &#123;</span><span class="hljs-keyword">public</span>:<span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> ISplitter* <span class="hljs-title">CreateSplitter</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-keyword">virtual</span> ~SplitterFactory()&#123;&#125;    &#125;&#125;;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainForm</span>:</span> <span class="hljs-keyword">public</span> Form &#123;    TextBox* txtFilePath;    TextBox* txtFileNumber;    ProgressBar* progressBar;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button1_Click</span><span class="hljs-params">()</span> </span>&#123;SplitterFactory* factory;<span class="hljs-comment">//å¤šæ€äº†</span>ISplitter* splitter = factory-&gt;CreateSplitter();        splitter-&gt;split;    &#125;&#125;</code></pre></div><ul><li>ç»§ç»­å®Œå–„</li></ul><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//å…·ä½“ç±»</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BinarySpliter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TxtSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PictureSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VideoSplitter</span>:</span> <span class="hljs-keyword">public</span> ISplitter &#123;  &#125;;<span class="hljs-comment">//å…·ä½“å·¥å‚</span>BinarySplitterFactory: <span class="hljs-keyword">public</span> SplitterFactory &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">CreateSplitter</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> BinarySplitter();    &#125;&#125;;TxtSplitterFactory: <span class="hljs-keyword">public</span> SplitterFactory &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">CreateSplitter</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> TxtSplitter();    &#125;&#125;;PictureSplitterFactory: <span class="hljs-keyword">public</span> SplitterFactory &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">CreateSplitter</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> PictureSplitter();    &#125;&#125;;VideoSplitterFactory: <span class="hljs-keyword">public</span> SplitterFactory &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function">virutal ISplitter* <span class="hljs-title">CreateSplitter</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> VideoSplitter();    &#125;&#125;;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainForm</span>:</span> <span class="hljs-keyword">public</span> Form &#123;    SplitterFactory* factory;<span class="hljs-keyword">public</span>:    MainForm(SplitterFactory* factory) &#123;        <span class="hljs-keyword">this</span>-&gt;factory = factory;    &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button1_Click</span><span class="hljs-params">()</span> </span>&#123;<span class="hljs-comment">//å¤šæ€new</span>ISplitter* splitter = factory-&gt;CreateSplitter();        splitter-&gt;split;    &#125;&#125;</code></pre></div><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p><img src="image-20200814150354579.png" srcset="/img/loading.gif" alt="image-20200814150354579" style="zoom:50%;" /></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><p>Factory Methodæ¨¡å¼ç”¨äºéš”ç¦»ç±»å¯¹è±¡çš„ä½¿ç”¨è€…å’Œå…·ä½“ç±»å‹ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚é¢å¯¹ä¸€ä¸ªç»å¸¸å˜åŒ–çš„å…·ä½“ç±»å‹ï¼Œç´§è€¦åˆå…³ç³»(new)ä¼šå¯¼ è‡´è½¯ä»¶çš„è„†å¼±ã€‚</p></li><li><p>Factory Methodæ¨¡å¼é€šè¿‡é¢å‘å¯¹è±¡çš„æ‰‹æ³•ï¼Œå°†æ‰€è¦åˆ›å»ºçš„å…·ä½“å¯¹ è±¡å·¥ä½œå»¶è¿Ÿåˆ°å­ç±»ï¼Œä»è€Œå®ç°ä¸€ç§æ‰©å±•ï¼ˆè€Œéæ›´æ”¹ï¼‰çš„ç­–ç•¥ï¼Œè¾ƒå¥½åœ°è§£å†³äº†è¿™ç§ç´§è€¦åˆå…³ç³»ã€‚</p></li><li><p>Factory Methodæ¨¡å¼è§£å†³â€å•ä¸ªå¯¹è±¡â€çš„éœ€æ±‚å˜åŒ–ã€‚ç¼ºç‚¹åœ¨äºè¦æ±‚åˆ›å»ºæ–¹æ³•/å‚æ•°ç›¸åŒã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Design Patterns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Design Patterns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Bridge æ¡¥æ¨¡å¼</title>
    <link href="/2020/08/11/DesignPatterns/Bridge/"/>
    <url>/2020/08/11/DesignPatterns/Bridge/</url>
    
    <content type="html"><![CDATA[<h2 id="Bridgeå±äºâ€å•ä¸€èŒè´£â€æ¨¡å¼"><a href="#Bridgeå±äºâ€å•ä¸€èŒè´£â€æ¨¡å¼" class="headerlink" title="Bridgeå±äºâ€å•ä¸€èŒè´£â€æ¨¡å¼"></a>Bridgeå±äºâ€å•ä¸€èŒè´£â€æ¨¡å¼</h2><p>åœ¨è½¯ä»¶ç»„ä»¶çš„è®¾è®¡ä¸­ï¼Œå¦‚æœè´£ä»»åˆ’åˆ†çš„ä¸æ¸…æ™°ï¼Œä½¿ç”¨ç»§æ‰¿å¾—åˆ°çš„ç»“æœå¾€å¾€æ˜¯éšç€éœ€æ±‚çš„å˜åŒ–ï¼Œå­ç±»æ€¥å‰§è†¨èƒ€ï¼ŒåŒæ—¶å……æ–¥ç€é‡å¤ä»£ç ï¼Œ è¿™æ—¶å€™çš„å…³é”®æ˜¯åˆ’æ¸…è´£ä»»ã€‚</p><ul><li><p>å…¸å‹æ¨¡å¼</p><p>â€¢ Decorator</p><p>â€¢ Bridge</p></li></ul><h2 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h2><p>ç”±äºæŸäº›ç±»å‹çš„å›ºæœ‰çš„å®ç°é€»è¾‘ï¼Œä½¿å¾—å®ƒä»¬å…·æœ‰<u>ä¸¤ä¸ªå˜åŒ–çš„ç»´åº¦ï¼Œ ä¹ƒè‡³å¤šä¸ªçº¬åº¦</u>çš„å˜åŒ–ã€‚</p><p>å¦‚ä½•åº”å¯¹è¿™ç§â€å¤šç»´åº¦çš„å˜åŒ–â€ï¼Ÿå¦‚ä½•åˆ©ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯æ¥ä½¿å¾—ç±»å‹å¯ä»¥è½»æ¾åœ°æ²¿ç€ä¸¤ä¸ªä¹ƒè‡³å¤šä¸ªæ–¹å‘å˜åŒ–ï¼Œè€Œä¸å¼•å…¥é¢å¤–çš„å¤æ‚åº¦ï¼Ÿ</p><h2 id="æ¨¡å¼å®šä¹‰"><a href="#æ¨¡å¼å®šä¹‰" class="headerlink" title="æ¨¡å¼å®šä¹‰"></a>æ¨¡å¼å®šä¹‰</h2><p>å°†æŠ½è±¡éƒ¨åˆ†(ä¸šåŠ¡åŠŸèƒ½)ä¸å®ç°éƒ¨åˆ†(å¹³å°å®ç°)åˆ†ç¦»ï¼Œä½¿ä»–ä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–</p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>ä¸€ä¸ªé€šä¿¡æ¨¡å—Messagerã€‚æ ¹æ®å¹³å°åˆ†ä¸ºPC, Mobileï¼Œæ´¾ç”Ÿå‡ºä¸¤ä¸ªå­ç±»PCMessagerBase, MobileMessagerBaseã€‚æ ¹æ®ä¸šåŠ¡åˆ†æˆperfectå’Œlite, å‰é¢çš„ä¸¤ä¸ªå­ç±»åˆæ´¾ç”Ÿå‡ºPCMessagerLite, PCMessagerPerfect, MobileMessagerLite, MobileMessagerPerfect.</p><p>å¦‚æœè®¾å¹³å°æœ‰nä¸­é€‰æ‹©ï¼Œä¸šåŠ¡æœ‰mä¸­ï¼Œé‚£ä¹ˆç±»çš„æ•°ç›®ä¸º$1 + n + m * n$</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Messager</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>= <span class="hljs-number">0</span>;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawShape</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;        <span class="hljs-keyword">virtual</span> ~Message() &#123;&#125;&#125;<span class="hljs-comment">//å¹³å°å®ç°</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PCMessagerBase</span>:</span> <span class="hljs-keyword">public</span> Messager &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawShape</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MobileMessagerBase</span>:</span> <span class="hljs-keyword">public</span> Messager &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawShape</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;&#125;; <span class="hljs-comment">//ä¸šåŠ¡æŠ½è±¡</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PCMessagerLite</span>:</span> <span class="hljs-keyword">public</span> PCMessagerBase &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>&#123;        PCMessagerBase::Connect();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>&#123;        PCMessagerBase::WriteText();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>&#123;        PCMessagerBase::DrawShape();        <span class="hljs-comment">//......</span>    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PCMessagerPerfect</span>:</span> <span class="hljs-keyword">public</span> PCMessagerBase &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>&#123;PCMessagerBase::PlaySound();        <span class="hljs-comment">//******</span>        PCMessagerBase::Connect();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>&#123;PCMessagerBase::PlaySound();        <span class="hljs-comment">//******</span>        PCMessagerBase::WriteText();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>&#123;        PCMessagerBase::PlaySound();        <span class="hljs-comment">//******</span>        PCMessagerBase::DrawShape();        <span class="hljs-comment">//......</span>    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MobileMessagerLite</span>:</span> <span class="hljs-keyword">public</span> PCMessagerBase &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>&#123;        MobileMessagerBase::Connect();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>&#123;        MobileMessagerBase::WriteText();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>&#123;        MobileMessagerBase::DrawShape();        <span class="hljs-comment">//......</span>    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MobileMessagerPerfect</span>:</span> <span class="hljs-keyword">public</span> PCMessagerBase &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>&#123;MobileMessagerBase::PlaySound();        <span class="hljs-comment">//******</span>        MobileMessagerBase::Connect();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>&#123;MobileMessagerBase::PlaySound();        <span class="hljs-comment">//******</span>        MobileMessagerBase::WriteText();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>&#123;        MobileMessagerBase::PlaySound();        <span class="hljs-comment">//******</span>        MobileMessagerBase::DrawShape();        <span class="hljs-comment">//......</span>    &#125;&#125;</code></pre></div><p>ä½†æ˜¯è¿™æ ·è®¾ç½®çš„ç±»æœ‰å¾ˆå¤šçš„ç»“æ„æ€§é‡å¤ã€‚æ¯”å¦‚PCMessagerPerfect, MobileMessagerPerfectã€‚</p><ul><li>é‡æ„</li></ul><p>å°†PCMessagerLite, PCMessagerPerfect, MobileMessagerLite, MobileMessagerPerfectçš„ç»§æ‰¿æ”¹ä¸ºç»„åˆã€‚</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Messager</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>= <span class="hljs-number">0</span>;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawShape</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;        <span class="hljs-keyword">virtual</span> ~Message() &#123;&#125;&#125;<span class="hljs-comment">//å¹³å°å®ç°</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PCMessagerBase</span>:</span> <span class="hljs-keyword">public</span> Messager &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawShape</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MobileMessagerBase</span>:</span> <span class="hljs-keyword">public</span> Messager &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawShape</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;&#125;; <span class="hljs-comment">//ä¸šåŠ¡æŠ½è±¡</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessagerLite</span> &#123;</span>    Messager* messager;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>&#123;        messager-&gt;Connect();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>&#123;        messager-&gt;WriteText();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>&#123;        messager-&gt;DrawShape();        <span class="hljs-comment">//......</span>    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessagerPerfect</span> &#123;</span>    Messager* messager;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>&#123;messager-&gt;PlaySound();        <span class="hljs-comment">//******</span>        messager-&gt;Connect();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>&#123;messager-&gt;PlaySound();        <span class="hljs-comment">//******</span>        messager-&gt;WriteText();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>&#123;       messager-&gt;PlaySound();        <span class="hljs-comment">//******</span>        messager-&gt;DrawShape();        <span class="hljs-comment">//......</span>    &#125;&#125;</code></pre></div><p>æ³¨æ„ï¼Œè¿™æ ·ä¿®æ”¹ä¹‹åå¹¶ä¸æ˜¯å®Œæ•´çš„ï¼Œå› ä¸ºMessagerLiteå’ŒMessagerPerfectæ²¡æœ‰äº†PlaySound, Connectâ€¦è¿™äº›å‡½æ•°</p><ul><li>ç»§ç»­é‡æ„</li></ul><p>å¯ä»¥çœ‹åˆ°å¹³å°ç±»åœ¨é‡è½½PlaySound, PlaySound, WriteText, Connectè¿™å‡ ä¸ªå‡½æ•°ã€‚è€Œä¸šåŠ¡ç±»åœ¨é‡è½½Login, SendMessage, SendPictureè¿™å‡ ä¸ªå‡½æ•°ã€‚å› æ­¤æŠŠè¿™ä¸¤å—å‡½æ•°æ”¾åœ¨ä¸€ä¸ªç±»é‡Œé¢æ˜¯ä¸åˆé€‚çš„ï¼Œæˆ‘ä»¬æŠŠä»–ä»¬æ‹†åˆ†æˆä¸¤ä¸ªç±»</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Messager</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>= <span class="hljs-number">0</span>;        <span class="hljs-keyword">virtual</span> ~Message() &#123;&#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessagerImp</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;        <span class="hljs-keyword">virtual</span> ~MessageImp() &#123;&#125;&#125;<span class="hljs-comment">//å¹³å°å®ç°</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PCMessagerBase</span>:</span> <span class="hljs-keyword">public</span> MessagerImp &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawShape</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MobileMessagerBase</span>:</span> <span class="hljs-keyword">public</span> MessagerImp &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawShape</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;&#125;; <span class="hljs-comment">//ä¸šåŠ¡æŠ½è±¡</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessagerLite</span>:</span> <span class="hljs-keyword">public</span> Messager &#123;    MessagerImp* messagerImp;<span class="hljs-comment">//...</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>&#123;        messagerImp-&gt;Connect();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>&#123;        messagerImp-&gt;WriteText();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>&#123;        messagerImp-&gt;DrawShape();        <span class="hljs-comment">//......</span>    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessagerPerfect</span>:</span> <span class="hljs-keyword">public</span> Messager &#123;    MessagerImp* messagerImp;<span class="hljs-comment">//...</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>&#123;messagerImp-&gt;PlaySound();        <span class="hljs-comment">//******</span>        messagerImp-&gt;Connect();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>&#123;messagerImp-&gt;PlaySound();        <span class="hljs-comment">//******</span>        messagerImp-&gt;WriteText();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>&#123;       messagerImp-&gt;PlaySound();        <span class="hljs-comment">//******</span>        messagerImp-&gt;DrawShape();        <span class="hljs-comment">//......</span>    &#125;&#125;</code></pre></div><ul><li>å†é‡æ„</li></ul><p>å¯ä»¥çœ‹åˆ°MessageLiteå’ŒMessagerPerfectè¿™ä¸¤ä¸ªç±»é‡Œé¢éƒ½æœ‰MessagerImpå­—æ®µã€‚æ ¹æ®é‡æ„çš„åŸåˆ™ï¼Œåº”è¯¥å°†ä»–å¾€ä¸Šæåˆ°Messagerç±»ä¸­ã€‚</p><p>æœ€ç»ˆç±»çš„æ•°ç›®ç¼–ç¨‹$1+n+m$</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Messager</span> &#123;</span><span class="hljs-keyword">protected</span>:    MessagerImp* messagerImp;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>= <span class="hljs-number">0</span>;        <span class="hljs-keyword">virtual</span> ~Message() &#123;&#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessagerImp</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;        <span class="hljs-keyword">virtual</span> ~MessageImp() &#123;&#125;&#125;<span class="hljs-comment">//å¹³å°å®ç°</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PCMessagerBase</span>:</span> <span class="hljs-keyword">public</span> MessagerImp &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawShape</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MobileMessagerBase</span>:</span> <span class="hljs-keyword">public</span> MessagerImp &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlaySound</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DrawShape</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteText</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//******</span>    &#125;&#125;; <span class="hljs-comment">//ä¸šåŠ¡æŠ½è±¡</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessagerLite</span>:</span> <span class="hljs-keyword">public</span> Messager &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>&#123;        messagerImp-&gt;Connect();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>&#123;        messagerImp-&gt;WriteText();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>&#123;        messagerImp-&gt;DrawShape();        <span class="hljs-comment">//......</span>    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessagerPerfect</span>:</span> <span class="hljs-keyword">public</span> Messager &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span><span class="hljs-params">(<span class="hljs-built_in">string</span> username, <span class="hljs-built_in">string</span> password)</span> </span>&#123;messagerImp-&gt;PlaySound();        <span class="hljs-comment">//******</span>        messagerImp-&gt;Connect();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendMessage</span><span class="hljs-params">(<span class="hljs-built_in">string</span> message)</span> </span>&#123;messagerImp-&gt;PlaySound();        <span class="hljs-comment">//******</span>        messagerImp-&gt;WriteText();        <span class="hljs-comment">//......</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendPicture</span><span class="hljs-params">(Image image)</span> </span>&#123;       messagerImp-&gt;PlaySound();        <span class="hljs-comment">//******</span>        messagerImp-&gt;DrawShape();        <span class="hljs-comment">//......</span>    &#125;&#125;</code></pre></div><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p><img src="image-20200811150059187.png" srcset="/img/loading.gif" alt="image-20200811150059187" style="zoom:50%;" /></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><p>Bridgeæ¨¡å¼ä½¿ç”¨â€å¯¹è±¡é—´çš„ç»„åˆå…³ç³»â€è§£è€¦äº†æŠ½è±¡å’Œå®ç°ä¹‹é—´å›ºæœ‰çš„ç»‘å®šå…³ç³»ï¼Œä½¿å¾—æŠ½è±¡å’Œå®ç°å¯ä»¥æ²¿ç€å„è‡ªçš„ç»´åº¦æ¥å˜åŒ–ã€‚æ‰€è°“ æŠ½è±¡å’Œå®ç°æ²¿ç€å„è‡ªçº¬åº¦çš„å˜åŒ–ï¼Œå³â€å­ç±»åŒ–â€å®ƒä»¬ã€‚</p></li><li><p>Bridgeæ¨¡å¼æœ‰æ—¶å€™ç±»ä¼¼äºå¤šç»§æ‰¿æ–¹æ¡ˆï¼Œä½†æ˜¯å¤šç»§æ‰¿æ–¹æ¡ˆå¾€å¾€è¿èƒŒå•ä¸€èŒè´£åŸåˆ™ï¼ˆå³ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå˜åŒ–çš„åŸå› ï¼‰ï¼Œå¤ç”¨æ€§æ¯”è¾ƒå·®ã€‚ Bridgeæ¨¡å¼æ˜¯æ¯”å¤šç»§æ‰¿æ–¹æ¡ˆæ›´å¥½çš„è§£å†³æ–¹æ³•ã€‚</p></li><li><p>Bridgeæ¨¡å¼çš„åº”ç”¨ä¸€èˆ¬åœ¨â€ä¸¤ä¸ªéå¸¸å¼ºçš„å˜åŒ–ç»´åº¦â€ï¼Œæœ‰æ—¶ä¸€ä¸ª ç±»ä¹Ÿæœ‰å¤šäºä¸¤ä¸ªçš„å˜åŒ–ç»´åº¦ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨Bridgeçš„æ‰©å±•æ¨¡å¼ã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Design Patterns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Design Patterns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>èµ„æœ¬è®ºè¯»ä¹¦æ‘˜æŠ„</title>
    <link href="/2020/08/09/Capital/"/>
    <url>/2020/08/09/Capital/</url>
    
    <content type="html"><![CDATA[<h1 id="2020-08-09"><a href="#2020-08-09" class="headerlink" title="2020-08-09"></a>2020-08-09</h1><h4 id="å•†å“-ç¬¬ä¸€å·ç¬¬ä¸€ç« "><a href="#å•†å“-ç¬¬ä¸€å·ç¬¬ä¸€ç« " class="headerlink" title="å•†å“ ç¬¬ä¸€å·ç¬¬ä¸€ç« "></a>å•†å“ ç¬¬ä¸€å·ç¬¬ä¸€ç« </h4><ul><li><p>å•†å“çš„ä¸¤ä¸ªå› ç´ : ä½¿ç”¨ä»·å€¼å’Œä»·å€¼</p></li><li><p>ç‰©çš„æœ‰ç”¨æ€§æˆä¸ºä½¿ç”¨ä»·å€¼ã€‚æœåŠ¡æ˜¯å…·æœ‰ä½¿ç”¨ä»·å€¼çš„ã€‚</p></li><li><p>ç”±äºä½¿ç”¨ä»·å€¼æ‰æ˜¯æ„æˆä¸€ä¸ªç¤¾ä¼šçš„è´¢å¯Œçš„ç‰©è´¨å†…å®¹ï¼Œå› æ­¤ï¼Œè‚¡ç¥¨å¸‚åœºçš„æ¶¨è·Œå¹¶ä¸ä»£è¡¨ä¸€ä¸ªç¤¾ä¼šçš„è´¢å¯Œçš„å¢åŠ æˆ–å‡å°‘</p></li><li><p>äº¤æ¢ä»·å€¼é¦–å…ˆè¡¨ç°ä¸ºä¸€ç§ä½¿ç”¨ä»·å€¼åŒå¦ä¸€ç§ä½¿ç”¨ä»·å€¼ç›¸äº¤æ¢çš„é‡çš„å…³ç³»æˆ–æ¯”ä¾‹ã€‚</p></li><li><p>ç”±äºäº¤æ¢æ˜¯ä¸€ä¸ªç§äººåŠ³åŠ¨å‘ç¤¾ä¼šåŠ³åŠ¨çš„è½¬å˜è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å­˜åœ¨ä¸€å®šçš„éšæœºæ€§ï¼Œå› æ­¤äº¤æ¢ä»·å€¼å…·æœ‰ä¸€å®šçš„å¶ç„¶æ€§ã€‚ä½†è¿™ç§å¶ç„¶æ€§ä¸­åŒ…å«å¿…ç„¶æ€§ã€‚ç”¨é©¬å…‹æ€èº«åæ‰å‘å±•èµ·æ¥çš„æ¦‚ç‡è®ºçš„æœ¯è¯­æ¥è¯´ï¼Œä¸€ä¸ªå•†å“æˆ–ä¸€ä¸ªä½¿ç”¨ä»·å€¼åœ¨ä¸åŒçš„æ—¶é—´å’Œåœ°ç‚¹è¿›è¡Œäº¤æ¢æ—¶ï¼Œå…¶äº¤æ¢ä»·å€¼æ˜¯ä¸€ä¸ªéšæœºå˜é‡ï¼Œä½†è¿™ä¸ªéšæœºå˜é‡æœ‰ä¸€ä¸ªç¡®å®šçš„ï¼Œå¹¶éå¶ç„¶çš„å’Œçº¯ç²¹ç›¸å¯¹çš„æœŸæœ›å€¼ï¼Œè¿™ä¸ªæœŸæœ›å€¼å°±æ˜¯å•†å“å›ºæœ‰çš„ï¼Œå†…åœ¨çš„äº¤æ¢ä»·å€¼ã€‚</p></li><li><p>ç°ä»£åº¸ä¿—ç»æµå­¦ç”¨ä¾›æ±‚å…³ç³»å’Œæ•ˆç”¨æ¥è§£é‡Šäº¤æ¢ä»·å€¼çš„å½¢æˆã€‚å®é™…ä¸Šä¾›æ±‚å…³ç³»å’Œæ•ˆç”¨åªèƒ½è§£é‡Šäº¤æ¢ä»·å€¼çš„éšæœºéƒ¨åˆ†ï¼Œè€Œä¸èƒ½è§£é‡Šäº¤æ¢ä»·å€¼å†…åœ¨çš„æœŸæœ›å€¼ã€‚æŒ‰ç°ä»£åº¸ä¿—ç»æµå­¦çš„è§£é‡Šï¼Œä¹‹æ‰€ä»¥1å¤¸ç‰¹å°éº¦=aå¨é“ï¼Œæ˜¯å› ä¸ºè¿™ä¸¤è€…å¸¦ç»™äº¤æ˜“è€…çš„è¾¹é™…æ•ˆç”¨æ˜¯ç›¸åŒçš„ã€‚ç”±äºè¾¹é™…æ•ˆç”¨çº¯å±ä¸ªäººçš„ä¸»è§‚æ„Ÿå—ï¼Œå› æ­¤ï¼Œå¦‚æœå¸‚åœºä¸Šéƒ½æŒ‰ä¸Šå¼è¿›è¡Œäº¤æ˜“ï¼Œé‚£å°±æ„å‘³ç€æ‰€æœ‰çš„äº¤æ˜“è€…çš„ä¸»è§‚æ„Ÿå—å®Œå…¨ä¸€è‡´ï¼Œç”¨æ¦‚ç‡è®ºçš„æœ¯è¯­è¯´ï¼Œæ—¢ç„¶æ¯ä¸ªäººçš„ä¸»è§‚æ„Ÿè§‰æ˜¯æ— é™çš„æˆ–æ˜¯å¯ä»¥æ— é™ç»†åˆ†çš„ï¼Œå› æ­¤ï¼Œå‘ç”Ÿè¿™ç§æƒ…å†µçš„æ¦‚ç‡ä¸ºé›¶ï¼Œå³å®ƒæ˜¯å‡ ä¹ä¸å¯èƒ½çš„ã€‚äºæ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è§‚å¯Ÿåˆ°æŸä¸ªå¸‚åœºä¸Šçš„äº¤æ˜“éƒ½åœ¨æˆ–å¤§å¤šæ•°éƒ½åœ¨æŒ‰åŒä¸€ç­‰å¼è¿›è¡Œäº¤æ¢æ—¶ï¼Œæ•ˆç”¨è®ºè¦ä¹ˆç ´äº§ï¼Œè¦ä¹ˆéœ€è¦å‡å®šå­˜åœ¨ä¸€ä¸ªä¸ä»¥ä¸ªäººæ„å¿—ä¸ºè½¬ç§»çš„æ•ˆç”¨æœŸæœ›å€¼ï¼Œè€Œåˆ†æè¿™ä¸ªæœŸæœ›å€¼æ˜¯å¦‚ä½•å­˜åœ¨çš„ï¼Œå°±ä¸å¾—ä¸å›åˆ°åŠ³åŠ¨ä»·å€¼å­¦è¯´ã€‚</p></li><li><p>å•†å“çš„äº¤æ¢ä»·å€¼æ˜¯ç”±å¤–éƒ¨çš„åˆ«çš„ä¸œè¥¿æ¥åº¦é‡çš„ï¼Œè€Œå•†å“çš„ä»·å€¼åˆ™æ˜¯å®ƒæœ¬èº«å•çº¯å‡ç»“çš„äººç±»åŠ³åŠ¨ï¼Œåæ–‡è¯´æ˜å®ƒæ˜¯ç”±æ‰€å‡å›ºçš„åŠ³åŠ¨æ—¶é—´æ¥åº¦é‡çš„ã€‚è¿™ä¸¤ä¸ªä»·å€¼çš„åº¦é‡å•ä½æ˜¯ä¸åŒçš„ã€‚è¿™ç§ä¸åŒå†³å®šäº†ï¼Œåœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹ï¼Œå°¤å…¶æ˜¯èµ„æœ¬ä¸»ä¹‰æ¡ä»¶ä¸‹ï¼Œå•†å“çš„äº¤æ¢ä»·å€¼ä¸å•†å“çš„ä»·å€¼æ˜¯ç›¸èƒŒç¦»çš„ã€‚</p></li><li><p>åŠ³åŠ¨ä¸ç”Ÿäº§èµ„æ–™å…±åŒåˆ›é€ è´¢å¯Œã€‚ç¤¾ä¼šä¸»ä¹‰å¹¶ä¸åå¯¹èµ„æœ¬ï¼Œ(èµ„æœ¬åˆ†ä¸ºé¢„ä»˜æ¥è´­ä¹°ç”Ÿäº§èµ„æ–™çš„ä¸å˜èµ„æœ¬å’Œé¢„ä»˜æ¥è´­ä¹°åŠ³åŠ¨çš„å¯å˜èµ„æœ¬ã€‚ä½†ç”±äºç°åœ¨èµ„æœ¬å®¶å¾€å¾€æ­£å¦‚é©¬å…‹æ€åœ¨ã€Šèµ„æœ¬è®ºã€‹ä¸­å°†è¦æŒ‡å‡ºçš„é‚£æ ·ï¼Œå¹¶ä¸é¢„è´­åŠ³åŠ¨ï¼Œè€Œæ˜¯è®©å·¥äººå…ˆæä¾›(é¢„ä»˜)åŠ³åŠ¨ï¼Œå†ä»å·¥äººåŠ³åŠ¨åˆ›é€ çš„ä»·å€¼ä¸­ï¼Œå–å‡ºä¸€éƒ¨åˆ†æ¥ä½œä¸ºæŠ¥é…¬æ”¯ä»˜ç»™å·¥äººã€‚å³ï¼Œèµ„æœ¬å®¶å¾€å¾€åªéœ€é¢„ä»˜ä¸å˜èµ„æœ¬(å•ä¸ªèµ„æœ¬å®¶å¯ä»¥è´·æ¬¾æˆ–èµŠæ¬ æ¥ä¸€éƒ¨åˆ†ä¸å˜èµ„æœ¬ï¼Œä½†è¿™äº›èµ„æœ¬è¿˜æ˜¯æ¥è‡ªäºèµ„æœ¬å®¶ï¼Œè´§å¸èµ„æœ¬å®¶)ï¼Œé€šè¿‡èµŠæ¬ å¯å˜èµ„æœ¬ï¼Œè¿›è¡Œç”Ÿäº§ã€‚æ‰€ä»¥è¿™é‡Œå°†ä»£è¡¨ç”Ÿäº§èµ„æ–™çš„ä¸å˜èµ„æœ¬ï¼Œç®€ç§°ä¸ºèµ„æœ¬ã€‚)è€Œæ˜¯åå¯¹èµ„æœ¬ä¸åŠ³åŠ¨çš„äººä¸ºè„±èŠ‚ï¼Œåå¯¹æœ‰äººé€šè¿‡å„æ–­èµ„æœ¬è€Œä¸åŠ³è€Œè·ã€éª„å¥¢æ·«é€¸ï¼›åå¯¹æœ‰åŠ³åŠ¨èƒ½åŠ›çš„åŠ³åŠ¨è€…ä¸ºäº†è·å¾—ä¸èµ„æœ¬ç›¸ç»“åˆçš„æœºä¼šè€Œè¢«è¿«è¿‡ç€è¾›åŠ³è€Œæ‚²æƒ¨çš„ç”Ÿæ´»ã€‚</p></li><li><p>æœ‰äººè®¤ä¸ºï¼Œå·¥äººçš„å·¥èµ„æ˜¯å›ºå®šçš„ï¼Œèµ„æœ¬å®¶çš„åˆ©æ¶¦æ˜¯ä¸å›ºå®šçš„ã€‚æ‰€ä»¥ï¼Œèµ„æœ¬å®¶æ‰¿æ‹…äº†ç”Ÿäº§ç»è¥è¿‡ç¨‹ä¸­çš„é£é™©ï¼Œè€Œå·¥äººä¸æ‰¿æ‹…é£é™©ï¼Œæ‰€ä»¥èµ„æœ¬å®¶åº”å½“è·å¾—ä¸å…¶æ‰€æ‰¿æ‹…çš„é£é™©ç›¸åº”çš„å‰¥å‰Šæ”¶å…¥ã€‚ä½†æ˜¯ï¼Œä¸€æ–¹é¢ï¼Œèµ„æœ¬å®¶çš„æ‰€å¾—å¤§å¤§è¶…è¿‡ä»–æ‰€æ‰¿æ‹…çš„é£é™©ï¼›å¦ä¸€æ–¹é¢ï¼Œå·¥äººçš„åŠ³åŠ¨æ˜¯é¢„ä»˜çš„ï¼ŒåŒæ ·å­˜åœ¨é£é™©ã€‚è¢«æ‹–æ¬ å’Œæ— ç«¯å…‹æ‰£å·¥èµ„çš„äº‹ç»å¸¸å‘ç”Ÿï¼Œè€Œä¸”æ‹–æ¬ çš„å·¥èµ„å³ä½¿å‘è¿˜ä¹Ÿå¾€å¾€æ˜¯ä¸ä»˜åˆ©æ¯çš„ã€‚è‡³äºæœ€åå·¥èµ„å®Œå…¨æ³¡æ±¤çš„äº‹ä¹Ÿä¸æ˜¯æ²¡æœ‰å‘ç”Ÿè¿‡ï¼Œéƒ¨åˆ†æ³¡æ±¤çš„å°±æ›´å¤šã€‚å³ä½¿æœ‰å·¥èµ„ï¼Œæœ‰æ—¶è¿˜ä¸å¤Ÿç”¨æ¥æ²»ç–—èŒä¸šç—…ã€‚è€Œä¸”èµ„æœ¬å®¶çš„é£é™©æ˜¯ä»–è‡ªå·±é€ æˆçš„ï¼Œç”±ä»–è‡ªå·±è´Ÿè´£ï¼›è€Œå·¥äººçš„é£é™©åˆ™æ˜¯ç”±èµ„æœ¬å®¶é€ æˆçš„ï¼Œèµ„æœ¬å®¶åè€Œåº”å½“å› æ­¤å¯¹å·¥äººè¿›è¡Œè¡¥å¿ã€‚</p></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Decorator</title>
    <link href="/2020/08/07/DesignPatterns/Decorator/"/>
    <url>/2020/08/07/DesignPatterns/Decorator/</url>
    
    <content type="html"><![CDATA[<h2 id="Decoratorå±äºâ€å•ä¸€èŒè´£â€æ¨¡å¼"><a href="#Decoratorå±äºâ€å•ä¸€èŒè´£â€æ¨¡å¼" class="headerlink" title="Decoratorå±äºâ€å•ä¸€èŒè´£â€æ¨¡å¼"></a>Decoratorå±äºâ€å•ä¸€èŒè´£â€æ¨¡å¼</h2><p>åœ¨è½¯ä»¶ç»„ä»¶çš„è®¾è®¡ä¸­ï¼Œå¦‚æœè´£ä»»åˆ’åˆ†çš„ä¸æ¸…æ™°ï¼Œä½¿ç”¨ç»§æ‰¿å¾—åˆ°çš„ç»“æœå¾€å¾€æ˜¯éšç€éœ€æ±‚çš„å˜åŒ–ï¼Œå­ç±»æ€¥å‰§è†¨èƒ€ï¼ŒåŒæ—¶å……æ–¥ç€é‡å¤ä»£ç ï¼Œ è¿™æ—¶å€™çš„å…³é”®æ˜¯åˆ’æ¸…è´£ä»»ã€‚</p><ul><li><p>å…¸å‹æ¨¡å¼</p><p>â€¢ Decorator</p><p>â€¢ Bridge</p></li></ul><h2 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h2><p>åœ¨æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬å¯èƒ½ä¼šâ€è¿‡åº¦åœ°ä½¿ç”¨ç»§æ‰¿æ¥æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½â€ï¼Œ ç”±äºç»§æ‰¿ä¸ºç±»å‹å¼•å…¥çš„<strong>é™æ€ç‰¹è´¨</strong>ï¼Œä½¿å¾—è¿™ç§æ‰©å±•æ–¹å¼ç¼ºä¹çµæ´»æ€§ï¼› å¹¶ä¸”éšç€å­ç±»çš„å¢å¤šï¼ˆæ‰©å±•åŠŸèƒ½çš„å¢å¤šï¼‰ï¼Œå„ç§å­ç±»çš„ç»„åˆï¼ˆæ‰©å±•åŠŸèƒ½çš„ç»„åˆï¼‰ä¼šå¯¼è‡´æ›´å¤šå­ç±»çš„è†¨èƒ€ã€‚</p><p>å¦‚ä½•ä½¿â€å¯¹è±¡åŠŸèƒ½çš„æ‰©å±•â€èƒ½å¤Ÿæ ¹æ®éœ€è¦æ¥åŠ¨æ€åœ°å®ç°ï¼ŸåŒæ—¶é¿å…â€æ‰©å±•åŠŸèƒ½çš„å¢å¤šâ€å¸¦æ¥çš„å­ç±»è†¨èƒ€é—®é¢˜ï¼Ÿä»è€Œä½¿å¾—ä»»ä½•â€åŠŸèƒ½æ‰©å±•å˜åŒ–â€æ‰€å¯¼è‡´çš„å½±å“å°†ä¸ºæœ€ä½ï¼Ÿ</p><p>æ‰€è°“é™æ€ç‰¹è´¨, æ¯”å¦‚åœ¨CryptoNetworkStreamçš„Readå‡½æ•°ä¸­å®šæ­»äº†è°ƒç”¨NetworkStream::Read(), è€Œæˆ‘ä»¬é‡æ„åçš„CryptoStreamä¸­çš„Readå‡½æ•°è°ƒç”¨stream-&gt;Read(), æ”¯æŒå¤šæ€ï¼Œå¯ä»¥äº§ç”Ÿå˜åŒ–ã€‚</p><h2 id="æ¨¡å¼å®šä¹‰"><a href="#æ¨¡å¼å®šä¹‰" class="headerlink" title="æ¨¡å¼å®šä¹‰"></a>æ¨¡å¼å®šä¹‰</h2><p>åŠ¨æ€ï¼ˆç»„åˆï¼‰åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½è€Œè¨€ï¼ŒDecoratoræ¨¡å¼æ¯”ç”Ÿæˆå­ç±»ï¼ˆç»§æ‰¿ï¼‰æ›´ä¸ºçµæ´»ï¼ˆæ¶ˆé™¤é‡å¤ä»£ç  &amp; å‡å°‘å­ç±»ä¸ªæ•°ï¼‰ã€‚</p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªStreamä»£ç ç¤ºä¾‹ï¼Œå…¶ç»§æ‰¿å…³ç³»å¦‚ä¸‹æ‰€ç¤º</p><p><img src="image-20200807143722316.png" srcset="/img/loading.gif" alt="image-20200807143722316" style="zoom:30%;" /></p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//ä¸šåŠ¡æ“ä½œ</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Stream</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(<span class="hljs-keyword">char</span> data)</span> </span>= <span class="hljs-number">0</span>;        <span class="hljs-keyword">virtual</span> ~Stream() &#123;&#125;&#125;;<span class="hljs-comment">//ä¸»ä½“ç±»</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileStream</span>:</span> <span class="hljs-keyword">public</span> Stream &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//è¯»æ–‡ä»¶æµ</span>&#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//å®šä½æ–‡ä»¶æµ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(<span class="hljs-keyword">char</span> data)</span> </span>&#123;        <span class="hljs-comment">//å†™æ–‡ä»¶æµ</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NetworkStream</span>:</span> <span class="hljs-keyword">public</span> Stream &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//è¯»ç½‘ç»œæµ</span>&#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//å®šä½ç½‘ç»œæµ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(<span class="hljs-keyword">char</span> data)</span> </span>&#123;        <span class="hljs-comment">//å†™ç½‘ç»œæµ</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MemoryStream</span>:</span> <span class="hljs-keyword">public</span> Stream &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//è¯»å†…å­˜æµ</span>&#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//å®šä½å†…å­˜æµ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(<span class="hljs-keyword">char</span> data)</span> </span>&#123;        <span class="hljs-comment">//å†™å†…å­˜æµ</span>    &#125;&#125;;<span class="hljs-comment">//æ‰©å±•æ“ä½œ</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CryptoFileStream</span>:</span> <span class="hljs-keyword">public</span> FileStream &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        FileStream::Read(number);    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        FileStream::Seek(position);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(byte data)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        FileStream::Write(data);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CryptoNetworkStream</span>:</span> <span class="hljs-keyword">public</span> NetworkStream &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        NetworkStream::Read(number);    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        NetworkStream::Seek(position);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(byte data)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        NetworkStream::Write(data);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CryptoMemoryStream</span>:</span> <span class="hljs-keyword">public</span> MemoryStream &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        MemoryStream::Read(number);    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        MemoryStream::Seek(position);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(byte data)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        MemoryStream::Write(data);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BufferedFileStream</span>:</span> <span class="hljs-keyword">public</span> FileStream &#123;    <span class="hljs-comment">//...</span>&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BufferedNetworkStream</span>:</span> <span class="hljs-keyword">public</span> NetworkStream &#123;    <span class="hljs-comment">//...</span>&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BufferedMemoryStream</span>:</span> <span class="hljs-keyword">public</span> MemoryStream &#123;    <span class="hljs-comment">//...</span>&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CryptoBufferedFileStream</span>:</span> <span class="hljs-keyword">public</span> FileStream &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        <span class="hljs-comment">//é¢å¤–çš„ç¼“å†²æ“ä½œ...</span>        FileStream::Read(number);<span class="hljs-comment">//è¯»æ–‡ä»¶æµ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        <span class="hljs-comment">//é¢å¤–çš„ç¼“å†²æ“ä½œ...</span>        FileStream::Seek(position);<span class="hljs-comment">//å®šä½æ–‡ä»¶æµ</span>        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        <span class="hljs-comment">//é¢å¤–çš„ç¼“å†²æ“ä½œ...</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        <span class="hljs-comment">//é¢å¤–çš„ç¼“å†²æ“ä½œ...</span>        FileStream::Write(position);<span class="hljs-comment">//å†™æ–‡ä»¶æµ</span>        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        <span class="hljs-comment">//é¢å¤–çš„ç¼“å†²æ“ä½œ...</span>    &#125;&#125;;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Process</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-comment">//ç¼–è¯‘æ—¶è£…é…</span>    CryptoFileStream* fs1 = <span class="hljs-keyword">new</span> CryptoFileStream();        BufferedFileStream* fs2 = <span class="hljs-keyword">new</span> BufferedFileStream();        CryptoBufferedFileStream* fs3 = <span class="hljs-keyword">new</span> CryptoBufferedFileStream();&#125;</code></pre></div><p>è¿™æ ·è®¾è®¡çš„ä»£ç å­˜åœ¨å¤§é‡çš„å†—ä½™ï¼Œæ¯”å¦‚å¯¹äºä¸åŒçš„stream, æ— è®ºæ˜¯FileStreamè¿˜æ˜¯NetworkStreamè¿˜æ˜¯MemoryStream, ä»–ä»¬çš„åŠ å¯†æ“ä½œéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><ul><li>é‡æ„</li></ul><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//æ‰©å±•æ“ä½œ</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CryptoFileStream</span> &#123;</span>    FileStream* stream;<span class="hljs-comment">//=new FileStream()</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Read(number);    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Seek(position);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(byte data)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Write(data);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CryptoNetworkStream</span> &#123;</span>    NetworkStream* stream;<span class="hljs-comment">//=new NetworkStream();</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Read(number);    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Seek(position);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(byte data)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Write(data);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CryptoMemoryStream</span> &#123;</span>    MemoryStream* stream;<span class="hljs-comment">//=new MemoryStream();</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Read(number);    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Seek(position);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(byte data)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Write(data);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>    &#125;&#125;;</code></pre></div><ul><li>ç»§ç»­é‡æ„</li></ul><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//æ‰©å±•æ“ä½œ</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CryptoStream</span>:</span> <span class="hljs-keyword">public</span> Stream &#123;    Stream* stream;<span class="hljs-comment">//...</span><span class="hljs-keyword">public</span>:    CryptoStream(Stream* stm): stream(stm) &#123;            &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Read(number);    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Seek(position);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(byte data)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Write(data);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BufferedStream</span>:</span> <span class="hljs-keyword">public</span> Stream &#123;    Stream* stream; <span class="hljs-comment">//...</span>    <span class="hljs-comment">//...</span>&#125;;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Process</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-comment">//è¿è¡Œæ—¶è£…é…</span>    FileStream* s1 = <span class="hljs-keyword">new</span> FileStream();    CryptoStream* s2 = <span class="hljs-keyword">new</span> CryptoStream(s1);    BufferedStream* s3 = <span class="hljs-keyword">new</span> BufferedStream(s1);    BufferedStream* s4 = <span class="hljs-keyword">new</span> BufferedStream(s2);&#125;</code></pre></div><p>å¾ˆç¥å¥‡ï¼ŒCryptoStreamæ—¢æœ‰StreamåŸºç±»ï¼Œä¹Ÿæœ‰Streamå­—æ®µã€‚è¿™é‡Œè¿˜éœ€è¦ç»§æ‰¿Streamæ˜¯å› ä¸ºä»–å®šä¹‰äº†åŸºç±»çš„æ¥å£è§„èŒƒ</p><ul><li>ç»§ç»­é‡æ„</li></ul><p>CryptoStream, BufferedStreaméƒ½æœ‰Streamè¿™ä¸ªå­—æ®µï¼ŒæŠŠä»–ä»¬æåˆ°ä¸€ä¸ªä¸­é—´ç±»ä¸­ï¼Œ</p><p>è®¾ç½®ä¸€ä¸ªDecoratorStreamä¸­é—´ç±»</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//æ‰©å±•æ“ä½œ</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DecoratorStream</span>:</span> <span class="hljs-keyword">public</span> Stream &#123;<span class="hljs-keyword">protected</span>:    Stream* stream; <span class="hljs-comment">//...</span>    DecoratorStream(Stream* stm): DecoratorStream(stm) &#123;            &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CryptoStream</span>:</span> <span class="hljs-keyword">public</span> DecoratorStream &#123;<span class="hljs-keyword">public</span>:    CryptoStream(Stream* stm): DecoratorStream(stm) &#123;&#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">char</span> <span class="hljs-title">Read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Read(number);    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Seek</span><span class="hljs-params">(<span class="hljs-keyword">int</span> position)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Seek(position);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span><span class="hljs-params">(byte data)</span> </span>&#123;        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>        stream-&gt;Write(data);        <span class="hljs-comment">//é¢å¤–çš„åŠ å¯†æ“ä½œ...</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BufferedStream</span>:</span> <span class="hljs-keyword">public</span> DecoratorStream &#123;    <span class="hljs-comment">//...</span>&#125;;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Process</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-comment">//è¿è¡Œæ—¶è£…é…</span>    FileStream* s1 = <span class="hljs-keyword">new</span> FileStream();    CryptoStream* s2 = <span class="hljs-keyword">new</span> CryptoStream(s1);    BufferedStream* s3 = <span class="hljs-keyword">new</span> BufferedStream(s1);    BufferedStream* s4 = <span class="hljs-keyword">new</span> BufferedStream(s2);&#125;</code></pre></div><p>æ–°çš„ç±»å…³ç³»</p><p><img src="image-20200807143823919.png" srcset="/img/loading.gif" alt="image-20200807143823919" style="zoom:30%;" /></p><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p><img src="image-20200807160507597.png" srcset="/img/loading.gif" alt="image-20200807160507597" style="zoom:50%;" /></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><p>é€šè¿‡é‡‡ç”¨ç»„åˆè€Œéç»§æ‰¿çš„æ‰‹æ³•ï¼Œ Decoratoræ¨¡å¼å®ç°äº†åœ¨è¿è¡Œæ—¶åŠ¨æ€æ‰©å±•å¯¹è±¡åŠŸèƒ½çš„èƒ½åŠ›ï¼Œè€Œä¸”å¯ä»¥æ ¹æ®éœ€è¦æ‰©å±•å¤šä¸ªåŠŸèƒ½ã€‚é¿å… äº†ä½¿ç”¨ç»§æ‰¿å¸¦æ¥çš„â€çµæ´»æ€§å·®â€å’Œâ€å¤šå­ç±»è¡ç”Ÿé—®é¢˜â€ã€‚</p></li><li><p>Decoratorç±»åœ¨æ¥å£ä¸Šè¡¨ç°ä¸ºis-a Componentçš„ç»§æ‰¿å…³ç³»ï¼Œå³Decoratorç±»ç»§æ‰¿äº†Componentç±»æ‰€å…·æœ‰çš„æ¥å£ã€‚ä½†åœ¨å®ç°ä¸Šåˆ è¡¨ç°ä¸ºhas-a Componentçš„ç»„åˆå…³ç³»ï¼Œå³Decoratorç±»åˆä½¿ç”¨äº† å¦å¤–ä¸€ä¸ªComponentç±»ã€‚</p></li><li><p>Decoratoræ¨¡å¼çš„ç›®çš„å¹¶éè§£å†³â€å¤šå­ç±»è¡ç”Ÿçš„å¤šç»§æ‰¿â€é—®é¢˜ï¼ŒDecoratoræ¨¡å¼åº”ç”¨çš„è¦ç‚¹åœ¨äºè§£å†³â€ä¸»ä½“ç±»åœ¨å¤šä¸ªæ–¹å‘ä¸Šçš„æ‰©å±• åŠŸèƒ½â€â€”â€”æ˜¯ä¸ºâ€è£…é¥°â€çš„å«ä¹‰ã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Design Patterns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Design Patterns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™</title>
    <link href="/2020/08/06/DesignPatterns/Principle/"/>
    <url>/2020/08/06/DesignPatterns/Principle/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>å˜åŒ–æ˜¯å¤ç”¨çš„å¤©æ•Œï¼ é¢å‘å¯¹è±¡è®¾è®¡æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºï¼š<u><strong><em>æŠµå¾¡å˜åŒ–</em></strong></u></p>          </div><h4 id="ä¾èµ–å€’ç½®åŸåˆ™-DIP"><a href="#ä¾èµ–å€’ç½®åŸåˆ™-DIP" class="headerlink" title="ä¾èµ–å€’ç½®åŸåˆ™ (DIP)"></a>ä¾èµ–å€’ç½®åŸåˆ™ (DIP)</h4><ul><li><p>é«˜å±‚æ¨¡å—(ç¨³å®š)ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—(å˜åŒ–)ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡(ç¨³å®š) ã€‚</p></li><li><p>æŠ½è±¡(ç¨³å®š)ä¸åº”è¯¥ä¾èµ–äºå®ç°ç»†èŠ‚(å˜åŒ–) ï¼Œå®ç°ç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡(ç¨³å®š)ã€‚</p></li></ul><p><br></p><h4 id="å¼€æ”¾å°é—­åŸåˆ™-OCP"><a href="#å¼€æ”¾å°é—­åŸåˆ™-OCP" class="headerlink" title="å¼€æ”¾å°é—­åŸåˆ™ (OCP)"></a>å¼€æ”¾å°é—­åŸåˆ™ (OCP)</h4><ul><li><p>å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹æ›´æ”¹å°é—­ã€‚</p></li><li><p>ç±»æ¨¡å—åº”è¯¥æ˜¯å¯æ‰©å±•çš„ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹ã€‚</p></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>Design Patterns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Observer è§‚å¯Ÿè€…æ¨¡å¼</title>
    <link href="/2020/08/06/DesignPatterns/Observer/"/>
    <url>/2020/08/06/DesignPatterns/Observer/</url>
    
    <content type="html"><![CDATA[<h2 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h2><p>åœ¨è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæŸäº›å¯¹è±¡å»ºç«‹ä¸€ç§â€é€šçŸ¥ä¾èµ–å…³ç³»â€ </p><p><u>ä¸€ä¸ªå¯¹è±¡ï¼ˆç›®æ ‡å¯¹è±¡ï¼‰çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰çš„ä¾èµ–å¯¹è±¡ï¼ˆè§‚å¯Ÿè€…å¯¹è±¡ï¼‰éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚å¦‚æœè¿™æ ·çš„ä¾èµ–å…³ç³»è¿‡äºç´§å¯†ï¼Œ å°†ä½¿è½¯ä»¶ä¸èƒ½å¾ˆå¥½åœ°æŠµå¾¡å˜åŒ–</u>ã€‚</p><p>ä½¿ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯ï¼Œå¯ä»¥å°†è¿™ç§ä¾èµ–å…³ç³»å¼±åŒ–ï¼Œå¹¶å½¢æˆä¸€ç§ç¨³å®šçš„ä¾èµ–å…³ç³»ã€‚ä»è€Œå®ç°è½¯ä»¶ä½“ç³»ç»“æ„çš„æ¾è€¦åˆã€‚</p><h2 id="æ¨¡å¼å®šä¹‰"><a href="#æ¨¡å¼å®šä¹‰" class="headerlink" title="æ¨¡å¼å®šä¹‰"></a>æ¨¡å¼å®šä¹‰</h2><p>å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§<u><strong><em>ä¸€å¯¹å¤š</em></strong></u>ï¼ˆå˜åŒ–ï¼‰çš„ä¾èµ–å…³ç³»ï¼Œä»¥ä¾¿å½“ä¸€ä¸ª å¯¹è±¡(Subject)çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶<u><strong><em>è‡ªåŠ¨æ›´æ–°</em></strong></u>ã€‚</p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>è€ƒè™‘ä¸€ä¸ªæ–‡ä»¶åˆ†å‰²å™¨ç¨‹åºï¼Œå°†ä¸€ä¸ªå¤§æ–‡ä»¶åˆ†å‰²æˆå‡ ä¸ªå°æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬æœ‰ä¸€ä¸ªä¸»ç•Œé¢MainForm (åœ¨è¿™é‡Œæ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…), é‡Œé¢æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯æ–‡ä»¶è·¯å¾„ï¼Œä¸€ä¸ªæ˜¯åˆ†å‰²æˆçš„æ–‡ä»¶éƒ½ä¸ªæ•°ã€‚å½“button clickæ—¶å°±ä¼šè°ƒç”¨filesplitterå°†æ–‡ä»¶åˆ†å‰²</p><p>ä»£ç å¦‚ä¸‹</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainForm</span>:</span> <span class="hljs-keyword">public</span> Form &#123;    TextBox* txtFilePath;    TextBox* txtFileNumber;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button1_Click</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-built_in">string</span> filePath = txtFilePath-&gt;getText();        <span class="hljs-keyword">int</span> number = atoi(txtFileNumber-&gt;getText().c_str());                <span class="hljs-function">FileSplitter <span class="hljs-title">splitter</span><span class="hljs-params">(filePath, number)</span></span>;        splitter.split();    &#125;&#125;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileSplitter</span> &#123;</span>    <span class="hljs-built_in">string</span> m_filePath;    <span class="hljs-keyword">int</span> m_fileNumber;<span class="hljs-keyword">public</span>:    FileSplitter(<span class="hljs-keyword">const</span> strign&amp; filePath, <span class="hljs-keyword">int</span> fileNumber):    m_filePath(filePath),    m_fileNumber(fileNumber) &#123;                &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">split</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//1. è¯»å–å¤§æ–‡ä»¶</span>                <span class="hljs-comment">//2. åˆ†æ‰¹æ¬¡å‘å°æ–‡ä»¶ä¸­å†™å…¥</span>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m_fileNumber; i++) &#123;            <span class="hljs-comment">//...</span>        &#125;    &#125;&#125;</code></pre></div><h4 id="éœ€æ±‚1ï¼šæ–‡ä»¶åˆ†å‰²è¿›åº¦æ¡"><a href="#éœ€æ±‚1ï¼šæ–‡ä»¶åˆ†å‰²è¿›åº¦æ¡" class="headerlink" title="éœ€æ±‚1ï¼šæ–‡ä»¶åˆ†å‰²è¿›åº¦æ¡"></a>éœ€æ±‚1ï¼šæ–‡ä»¶åˆ†å‰²è¿›åº¦æ¡</h4><ul><li>ç¬¬ä¸€ç§å®ç°æ–¹å¼</li></ul><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainForm</span>:</span> <span class="hljs-keyword">public</span> Form &#123;    TextBox* txtFilePath;    TextBox* txtFileNumber;<span class="hljs-comment">/***å¢åŠ progress bar***/</span>    ProgressBar* progressBar;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button1_Click</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-built_in">string</span> filePath = txtFilePath-&gt;getText();        <span class="hljs-keyword">int</span> number = atoi(txtFileNumber-&gt;getText().c_str());                <span class="hljs-function">FileSplitter <span class="hljs-title">splitter</span><span class="hljs-params">(filePath, number)</span></span>;        splitter.split();    &#125;&#125;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileSplitter</span> &#123;</span>    <span class="hljs-built_in">string</span> m_filePath;    <span class="hljs-keyword">int</span> m_fileNumber;<span class="hljs-comment">/***å¢åŠ progres bar***/</span>    ProgressBar* m_progressBar;<span class="hljs-keyword">public</span>:<span class="hljs-comment">/***å¢åŠ åˆå§‹åŒ–å‚æ•°***/</span>    FileSplitter(<span class="hljs-keyword">const</span> strign&amp; filePath, <span class="hljs-keyword">int</span> fileNumber, ProgressBar* progressBar):    m_filePath(filePath),    m_fileNumber(fileNumber)         m_progressBar(progressBar)&#123;                &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">split</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//1. è¯»å–å¤§æ–‡ä»¶</span>                <span class="hljs-comment">//2. åˆ†æ‰¹æ¬¡å‘å°æ–‡ä»¶ä¸­å†™å…¥</span>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m_fileNumber; i++) &#123;            <span class="hljs-comment">//...</span><span class="hljs-comment">/***æ›´æ–°progress bar***/</span>            <span class="hljs-keyword">if</span>(m_progressBar != <span class="hljs-literal">NULL</span>) &#123;                m_progressBar-&gt;setValue((i + <span class="hljs-number">1</span>) / m_fileNumber);            &#125;        &#125;    &#125;&#125;</code></pre></div><div class="note note-warning">            <p>ä½†æ˜¯è¿™ç§å®ç°æ–¹å¼è¿åäº†<u>ä¾èµ–å€’ç½®åŸåˆ™</u>ã€‚FileSplitterä¾èµ–ProgressBar è¿™æ ·ä¸€ç§å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œä½†æ˜¯è¿›åº¦æ¡çš„ç§ç±»å’Œå±•ç°å½¢å¼æ˜¯å˜åŒ–çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å°†è¿›åº¦æ¡æ¢ä¸€ç§å±•ç°å½¢å¼ï¼Œæ¯”å¦‚ä¸æ–­æ‰“ç‚¹ï¼Œé‚£ä¹ˆå°±ä¼šé¢ä¸´éœ€æ±‚å˜æ›´çš„å›°æ‰°ã€‚</p>          </div><ul><li>ç¬¬äºŒç§å®ç°æ–¹å¼</li></ul><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IProgress</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DoProgresss</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-keyword">virtual</span> ~IProgress() &#123;&#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileSplitter</span> &#123;</span>    <span class="hljs-built_in">string</span> m_filePath;    <span class="hljs-keyword">int</span> m_fileNumber;    <span class="hljs-comment">//ProgressBar* m_progressBar; è¿™æ˜¯ä¸€ä¸ªé€šçŸ¥æ§ä»¶</span>    IProgress* m_iprogress; <span class="hljs-comment">//æŠ½è±¡é€šçŸ¥æœºåˆ¶</span><span class="hljs-keyword">public</span>:    FileSplitter(<span class="hljs-keyword">const</span> strign&amp; filePath, <span class="hljs-keyword">int</span> fileNumber, IProgress* iprogress):    m_filePath(filePath),    m_fileNumber(fileNumber)         m_iprogress(iprogress)&#123;                &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">split</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//1. è¯»å–å¤§æ–‡ä»¶</span>                <span class="hljs-comment">//2. åˆ†æ‰¹æ¬¡å‘å°æ–‡ä»¶ä¸­å†™å…¥</span>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m_fileNumber; i++) &#123;            <span class="hljs-comment">//...</span>            <span class="hljs-keyword">if</span>(m_iprogress != <span class="hljs-literal">NULL</span>) &#123;                <span class="hljs-keyword">float</span> progressValue = m_fileNumber;                progressValue = (i + <span class="hljs-number">1</span>) / progressValue;                m_iprogress-&gt;DoProgress(progressValue); <span class="hljs-comment">//æ›´æ–°è¿›åº¦æ¡</span>            &#125;        &#125;    &#125;&#125;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainForm</span>:</span> <span class="hljs-keyword">public</span> Form, <span class="hljs-keyword">public</span> IProgress&#123;    TextBox* txtFilePath;    TextBox* txtFileNumber;    ProgressBar* progressbar;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button1_Click</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-built_in">string</span> filePath = txtFilePath-&gt;getText();        <span class="hljs-keyword">int</span> number = atoi(txtFileNumber-&gt;getText().c_str());                <span class="hljs-function">FileSplitter <span class="hljs-title">splitter</span><span class="hljs-params">(filePath, number)</span></span>;        splitter.split();    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DoProgress</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>&#123;        progressBar-&gt;setValue(value);    &#125;&#125;</code></pre></div><p>C++æ”¯æŒå¤šç»§æ‰¿ï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨å¤šç»§æ‰¿ï¼Œå› ä¸ºä¼šå¸¦æ¥å¾ˆå¤šè€¦åˆçš„é—®é¢˜ã€‚ä½†æ˜¯æœ‰ä¸€ç§æƒ…å†µæ˜¯æ¨èä½¿ç”¨å¤šç»§æ‰¿çš„ï¼Œä¸€ä¸ªä¸»çš„ç»§æ‰¿ç±»ï¼Œå…¶ä»–éƒ½æ˜¯æ¥å£  (å•ç»§æ‰¿å¤šå®ç°), è¿™é‡Œå°±å±äºè¿™ç§æƒ…å†µ</p><ul><li>å†ä¿®æ”¹ä¸€ä¸‹</li></ul><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IProgress</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DoProgresss</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-keyword">virtual</span> ~IProgress() &#123;&#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileSplitter</span> &#123;</span>    <span class="hljs-built_in">string</span> m_filePath;    <span class="hljs-keyword">int</span> m_fileNumber;    <span class="hljs-comment">//ProgressBar* m_progressBar; è¿™æ˜¯ä¸€ä¸ªé€šçŸ¥æ§ä»¶</span>    IProgress* m_iprogress; <span class="hljs-comment">//æŠ½è±¡é€šçŸ¥æœºåˆ¶</span><span class="hljs-keyword">public</span>:    FileSplitter(<span class="hljs-keyword">const</span> strign&amp; filePath, <span class="hljs-keyword">int</span> fileNumber, IProgress* iprogress):    m_filePath(filePath),    m_fileNumber(fileNumber)         m_iprogress(iprogress)&#123;                &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">split</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//1. è¯»å–å¤§æ–‡ä»¶</span>                <span class="hljs-comment">//2. åˆ†æ‰¹æ¬¡å‘å°æ–‡ä»¶ä¸­å†™å…¥</span>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m_fileNumber; i++) &#123;            <span class="hljs-comment">//...</span>            <span class="hljs-keyword">float</span> progressValue = m_fileNumber;            progressValue = (i + <span class="hljs-number">1</span>) / progressValue;            onProgress(progressValue);        &#125;    &#125;<span class="hljs-keyword">protected</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onProgress</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>&#123;        <span class="hljs-keyword">if</span>(m_iprogress != <span class="hljs-literal">NULL</span>) &#123;        m_iprogress-&gt;DoProgress(value);<span class="hljs-comment">//æ›´æ–°è¿›åº¦æ¡</span>        &#125;    &#125;&#125;</code></pre></div><h4 id="éœ€æ±‚2-å¤šè§‚å¯Ÿè€…"><a href="#éœ€æ±‚2-å¤šè§‚å¯Ÿè€…" class="headerlink" title="éœ€æ±‚2: å¤šè§‚å¯Ÿè€…"></a>éœ€æ±‚2: å¤šè§‚å¯Ÿè€…</h4><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IProgress</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DoProgresss</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-keyword">virtual</span> ~IProgress() &#123;&#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileSplitter</span> &#123;</span>    <span class="hljs-built_in">string</span> m_filePath;    <span class="hljs-keyword">int</span> m_fileNumber;    List&lt;IProgress*&gt; m_iprogressList; <span class="hljs-comment">//æŠ½è±¡é€šçŸ¥æœºåˆ¶, æ”¯æŒå¤šä¸ªè§‚å¯Ÿè€…</span><span class="hljs-keyword">public</span>:    FileSplitter(<span class="hljs-keyword">const</span> strign&amp; filePath, <span class="hljs-keyword">int</span> fileNumber):    m_filePath(filePath),    m_fileNumber(fileNumber) &#123;                &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">addIProgress</span><span class="hljs-params">(IProgress* iprogress)</span> </span>&#123;        m_iprogressList.add(iprogress);    &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">removeIProgress</span><span class="hljs-params">(IProgress* iprogress)</span> </span>&#123;        m_iprogressList.remove(iprogress);    &#125;            <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">split</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//1. è¯»å–å¤§æ–‡ä»¶</span>                <span class="hljs-comment">//2. åˆ†æ‰¹æ¬¡å‘å°æ–‡ä»¶ä¸­å†™å…¥</span>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m_fileNumber; i++) &#123;            <span class="hljs-comment">//...</span>            <span class="hljs-keyword">float</span> progressValue = m_fileNumber;            progressValue = (i + <span class="hljs-number">1</span>) / progressValue;            onProgress(progressValue);        &#125;    &#125;<span class="hljs-keyword">protected</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onProgress</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>&#123;        List&lt;IProgress*&gt;::iterator it = m_iprogressList.begin();        <span class="hljs-keyword">while</span>(it != m_iprogressList.end()) &#123;            (*it)-&gt;DoProgress(value);            it++;        &#125;    &#125;&#125;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainForm</span>:</span> <span class="hljs-keyword">public</span> Form, <span class="hljs-keyword">public</span> IProgress&#123;    TextBox* txtFilePath;    TextBox* txtFileNumber;    ProgressBar* progressbar;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button1_Click</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-built_in">string</span> filePath = txtFilePath-&gt;getText();        <span class="hljs-keyword">int</span> number = atoi(txtFileNumber-&gt;getText().c_str());                ConsoleNotifier cn;        <span class="hljs-function">FileSplitter <span class="hljs-title">splitter</span><span class="hljs-params">(filePath, number)</span></span>;                splitter.addIprogress(<span class="hljs-keyword">this</span>);        splitter.addIprogress(&amp;cn);                splitter.split();    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DoProgress</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>&#123;        progressBar-&gt;setValue(value);    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConsoleNotifier</span>:</span> <span class="hljs-keyword">public</span> IProgress &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DoProgress</span><span class="hljs-params">(<span class="hljs-keyword">float</span> value)</span> </span>&#123;        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"."</span>;    &#125;&#125;</code></pre></div><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p><img src="image-20200806160700160.png" srcset="/img/loading.gif" alt="image-20200806160700160" style="zoom: 50%;" /></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><p>ä½¿ç”¨é¢å‘å¯¹è±¡çš„æŠ½è±¡ï¼ŒObserveræ¨¡å¼ä½¿å¾—æˆ‘ä»¬å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜ç›®æ ‡ä¸è§‚å¯Ÿè€…ï¼Œä»è€Œä½¿äºŒè€…ä¹‹é—´çš„ä¾èµ–å…³ç³»è¾¾è‡´æ¾è€¦åˆã€‚ </p></li><li><p>ç›®æ ‡å‘é€é€šçŸ¥æ—¶ï¼Œæ— éœ€æŒ‡å®šè§‚å¯Ÿè€…ï¼Œé€šçŸ¥ï¼ˆå¯ä»¥æºå¸¦é€šçŸ¥ä¿¡æ¯ä½œä¸ºå‚æ•°ï¼‰ä¼šè‡ªåŠ¨ä¼ æ’­ã€‚</p></li><li><p>è§‚å¯Ÿè€…è‡ªå·±å†³å®šæ˜¯å¦éœ€è¦è®¢é˜…é€šçŸ¥ï¼Œç›®æ ‡å¯¹è±¡å¯¹æ­¤ä¸€æ— æ‰€çŸ¥ã€‚ </p></li><li>Observeræ¨¡å¼æ˜¯åŸºäºäº‹ä»¶çš„UIæ¡†æ¶ä¸­éå¸¸å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œä¹Ÿæ˜¯ MVCæ¨¡å¼çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>Design Patterns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Design Patterns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Template Method</title>
    <link href="/2020/08/05/DesignPatterns/TemplateMethod/"/>
    <url>/2020/08/05/DesignPatterns/TemplateMethod/</url>
    
    <content type="html"><![CDATA[<h2 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h2><p>åœ¨è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå¯¹äºæŸä¸€é¡¹ä»»åŠ¡ï¼Œå®ƒå¸¸å¸¸æœ‰ç¨³å®šçš„æ•´ä½“æ“ä½œç»“æ„ï¼Œä½†å„ä¸ªå­æ­¥éª¤å´æœ‰å¾ˆå¤šæ”¹å˜çš„éœ€æ±‚ï¼Œæˆ–è€…ç”±äºå›ºæœ‰çš„åŸå›  ï¼ˆæ¯”å¦‚æ¡†æ¶ä¸åº”ç”¨ä¹‹é—´çš„å…³ç³»ï¼‰è€Œæ— æ³•å’Œä»»åŠ¡çš„æ•´ä½“ç»“æ„åŒæ—¶å®ç°ã€‚</p><p>æ ¸å¿ƒåœ¨äºåœ¨ç¨³å®šä¸å˜åŒ–ä¹‹é—´æ±‚å¾—ä¸€ä¸ªå¹³è¡¡ï¼Œå¦‚æœå…¨éƒ¨ç¨³å®šæˆ–è€…å…¨éƒ¨å˜åŒ–éƒ½æ˜¯ä¸éœ€è¦è®¾è®¡æ¨¡å¼çš„ã€‚</p><p>å¦‚ä½•åœ¨ç¡®å®š<strong>ç¨³å®šæ“ä½œç»“æ„</strong>çš„å‰æä¸‹ï¼Œæ¥çµæ´»åº”å¯¹<strong>å„ä¸ªå­æ­¥éª¤çš„å˜åŒ–</strong>æˆ–è€…<strong>æ™šæœŸå®ç°éœ€æ±‚</strong>ï¼Ÿ</p><p>å‡è®¾æ•´ä¸ªä»£ç çš„æ“ä½œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶ä¸­çº¢è‰²æ˜¯Libraryå¼€å‘äººå‘˜å®Œæˆçš„ï¼Œè“è‰²éƒ¨åˆ†æ˜¯Applicationå¼€å‘äººå‘˜å®Œæˆçš„</p><p><img src="image-20200710191024075.png" srcset="/img/loading.gif" alt="image-20200710191024075" style="zoom:33%;" /></p><h2 id="ç»“æ„åŒ–è½¯ä»¶æµç¨‹è®¾è®¡"><a href="#ç»“æ„åŒ–è½¯ä»¶æµç¨‹è®¾è®¡" class="headerlink" title="ç»“æ„åŒ–è½¯ä»¶æµç¨‹è®¾è®¡"></a>ç»“æ„åŒ–è½¯ä»¶æµç¨‹è®¾è®¡</h2><p><img src="image-20200710191212499.png" srcset="/img/loading.gif" alt="image-20200710191212499" style="zoom:50%;" /></p><p>lib.cpp</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Library</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Step1</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Step3</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Step5</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;&#125;</code></pre></div><p>app.cpp</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">Step2</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Step4</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;&#125;</code></pre></div><p>ä¸»ç¨‹åº</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-function">Library <span class="hljs-title">lib</span><span class="hljs-params">()</span></span>;    <span class="hljs-function">Application <span class="hljs-title">app</span><span class="hljs-params">()</span></span>;        lib.Step1();        <span class="hljs-keyword">if</span>(app.Step2()) &#123;        lib.Step3();    &#125;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) &#123;        app.Step4();    &#125;    lib.Step5();&#125;</code></pre></div><h2 id="ç”¨æ¨¡æ¿æ–¹æ³•çš„ä»£ç é‡æ„ä¸º"><a href="#ç”¨æ¨¡æ¿æ–¹æ³•çš„ä»£ç é‡æ„ä¸º" class="headerlink" title="ç”¨æ¨¡æ¿æ–¹æ³•çš„ä»£ç é‡æ„ä¸º"></a>ç”¨æ¨¡æ¿æ–¹æ³•çš„ä»£ç é‡æ„ä¸º</h2><p><img src="image-20200710191917988.png" srcset="/img/loading.gif" alt="image-20200710191917988" style="zoom:50%;" /></p><p>lib.cpp</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Library</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Run</span><span class="hljs-params">()</span> </span>&#123;        Step1();        <span class="hljs-keyword">if</span>(Step2()) &#123;            Step3();        &#125;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) &#123;            Step4();        &#125;        Step5();    &#125;        <span class="hljs-keyword">virtual</span> ~Library() &#123;&#125;<span class="hljs-keyword">protected</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Step1</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-comment">//ç¨³å®š</span>        <span class="hljs-comment">//...</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Step3</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-comment">//ç¨³å®š</span>        <span class="hljs-comment">//...</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Step5</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-comment">//ç¨³å®š</span>        <span class="hljs-comment">//...</span>    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">Step2</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>; <span class="hljs-comment">//å˜åŒ–</span>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Step4</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>; <span class="hljs-comment">//å˜åŒ–</span>&#125;</code></pre></div><p>app.cpp</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-comment">//åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span>:</span> <span class="hljs-keyword">public</span> Library &#123;<span class="hljs-keyword">protected</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">Step2</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Step4</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;&#125;;</code></pre></div><p>ä¸»ç¨‹åº</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;    Library* pLib = <span class="hljs-keyword">new</span> Application();    lib.Run();    <span class="hljs-keyword">delete</span> pLib;&#125;</code></pre></div><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ä¸¤è€…çš„åŒºåˆ«åœ¨äºæ—©ç»‘å®šå’Œæ™šç»‘å®šã€‚å‰è€…å±äºæ—©ç»‘å®šï¼Œè€Œtemplate methodå±äºæ™šç»‘å®š</p><p><img src="image-20200710192039991.png" srcset="/img/loading.gif" alt="image-20200710192039991" style="zoom:50%;" /></p><p>å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶ (ç¨³å®š)ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿ (å˜åŒ–)åˆ°å­ç±»ä¸­ã€‚Template Methodä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ (å¤ç”¨)ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰(override é‡å†™)è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Design Patterns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Design Patterns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Strategy Method</title>
    <link href="/2020/08/05/DesignPatterns/StrategyMethod/"/>
    <url>/2020/08/05/DesignPatterns/StrategyMethod/</url>
    
    <content type="html"><![CDATA[<h2 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h2><p>åœ¨è½¯ä»¶æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒæŸäº›å¯¹è±¡ä½¿ç”¨çš„ç®—æ³•å¯èƒ½å¤šç§å¤šæ ·ï¼Œç»å¸¸æ”¹å˜ï¼Œå¦‚æœå°†è¿™äº›ç®—æ³•éƒ½ç¼–ç åˆ°å¯¹è±¡ä¸­ï¼Œå°†ä¼šä½¿å¯¹è±¡å˜å¾—å¼‚å¸¸å¤æ‚ï¼› è€Œä¸”æœ‰æ—¶å€™æ”¯æŒä¸ä½¿ç”¨çš„ç®—æ³•ä¹Ÿæ˜¯ä¸€ä¸ªæ€§èƒ½è´Ÿæ‹…</p><p>å¦‚ä½•åœ¨è¿è¡Œæ—¶æ ¹æ®éœ€è¦é€æ˜åœ°æ›´æ”¹å¯¹è±¡çš„ç®—æ³•ï¼Ÿå°†ç®—æ³•ä¸å¯¹è±¡æœ¬èº«è§£è€¦ï¼Œä»è€Œé¿å…ä¸Šè¿°é—®é¢˜ï¼Ÿ</p><h2 id="Strategy-Methodå®šä¹‰"><a href="#Strategy-Methodå®šä¹‰" class="headerlink" title="Strategy Methodå®šä¹‰"></a>Strategy Methodå®šä¹‰</h2><p>å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯äº’ ç›¸æ›¿æ¢ï¼ˆå˜åŒ–ï¼‰ã€‚è¯¥æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·ç¨‹ åº(ç¨³å®š)è€Œå˜åŒ–ï¼ˆæ‰©å±•ï¼Œå­ç±»åŒ–ï¼‰ã€‚</p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>è€ƒè™‘ä¸€ä¸‹è®¡ç®—ç¨çš„ä¾‹å­</p><ul><li>ç¬¬ä¸€ç§å®ç°æ–¹å¼</li></ul><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-keyword">enum</span> TaxBase &#123;    CN_Tax,    US_Tax,    DE_Tax&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SalesOrder</span> &#123;</span>    TaxBase tax;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">CalculateTax</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//...</span>                <span class="hljs-keyword">if</span>(tax == CN_Tax) &#123;            <span class="hljs-comment">//CN*****</span>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(tax == US_Tax) &#123;            <span class="hljs-comment">//US*****</span>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(tax == DE_Tax) &#123;            <span class="hljs-comment">//DE*****</span>        &#125;        <span class="hljs-comment">//***</span>    &#125;&#125;</code></pre></div><p>æœ‰äº›æ—¶å€™ï¼Œé™æ€åœ°å»è§‚å¯Ÿæ˜¯çœ‹ä¸å‡ºæ¥çš„ï¼ŒåŠ å…¥æ—¶é—´è½´ï¼Œè€ƒè™‘åˆ°æœªæ¥çš„åŠ¨æ€å˜åŒ–ï¼Œé—®é¢˜å°±ä¼šæš´éœ²å‡ºæ¥ã€‚è€ƒè™‘ä¸Šè¿°ä¾‹å­ï¼Œå¦‚æœè¦åŠ å…¥ä¸€ä¸ªå›½å®¶ï¼Œæ¯”å¦‚æ³•å›½ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ä»…è¦åœ¨<code>TaxBase</code>ä¸­ä¸­å¢åŠ ä¸€ä¸ª<code>FR_Tax</code>, è¿˜éœ€è¦åœ¨<code>SalesOrder</code>ä¸­å¢åŠ åˆ¤æ–­è¯­å¥ã€‚è¿™æ ·çš„æ›´æ”¹è¿èƒŒäº†å¼€é—­åŸåˆ™ï¼š å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ (é¿å…å»ä¿®æ”¹æºä»£ç </p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-keyword">enum</span> TaxBase &#123;    CN_Tax,    US_Tax,    DE_Tax,    <span class="hljs-comment">/***åŠ å…¥France***/</span>    FR_Tax,&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SalesOrder</span> &#123;</span>    TaxBase tax;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">CalculateTax</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//...</span>                <span class="hljs-keyword">if</span>(tax == CN_Tax) &#123;            <span class="hljs-comment">//CN*****</span>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(tax == US_Tax) &#123;            <span class="hljs-comment">//US*****</span>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(tax == DE_Tax) &#123;            <span class="hljs-comment">//DE*****</span>        &#125;        <span class="hljs-comment">/***åŠ å…¥France***/</span>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(tax == FR_Tax) &#123;                  &#125;        <span class="hljs-comment">//***</span>    &#125;&#125;</code></pre></div><ul><li>è€ƒè™‘å¦ä¸€ç§å®ç°æ–¹å¼</li></ul><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TaxStrategy</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">double</span> <span class="hljs-title">Calculate</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Context&amp; context)</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-keyword">virtual</span> ~TaxStrategy() &#123;&#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CNTax</span>:</span> <span class="hljs-keyword">public</span> TaxStrategy &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">double</span> <span class="hljs-title">Calculate</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Context&amp; context)</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">USTax</span>:</span> <span class="hljs-keyword">public</span> TaxStrategy &#123;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">double</span> <span class="hljs-title">Calculate</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Context&amp; context)</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DETax</span>:</span> <span class="hljs-keyword">public</span> TaxStrategy &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">double</span> <span class="hljs-title">Calculate</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Context&amp; context)</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;&#125;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SalesOrder</span> &#123;</span><span class="hljs-keyword">private</span>:    TaxStrategy* strategy;<span class="hljs-keyword">public</span>:    SalesOrder(StrategyFactory* strategyFactory) &#123;        <span class="hljs-keyword">this</span>-&gt;strategy = strategyFactory-&gt;NewStrategy();    &#125;        ~SalesOrder() &#123;        <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>-&gt;strategy;    &#125;        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">CalculateTax</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-comment">//...</span>        <span class="hljs-function">Context <span class="hljs-title">context</span><span class="hljs-params">()</span></span>;                <span class="hljs-keyword">double</span> val =             srtategy-&gt;Calculate(context);<span class="hljs-comment">//å¤šæ€è°ƒç”¨</span>    &#125;&#125;</code></pre></div><p>å¦‚æœè¦å¢åŠ æ³•å›½ï¼Œåªéœ€å¢åŠ ä¸€ä¸ª<code>FRTax</code>ç±»</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FRTax</span>:</span> <span class="hljs-keyword">public</span> TaxStrategy &#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> doubel <span class="hljs-title">Calculate</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Context&amp; context)</span> </span>&#123;        <span class="hljs-comment">//...</span>    &#125;&#125;</code></pre></div><p>è¿™æ˜¯ä¸€ç§æ‰©å±•çš„åšæ³•ï¼Œåœ¨è¿™é‡Œåªéœ€è¦å¢åŠ ä¸€ä¸ªFRTaxç±»ï¼Œä¸éœ€è¦æ›´æ”¹SalesOrderã€‚</p><p>å¤ç”¨æ€§ä¸€èˆ¬æ˜¯æŒ‡äºŒè¿›åˆ¶å±‚é¢ä¸‹çš„å¤ç”¨æ€§ï¼Œå¦‚æœä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œé‚£ä¹ˆæ•´ä¸ªç³»ç»Ÿéœ€è¦é‡æ–°ç¼–è¯‘ï¼Œé‡æ–°æµ‹è¯•ã€‚è™½ç„¶ä¿®æ”¹åä¿ç•™äº†ä¸€éƒ¨åˆ†åŸæ¥çš„ä»£ç ï¼Œä½†æ˜¯è¿™ä¸ªå¹¶ä¸æ˜¯å¤ç”¨ã€‚è€Œç­–ç•¥æ–¹æ³•ä¸éœ€è¦é‡æ–°ç¼–è¯‘ä¹‹å‰ç¼–è¯‘å¥½çš„æ–‡ä»¶ï¼Œåªéœ€è¦é‡æ–°ç¼–è¯‘FRTaxè¿™ä¸ªæ–‡ä»¶</p><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p><img src="image-20200805135526277.png" srcset="/img/loading.gif" alt="image-20200805135526277"> </p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><p>StrategyåŠå…¶å­ç±»ä¸ºç»„ä»¶æä¾›äº†ä¸€ç³»åˆ—å¯é‡ç”¨çš„ç®—æ³•ï¼Œä»è€Œå¯ä»¥ä½¿ å¾—ç±»å‹åœ¨è¿è¡Œæ—¶æ–¹ä¾¿åœ°æ ¹æ®éœ€è¦åœ¨å„ä¸ªç®—æ³•ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚</p></li><li><p>Strategyæ¨¡å¼æä¾›äº†ç”¨æ¡ä»¶åˆ¤æ–­è¯­å¥ä»¥å¤–çš„å¦ä¸€ç§é€‰æ‹©ï¼Œæ¶ˆé™¤æ¡ä»¶ åˆ¤æ–­è¯­å¥ï¼Œå°±æ˜¯åœ¨è§£è€¦åˆã€‚å«æœ‰è®¸å¤šæ¡ä»¶åˆ¤æ–­è¯­å¥çš„ä»£ç é€šå¸¸éƒ½éœ€ è¦Strategyæ¨¡å¼ã€‚</p></li><li><p>å¦‚æœStrategyå¯¹è±¡æ²¡æœ‰å®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆå„ä¸ªä¸Šä¸‹æ–‡å¯ä»¥å…±äº«åŒä¸€ä¸ª Strategyå¯¹è±¡ï¼Œä»è€ŒèŠ‚çœå¯¹è±¡å¼€é”€</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Design Patterns</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Design Patterns</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Computer network--ä¼ è¾“å±‚</title>
    <link href="/2019/12/09/ComputerNetwork/TransportLayer/"/>
    <url>/2019/12/09/ComputerNetwork/TransportLayer/</url>
    
    <content type="html"><![CDATA[<h1 id="1-The-Transport-Service"><a href="#1-The-Transport-Service" class="headerlink" title="1. The Transport Service"></a>1. The Transport Service</h1><ul><li><p>transport layer services</p><ul><li>To provide efficient, <strong><em>reliable,</em></strong> and cost effective service to its users, normally processes in the application layer.</li><li>To make use of the services provided by the network layer.</li></ul></li><li><p>the transport entity</p><ul><li>the hardware and/or software within the transport layer that does the work.</li></ul></li></ul><center><img src="image-20191126095920516.png" srcset="/img/loading.gif" alt="image-20191126095920516" style="zoom:35%;" /></center><h2 id="1-1-ç½‘ç»œå±‚å’Œä¼ è¾“å±‚çš„åŒºåˆ«ä¸è”ç³»"><a href="#1-1-ç½‘ç»œå±‚å’Œä¼ è¾“å±‚çš„åŒºåˆ«ä¸è”ç³»" class="headerlink" title="1.1 ç½‘ç»œå±‚å’Œä¼ è¾“å±‚çš„åŒºåˆ«ä¸è”ç³»"></a>1.1 ç½‘ç»œå±‚å’Œä¼ è¾“å±‚çš„åŒºåˆ«ä¸è”ç³»</h2><blockquote><p>è€ƒè™‘æœ‰ä¸¤ä¸ªå®¶åº­ï¼Œä¸€å®¶ä½äºç¾å›½ä¸œæµ·å²¸ï¼Œä¸€å®¶ä½äºç¾å›½è¥¿æµ·å²¸ï¼Œæ¯å®¶æœ‰12ä¸ªå­©å­ã€‚ä¸œæµ·å²¸çš„å­©å­ä»¬æ˜¯è¥¿æµ·å²¸å®¶åº­å­©å­ä»¬çš„å ‚å…„å¼Ÿå§å¦¹ã€‚è¿™ä¸¤ä¸ªå®¶åº­çš„å­©å­ä»¬å–œæ¬¢å½¼æ­¤é€šä¿¡ï¼Œæ¯ä¸ªäººæ¯å‘¨è¦ç»™æ¯ä¸ªå ‚å…„å¼Ÿå§å¦¹å†™ä¸€å°ä¿¡ï¼Œæ¯å°ä¿¡éƒ½ç”¨å•ç‹¬çš„ä¿¡å°é€šè¿‡ä¼ ç»Ÿçš„é‚®æ”¿æœåŠ¡å‘é€ã€‚å› æ­¤ï¼Œæ¯ä¸ªå®¶åº­æ¯å‘¨å‘å¦ä¸€å®¶åº­å‘é€144å°ä¿¡ã€‚ï¼ˆå¦‚æœä»–ä»¬æœ‰ç”µå­é‚®ä»¶çš„è¯ï¼Œè¿™äº›å­©å­å¯ä»¥çœä¸å°‘é’±ï¼ï¼‰æ¯ä¸ªå®¶åº­æœ‰ä¸€ä¸ªå­©å­è´Ÿè´£æ”¶å‘é‚®ä»¶ï¼Œè¥¿æµ·å²¸å®¶åº­æ˜¯Annè€Œä¸œæµ·å²¸å®¶åº­æ˜¯Billã€‚æ¯å‘¨Annå»å¥¹æ‰€æœ‰çš„å…„å¼Ÿå§å¦¹é‚£é‡Œæ”¶é›†é‚®ä»¶ï¼Œå¹¶å°†è¿™äº›é‚®ä»¶äº¤åˆ°æ¯å¤©åˆ°å®¶é—¨å£çš„é‚®æ”¿è¿è¾“è½¦ä¸Šã€‚å½“ä¿¡ä»¶åˆ°è¾¾è¥¿æµ·å²¸å®¶åº­æ—¶ï¼ŒAnnä¹Ÿè´Ÿè´£å°†ä¿¡ä»¶å‘åˆ°å¥¹çš„å…„å¼Ÿå§å¦¹æ‰‹ä¸Šï¼Œä¸œæµ·å²¸å®¶åº­ä¸­Billä¹Ÿè´Ÿè´£ç±»ä¼¼å·¥ä½œã€‚</p></blockquote><p>æˆ‘ä»¬å¯ä»¥åšä¸‹é¢è¿™æ ·çš„ç±»æ¯”:</p><div class="hljs"><pre><code class="hljs armasm">åº”ç”¨å±‚æŠ¥æ–‡ã€€ã€€ï¼ã€€ä¿¡å°ä¸Šçš„å­—ç¬¦è¿›ç¨‹ã€€ã€€ã€€ã€€ã€€ï¼ã€€å ‚å…„å¼Ÿå§å¦¹ä¸»æœº(ç«¯ç³»ç»Ÿ)ã€€ï¼ã€€å®¶åº­è¿è¾“å±‚åè®®ã€€ã€€ï¼ã€€Annå’Œ<span class="hljs-keyword">Bill</span><span class="hljs-keyword">ç½‘ç»œå±‚åè®®ã€€</span>ã€€ï¼ã€€é‚®æ”¿æœåŠ¡</code></pre></div><blockquote><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç½‘ç»œå±‚å°±åƒé‚®é€’å‘˜ï¼Œè€Œè¿è¾“å±‚å°±åƒAnnå’ŒBillã€‚ç°åœ¨æˆ‘ä»¬å†æ¥ç†è§£ä¸Šé¢çš„è¿™å¥è¯:<strong>ç½‘ç»œå±‚æä¾›äº†ä¸»æœºä¹‹é—´çš„é€»è¾‘é€šä¿¡ï¼Œè€Œä¼ è¾“å±‚ä¸ºä¸åŒä¸»æœºä¸Šçš„è¿›ç¨‹ä¹‹é—´æä¾›äº†é€»è¾‘é€šä¿¡ã€‚</strong>é‚®æ”¿æœåŠ¡çŸ¥è¯†å°†ä¿¡ä»¶é€åˆ°æŒ‡å®šçš„å®¶åº­ï¼Œå®ƒä¸ä¼šå°†ä¿¡ä»¶åˆ†å‘åˆ°å®¶åº­çš„å…·ä½“æˆå‘˜æ‰‹ä¸­ã€‚è¿™ä¸ªåˆ†å‘çš„å·¥ä½œåˆ™æ˜¯ç”±Annå’ŒBillæä¾›çš„ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯Annå’ŒBilléƒ½æ˜¯åœ¨å„è‡ªçš„å®¶é‡Œè¿›è¡Œå·¥ä½œçš„ï¼Œä»–ä»¬æ²¡æœ‰å‚ä¸ä»»ä½•ä¸­é—´é‚®ä»¶ä¸­å¿ƒå¯¹é‚®ä»¶è¿›è¡Œåˆ†æ‹£çš„å·¥ä½œï¼Œä¹Ÿæ²¡æœ‰å°†é‚®ä»¶ä»ä¸€ä¸ªé‚®ä»¶ä¸­å¿ƒé€åˆ°å¦ä¸€ä¸ªé‚®ä»¶ä¸­å¿ƒã€‚ç›¸åº”çš„ï¼Œ<strong>è¿è¾“å±‚åè®®åªå·¥ä½œåœ¨ç«¯ç³»ç»Ÿä¸­</strong>ã€‚åœ¨ç«¯ç³»ç»Ÿä¸­ï¼Œè¿è¾“å±‚åè®®å°†æ¥è‡ªåº”ç”¨è¿›ç¨‹çš„çš„æŠ¥æ–‡ç§»åŠ¨åˆ°ç½‘ç»œè¾¹ç¼˜(å³ç½‘ç»œå±‚)ï¼Œä½†å¯¹æœ‰å…³è¿™äº›æŠ¥æ–‡åœ¨ç½‘ç»œå±‚ä¸­å¦‚ä½•ç§»åŠ¨å´ä¸åšä»»ä½•è§„å®šã€‚<br>ç”±è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥åšå‡ºå¦‚ä¸‹æ¦‚æ‹¬:<strong>ç½‘ç»œå±‚æä¾›äº†ä¸åŒç«¯ç³»ç»Ÿçš„æ•°æ®äº¤ä»˜æœåŠ¡ï¼Œè€Œä¼ è¾“å±‚åˆ™å°†è¿™ç§ä¸åŒä¸»æœºé—´çš„äº¤ä»˜æ‹“å±•ä¸ºäº†è¿è¡Œåœ¨ä¸åŒç«¯ç³»ç»Ÿä¸Šçš„ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„äº¤ä»˜ã€‚</strong>è¿›ç¨‹åˆ°è¿›ç¨‹ä¹‹é—´çš„æ•°æ®äº¤ä»˜æ˜¯ä¼ è¾“å±‚æä¾›çš„æœ€åŸºæœ¬çš„æœåŠ¡ä¹‹ä¸€ã€‚</p></blockquote><p>{:.success}</p><p>ä¼ è¾“å±‚ä¸ºåº”ç”¨è¿›ç¨‹ä¹‹é—´æä¾›ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡ï¼ˆä½†ç½‘ç»œå±‚æ˜¯ä¸ºä¸»æœºä¹‹é—´æä¾›é€»è¾‘é€šä¿¡ã€‚ä¼ è¾“å±‚è¿˜è¦å¯¹æ”¶åˆ°çš„æŠ¥æ–‡è¿›è¡Œå·®é”™æ£€æµ‹ã€‚</p><center><img src="image-20191212232948465.png" srcset="/img/loading.gif" alt="image-20191212232948465" style="zoom:40%;" /></center><center><img src="image-20191212233116016.png" srcset="/img/loading.gif" alt="image-20191212233116016" style="zoom:50%;" /></center><p><br/></p><h2 id="1-2-Hypothetical-primitives"><a href="#1-2-Hypothetical-primitives" class="headerlink" title="1.2 Hypothetical primitives"></a>1.2 Hypothetical primitives</h2><center><img src="image-20191126100224177.png" srcset="/img/loading.gif" alt="image-20191126100224177" style="zoom:30%;" /></center><p><br/></p><p>ç”¨segmentè¡¨ç¤ºä¼ è¾“å®ä½“é—´å‘é€çš„æ¶ˆæ¯[ä¸€äº›è€åè®®ä½¿ç”¨äº†æ›´åŠ ç¬¨æ‹™çš„åç§°ä¸€ä¸€ä¼ è¾“åè®®æ•°æ®å•å…ƒã€‚TPDU, Transport Protocol Data Unit]</p><center><img src="image-20191209001317925.png" srcset="/img/loading.gif" alt="image-20191209001317925" style="zoom: 30%;" /></center><p><strong><em>How to use these primitives for an application?</em></strong></p><center><img src="image-20191209000910981.png" srcset="/img/loading.gif" alt="image-20191209000910981" style="zoom:35%;" /></center><p><strong><em>Connection establishment and connection release</em></strong></p><center><img src="image-20191209002015904.png" srcset="/img/loading.gif" alt="image-20191209002015904" style="zoom:35%;" /></center><p><br/></p><h1 id="2-Elements-of-Transport-Protocols"><a href="#2-Elements-of-Transport-Protocols" class="headerlink" title="2. Elements of Transport Protocols"></a>2. Elements of Transport Protocols</h1><h2 id="2-1-ä¼ è¾“å±‚åè®®ä¸æ•°æ®é“¾è·¯å±‚åè®®"><a href="#2-1-ä¼ è¾“å±‚åè®®ä¸æ•°æ®é“¾è·¯å±‚åè®®" class="headerlink" title="2.1 ä¼ è¾“å±‚åè®®ä¸æ•°æ®é“¾è·¯å±‚åè®®"></a>2.1 ä¼ è¾“å±‚åè®®ä¸æ•°æ®é“¾è·¯å±‚åè®®</h2><p>ä¼ è¾“åè®®åœ¨æœ‰äº›æ–¹é¢ç±»ä¼¼æ•°æ®é“¾è·¯åè®®ã€‚è¿™ä¸¤ç§åè®®éƒ½è¦å¤„ç†<u>é”™è¯¯æ§åˆ¶ã€ é¡ºåºæ€§å’Œæµé‡æ§åˆ¶ä»¥åŠå…¶ä»–ä¸€äº›é—®é¢˜ã€‚</u></p><p>ç„¶è€Œï¼Œä¸¤è€…ä¹‹é—´ä¹Ÿå­˜åœ¨ç€é‡å¤§çš„å·®åˆ«ã€‚è¿™äº›å·®åˆ«æ˜¯å› ä¸ºè¿™ä¸¤ç§åè®®çš„è¿è¡Œç¯å¢ƒä¸åŒè€Œé€ æˆçš„ã€‚</p><center><table>  <tr>    <td><div class="card">     <div class="card__image">       <img class="image" src="image-20191209134511204.png" srcset="/img/loading.gif" alt="image-20191209134511204" style="zoom:50%;" />  </div>     <div class="card__content">         <div class="card__header">             <h4>æ•°æ®é“¾è·¯å±‚ç¯å¢ƒ</h4>         </div>         <p>ä¸¤å°è·¯ç”±å™¨é€šè¿‡ä¸€æ¡æœ‰çº¿æˆ–è€…æ— çº¿ç‰©ç†ä¿¡é“ç›´æ¥è¿›è¡Œé€šä¿¡</p>    </div></div></td>  <td><div class="card">     <div class="card__image">       <img class="image" src="image-20191209134550181.png" srcset="/img/loading.gif" alt="image-20191209134550181" style="zoom:50%;" />  </div>     <div class="card__content">         <div class="card__header">             <h4>ä¼ è¾“å±‚</h4>         </div>         <p>è¯¥ç‰©ç†ä¿¡é“è¢«æ•´ä¸ªç½‘ç»œæ‰€æ›¿ä»£                             </p>    </div> </div></td>  </tr></table></center><ul><li>Addressing: <ul><li>åœ¨ç‚¹åˆ°ç‚¹é“¾è·¯ä¸Šï¼Œè·¯ç”±å™¨ä¸å¿…æŒ‡å®šå®ƒè¦ä¸å“ªä¸€å°è·¯ç”±å™¨è¿›è¡Œé€šè¯ï¼Œå› ä¸ºæ¯æ¡å‡ºå¢ƒçº¿è·¯ç›´æ¥é€šå‘ä¸€å°ç‰¹å®šçš„è·¯ç”±å™¨ã€‚</li><li>è€Œåœ¨ä¼ è¾“å±‚ï¼Œå¿…é¡»æ˜¾å¼åœ°æŒ‡å®šæ¥æ”¶æ–¹çš„åœ°å€ã€‚</li></ul></li><li>Connection establishment:<ul><li>åœ¨ä¸€æ¡çº¿è·¯ä¸Šå»ºç«‹ä¸€ä¸ªè¿æ¥çš„è¿‡ç¨‹éå¸¸ç®€å•ï¼Œå¦ä¸€ç«¯æ€»æ˜¯åœ¨é‚£é‡Œï¼ˆé™¤éå®ƒå´©æºƒäº†æ‰ä¸åœ¨é‚£é‡Œï¼‰ã€‚ä¸¤è¾¹éƒ½ä¸éœ€è¦åšå¾ˆå¤šäº‹æƒ…ã€‚å¦‚æœå› å‘ç”Ÿé”™è¯¯è€Œæ¶ˆæ¯æ²¡æœ‰è¢«ç¡®è®¤ï¼Œå¯ä»¥å†æ¬¡é‡å‘ã€‚</li><li>è€Œåœ¨ä¼ è¾“å±‚ä¸­ï¼Œåˆå§‹çš„è¿æ¥å»ºç«‹è¿‡ç¨‹éå¸¸å¤æ‚ã€‚</li></ul></li><li>Storage capacity:<ul><li>æ•°æ®é“¾è·¯å±‚å’Œä¼ è¾“å±‚ä¹‹é—´çš„å¦ä¸€ä¸ªï¼ˆéå¸¸æ¼äººçš„ï¼‰å·®åˆ«æ˜¯ï¼Œç½‘ç»œå­˜åœ¨ç€æ½œåœ¨çš„å­˜å‚¨å®¹é‡ã€‚å½“è·¯ç”±å™¨å‘é€ä¸€å¸§åˆ°ä¸€æ¡é“¾è·¯ä¸Šåï¼Œè¯¥å¸§å¯èƒ½åˆ°è¾¾å¯¹æ–¹ä¹Ÿå¯èƒ½ä¸¢å¤±ï¼Œä½†æ˜¯å®ƒä¸å¯èƒ½å…ˆè¹¦è·„ä¸€ä¼šå„¿ï¼Œå†èº²åˆ°è¿œå¤„ä¸€ä¸ªè§’è½ä¸­ï¼Œç„¶ååœ¨å…¶ä»–æ•°æ®åŒ…å‘é€å‡ºå»å¾ˆä¹…åçªç„¶åˆå†’äº†å‡ºæ¥ã€‚</li><li>å¦‚æœç½‘ç»œä½¿ç”¨æ•°æ®æŠ¥æŠ€æœ¯ï¼Œå³ç½‘ç»œå†…éƒ¨çš„è·¯ç”±æ˜¯ç‹¬ç«‹è¿›è¡Œçš„ï¼Œé‚£ä¹ˆå°±å­˜åœ¨ä¸€ä¸ªä¸å¯å¿½ç•¥çš„æ¦‚ç‡ï¼šä¸€ä¸ªåŒ…å¯èƒ½é€‰å–äº†é£æ™¯ä¼˜ç¾çš„è·¯çº¿ï¼Œä¸€è·¯è§‚å…‰å§—å§—æ¥è¿Ÿåˆ°è¾¾ç›®çš„åœ°ï¼Œè¿™å°†æ‰°ä¹±é¢„æœŸçš„æ¥æ”¶é¡ºåºï¼Œç”šè‡³å®ƒçš„é‡å¤æ•°æ®åŒ…éƒ½å·²ç»åˆ°è¾¾ç›®çš„åœ°å®ƒè¿˜æ²¡åˆ°å‘¢ã€‚ç½‘ç»œå…·æœ‰çš„è¿™ç§å»¶è¿Ÿå’Œé‡å¤æ•°æ®åŒ…çš„ç‰¹æ€§æ‰€äº§ç”Ÿçš„åæœæœ‰æ—¶æ˜¯ç¾éš¾æ€§çš„ï¼Œå› æ­¤è¦æ±‚ä½¿ç”¨ç‰¹æ®Šçš„åè®®ï¼Œä»¥ä¾¿æ­£ç¡®åœ°ä¼ è¾“ä¿¡æ¯ã€‚ </li></ul></li><li>Buffering:<ul><li>è¿™ä¸¤å±‚éƒ½éœ€è¦ç¼“å†²å’Œæµé‡æ§åˆ¶ï¼Œä½†æ˜¯ï¼Œç”±äºä¼ è¾“å±‚ä¸Šå­˜åœ¨ç€å¤§é‡å¹¶ä¸”æ•°é‡å¯å˜çš„è¿æ¥ï¼Œè€Œä¸”ç”±äºè¿æ¥ä¹‹é—´çš„ç›¸äº’ç«äº‰é€ æˆè¿æ¥çš„å¯ç”¨å¸¦å®½ä¸Šä¸‹æ³¢åŠ¨ï¼Œå› æ­¤éœ€è¦ä¸€ç§ä¸åŒäºæ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„æ–¹æ³•ã€‚</li></ul></li></ul><h2 id="2-2-å¯»å€"><a href="#2-2-å¯»å€" class="headerlink" title="2.2 å¯»å€"></a>2.2 å¯»å€</h2><p>ç«¯å£</p><div class="note note-success">            <p>å½“ä¸€ä¸ªåº”ç”¨è¿›ç¨‹å¸Œæœ›ä¸å¦ä¸€ä¸ªè¿œç¨‹åº”ç”¨è¿›ç¨‹å»ºç«‹è¿æ¥æ—¶ï¼Œå®ƒå¿…é¡»åˆ¶å®šè¦è¿æ¥åˆ°å“ªä¸ªåº”ç”¨è¿›ç¨‹ä¸Šã€‚é€šå¸¸ä½¿ç”¨çš„æ–¹æ³•æ˜¯ä¸ºé‚£äº›èƒ½å¤Ÿç›‘å¬è¿æ¥è¯·æ±‚çš„è¿›ç¨‹å®šä¹‰ç›¸åº”çš„ä¼ è¾“åœ°å€ã€‚å°†è¿™äº›ç«¯ç‚¹ç§°ä¸º<strong><em><u>ç«¯å£</u></em></strong>[port]</p>          </div><p>ä¼ è¾“æœåŠ¡è®¿é—®ç‚¹[transport service access point]</p><div class="note note-success">            <p>ä¼ è¾“å±‚çš„ä¸€ä¸ªç‰¹æ®Šç«¯ç‚¹</p>          </div><p>ç½‘ç»œè®¿é—®æœåŠ¡ç‚¹[network service access point]</p><div class="note note-success">            <p>ç½‘ç»œå±‚ä¸Šçš„ç«¯ç‚¹[å³ç½‘ç»œå±‚åœ°å€]</p>          </div><p>æ¥ä¸‹æ¥æ¥çœ‹ä¸€ä¸‹è¿‡ç¨‹</p><p>åº”ç”¨è¿›ç¨‹ï¼ˆåŒ…æ‹¬å®¢æˆ·å’ŒæœåŠ¡å™¨ï¼‰ å¯ä»¥å°†è‡ªå·±å…³è”åˆ°ï¼‰1ä¸ªæœ¬åœ° TSAP ä¸Šï¼Œä»¥ä¾¿ä¸ä¸€ä¸ªè¿œç¨‹ TSAP å»ºç«‹è¿æ¥ã€‚è¿™äº›è¿æ¥è¿è¡Œåœ¨ æ¯å°ä¸»æœºçš„ NSAP ä¹‹ä¸Šï¼Œå¦‚å›¾æ‰€ç¤ºã€‚åœ¨æœ‰äº›ç½‘ç»œä¸­ï¼Œæ¯å°è®¡ç®—æœºåªæœ‰ä¸€ä¸ª NSAP ï¼Œä½†æ˜¯å¯èƒ½æœ‰å¤šä¸ªä¼ è¾“ç«¯ç‚¹å…±äº«æ­¤ NSAP</p><div class="item">     <div class="item__image">     <img  src="image-20191209134703993.png" srcset="/img/loading.gif" alt="image-20191209134703993" style="zoom:40%;" />   </div>     <div class="item__content">       <div class="item__header">           <h4>Addressingè¿‡ç¨‹</h4>       </div>       <div class="item__description">         <p>1. Host 2 ä¸Šçš„é‚®ä»¶æœåŠ¡å™¨è¿›ç¨‹å°†è‡ªå·±å…³è”åˆ° TSAP 1522 ä¸Š[ä¾‹å¦‚è°ƒç”¨listen]ï¼Œç­‰å¾…å…¥å¢ƒè¿æ¥è¯·æ±‚çš„åˆ° æ¥ã€‚</p>    <p>2. Host 1 ä¸Šçš„åº”ç”¨è¿›ç¨‹å¸Œæœ›å‘é€ä¸€ä¸ªé‚®ä»¶æ¶ˆæ¯ï¼Œæ‰€ä»¥å®ƒæŠŠè‡ªå·±å…³è”åˆ° TSAP1208 ä¸Šï¼Œå¹¶ä¸”å‘å‡ºä¸€ä¸ª CONNECT è¯·æ±‚ã€‚è¯¥è¯·æ±‚æ¶ˆæ¯æŒ‡å®šä¸»æœº 1 ä¸Šçš„ TSAP 1208 ä½œä¸ºæºï¼Œä¸»æœº 2 ä¸Š çš„ TSAP 1522 ä½œä¸ºç›®æ ‡ã€‚è¿™ä¸ªåŠ¨ä½œæœ€ç»ˆå¯¼è‡´åœ¨åº”ç”¨è¿›ç¨‹å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªè¿æ¥ã€‚</p>    <p>3. åº”ç”¨è¿›ç¨‹å‘é€é‚®ä»¶æ¶ˆæ¯ã€‚ </p>    <p>4. ä½œä¸ºå“åº”ï¼ŒHost 2ä¸Šçš„é‚®ä»¶æœåŠ¡å™¨è¡¨ç¤ºå®ƒå°†ä¼ é€’è¯¥æ¶ˆæ¯ã€‚</p>    <p>5. ä¼ è¾“è¿æ¥è¢«é‡Šæ”¾ã€‚ è¯·æ³¨æ„ï¼Œåœ¨ä¸»æœº 2 ä¸Šå¾ˆå¯èƒ½è¿˜æœ‰å…¶ä»–çš„æœåŠ¡å™¨è¢«å…³è”åˆ°å…¶ä»–çš„ TSAP ä¸Šï¼Œå®ƒä»¬ä¹Ÿåœ¨ç­‰ å¾…ç»è¿‡åŒä¸€ä¸ª NSAP åˆ°è¾¾çš„å…¥å¢ƒè¿æ¥è¯·æ±‚ã€‚</p>  </div>     </div> </div><p><br/></p><h3 id="A-host-1ä¸Šçš„ç”¨æˆ·è¿›ç¨‹å¦‚ä½•çŸ¥é“é‚®ä»¶æœåŠ¡å™¨è¢«å…³è”åˆ°äº†TSAP-1522-ä¸Š"><a href="#A-host-1ä¸Šçš„ç”¨æˆ·è¿›ç¨‹å¦‚ä½•çŸ¥é“é‚®ä»¶æœåŠ¡å™¨è¢«å…³è”åˆ°äº†TSAP-1522-ä¸Š" class="headerlink" title="A. host 1ä¸Šçš„ç”¨æˆ·è¿›ç¨‹å¦‚ä½•çŸ¥é“é‚®ä»¶æœåŠ¡å™¨è¢«å…³è”åˆ°äº†TSAP 1522 ä¸Š"></a>A. host 1ä¸Šçš„ç”¨æˆ·è¿›ç¨‹å¦‚ä½•çŸ¥é“é‚®ä»¶æœåŠ¡å™¨è¢«å…³è”åˆ°äº†TSAP 1522 ä¸Š</h3><ol><li><p>å›ºå®šTSAP[å°†æŸäº›æœåŠ¡å™¨æ°¸ä¹…å…³è”åˆ°ä¸€äº›ç«¯å£ä¸Š]</p><p>http=TCP:80</p><p>https=TCP:443</p><p>RDP=TCP:3389</p><p>ftp=TCP:21</p><p>SMTP=TCP:25</p><p>DNS=UDP:53</p><p><img src="image-20200105235129774.png" srcset="/img/loading.gif" alt="image-20200105235129774" style="zoom:50%;" /></p></li><li><p>ç«¯å£æ˜ å°„ã€‚å­˜åœ¨ï¼ä¸ªç§°ä¸ºç«¯å£æ˜ å°„å™¨ï¼ˆ portmapperï¼‰çš„ç‰¹æ®Šè¿›ç¨‹ã€‚</p><ul><li>ä¸ºäº†æ‰¾åˆ°ä¸€ä¸ªç»™å®šæœåŠ¡åå­—ç›¸å¯¹åº”çš„ TSAP åœ°å€ï¼Œç”¨æˆ·éœ€è¦<strong><em><u>ä¸ç«¯å£æ˜ å°„å™¨[serverä¸Šï¼Ÿ]å»ºç«‹ä¸€ä¸ªè¿æ¥</u></em></strong></li><li>ç„¶åï¼Œç”¨æˆ·é€šè¿‡è¯¥è¿æ¥å‘é€ä¸€æ¡æ¶ˆæ¯æŒ‡å®šå®ƒæƒ³è¦çš„æœåŠ¡åå­—[å¦‚â€BitTorrentâ€]ï¼Œç«¯å£æ˜ å°„å™¨è¿”å›ç›¸åº”çš„ TSAP åœ°å€ã€‚</li><li>ä¹‹åï¼Œç”¨æˆ·é‡Šæ”¾å®ƒä¸ç«¯å£æ˜ å°„å™¨ä¹‹é—´çš„è¿æ¥ï¼Œ å†ä¸æ‰€éœ€çš„æœåŠ¡å»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥ã€‚</li></ul></li></ol><div class="note note-info">            <p>å½“ä¸€ä¸ªæ–°çš„æœåŠ¡è¢«åˆ›å»ºæ—¶ï¼Œå®ƒå¿…é¡»å‘ç«¯å£æ˜ å°„å™¨æ³¨å†Œï¼ŒæŠŠå®ƒçš„æœåŠ¡åå­—ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ª ASCII å­—ç¬¦ä¸²ã€‰å’Œ TSAP å‘Šè¯‰ç«¯å£æ˜ å°„å™¨ã€‚ç«¯å£æ˜ å°„å™¨å°†è¯¥ä¿¡æ¯è®°å½•åˆ°å®ƒ çš„å†…éƒ¨æ•°æ®åº“ä¸­ï¼Œæ‰€ä»¥ï¼Œä»¥åå½“ç”¨æˆ·æŸ¥è¯¢æ—¶ï¼Œå®ƒå°±çŸ¥é“ç­”æ¡ˆäº†ã€‚ç«¯å£æ˜ å°„å™¨çš„åŠŸèƒ½ç±»ä¼¼äºç”µè¯ç³»ç»Ÿä¸­çš„æŸ¥å·æ“ä½œå‘˜, æä¾›çš„æ˜¯ä»åå­—åˆ°ç”µè¯å·ç ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</p>          </div><div class="note note-success">            <p>ç”¨<code>netstat -an</code>å‘½ä»¤æŸ¥çœ‹åº”ç”¨ç›‘å¬çš„ç«¯å£</p><p><code>netstat -n</code>æŸ¥çœ‹å»ºç«‹çš„ä¼šè¯</p>          </div><center><img src="image-20191213095702465.png" srcset="/img/loading.gif" alt="image-20191213095702465" style="zoom:50%;" /></center><div class="note note-success">            <p><code>netstat -nb</code>æŸ¥çœ‹å»ºç«‹ä¼šè¯çš„è¿›ç¨‹</p>          </div><div class="note note-success">            <p><code>telnet 192.168.80.100 3389</code>æµ‹è¯•è¿œç¨‹è®¡ç®—æœºæŸä¸ªç«¯å£æ˜¯å¦æ‰“å¼€</p>          </div><h3 id="B-Many-server-processes-will-be-used-rarely-and-it-is-wasteful-to-have-them-active"><a href="#B-Many-server-processes-will-be-used-rarely-and-it-is-wasteful-to-have-them-active" class="headerlink" title="B. Many server processes will be used rarely and it is wasteful to have them active"></a>B. Many server processes will be used rarely and it is wasteful to have them active</h3><p><br/></p><div class="item">     <div class="item__image">     <img  src="image-20191209135340835.png" srcset="/img/loading.gif" alt="image-20191209135340835" style="zoom:40%;" />  </div>     <div class="item__content">     <div class = "item__header">      <h4>        initial connection protocol      </h4>    </div>  <div class="item__description">         <p>æ¯å°å¸Œæœ›å‘è¿œç¨‹ç”¨æˆ·æä¾›æœåŠ¡çš„æœºå™¨æœ‰ä¸€ä¸ªç‰¹æ®Šçš„è¿›ç¨‹æœåŠ¡å™¨ï¼ˆ process server ï¼‰å……å½“é‚£äº›ä¸é‚£ä¹ˆé¢‘ç¹ä½¿ç”¨çš„æœåŠ¡å™¨çš„ä»£ç†ã€‚å®ƒåœ¨åŒä¸€æ—¶é—´ç›‘å¬ä¸€ç»„ç«¯å£ï¼Œç­‰å¾…è¿æ¥è¯·æ±‚çš„åˆ°æ¥ã€‚ä¸€ä¸ªæœåŠ¡çš„æ½œåœ¨ç”¨æˆ·å‘å‡ºä¸€ä¸ªè¿æ¥è¯·æ±‚ï¼Œå¹¶æŒ‡å®šä»–ä»¬æ‰€éœ€æœåŠ¡çš„ TSAP åœ°å€ã€‚å¦‚æœè¯¥ TSAP åœ°å€ä¸Šæ²¡æœ‰æœåŠ¡å™¨æ­£ç­‰ç€ï¼Œåˆ™ä»–ä»¬å¾—åˆ°ä¸€æ¡ä¸è¿›ç¨‹æœåŠ¡å™¨çš„è¿æ¥ï¼Œå¦‚å›¾aæ‰€ç¤ºã€‚</p>    <p>åœ¨è·å–å…¥å¢ƒè¯·æ±‚åï¼Œè¿›ç¨‹æœåŠ¡å™¨æ´¾ç”Ÿå‡ºè¢«è¯·æ±‚çš„æœåŠ¡å™¨ï¼Œå…è®¸è¯¥æœåŠ¡å™¨ç»§æ‰¿ä¸ç”¨æˆ·çš„ç°æœ‰è¿æ¥ã€‚æ–°æœåŠ¡å™¨å®Œæˆè¦æ±‚çš„å·¥ä½œï¼Œè€Œè¿›ç¨‹æœåŠ¡å™¨å¯å›å»ç»§ç»­ç›‘å¬æ–°çš„è¿æ¥è¦æ±‚ï¼Œå¦‚å›¾bæ‰€ç¤ºã€‚è¿™ç§æ–¹æ³•åªé€‚ç”¨äºæœåŠ¡å™¨å¯æŒ‰éœ€åˆ›å»ºçš„åœºåˆã€‚</p>  </div>     </div> </div><h2 id="2-3-è¿æ¥å»ºç«‹"><a href="#2-3-è¿æ¥å»ºç«‹" class="headerlink" title="2.3 è¿æ¥å»ºç«‹"></a>2.3 è¿æ¥å»ºç«‹</h2><p>ä¸€ä¸ªå·¨å¤§çš„é—®é¢˜</p><div class="note note-warning">            <p><strong><em>delayed duplicates problem</em></strong></p>          </div><blockquote><p>ç”¨æˆ·å»ºç«‹äº†ä¸€ä¸ªä¸é“¶è¡Œçš„è¿æ¥ï¼Œå¹¶ä¸”å‘é€æ¶ˆæ¯å‘Šè¯‰é“¶è¡ŒæŠŠä¸€å¤§ç¬”é’±è½¬ç§»åˆ°ä¸€ä¸ªå¹¶ä¸æ˜¯å®Œå…¨å€¼å¾—ä¿¡èµ–çš„äººçš„è´¦æˆ·ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæ•°æ®åŒ…å†³å®šé‡‡å–ä¸€æ¡åˆ°ç›®çš„åœ°çš„é£æ™¯è·¯å¾„ï¼Œå»æ¢ç´¢ç½‘ç»œçš„æŸä¸ªååƒ»è§’è½ã€‚ç„¶åï¼Œå‘é€ç«¯è¶…æ—¶ï¼Œå¹¶ä¸”å†æ¬¡å‘é€è¿™äº›æ¶ˆæ¯ã€‚è¿™ä¸€æ¬¡ï¼Œæ•°æ®åŒ…é‡‡å–äº†ä¸€æ¡æœ€çŸ­è·¯å¾„ï¼Œå¹¶ä¸”å¾ˆå¿«è¢«äº¤ä»˜ç»™æ¥æ”¶ç«¯ï¼Œæ‰€ä»¥å‘é€ç«¯é‡Šæ”¾è¿æ¥ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæœ€ç»ˆåŸå…ˆçš„é‚£æ‰¹æ•°æ®åŒ…ç»ˆäºä»æŸä¸ªéšè—å¤„å†’äº†å‡ºæ¥ï¼Œå¹¶åˆ°è¾¾ç›®çš„åœ°ï¼Œè¦æ±‚é“¶è¡Œå»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥å’Œæ±‡æ¬¾ï¼ˆå†æ¬¡ï¼‰ã€‚é“¶è¡Œæ²¡æœ‰åŠæ³•å¾—çŸ¥è¿™äº›æ˜¯é‡å¤è¯·æ±‚ã€‚å®ƒå¿…é¡»å‡è®¾ è¿™æ˜¯ç¬¬äºŒä¸ªå¹¶ä¸”ç‹¬ç«‹çš„äº¤æ˜“è¯·æ±‚ï¼Œå› æ­¤å†æ¬¡è½¬é’±ã€‚</p></blockquote><div class="note note-success">            <p>Desired behavior</p>          </div><center><img src="image-20191210093758100.png" srcset="/img/loading.gif" alt="image-20191210093758100" style="zoom:30%;" /></center><h3 id="A-Solution-1"><a href="#A-Solution-1" class="headerlink" title="A. Solution 1"></a>A. Solution 1</h3><div class="note note-info">            <p>use sequence numbers</p>          </div><div class="hljs"><pre><code class="hljs python">packet arrival:  <span class="hljs-keyword">if</span>(packet.seq see before)  discard packet</code></pre></div><p><code>problems</code></p><ul><li><p>Possible wrap around of seqno</p></li><li><p>Client/Host or Server may crash</p></li></ul><center><img src="image-20191210094719473.png" srcset="/img/loading.gif" alt="image-20191210094719473" style="zoom:30%;" /></center><p>Problem : How to differentiate <strong><em><u>delay duplicate</u></em></strong> and <strong><em><u>new pkt with wrapped around seqno</u></em></strong>?</p><p>Idea: <strong><em><u>use time</u></em></strong></p><p>Two assumptionsthat simplifies the problem</p><ol><li><p>Time for seqno wrap around (T1) is typically large if, e.g., seqno is 32 bits long.</p></li><li><p>If pkt delays a relatively short time (T2&lt;T1), we can use time to differentiate</p><p>the two.</p></li></ol><h3 id="B-Solution-2"><a href="#B-Solution-2" class="headerlink" title="B. Solution 2"></a>B. Solution 2</h3><div class="hljs"><pre><code class="hljs python"><span class="hljs-keyword">if</span> (packet.seq see before <span class="hljs-keyword">and</span> time <span class="hljs-keyword">is</span> short (&lt;T))discard packet<span class="hljs-keyword">if</span> (packet.seq see before <span class="hljs-keyword">and</span> time <span class="hljs-keyword">is</span> large (&gt;T))accept packet</code></pre></div><center><img src="image-20191126102346530.png" srcset="/img/loading.gif" alt="image-20191126102346530" style="zoom: 33%;" /></center><h4 id="How-to-realize"><a href="#How-to-realize" class="headerlink" title="How to realize"></a>How to realize</h4><ol><li><p>Restrict packet lifetime</p><p>Packet lifetime can be restricted to a known maximum using one of the following techniques</p><ul><li><p>Restricted subnet design.</p></li><li><p>Putting a hop counter in each packet. å°†è·³è®¡æ•°å™¨ åˆå§‹åŒ–ä¸ºæŸä¸ªé€‚å½“çš„å€¼ï¼Œç„¶åæ¯æ¬¡æ•°æ®åŒ…è¢«è½¬å‘çš„æ—¶å€™è¯¥è·³è®¡æ•°å™¨å‡ä¸€ã€‚ç½‘ç»œåè®®ç®€å•ä¸¢å¼ƒæ‰é‚£äº›è·³è®¡æ•°å™¨å˜æˆé›¶çš„æ•°æ®åŒ…</p></li><li><p>Timestamping each packet (router synchronization required) æ¯ä¸ªæ•°æ®åŒ…æºå¸¦å®ƒçš„åˆ›å»ºæ—¶é—´ï¼Œè·¯ç”± å™¨è´Ÿè´£ä¸¢å¼ƒé‚£äº›å¹´é™è¶…è¿‡æŸä¸ªé¢„è®¾å€¼çš„æ•°æ®åŒ…ã€‚åä¸€ç§æ–¹æ³•è¦æ±‚åŒæ­¥æ‰€æœ‰è·¯ç”±å™¨çš„æ—¶é’Ÿ.</p></li></ul><p>å¼•å…¥å‘¨æœŸT, ä»–æ˜¯æ•°æ®æŠ¥å®é™…æœ€å¤§ç”Ÿå­˜æœŸçš„æŸä¸ªä¸å¤ªå¤§çš„å€æ•°ï¼š<script type="math/tex">T=n\times (pkt\;lifetime)</script></p><p>It is impossible to receive a delay duplicate after T</p></li><li><p>use time-of-day clock[æ—¥æ—¶é’Ÿ] to limit sending rate</p><p>æ ¸å¿ƒæ˜¯æºç«¯ç”¨åºå·ä½œä¸ºæ®µçš„æ ‡ç­¾ï¼Œä½¿å¾—è¯¥æ®µåœ¨ T ç§’å†…ä¸è¢«é‡ç”¨ã€‚ T çš„å¤§å°ä»¥åŠæ•°æ®åŒ…é€Ÿç‡ï¼ˆæ•°æ®åŒ…ï¼ç§’ï¼‰ç¡®å®šäº†åºå·çš„å¤§å°ã€‚è¿™æ ·ï¼Œåœ¨ä»»ä½•ç»™å®šçš„æ—¶é—´å†…åªèƒ½å‡ºç°ä¸€ä¸ªç»™å®šåºå·çš„æ•°æ®åŒ…ã€‚</p><p>ä¸ºäº†è§£å†³ä¸€å°æœºå™¨å´©æºƒä¹‹åä¸¢å¤±æ‰€æœ‰å†…å­˜çš„é—®é¢˜ï¼Œä¸€ç§å¯èƒ½çš„è§£å†³æ–¹æ³•æ˜¯è¦æ±‚ä¼ è¾“å®ä½“åœ¨æœºå™¨å´©æºƒä¹‹åç©ºé—² T ç§’ã€‚è¿™æ®µç©ºé—²æœŸå°†ç¡®ä¿æ‰€æœ‰è€çš„æ®µå…¨éƒ¨æ­»æ‰ï¼Œå› è€Œå‘é€ç«¯å¯ä»¥å¯ç”¨ä»»ä½•ä¸€ä¸ªåºå·å€¼ã€‚ç„¶è€Œï¼Œåœ¨å¤æ‚çš„äº’è”ç½‘ç»œä¸­ï¼Œ T å¯èƒ½ä¼šå¾ˆå¤§ï¼Œå› æ­¤è¿™ç§ç­–ç•¥ä¸å…·å¸å¼•åŠ›ã€‚</p><p>ç›¸åï¼Œ Tomlinson å»ºè®®æ¯å°ä¸»æœºéƒ½é…å¤‡ä¸€ä¸ªæ—¥æ—¶é’Ÿï¼ˆtime-of-day clock ï¼‰ã€‚ä¸åŒä¸»æœºä¸Šçš„</p><ul><li>æ—¶é’Ÿä¸éœ€è¦åŒæ­¥ã€‚å‡å®šæ¯ä¸ªæ—¶é’Ÿå‡é‡‡ç”¨äº†<strong><em><u>äºŒè¿›åˆ¶è®¡æ•°å™¨</u></em></strong>çš„å½¢å¼ã€‚è¯¥è®¡æ•°å™¨ä»¥ç»Ÿä¸€çš„æ—¶é—´é—´éš”é€’å¢è‡ªå·±ï¼Œ</li><li>è®¡æ•°å™¨çš„ä½æ•°å¿…é¡»ç­‰äºæˆ–è€…è¶…è¿‡åºå·çš„ä½æ•°ã€‚</li><li>å³ä½¿<strong><em><u>ä¸»æœºåœæœºæ—¶é’Ÿä¹Ÿä¸åœä¸‹</u></em></strong>ï¼Œå®ƒå°†æŒç»­ä¸åœåœ°è¿è¡Œã€‚</li></ul><p>å½“å»ºç«‹ä¸€ä¸ªè¿æ¥æ—¶ï¼Œæ—¶é’Ÿçš„ä½ k ä½è¢«ç”¨äºåŒæ ·æ˜¯ kä½çš„åˆå§‹åºå·ã€‚æ¯ä¸ªè¿æ¥éƒ½ä»ä¸€ä¸ªå®Œå…¨ä¸åŒçš„åˆå§‹åºå·å¼€å§‹å¯¹å®ƒçš„æ®µè¿›è¡Œç¼–å·ã€‚åºå·ç©ºé—´åº”è¯¥è¶³å¤Ÿå¤§ï¼Œä»¥ä¾¿å½“åºå·å›ç»•æ—¶ï¼ŒåŸæ¥é‚£äº›å…·æœ‰è€åºå·çš„æ®µéƒ½å·±ç»æ¶ˆå¤±ã€‚</p></li></ol><p><strong><em>forbidden region</em></strong></p><div class="item">     <div class="item__image">    <img src="image-20191211220455615.png" srcset="/img/loading.gif" alt="image-20191211220455615" style="zoom:50%;" />  </div>     <div class="item__content">     <div class = "item__header">      <h4>        Forbidden region      </h4>    </div>  <div class="item__description">         <p>Assume the same bits of seqno and time-of-day clock</p>    <p>      Two time instants, t and t', t << t'    </p>    <p>      If we allow legitimate reuse of the same seqno at t and t', we should ensure that t'-t >T </p>  </div>     </div> </div><div class="note note-warning">            <p>ä¸ºäº†é˜²æ­¢åºå·è¿›å…¥forbidden regionï¼Œæˆ‘ä»¬å¿…é¡»å…¼é¡¾ä¸¤ä¸ªæ–¹é¢ã€‚</p>          </div><center><img src="image-20191211222453374.png" srcset="/img/loading.gif" alt="image-20191211222453374" style="zoom:40%;" /></center><blockquote><ul><li>å¦‚æœä¸€å°ä¸»æœºåœ¨ä¸€ä¸ªæ–°æ‰“å¼€çš„è¿æ¥ä¸Šå‘é€å¾—å¤ªå¿«ï¼Œåˆ™å®é™…åºå·ä¸æ—¶é—´çš„æ›²çº¿å¯èƒ½æ¯”åˆå§‹åºå·ä¸æ—¶é—´çš„æ›²çº¿è¿˜è¦é™¡ï¼Œå¯¼è‡´åºå·è¿›å…¥forbidden regionã€‚<ul><li>ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µå‡ºç°ï¼Œæ¯ä¸ªè¿æ¥ä¸Šçš„æœ€å¤§æ•°æ®é€Ÿç‡æ˜¯æ¯ä¸ªæ—¶é’Ÿæ»´ç­”ä¸€æ¬¡å‘é€ä¸€æ®µã€‚è¿™åŒæ—¶ä¹Ÿæ„å‘³ç€åœ¨æœºå™¨å´©æºƒå¹¶é‡å¯åŠ¨ä¹‹åï¼Œ ä¼ è¾“å®ä½“å¿…é¡»ç­‰å¾…æ—¶é’Ÿæ»´ç­”ï¼Œæ‰èƒ½æ‰“å¼€ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œä»¥å…åŒæ ·çš„åºå·è¢«ä½¿ç”¨ä¸¤æ¬¡ã€‚è¿™ä¸¤ ç‚¹éƒ½å€¾å‘äºä½¿ç”¨çŸ­çš„æ—¶é’Ÿæ»´ç­” (1 å¾®ç§’ç”šè‡³æ›´çŸ­ï¼‰ã€‚ä½†æ˜¯ç›¸å¯¹åºå·æ¥è¯´æ—¶é’Ÿä¸èƒ½æ»´ç­”å¾—å¤ªå¿«ã€‚ å‡è®¾æ—¶é’Ÿé€Ÿç‡ä¸º Cï¼Œåºå·ç©ºé—´å¤§å°ä¸º Sï¼Œåˆ™æœ‰ S/C&gt;Tï¼Œæ‰èƒ½ä½¿å¾—åºå·ä¸è‡³äºå›ç»•å¾—å¤ªå¿«ã€‚</li></ul></li><li>å¦‚æœä»¥ä»»ä½•ä½äºæ—¶é’Ÿé€Ÿç‡çš„æ•°æ®ç‡å‘é€ï¼Œå®é™…ä½¿ç”¨çš„åºå·ä¸æ—¶é—´ä¹‹é—´çš„æ›²çº¿æœ€ç»ˆä¼šä»å·¦è¾¹è¿›å…¥åˆ°ç¦æ­¢åŒºåŸŸä¸­ã€‚å®é™…åºå·æ›²çº¿çš„æ–œåº¦è¶Šå¤§ï¼Œåˆ™è¿™ç§äº‹ä»¶å‘ç”Ÿå¾—è¶Šæ™šã€‚<ul><li>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œåº”è¯¥é™åˆ¶è¿æ¥åºå·é€’å¢çš„é€Ÿåº¦ä¸èƒ½å¤ªæ…¢ï¼ˆæˆ–è¿æ¥å¯èƒ½ä¼šæŒç»­å¤šä¹…ï¼‰ã€‚</li></ul></li></ul></blockquote><center><img src="image-20191126102810011.png" srcset="/img/loading.gif" alt="image-20191126102810011" style="zoom: 33%;" /></center><blockquote><p>çœ‹ä¸€é“ä¾‹é¢˜</p><p>In a network whose max segment is 128 bytes, max segment lifetime is 30 sec, and has 8 bit sequence numbers, what is the maximum data rate per connection?</p><p><strong>Answer</strong></p><p>è¿™ä¸ªåŒ…æ˜¯0å·ï¼Œåˆ™åœ¨30secé‡Œé¢å¯ä»¥ä»0å·å‘åˆ°255å·ï¼Œä¸€å…±256ä¸ªåŒ…</p><p>number of bits=256 Ã— 128 Ã— 8 = 262,144 bits<br>The data rate =262,144 bits /30 sec=8738 bps. </p></blockquote><p>ä»¥ä¸Šå†…å®¹è§£å†³äº†delay duplicate packetsçš„é—®é¢˜ã€‚æ¥ä¸‹æ¥å°†å…¶æŠ•å…¥åº”ç”¨</p><h3 id="Three-way-handshake"><a href="#Three-way-handshake" class="headerlink" title="Three-way handshake"></a>Three-way handshake</h3><div class="item">     <div class="item__image">   <img src="image-20191211230251099.png" srcset="/img/loading.gif" alt="image-20191211230251099" style="zoom:45%;" />  </div>     <div class="item__content">     <div class = "item__header">      <h4>       Connection Establishment(1)      </h4>    </div>  <div class="item__description">      <p> a. ä¸»æœº1é€‰æ‹©ä¸€ä¸ªåºå·xï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ªåŒ…å«xçš„CONNECTION REQUESTæ®µç»™ä¸»æœº2ã€‚</p>    <p>      b. ä¸»æœº2å›åº”ä¸€ä¸ªACKæ®µä½œä¸ºå¯¹xçš„ç¡®è®¤ï¼Œå¹¶ä¸”å®£å‘Šå®ƒè‡ªå·±çš„åˆå§‹åºå·yã€‚    </p>    <p>      c. æœ€åï¼Œä¸»æœº1åœ¨å®ƒå‘é€çš„ç¬¬ä¸€ä¸ªæ•°æ®æ®µä¸­ï¼Œå¯¹ä¸»æœº 2 é€‰æ‹©çš„åˆå§‹åºå·è¿›è¡Œç¡®è®¤ã€‚</p>  </div>     </div> </div><div class="item">     <div class="item__image">   <img src="image-20191211230545824.png" srcset="/img/loading.gif" alt="image-20191211230545824" style="zoom:35%;" />  </div>     <div class="item__content">     <div class = "item__header">      <h4>        Connection Establishment(2)      </h4>    </div>  <div class="item__description">      <p> a. ç¬¬ä¸€ä¸ªæ®µæ˜¯ä¸€ä¸ªæ—§è¿æ¥ä¸Šè¢«å»¶è¿Ÿäº†çš„é‡å¤ CONNECTION REQUESTã€‚è¯¥æ®µåˆ°è¾¾ä¸»æœº 2, è€Œä¸»æœº 1 å¯¹æ­¤å¹¶ä¸çŸ¥æƒ…ã€‚</p>    <p>      b. ä¸»æœº 2 å¯¹è¿™ä¸ªæ®µçš„å›åº”æ˜¯ç»™ä¸»æœº 1 å‘é€ä¸€ä¸ª ACK æ®µï¼Œå…¶æ•ˆæœç›¸ å½“äºéªŒè¯ä¸»æœº 1 æ˜¯å¦çœŸçš„è¯·æ±‚å»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥ã€‚    </p>    <p>      c. å½“ä¸»æœº 1 æ‹’ç»äº†ä¸»æœº 2 çš„è¿æ¥å»ºç«‹è¯·æ±‚åï¼Œä¸»æœº 2 å°±æ„è¯†åˆ°è¢«ä¸€ä¸ªå»¶è¿Ÿçš„é‡å¤æ®µæ‰€æ¬ºéª—äº†ï¼Œäºæ˜¯æ”¾å¼ƒè¿æ¥ã€‚è¿™æ · p ä¸€ä¸ªå»¶è¿Ÿçš„é‡ å¤æ®µæ²¡æœ‰é€ æˆä»»ä½•ä¼¤å®³ã€‚</p>  </div>     </div> </div><div class="item">     <div class="item__image">   <img src="image-20191211230935460.png" srcset="/img/loading.gif" alt="image-20191211230935460" style="zoom:35%;" />  </div>     <div class="item__content">     <div class = "item__header">      <h4>        Connection Establishment(3)      </h4>    </div>  <div class="item__description">      <p> a. ç¬¬ä¸€ä¸ªæ®µæ˜¯ä¸€ä¸ªæ—§è¿æ¥ä¸Šè¢«å»¶è¿Ÿäº†çš„é‡å¤ CONNECTION REQUESTã€‚è¯¥æ®µåˆ°è¾¾ä¸»æœº 2, è€Œä¸»æœº 1 å¯¹æ­¤å¹¶ä¸çŸ¥æƒ…ã€‚</p>    <p>      b. ä¸»æœº 2 å¯¹è¿™ä¸ªæ®µçš„å›åº”æ˜¯ç»™ä¸»æœº 1 å‘é€ä¸€ä¸ª ACK æ®µï¼Œå…¶æ•ˆæœç›¸å½“äºéªŒè¯ä¸»æœº 1 æ˜¯å¦çœŸçš„è¯·æ±‚å»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥ã€‚    </p>    <p>      c. å½“ç¬¬äºŒä¸ªå»¶è¿Ÿçš„æ®µåˆ°è¾¾ä¸»æœº 2 æ—¶ï¼Œä¸»æœº 2 æ³¨æ„åˆ°ç¡®è®¤çš„æ˜¯ z è€Œä¸æ˜¯ yï¼Œè¿™ä¸ªäº‹å®å‘Šè¯‰ä¸»æœº 2 è¿™ä¹Ÿæ˜¯ä¸€ä¸ªè€çš„é‡å¤æ•°æ®åŒ…ã€‚</p>  </div>     </div> </div><h2 id="2-4-è¿æ¥é‡Šæ”¾"><a href="#2-4-è¿æ¥é‡Šæ”¾" class="headerlink" title="2.4 è¿æ¥é‡Šæ”¾"></a>2.4 è¿æ¥é‡Šæ”¾</h2><center><table>  <tr>    <td><div class="card">      <div class="card__content">         <div class="card__header">             <h4>Asymmetric release</h4>         </div>         <p>å½“ä¸€æ–¹æŒ‚æœºåï¼Œè¿æ¥å°±è¢«ä¸­æ–­äº†</p>     <p>      å¾ˆå†’å¤±ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±    </p>  </div></div></td>  <td><div class="card">     <div class="card__content">         <div class="card__header">             <h4>Symmetric release</h4>         </div>         <p>æŠŠè¿æ¥çœ‹æˆä¸¤ä¸ªç‹¬ç«‹çš„å•å‘è¿æ¥ï¼Œè¦æ±‚å•ç‹¬é‡Šæ”¾æ¯ä¸€ä¸ªå•å‘è¿æ¥ï¼                           </p>    </div> </div></td>  </tr></table></center><p>Two army problem, å®Œç¾çš„é‡Šæ”¾æ˜¯ä¸å¯èƒ½çš„</p><p>ä¹Ÿé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹åè®®</p><div class="item">     <div class="item__image">   <img src="image-20191211234832859.png" srcset="/img/loading.gif" alt="image-20191211234832859" style="zoom:50%;" />  </div>     <div class="item__content">     <div class = "item__header">      <h4>        Normal case of three-way handshake      </h4>    </div>  <div class="item__description">      <p> a. ä¸€ä¸ªç”¨æˆ·å‘é€ä¸€ä¸ª DR (DISCONNECTION REQUEST ï¼‰æ®µæ¥å¯åŠ¨é‡Šæ”¾è¿æ¥è¿‡ç¨‹</p>    <p>      b. å½“è¯¥æ®µåˆ°è¾¾å¯¹æ–¹ï¼Œæ¥æ”¶ç«¯ä¹Ÿå‘å›ä¸€ä¸ªDRæ®µï¼Œå¹¶å¯åŠ¨ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè®¾ç½®è®¡æ—¶å™¨çš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢å®ƒçš„DRä¸¢å¤±ã€‚    </p>    <p>      c. å½“è¿™ä¸ª DR åˆ°è¾¾æ—¶ï¼Œæœ€åˆçš„å‘ é€ç«¯å‘å›ä¸€ä¸ª ACK æ®µï¼Œå¹¶ä¸”é‡Šæ”¾è¿æ¥</p>    <p>      d. å½“ ACK è¿”å›åï¼Œæ¥æ”¶ç«¯ä¹Ÿé‡Šæ”¾è¿æ¥ã€‚é‡Šæ”¾ ä¸€ä¸ªè¿æ¥æ„å‘³ç€ä¼ è¾“å®ä½“å°†æœ‰å…³è¯¥è¿æ¥çš„ä¿¡æ¯ä»å®ƒçš„å†…éƒ¨è¡¨ï¼ˆè®°å½•äº†æ‰€æœ‰å½“å‰å·±æ‰“å¼€çš„è¿ æ¥ï¼‰ä¸­åˆ é™¤ï¼Œå¹¶ä¸”é€šçŸ¥è¯¥è¿æ¥çš„æ‰€æœ‰è€…ï¼ˆä¼ è¾“ç”¨æˆ·ï¼‰    </p>  </div>     </div> </div><div class="item">     <div class="item__image">   <img src="image-20191211235148092.png" srcset="/img/loading.gif" alt="image-20191211235148092" style="zoom:50%;" />  </div>     <div class="item__content">     <div class = "item__header">      <h4>        Final ACK lost      </h4>    </div>  <div class="item__description">      <p> å¦‚æœæœ€åçš„ ACK æ®µè¢«ä¸¢å¤±, å¯ä»¥é€šè¿‡ä¸€ä¸ªè®¡æ—¶å™¨æ¥è¡¥æ•‘ã€‚å½“è®¡æ—¶å™¨è¶…æ—¶ï¼Œæ— è®ºå¦‚ä½•è¿æ¥éƒ½è¦è¢«é‡Šæ”¾ã€‚</p>  </div>     </div> </div><div class="item">     <div class="item__image">   <img src="image-20191211235320953.png" srcset="/img/loading.gif" alt="image-20191211235320953" style="zoom:50%;" />  </div>     <div class="item__content">     <div class = "item__header">      <h4>        Response lost      </h4>    </div>  <div class="item__description">      <p> ç°åœ¨è€ƒè™‘ç¬¬äºŒä¸ª DR è¢«ä¸¢å¤±çš„æƒ…å½¢ã€‚å‘èµ·é‡Šæ”¾è¿æ¥çš„ç”¨æˆ·æ¥æ”¶ä¸åˆ°æœŸæœ›çš„å“åº”ï¼Œæ‰€ä»¥ å®ƒå°†è¶…æ—¶ï¼Œäºæ˜¯å†æ¬¡å°è¯•é‡Šæ”¾è¿æ¥ã€‚</p>  </div>     </div> </div><div class="item">     <div class="item__image">   <img src="image-20191211235440547.png" srcset="/img/loading.gif" alt="image-20191211235440547" style="zoom:50%;" />  </div>     <div class="item__content">     <div class = "item__header">      <h4>        Response lost and subsequent DRs Lost      </h4>    </div>  <div class="item__description">      <p> ä½†ç”±äºä¸¢å¤±æ®µçš„åŸå› ï¼Œæ‰€æœ‰é‡ä¼  DR çš„å°è¯•éƒ½å¤±è´¥ã€‚ç»è¿‡ N æ¬¡é‡è¯•ä¹‹åï¼Œå‘é€ç«¯æ”¾å¼ƒäº†ï¼Œå¹¶ä¸”é‡Šæ”¾è¿æ¥ã€‚åŒæ—¶ï¼Œæ¥æ”¶ç«¯è¶…æ—¶ï¼Œäºæ˜¯é€€å‡ºè¿æ¥ã€‚</p>  </div>     </div> </div><div class="note note-success">            <p>Automatic disconnect rule</p>          </div><ul><li><p>If no segments have arrived for a certain number of seconds, the connection is then automatically disconnect.</p></li><li><p>Thus, if one side ever disconnects, the other side will detect the lack of activity and also disconnect.</p></li></ul><p><br/></p><h2 id="2-5-error-control-and-flow-control"><a href="#2-5-error-control-and-flow-control" class="headerlink" title="2.5 error control and flow control"></a>2.5 error control and flow control</h2><ul><li><p>Error detection:</p><ul><li><p>The link layer checksum protects a frame while it crosses a single link.</p></li><li><p>The transport layer checksum protects a segment while it crosses an entire network path. It is an end-to-end check, which is not the same as having a check on every link.</p></li></ul></li></ul><p>End-to-end argument: transport check is essential for correctness while link layer check is valuable for performance.</p><p><br/></p><h2 id="2-6-å¤šè·¯å¤ç”¨"><a href="#2-6-å¤šè·¯å¤ç”¨" class="headerlink" title="2.6 å¤šè·¯å¤ç”¨"></a>2.6 å¤šè·¯å¤ç”¨</h2><ul><li><p><strong><em>å¤šè·¯å¤ç”¨</em></strong>ï¼ˆæˆ–å¤šä¸ªä¼šè¯å…±äº«è¿æ¥ã€è™šç”µè·¯å’Œç‰©ç†é“¾è·¯ï¼‰åœ¨ç½‘ç»œä½“ç³»ç»“æ„çš„ä¸åŒå±‚æ¬¡å‘æŒ¥ç€ä½œç”¨ã€‚åœ¨ä¼ è¾“å±‚ï¼Œæœ‰å‡ ç§æ–¹å¼éœ€è¦å¤šè·¯å¤ç”¨ã€‚</p><ul><li>å¦‚æœä¸»æœºåªæœ‰ä¸€ä¸ªç½‘ç»œåœ°å€å¯ç”¨ï¼Œ åˆ™è¯¥æœºå™¨ä¸Šçš„æ‰€æœ‰ä¼ è¾“è¿æ¥éƒ½å¿…é¡»ä½¿ç”¨è¿™ä¸ªåœ°å€ã€‚å½“åˆ°è¾¾äº†ä¸€ä¸ªæ®µï¼Œå¿…é¡»æœ‰æŸç§æ–¹å¼å‘ŠçŸ¥ æŠŠå®ƒäº¤ç»™å“ªä¸ªè¿›ç¨‹å¤„ç†ã€‚å›¾ä¸­ï¼Œ 4 ä¸ªç‹¬ç«‹çš„ä¼ è¾“è¿æ¥éƒ½ä½¿ç”¨äº†ç›¸åŒçš„ç½‘ç»œè¿æ¥ï¼ˆå³ IP åœ°å€ï¼‰åˆ°è¾¾è¿œç¨‹ä¸»æœºã€‚</li></ul></li><li><p><strong><em>é€†å‘å¤šè·¯å¤ç”¨</em></strong>ï¼Œå‡è®¾ä¸€å°ä¸»æœºæœ‰å¤šæ¡ç½‘ç»œè·¯å¾„å¯ç”¨ã€‚å¦‚æœç”¨æˆ·éœ€è¦çš„å¸¦å®½å’Œå¯é æ€§æ¯”å…¶ä¸­ä»»ä½•ä¸€æ¡è·¯å¾„æ‰€èƒ½æä¾›çš„è¿˜è¦å¤šï¼Œé‚£ä¹ˆä¸€ç§è§£å†³åŠæ³•æ˜¯ä»¥è½®è¯¢çš„æ–¹å¼æŠŠä¸€ä¸ªè¿æ¥ä¸Šçš„æµé‡åˆ†æ‘Šåˆ°å¤šæ¡ç½‘ç»œè·¯å¾„ã€‚</p></li></ul><center><img src="image-20191212000741805.png" srcset="/img/loading.gif" alt="image-20191212000741805" style="zoom:50%;" /></center><p><br/></p><h1 id="3-Congestion-Control"><a href="#3-Congestion-Control" class="headerlink" title="3. Congestion Control"></a>3. Congestion Control</h1><h1 id="4-The-Internet-Transport-Protocolsï¼šUDP"><a href="#4-The-Internet-Transport-Protocolsï¼šUDP" class="headerlink" title="4. The Internet Transport Protocolsï¼šUDP"></a>4. The Internet Transport Protocolsï¼šUDP</h1><p>TCP ä¸ UCPçš„åº”ç”¨åœºæ™¯</p><ul><li>TCP: éœ€è¦å°†ä¼ è¾“çš„æ–‡ä»¶åˆ†æ®µ å»ºç«‹ä¼šè¯ï¼Œå¯é ä¼ è¾“ï¼Œæµé‡æ§åˆ¶  QQä¼ æ–‡ä»¶</li><li>UDPï¼š ä¸€ä¸ªæ•°æ®åŒ…å°±èƒ½å®Œæˆæ•°æ®é€šä¿¡ ä¸åˆ†æ®µ ä¸éœ€è¦å»ºç«‹ä¼šè¯ ä¸éœ€è¦æµé‡æ§åˆ¶ ä¸å¯é ä¼ è¾“ QQèŠå¤©</li></ul><p><br/></p><h2 id="4-1-UDP-overview"><a href="#4-1-UDP-overview" class="headerlink" title="4.1 UDP overview"></a>4.1 UDP overview</h2><center><img src="image-20191213103709184.png" srcset="/img/loading.gif" alt="image-20191213103709184" style="zoom:50%;" /></center><p>UDP lengthæ˜¯headerå’Œpayloadä¸¤éƒ¨åˆ†çš„æ€»é•¿åº¦ï¼Œä»¥byteä¸ºå•ä½</p><center><img src="image-20191213103006241.png" srcset="/img/loading.gif" alt="image-20191213103006241" style="zoom:50%;" /></center><p>åœ¨è®¡ç®—æ£€éªŒå’Œæ—¶ï¼Œä¸´æ—¶æŠŠâ€œä¼ªé¦–éƒ¨â€å’Œ UDP ç”¨æˆ·æ•°æ®æŠ¥è¿æ¥åœ¨ä¸€èµ·ã€‚ä¼ªé¦–éƒ¨ä»…ä»…æ˜¯ä¸ºäº†è®¡ç®—æ£€éªŒå’Œã€‚</p><h4>UDP checksumè®¡ç®—è¿‡ç¨‹</h4>    <p><img src="image-20191213103042682.png" srcset="/img/loading.gif" alt="image-20191213103042682" style="zoom:40%;" /><img src="image-20191213110622335.png" srcset="/img/loading.gif" alt="image-20191213110622335" style="zoom:40%;" /></p><h2 id="4-2-RPC-Remote-Procedure-Call"><a href="#4-2-RPC-Remote-Procedure-Call" class="headerlink" title="4.2 RPC[Remote Procedure Call]"></a>4.2 RPC[Remote Procedure Call]</h2><p>å®¢æˆ·-æœåŠ¡å™¨ RPC æ˜¯ UDP è¢«å¹¿æ³›åº”ç”¨çš„ä¸€ä¸ªé¢†åŸŸï¼Œ</p><div class="note note-success">            <p>RPC (Remote Procedure Call) allows programs to call procedures located on remote hosts.</p>          </div><blockquote><p>RPC èƒŒåçš„æ€æƒ³æ˜¯å°½å¯èƒ½åœ°ä½¿ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨çœ‹èµ·æ¥åƒæœ¬åœ°è¿‡ç¨‹è°ƒç”¨ä¸€æ ·ã€‚</p><p>åœ¨æœ€ç®€å•çš„å½¢å¼ä¸­ï¼Œä¸ºäº†è°ƒç”¨ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹ï¼Œå®¢æˆ·ç¨‹åºå¿…é¡»ç»‘å®šï¼ˆé“¾æ¥ï¼‰åˆ°ä¸€ä¸ªå°çš„åº“è¿‡ç¨‹ï¼Œè¿™ ä¸ªåº“è¿‡ç¨‹ç§°ä¸ºå®¢æˆ·å­˜æ ¹[client stub]ï¼Œå®ƒä»£è¡¨äº†å®¢æˆ·åœ°å€ç©ºé—´ä¸­çš„æœåŠ¡å™¨è¿‡ç¨‹ã€‚ç±»ä¼¼åœ°ï¼ŒæœåŠ¡å™¨éœ€è¦ç»‘å®šåˆ°ä¸€ä¸ªç§°ä¸ºæœåŠ¡å™¨å­˜æ ¹[server stub]çš„è¿‡ç¨‹ã€‚æ­£æ˜¯è¿™äº›è¿‡ç¨‹ï¼Œéšè—äº†å®¢æˆ·æœºä¸åœ¨æœ¬åœ°è°ƒç”¨æœåŠ¡å™¨çš„äº‹å®ã€‚</p></blockquote><center><img src="image-20191213122858021.png" srcset="/img/loading.gif" alt="image-20191213122858021" style="zoom:50%;" /></center><h3 id="A-æ‰§è¡ŒRPCçš„å®é™…æ­¥éª¤"><a href="#A-æ‰§è¡ŒRPCçš„å®é™…æ­¥éª¤" class="headerlink" title="A. æ‰§è¡ŒRPCçš„å®é™…æ­¥éª¤"></a>A. æ‰§è¡ŒRPCçš„å®é™…æ­¥éª¤</h3><ol><li>clientè°ƒç”¨client stubï¼Œå‚æ•°å…¥æ ˆ</li><li>client stubå°†å‚æ•°å°è£…åˆ°ä¸€ä¸ªæ¶ˆæ¯ä¸­ï¼Œç„¶åé€šè¿‡ç³»ç»Ÿè°ƒç”¨å‘é€æ¶ˆæ¯ã€‚å‚æ•°å°è£…çš„è¿‡ç¨‹ç§°ä¸ºåˆ—é›†[marshalling]</li><li>kernelå°†æ¶ˆæ¯ä»client machineå‘åˆ°server machine</li><li>kernelå°†å…¥å¢ƒæ•°æ®åŒ…ä¼ é€’ç»™server stub</li><li>server stubåˆ©ç”¨æ•£é›†[unmarshaled]è°ƒç”¨çš„å‚æ•°è°ƒç”¨æœåŠ¡å™¨è¿‡ç¨‹</li><li>è°ƒç”¨çš„ç»“æœæ²¿ç€ç›¸åçš„æ–¹å‘æŒ‰ç…§åŒæ ·çš„è·¯å¾„ä¼ é€’ã€‚</li></ol><h3 id="B-RPCé™·é˜±"><a href="#B-RPCé™·é˜±" class="headerlink" title="B. RPCé™·é˜±"></a>B. RPCé™·é˜±</h3><ul><li><p>The use of pointer parameters. </p></li><li><p>Some problems for weakly typed languages (The length of an array).</p></li><li><p>It is not always possible to deduce the types of the parameters, not even from a formal specification or the code itself. [printf]</p></li><li><p>The use of global variables.</p></li></ul><h2 id="4-3-RTP-Real-time-transport-protocol"><a href="#4-3-RTP-Real-time-transport-protocol" class="headerlink" title="4.3 RTP[Real-time transport protocol]"></a>4.3 RTP[Real-time transport protocol]</h2><p>UDP çš„å¦ä¸€ä¸ªåº”ç”¨é¢†åŸŸæ˜¯å®æ—¶å¤šåª’ä½“åº”ç”¨</p><div class="note note-success">            <p>RTP is a transport protocol realized in the application layer.</p>          </div><h3 id="RTPçš„åŸºæœ¬åŠŸèƒ½ï¼š"><a href="#RTPçš„åŸºæœ¬åŠŸèƒ½ï¼š" class="headerlink" title="RTPçš„åŸºæœ¬åŠŸèƒ½ï¼š"></a>RTPçš„åŸºæœ¬åŠŸèƒ½ï¼š</h3><div class="note note-info">            <p>RTP is to multiplex several real-time data streams onto a single stream of UDP packets and unicast or multicast the UDP packets.</p>          </div><h3 id="RTPæ ¼å¼åŒ…å«äº†å‡ ç§æœ‰åŠ©äºæ¥æ”¶ç«¯å¤„äºæµåª’ä½“ä¿¡æ¯çš„ç‰¹æ€§"><a href="#RTPæ ¼å¼åŒ…å«äº†å‡ ç§æœ‰åŠ©äºæ¥æ”¶ç«¯å¤„äºæµåª’ä½“ä¿¡æ¯çš„ç‰¹æ€§" class="headerlink" title="RTPæ ¼å¼åŒ…å«äº†å‡ ç§æœ‰åŠ©äºæ¥æ”¶ç«¯å¤„äºæµåª’ä½“ä¿¡æ¯çš„ç‰¹æ€§"></a>RTPæ ¼å¼åŒ…å«äº†å‡ ç§æœ‰åŠ©äºæ¥æ”¶ç«¯å¤„äºæµåª’ä½“ä¿¡æ¯çš„ç‰¹æ€§</h3><ul><li>Each RTP packet is given a <u>number</u> one higher than its predecessor. RTP has no flow control, no error control, no acknowledgements, and no retransmission support.</li><li>Each RTP payload may contain multiple samples and they can <u>be coded any way that the application wants</u>. For example a single audio stream may be encoded as 8-bit PCM samples at 8kHz, delta encoding, predictive encoding  GSM encoding, MP3, and so on.</li><li>RTP allows timestamping.</li></ul><center><img src="image-20191213124846490.png" srcset="/img/loading.gif" alt="image-20191213124846490" style="zoom:50%;" /></center><h3 id="RTCP-Realtime-Transport-Control-Protocol"><a href="#RTCP-Realtime-Transport-Control-Protocol" class="headerlink" title="RTCP[Realtime Transport Control Protocol]"></a>RTCP[Realtime Transport Control Protocol]</h3><h4 id="A-RTCPä¸€äº›ç‰¹æ€§"><a href="#A-RTCPä¸€äº›ç‰¹æ€§" class="headerlink" title="A. RTCPä¸€äº›ç‰¹æ€§"></a>A. RTCPä¸€äº›ç‰¹æ€§</h4><ul><li><p>Does not transport any data</p></li><li><p>To handle feedback, synchronization, and the user interface</p></li><li><p>To handle interstream synchronization.</p></li><li><p>To name the various sources.</p></li></ul><h4 id="B-å¸¦æœ‰ç¼“å†²å’ŒæŠ–åŠ¨æ§åˆ¶çš„æ’­æ”¾"><a href="#B-å¸¦æœ‰ç¼“å†²å’ŒæŠ–åŠ¨æ§åˆ¶çš„æ’­æ”¾" class="headerlink" title="B. å¸¦æœ‰ç¼“å†²å’ŒæŠ–åŠ¨æ§åˆ¶çš„æ’­æ”¾"></a>B. å¸¦æœ‰ç¼“å†²å’ŒæŠ–åŠ¨æ§åˆ¶çš„æ’­æ”¾</h4><p><strong>Smoothing the output stream by buffering packets</strong></p><p>ä¸€æ—¦åª’ä½“ä¿¡æ¯åˆ°è¾¾æ¥æ”¶ç«¯ï¼Œå®ƒå¿…é¡»åœ¨åˆé€‚çš„æ—¶é—´æ’­æ”¾å‡ºæ¥ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ—¶é—´ä¸æ˜¯ RTP åŒ…åˆ°è¾¾æ¥æ”¶ç«¯çš„æ—¶é—´ï¼Œå› ä¸ºæ•°æ®åŒ…é€šè¿‡ç½‘ç»œä¼ è¾“æ‰€éœ€è¦çš„æ—¶é—´ç•¥æœ‰ä¸åŒã€‚å³ä½¿åœ¨å‘é€ç«¯ï¼Œæ•°æ®åŒ…ä»¥æ­£ç¡®çš„æ—¶é—´é—´éš”è¢«ä¾æ¬¡æ³¨å…¥ç½‘ç»œï¼Œå®ƒä»¬åˆ°è¾¾æ¥æ”¶ç«¯çš„ç›¸å¯¹æ—¶é—´ä¹Ÿä¸åŒã€‚è¿™ç§å»¶è¿Ÿçš„å˜åŒ–ç§°ä¸º<strong><em><u>æŠ–åŠ¨[jitter</u>]</em></strong>ã€‚å³ä½¿æ˜¯å°‘é‡çš„æ•°æ®åŒ…æŠ–åŠ¨ï¼Œå¦‚æœç®€å•åœ°æŒ‰å®ƒåˆ°è¾¾çš„æ—¶é—´æ’­æ”¾å‡ºæ¥ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´åª’ä½“æˆå“å‘æ•£ï¼Œå¦‚æŠ–åŠ¨çš„ç”»é¢å¸§å’Œéš¾ä»¥è¾¨è®¤çš„éŸ³é¢‘ã€‚</p><p>è¿™ä¸ªé—®é¢˜çš„è§£å†³åŠæ³•æ˜¯åœ¨æ¥æ”¶ç«¯æ’­æ”¾åª’ä½“ä¹‹å‰å¯¹å…¶è¿›è¡Œç¼“å†²ï¼Œä»¥æ­¤æ¥å‡å°‘æŠ–åŠ¨ã€‚</p><center><img src="image-20191213130200893.png" srcset="/img/loading.gif" alt="image-20191213130200893" style="zoom:50%;" /></center><p>æ•°æ®åŒ… 8 è¢«å»¶è¿Ÿå¾—å¤ªå¤šï¼Œå½“æ’­æ”¾åˆ°å®ƒæ—¶è¿˜ä¸å¯ç”¨ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥æœ‰ä¸¤ç§é€‰æ‹©ã€‚</p><ul><li>ç¬¬ä¸€ç§æ˜¯è·³è¿‡æ•°æ®åŒ… 8 ç»§ç»­æ’­æ”¾åç»­çš„æ•°æ®åŒ…ã€‚</li><li>å¦ä¸€ç§æ–¹æ³•æ˜¯åœæ­¢æ’­æ”¾ï¼Œç›´åˆ°æ•°æ®åŒ… 8 åˆ°è¾¾ï¼Œæ­¤æ—¶åœ¨æ’­æ”¾çš„éŸ³ä¹æˆ–ç”µå½±ä¸­å°±ä¼šå‡ºç°ä¸€ä¸ªæ¼äººçš„é—´éš™ã€‚</li></ul><center><img src="image-20191213130334229.png" srcset="/img/loading.gif" alt="image-20191213130334229" style="zoom:50%;" /></center><h1 id="5-TCP"><a href="#5-TCP" class="headerlink" title="5. TCP"></a>5. TCP</h1><h2 id="5-1-Overview"><a href="#5-1-Overview" class="headerlink" title="5.1 Overview"></a>5.1 Overview</h2><p>TCP[Transmission Control Protocol] provides a <strong><em><u>reliable end-to-end byte stream</u></em></strong> over an unreliable internetwork.</p><p>TCP must furnish (æä¾›) the reliability that most users want and that IP does not provide.</p><ul><li><p>TCP æ˜¯é¢å‘è¿æ¥çš„ä¼ è¾“å±‚åè®®ã€‚[ä¸‰æ¬¡æ¡æ‰‹]</p></li><li><p>æ¯ä¸€æ¡ TCP è¿æ¥åªèƒ½æœ‰ä¸¤ä¸ªç«¯ç‚¹(endpoint)ï¼Œæ¯ä¸€æ¡ TCP è¿æ¥åªèƒ½æ˜¯ç‚¹å¯¹ç‚¹çš„[ä¸€å¯¹ä¸€]ã€‚ </p></li><li><p>æä¾›å¯é äº¤ä»˜çš„æœåŠ¡ã€‚</p></li><li><p>TCP æä¾›å…¨åŒå·¥é€šä¿¡ã€‚[åŒæ—¶æ”¶å‘]</p></li><li>é¢å‘å­—èŠ‚æµã€‚ </li></ul><h2 id="5-2-TCP-The-Service-Model"><a href="#5-2-TCP-The-Service-Model" class="headerlink" title="5.2 TCP: The Service Model"></a>5.2 TCP: The Service Model</h2><ul><li>TCP æœåŠ¡ç”±å‘é€ç«¯å’Œæ¥æ”¶ç«¯åˆ›å»ºä¸€ç§ç§°ä¸ºå¥—æ¥å­—ï¼ˆ socket ï¼‰çš„ç«¯ç‚¹æ¥è·å¾—</li></ul><div class="note note-error">            <p>Socket = IPåœ°å€ + port</p>          </div><ul><li>TCPè¿æ¥æ˜¯<strong><em><u>å…¨åŒå·¥</u></em></strong>çš„[å¿…é¡»å…¨åŒå·¥ï¼Œä¸€æ–¹ç»™å¦ä¸€æ–¹å‘é€æ¶ˆæ¯ï¼Œå¦ä¸€æ–¹åº”è¯¥å›å¤â€œå—¯å—¯å—¯ï¼Œæˆ‘åœ¨å¬â€]</li><li>TCPè¿æ¥æ˜¯ä¸€ä¸ªå­—èŠ‚æµï¼Œè€Œä¸æ˜¯æ¶ˆæ¯æµ</li></ul><blockquote><p>å¦‚æœå‘é€è¿›ç¨‹å°† 4 ä¸ª 512 å­—èŠ‚çš„æ•°æ®å—å†™åˆ°ä¸€ä¸ª TCP æµä¸­ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®æœ‰å¯èƒ½æŒ‰ 4 ä¸ª 512 å­—èŠ‚å—ã€2 ä¸ª 1024 å­—èŠ‚å—ã€ 1 ä¸ª 2048 å­—èŠ‚å—æˆ–è€…å…¶ä»–çš„æ–¹å¼è¢«é€’äº¤ç»™æ¥æ”¶è¿›ç¨‹ã€‚ æ¥æ”¶ç«¯ä¸ç®¡å¤šä¹ˆåŠªåŠ›å°è¯•ï¼Œéƒ½æ— æ³•è·çŸ¥è¿™äº›æ•°æ®è¢«å†™å…¥å­—èŠ‚æµæ—¶çš„å•å…ƒå¤§å°ã€‚</p></blockquote><div class="card">     <div class="card__image">       <img class="image__lg" src="image-20191212233707007.png" srcset="/img/loading.gif" alt="image-20191212233707007" style="zoom:67%;" />  </div>     <div class="card__content">         <div class="card__header">             <h4>TCPé¢å‘byte streamçš„æ¦‚å¿µ</h4>         </div>       </div></div><h2 id="5-3-TCP-header"><a href="#5-3-TCP-header" class="headerlink" title="5.3 TCP header"></a>5.3 TCP header</h2><p>æ¯ä¸ªTCP segmentçš„èµ·å§‹éƒ¨åˆ†æ˜¯ä¸€ä¸ªå›ºå®šæ ¼å¼çš„ <strong><em><u>20 å­—èŠ‚</u></em></strong>å¤´ã€‚å›ºå®šçš„å¤´éƒ¨ä¹‹åå¯èƒ½æœ‰å¤´çš„é€‰é¡¹ã€‚å¦‚æœè¯¥æ•°æ®æ®µæœ‰æ•°æ®éƒ¨åˆ†çš„è¯ï¼Œé‚£ä¹ˆåœ¨é€‰é¡¹ä¹‹åæ˜¯æœ€å¤šå¯è¾¾ 65535-20-20=65495 ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œè¿™é‡Œçš„ç¬¬ä¸€ä¸ª 20 æ˜¯æŒ‡ IP å¤´ï¼Œç¬¬äºŒä¸ª 20 æŒ‡ TCP å¤´ã€‚ æ²¡æœ‰ä»»ä½•æ•°æ®çš„ TCP æ®µä¹Ÿæ˜¯åˆæ³•çš„ï¼Œé€šå¸¸è¢«ç”¨ä½œç¡®è®¤å’Œæ§åˆ¶æ¶ˆæ¯ã€‚</p><center><img src="image-20191215161710416.png" srcset="/img/loading.gif" alt="image-20191215161710416" style="zoom:50%;" /></center><ul><li>sequence number</li></ul><blockquote><p>æ˜¯TCPæ•°æ®éƒ¨åˆ†çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åœ¨æ•´ä¸ªæ–‡ä»¶ä¸­æ‰€å¤„ç¬¬å‡ ä¸ªå­—èŠ‚</p></blockquote><center><img src="image-20191215161855868.png" srcset="/img/loading.gif" alt="image-20191215161855868" style="zoom:50%;" /></center><ul><li>acknowledge number</li></ul><blockquote><p>æœŸå¾…å‘é€è€…ä¸‹ä¸€æ¬¡å‘é€çš„æ•°æ®</p></blockquote><center><img src="image-20191213151314239.png" srcset="/img/loading.gif" alt="image-20191213151314239" style="zoom:50%;" /></center><ul><li>TCP header length</li></ul><blockquote><p>TCP headerçš„é•¿åº¦ï¼Œä»¥word[4ä¸ªbytes]ä¸ºå•ä½</p></blockquote><div class="card">     <div class="card__image">       <img class="image" src="image-20191215163422275.png" srcset="/img/loading.gif" alt="image-20191215163422275" style="zoom:50%;" />  </div>     <div class="card__content">         <div class="card__header">             <h4>CWE&ECE</h4>         </div>         <p>CWRå’ŒECEç”¨ä½œæ‹¥å¡æ§åˆ¶çš„ä¿¡å·ã€‚</p>    <p>å½“receiveræ”¶åˆ°äº†æ¥è‡ªç½‘ç»œçš„æ‹¥å¡æŒ‡ç¤ºåï¼Œå°±è®¾ç½®ECEä»¥ä¾¿ç»™senderå‘ECN-Echo[Explicit Congestion Notification-Echo]ä¿¡å·ï¼Œå‘Šè¯‰å‘é€ç«¯æ”¾æ…¢å‘é€é€Ÿç‡ã€‚</p>    <p>TCP senderè®¾ç½®CWRï¼Œç»™ TCP æ¥æ”¶ç«¯å‘ CWR ä¿¡å·</p>    <p>receiverçŸ¥é“senderå·±ç»æ”¾æ…¢é€Ÿç‡ï¼Œä¸å¿…å†ç»™senderå‘ ECN-Echo ä¿¡å·</p>   </div> </div><center><table>  <tr>    <td><div class="card">     <div class="card__image">       <img class="image" src="image-20191215162158221.png" srcset="/img/loading.gif" alt="image-20191215162158221" style="zoom:50%;" />  </div>     <div class="card__content">         <div class="card__header">             <h4>ACK</h4>         </div>         <p>å¯¹ä¸Šä¸€æ¬¡å‘è¿‡æ¥çš„æ•°æ®è¿›è¡Œç¡®è®¤, å¦‚æœè®¾ç½®ä¸º1è¡¨ç¤ºacknowledge numberå­—æ®µæœ‰æ•ˆã€‚å¦‚æœä¸º0ï¼Œè¯´æ˜acknowledge numberå­—æ®µæ— æ•ˆï¼Œæ²¡æœ‰ç¡®è®¤ä¿¡æ¯</p>        <p>å› æ­¤å‘é€å»ºç«‹ä¼šè¯è¯·æ±‚æ—¶,ACK=0, å› ä¸ºä¹‹å‰æ²¡æœ‰è¦ç¡®è®¤çš„æ•°æ®</p>    </div></div></td>  <td><div class="card">     <div class="card__image">       <img class="image" src="image-20191215162258403.png" srcset="/img/loading.gif" alt="image-20191215162258403" style="zoom:50%;" />  </div>     <div class="card__content">         <div class="card__header">             <h4>SYN</h4>         </div>         <p>è¡¨ç¤ºè¦å»ºç«‹ä¼šè¯[to used to establish connections].æ¯”å¦‚æˆ‘çš„ç”µè„‘æƒ³è¦å’ŒæŸä¸ªç½‘ç«™å»ºç«‹è¿æ¥ </p>        <p><u>SYN for CONNECTION REQUEST, SYN+ACK for CONNECTION ACCEPTED.</u></p>    </div> </div></td>  <td><div class="card">     <div class="card__image">       <img class="image"  src="image-20191215162320667.png" srcset="/img/loading.gif" alt="image-20191215162320667" style="zoom:50%;" />  </div>     <div class="card__content">         <div class="card__header">             <h4>FIN</h4>         </div>         <p>é‡Šæ”¾è¿æ¥</p>  </div>    </div></td>  </tr></table></center><table>  <tr>    <td><div class="card">     <div class="card__image">       <img class="image" src="image-20191215162053100.png" srcset="/img/loading.gif" alt="image-20191215162053100" style="zoom:50%;" />  </div>     <div class="card__content">         <div class="card__header">             <h4>URG</h4>         </div>         <p>åœ¨sender,ç´§æ€¥ï¼Œè¿™ä¸ªæ•°æ®åŒ…ä¸è¦ç­‰å¾…å‰é¢ç¼“å­˜å‘é€äº†ï¼Œæ’åˆ°ç¬¬ä¸€ä¸ªï¼Œé©¬ä¸Šç»™æˆ‘å‘ bjl</p>   </div> </div></td>    <td><div class="card">     <div class="card__image">       <img class="image" src="image-20191215162216454.png" srcset="/img/loading.gif" alt="image-20191215162216454" style="zoom:50%;" />  </div>     <div class="card__content">         <div class="card__header">             <h4>PSH</h4>         </div>         <p>åœ¨receiver,ç´§æ€¥ï¼Œåˆ«å¤„ç†ç¼“å­˜é‡Œçš„å…¶ä»–æ•°æ®äº†ï¼Œå…ˆå¤„ç†è¿™ä¸ªåŒ…ï¼Œbjl</p>   </div> </div></td>  </tr></table><div class="card">     <div class="card__image">       <img class="image" src="image-20191215162237847.png" srcset="/img/loading.gif" alt="image-20191215162237847" style="zoom:50%;" />  </div>     <div class="card__content">         <div class="card__header">             <h4>RST</h4>         </div>         <p></p>   </div> </div><ul><li>Window size</li></ul><blockquote><p>TCPå‘é€å’Œæ¥æ”¶éƒ½å­˜åœ¨ä¸€ä¸ªç¼“å­˜åŒºåŸŸã€‚TCP ä¸­çš„æµé‡æ§åˆ¶æ˜¯é€šè¿‡ä¸€ä¸ªåœ¨ç¼“å­˜ä¸­çš„å¯å˜å¤§å°çš„æ»‘åŠ¨çª—å£æ¥å¤„ç†çš„ã€‚çª—å£å¤§å°ï¼ˆ Window size) å­—æ®µæŒ‡å®šäº†ä»è¢«ç¡®è®¤çš„å­—èŠ‚ç®—èµ·å¯ä»¥å‘é€å¤šå°‘ä¸ªå­—èŠ‚ã€‚</p></blockquote><center><img src="image-20191215163057718.png" srcset="/img/loading.gif" alt="image-20191215163057718" style="zoom:50%;" /></center><p><img src="image-20191215165833678.png" srcset="/img/loading.gif" alt="image-20191215165833678" style="zoom:50%;" /></p><blockquote><p>é¦–å…ˆè®¡ç®—æœºBè¦è·ŸAè¯´æ˜è‡ªå·±çš„æ¥å—ç¼“å­˜æ˜¯å¤šå°‘ï¼Œç„¶åAå°±ä¼šè®¾ç½®è‡ªå·±çš„å‘é€ç¼“å­˜ï¼Œä¸èƒ½è¶…è¿‡Bæ¥æ”¶ç¼“å­˜çš„å¤§å°</p><p>ç„¶åAè·ŸBè¯´æ˜è‡ªå·±æ¥æ”¶ç¼“å­˜çš„å¤§å°ï¼ŒBè®¾ç½®å…¶å‘é€ç¼“å­˜</p></blockquote><ul><li><p>urgent</p><p>é…åˆURGä½ä½¿ç”¨ï¼ŒæŒ‡æ˜TCPæ•°æ®ä¸­å“ªäº›æ˜¯ç´§æ€¥çš„ã€‚æ¯”å¦‚urgent pointerè®¾ç½®ä¸º50ï¼Œè¯´æ˜TCPæ•°æ®ä¸­1-50æ˜¯ç´§æ€¥çš„ã€‚</p></li></ul><center><img src="image-20191215164702576.png" srcset="/img/loading.gif" alt="image-20191215164702576" style="zoom:50%;" /></center><h2 id="5-4-TCPè¿æ¥å»ºç«‹"><a href="#5-4-TCPè¿æ¥å»ºç«‹" class="headerlink" title="5.4 TCPè¿æ¥å»ºç«‹"></a>5.4 TCPè¿æ¥å»ºç«‹</h2><p>é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹è¿æ¥</p><p>Host 1æ‰§è¡ŒCONNECT, ä¸Host 2å»ºç«‹è¿æ¥</p><p>Host 1å‘é€è¿æ¥è¯·æ±‚</p><blockquote><p><code>SYN</code>è¡¨ç¤ºè¦å»ºç«‹connection, <code>SEQ=x</code>è¯´æ˜host 1å‘é€çš„TCPæ•°æ®çš„èµ·å§‹æ®µæ˜¯x</p></blockquote><p>Host 2æ¥æ”¶è¿æ¥è¯·æ±‚ï¼Œå›å¤ä¸€ä¸ªç¡®è®¤[å¦‚æœæ‹’ç»è¯·æ±‚çš„è¯ï¼Œå‘é€ä¸€ä¸ªè®¾ç½®äº† RST çš„åº”ç­”æŠ¥æ–‡]</p><blockquote><p><code>SYN</code>è¡¨ç¤ºå»ºç«‹connection, <code>SEQ=y</code>è¯´æ˜host 2å‘é€çš„TCPæ•°æ®çš„èµ·å§‹æ®µæ˜¯y, <code>ACK=x+1</code>è¯´æ˜ç¡®è®¤äº†host 1å‘é€è¿‡æ¥çš„æ•°æ®å¹¶ä¸”æœŸå¾…host1å‘é€çš„ä¸‹ä¸€ä¸ªæ•°æ®çš„èµ·å§‹æ®µä¸ºx+1</p></blockquote><p>host 1å†è¿›è¡Œç¡®è®¤</p><blockquote><p>host 1å·²ç»å¼€å§‹å‘é€æ•°æ®x+1ï¼Œç”¨piggybackingçš„æ–¹å¼å¯¹host 2å¯¹èµ·å§‹æ®µyè¿›è¡Œç¡®è®¤</p></blockquote><center><img src="image-20191212111637936.png" srcset="/img/loading.gif" alt="image-20191212111637936" style="zoom:50%;" /></center><h2 id="5-5-TCPè¿æ¥é‡Šæ”¾"><a href="#5-5-TCPè¿æ¥é‡Šæ”¾" class="headerlink" title="5.5 TCPè¿æ¥é‡Šæ”¾"></a>5.5 TCPè¿æ¥é‡Šæ”¾</h2><ul><li>ä¸ºäº†é‡Šæ”¾ä¸€ä¸ªè¿æ¥ï¼Œä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥å‘é€ä¸€ä¸ªè®¾ç½®äº† FIN æ ‡å¿—ä½çš„ TCP æ®µï¼Œè¿™è¡¨ç¤ºå®ƒå·±ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ã€‚</li><li>å½“ FIN æ®µè¢«å¦ ä¸€æ–¹ç¡®è®¤åï¼Œè¿™ä¸ªæ–¹å‘ä¸Šçš„è¿æ¥å°±è¢«å…³é—­ï¼Œä¸å†å‘é€ä»»ä½•æ•°æ®ã€‚ç„¶è€Œï¼Œå¦ä¸€ä¸ªæ–¹å‘ä¸Šæˆ–è®¸è¿˜åœ¨ç»§ç»­ç€æ— é™çš„æ•°æ®æµã€‚</li><li>å½“ä¸¤ä¸ªæ–¹å‘éƒ½å…³é—­åï¼Œè¿æ¥æ‰ç®—è¢«å½»åº•é‡Šæ”¾ã€‚</li></ul><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œé‡Š æ”¾ä¸€ä¸ªè¿æ¥éœ€è¦ 4 ä¸ª TCP æ®µï¼šæ¯ä¸ªæ–¹å‘ä¸Šä¸€ä¸ª FIN å’Œä¸€ä¸ª ACKã€‚ç„¶è€Œï¼Œç¬¬ä¸€ä¸ª ACK å’Œç¬¬äºŒä¸ª FIN æœ‰å¯èƒ½è¢«ç»„åˆåœ¨åŒä¸€ä¸ªæ®µä¸­ï¼Œä»è€Œå°†æ‰€éœ€æ®µæ€»æ•°é™ä½åˆ° 3 ä¸ªã€‚</p><center><img src="image-20191215173851930.png" srcset="/img/loading.gif" alt="image-20191215173851930" style="zoom:50%;" /></center><h2 id="5-6-TCPè¿æ¥ç®¡ç†æ¨¡å‹"><a href="#5-6-TCPè¿æ¥ç®¡ç†æ¨¡å‹" class="headerlink" title="5.6 TCPè¿æ¥ç®¡ç†æ¨¡å‹"></a>5.6 TCPè¿æ¥ç®¡ç†æ¨¡å‹</h2><p>æ¯æ¡çº¿éƒ½æ ‡è®°æˆä¸€å¯¹â€œäº‹ä»¶ï¼åŠ¨ä½œâ€œ [event / action]</p><center><img src="image-20191215173944466.png" srcset="/img/loading.gif" alt="image-20191215173944466" style="zoom:50%;" /></center><p>æ²¿ç€clientçš„è·¯å¾„[ç²—å®çº¿]</p><blockquote><p>å½“clientä¸Šçš„ä¸€ä¸ªåº”ç”¨ç¨‹åºå‘å‡º<code>CONNECT</code>è¯·æ±‚ï¼Œæœ¬åœ°çš„ TCP å®ä½“åˆ›å»ºä¸€æ¡è¿æ¥è®°å½•ï¼Œå¹¶å°†å®ƒæ ‡è®°ä¸º<code>SYN SENT</code>çŠ¶æ€ï¼Œç„¶åå‘é€ä¸€ä¸ª<code>SYN</code>æ®µã€‚å½“ <code>SYN+ACK</code>åˆ°è¾¾çš„æ—¶å€™ï¼Œ TCP å‘å‡ºä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹çš„æœ€åä¸€ä¸ª <code>ACK</code> æ®µï¼Œç„¶ååˆ‡ æ¢åˆ° <code>ESTABLISHED</code> çŠ¶æ€ã€‚ç°åœ¨å¯ä»¥å‘é€å’Œæ¥æ”¶æ•°æ®äº†ã€‚</p><p>å½“ä¸€ä¸ªåº”ç”¨ç»“æŸæ—¶ï¼Œå®ƒæ‰§è¡Œ <code>CLOSE</code> åŸè¯­ï¼Œä»è€Œä½¿æœ¬åœ°çš„ TCP å®ä½“å‘é€ä¸€ä¸ª <code>FIN</code> æ®µï¼Œ å¹¶ç­‰å¾…å¯¹åº”çš„ <code>ACK</code> ã€‚å½“ <code>ACK</code> åˆ°è¾¾æ—¶ï¼ŒçŠ¶æ€è¿ç§»åˆ° <code>FIN WAIT 2</code>ï¼Œè€Œä¸”è¿æ¥çš„ä¸€ä¸ªæ–¹å‘è¢«å…³é—­ã€‚å½“å¦ä¸€æ–¹ä¹Ÿå…³é—­æ—¶ï¼Œä¼šåˆ°è¾¾ä¸€ä¸ª <code>FIN</code> æ®µï¼Œç„¶åå®ƒè¢«<code>ACK</code>ã€‚ ç°åœ¨ï¼ŒåŒæ–¹éƒ½å·²ç»å…³é—­äº†è¿æ¥ï¼Œä½†æ˜¯ï¼Œ TCP è¦ç­‰å¾…ä¸€æ®µé•¿åº¦ä¸ºæœ€å¤§æ•°æ®åŒ…ç”Ÿå­˜æœŸä¸¤å€çš„æ—¶é—´ï¼Œæ‰èƒ½ç¡®ä¿è¯¥è¿æ¥ä¸Šçš„æ‰€æœ‰æ•°æ®åŒ…éƒ½å·±å¯¿ç»ˆæ­£å¯ï¼Œä»¥é˜²ä¸‡ä¸€å‘ç”Ÿç¡®è®¤è¢«ä¸¢å¤±çš„æƒ…å½¢ã€‚å½“ è®¡æ—¶å™¨è¶…æ—¶åï¼Œ TCP åˆ é™¤è¯¥è¿æ¥è®°å½•ã€‚</p></blockquote><p>æ³¨æ„è¿™é‡Œçš„closeæ˜¯fin, ack, fin, ackæ€»å…±å››æ¬¡</p><p>æ²¿ç€serverçš„è·¯å¾„[è™šçº¿]</p><blockquote><p>æœåŠ¡å™¨æ‰§è¡Œ LISTENï¼Œå¹¶ç­‰å¾…å…¥å¢ƒè¿æ¥è¯·æ±‚ã€‚å½“æ”¶åˆ°ä¸€ä¸ª <code>SYN</code> æ—¶ï¼ŒæœåŠ¡å™¨å°±ç¡®è®¤è¯¥æ®µå¹¶ä¸”è¿›å…¥åˆ° <code>SYN RCVD</code> çŠ¶æ€ã€‚å½“æœåŠ¡å™¨æœ¬èº«çš„ <code>SYN</code> è¢«ç¡®è®¤åï¼Œå°±æ ‡å¿—ç€ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹çš„ç»“æŸï¼ŒæœåŠ¡å™¨è¿›å…¥åˆ° <code>ESTABLISHED</code> çŠ¶æ€ã€‚ä»ç°åœ¨å¼€å§‹åŒæ–¹å¯ä»¥ä¼ è¾“æ•°æ®äº†ã€‚</p><p>å½“å®¢æˆ·å®Œæˆäº†è‡ªå·±çš„æ•°æ®ä¼ è¾“ï¼Œå®ƒå°±æ‰§è¡Œ <code>CLOSE</code>ï¼Œä»è€Œå¯¼è‡´ TCP å®ä½“å‘é€ä¸€ä¸ª <code>FIN åˆ°æœåŠ¡å™¨</code>ã€‚ç„¶åï¼ŒæœåŠ¡å™¨æ¥åˆ°ä¿¡å·ï¼šå½“å®ƒä¹Ÿæ‰§è¡Œäº†<code>CLOSE</code>æ—¶ï¼Œ TCP å®ä½“ç»™å®¢æˆ·å‘é€ä¸€ä¸ª <code>FIN</code> æ®µã€‚å½“è¯¥æ®µçš„æ¥è‡ªå®¢æˆ·çš„ç¡®è®¤è¿”å›åï¼ŒæœåŠ¡å™¨é‡Šæ”¾è¯¥è¿æ¥ï¼Œå¹¶ä¸”åˆ é™¤ç›¸åº”çš„è¿æ¥è®°å½•ã€‚</p></blockquote><h2 id="5-7-TCPæ»‘åŠ¨çª—å£"><a href="#5-7-TCPæ»‘åŠ¨çª—å£" class="headerlink" title="5.7 TCPæ»‘åŠ¨çª—å£"></a>5.7 TCPæ»‘åŠ¨çª—å£</h2><center><img src="image-20191215185528057.png" srcset="/img/loading.gif" alt="image-20191215185528057" style="zoom:50%;" /></center><center><img src="image-20191215183419888.png" srcset="/img/loading.gif" alt="image-20191215183419888" style="zoom:50%;" /></center><h4>sender buffer</h4><img class="image" src="image-20191215184124008.png" srcset="/img/loading.gif" alt="image-20191215184124008" style="zoom:50%;" /><h4>receiver buffer</h4>  <p><img class="image" src="image-20191215184312475.png" srcset="/img/loading.gif" alt="image-20191215184312475" style="zoom:50%;" /></p><p>delayed acknowledgement</p><p><strong>nagleâ€™s algorithm</strong>â€”-è§£å†³å‘é€ç«¯åº”ç”¨æ¯æ¬¡å‘ TCP ä¼ é€’ä¸€ä¸ªå­—èŠ‚è€Œå¼•èµ·çš„é—®é¢˜</p><p>å› ä¸ºå‘é€ç«¯å‘é€å¤šä¸ªå°æ•°æ®åŒ…çš„å·¥ä½œæ–¹å¼æ•ˆç‡å¾ˆä½[æ¯”å¦‚41å­—èŠ‚çš„æ•°æ®åŒ…åªåŒ…å«1ä¸ªå­—èŠ‚çš„æ•°æ®]</p><blockquote><p>å½“æ•°æ®æ¯æ¬¡ä»¥å¾ˆå°‘é‡æ–¹å¼è¿›å…¥åˆ°å‘é€ç«¯æ—¶ï¼Œå‘é€ç«¯åªæ˜¯å‘é€ç¬¬ä¸€æ¬¡åˆ°è¾¾çš„æ•°æ®å­—èŠ‚ï¼Œç„¶åå°†å…¶ä½™åé¢åˆ°è¾¾çš„å­—èŠ‚ç¼“å†²èµ·æ¥ï¼Œç›´åˆ°å‘é€å‡ºå»çš„é‚£ä¸ªæ•°æ®åŒ…è¢«ç¡®è®¤</p><p>ç„¶åå°†æ‰€æœ‰ç¼“å†²çš„å­—èŠ‚æ”¾åœ¨ä¸€ä¸ª TCP æ®µ ä¸­å‘é€å‡ºå»ï¼Œå¹¶ä¸”ç»§ç»­å¼€å§‹ç¼“å†²å­—èŠ‚ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªæ®µè¢«ç¡®è®¤ã€‚</p><p>è¿™å°±æ˜¯è¯´ï¼Œä»»ä½•æ—¶å€™åªæœ‰ç¬¬ ä¸€ä¸ªå‘é€çš„æ•°æ®åŒ…æ˜¯å°æ•°æ®åŒ…ã€‚å¦‚æœåœ¨ä¸€ä¸ªæ¥å›æ—¶é—´å†…åº”ç”¨ç¨‹åºå‘é€äº†è®¸å¤šæ•°æ®ï¼Œé‚£ä¹ˆ Nagle ç®—æ³•å¯ä»¥å°†è¿™äº›æ•°æ®æ”¾ç½®åœ¨ä¸€ä¸ªæ®µä¸­å‘é€ï¼Œç”±æ­¤å¤§å¤§åœ°å‡å°‘æ‰€éœ€çš„å¸¦å®½ã€‚å¦å¤–ï¼Œå¦‚ æœåº”ç”¨ä¼ é€’æ¥çš„æ•°æ®è¶³å¤Ÿå¤šï¼Œå¤šåˆ°å¯ä»¥å¡«æ»¡ä¸€ä¸ªæœ€å¤§æ•°æ®æ®µï¼Œåˆ™è¯¥ç®—æ³•ä¹Ÿå…è®¸å‘é€ä¸€ä¸ªæ–°çš„æ®µã€‚</p></blockquote><p><strong><em>Clarkâ€™s algorithm</em></strong>â€”-è§£å†³ç”±äºæ¥æ”¶ç«¯åº”ç”¨æ¯æ¬¡ä» TCP æµä¸­è¯»å–ä¸€ä¸ªå­—èŠ‚è€Œå¼•èµ·çš„é—®é¢˜</p><p>é™ä½TCPæ€§èƒ½çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯<strong><em>silly window syndrome</em></strong>ã€‚</p><blockquote><p>å½“æ•°æ®ä»¥å¤§å—å½¢å¼ä¼ é€’,ä½†æ˜¯æ¥æ”¶ç«¯çš„äº¤äº’å¼åº”ç”¨æ¯æ¬¡åªè¯»å–ä¸€ä¸ªå­—èŠ‚æ•°æ®</p><p>åˆå§‹æ—¶ï¼Œæ¥æ”¶ç«¯çš„ TCP ç¼“å†²åŒºä¸ºæ»¡ï¼Œå‘é€ç«¯çŸ¥é“è¿™ä¸€ç‚¹[å³å®ƒæœ‰ä¸€ä¸ªå¤§å°ä¸º 0 çš„çª—å£]ã€‚ç„¶åï¼Œäº¤äº’å¼åº”ç”¨ä»TCP æµä¸­è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™ä¸ªåŠ¨ä½œä½¿å¾—æ¥æ”¶ç«¯çš„ TCP æ¬£å–œè‹¥ç‹‚ï¼Œå®ƒç«‹åˆ»å‘é€ä¸€ä¸ªçª—å£æ›´æ–°æ®µç»™å‘é€ç«¯ï¼Œå‘Šè¯‰å®ƒç°åœ¨å¯ä»¥å‘é€ 1 ä¸ªå­—èŠ‚è¿‡æ¥ã€‚å‘é€ç«¯å¾ˆæ„Ÿæ¿€ï¼Œç«‹å³å‘é€ 1 ä¸ªå­—èŠ‚ã€‚ç° åœ¨ç¼“å†²åŒºåˆæ»¡äº†ï¼Œæ‰€ä»¥ï¼Œæ¥æ”¶ç«¯å¯¹è¿™ 1 å­—èŠ‚çš„æ•°æ®æ®µè¿›è¡Œç¡®è®¤ï¼ŒåŒæ—¶è®¾ç½®çª—å£å¤§å°ä¸º 0ã€‚</p></blockquote><p>Clark çš„è§£å†³æ–¹æ¡ˆæ˜¯ç¦æ­¢æ¥æ”¶ç«¯å‘é€åªæœ‰ 1 ä¸ªå­—èŠ‚çš„çª—å£æ›´æ–°æ®µã€‚ç›¸åï¼Œå®ƒå¼ºåˆ¶æ¥æ”¶ç«¯å¿…é¡»ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œç›´åˆ°æœ‰äº†ä¸€å®šæ•°é‡çš„å¯ç”¨ç©ºé—´ä¹‹åå†é€šå‘Šç»™å¯¹æ–¹ã€‚ç‰¹åˆ«æ˜¯ï¼Œåªæœ‰å½“æ¥æ”¶ç«¯èƒ½å¤Ÿå¤„ç†å®ƒåœ¨å»ºç«‹è¿æ¥æ—¶å®£å‘Šçš„æœ€å¤§æ•°æ®æ®µï¼Œæˆ–è€…å®ƒçš„ç¼“å†²åŒºä¸€åŠä¸ºç©ºæ—¶ï¼ˆç›¸å½“äºä¸¤è€…ä¹‹ä¸­å–è¾ƒå°çš„å€¼ã€‰ï¼Œå®ƒæ‰å‘é€çª—å£æ›´æ–°æ®µã€‚è€Œä¸”ï¼Œå‘é€ç«¯ä¸å‘é€å¤ªå°çš„æ®µä¹Ÿä¼šæœ‰æ‰€å¸®åŠ©ã€‚ ç›¸åï¼Œå®ƒåº”è¯¥ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œç›´åˆ°å¯ä»¥å‘é€ä¸€ä¸ªæ»¡çš„æ®µï¼Œæˆ–è€…è‡³å°‘åŒ…å«æ¥æ”¶ç«¯ç¼“å†²åŒºä¸€åŠå¤§å°çš„æ®µã€‚</p><center><img src="image-20191215192956539.png" srcset="/img/loading.gif" alt="image-20191215192956539" style="zoom:50%;" /></center><h2 id="5-8-TCP-timer-management"><a href="#5-8-TCP-timer-management" class="headerlink" title="5.8 TCP timer management"></a>5.8 TCP timer management</h2><h3 id="A-é‡ä¼ è®¡æ—¶å™¨-RTO-Retransmission-Timeout"><a href="#A-é‡ä¼ è®¡æ—¶å™¨-RTO-Retransmission-Timeout" class="headerlink" title="A. é‡ä¼ è®¡æ—¶å™¨(RTO, Retransmission Timeout)"></a>A. é‡ä¼ è®¡æ—¶å™¨(RTO, Retransmission Timeout)</h3><p>å½“ TCP å®ä½“å‘å‡ºä¸€ä¸ªæ®µæ—¶ï¼Œå®ƒåŒæ—¶å¯åŠ¨ä¸€ä¸ªé‡ä¼ è®¡æ—¶å™¨ã€‚</p><ul><li>å¦‚æœåœ¨è¯¥è®¡æ—¶å™¨è¶…æ—¶å‰è¯¥æ®µè¢«ç¡®è®¤ï¼Œåˆ™è®¡æ—¶å™¨è¢«åœæ­¢ã€‚</li><li>å¦‚æœåœ¨ç¡®è®¤åˆ°æ¥ä¹‹å‰è®¡æ—¶å™¨è¶…æ—¶ï¼Œåˆ™æ®µè¢«é‡ä¼ ï¼ˆå¹¶ä¸”è¯¥è®¡æ—¶å™¨è¢«é‡æ–°å¯åŠ¨ï¼‰</li></ul><p><br/></p><h4 id="å¦‚ä½•è®¾ç½®è¶…æ—¶é—´éš”"><a href="#å¦‚ä½•è®¾ç½®è¶…æ—¶é—´éš”" class="headerlink" title="å¦‚ä½•è®¾ç½®è¶…æ—¶é—´éš”"></a>å¦‚ä½•è®¾ç½®è¶…æ—¶é—´éš”</h4><p>åŠ¨æ€ç®—æ³•ï¼Œæ ¹æ®ç½‘ç»œæ€§èƒ½çš„è¿ç»­æµ‹é‡â€™æƒ…å†µï¼Œä¸æ–­åœ°è°ƒæ•´è¶…æ—¶é—´éš”</p><p><strong><em>Jacobsonç®—æ³•</em></strong></p><p>å¯¹äºæ¯ä¸€ä¸ªè¿æ¥ï¼ŒTCP ç»´æŠ¤ä¸€ä¸ªå˜é‡SRTT[Smoothed Round-Trip Timeï¼Œå¹³æ»‘çš„å¾€è¿”æ—¶é—´]ï¼Œå®ƒä»£è¡¨åˆ°è¾¾æ¥æ”¶æ–¹å¾€è¿”æ—¶é—´çš„å½“å‰æœ€ä½³ä¼°è®¡å€¼ã€‚</p><p>å½“ä¸€ä¸ªæ®µè¢«å‘é€å‡ºå»æ—¶ï¼Œ TCP å¯åŠ¨ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè¯¥è®¡æ—¶å™¨æœ‰ä¸¤ä¸ªä½œç”¨:</p><ul><li>ä¸€æ˜¯çœ‹è¯¥æ®µè¢«ç¡®è®¤éœ€è¦å¤šé•¿æ—¶é—´</li><li>äºŒæ˜¯è‹¥ç¡®è®¤æ—¶é—´å¤ªé•¿ï¼Œåˆ™è§¦å‘é‡ä¼ åŠ¨ä½œã€‚</li></ul><p><strong><em>A. SRTT</em></strong></p><p>å¦‚æœåœ¨è®¡æ—¶å™¨è¶…æ—¶å‰ç¡®è®¤è¿”å›ï¼Œåˆ™ TCP æµ‹é‡è¿™æ¬¡ç¡®è®¤æ‰€èŠ±çš„æ—¶é—´RTTã€‚ç„¶å å®ƒæ ¹æ®ä¸‹é¢çš„å…¬å¼æ›´æ–° SRTT: </p><script type="math/tex; mode=display">SRTT ï¼\alpha SRTT + (1-\alphaï¼‰ RTT</script><p>è¿™é‡Œ $\alpha$ æ˜¯ä¸€ä¸ªå¹³æ»‘å› å­ï¼Œå®ƒå†³å®šäº†è€çš„ RTT å€¼æ‰€å çš„æƒé‡ã€‚å…¸å‹æƒ…å†µä¸‹ $\alphaï¼\frac{7}{8}$ ã€‚</p><p><br/></p><p><strong><em>B. RTTVAR</em></strong></p><p>å³ä½¿æœ‰äº†ä¸€ä¸ªå¥½çš„ SRTT å€¼ï¼Œè¦é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„é‡ä¼ è¶…æ—¶é—´éš”ä»ç„¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚Jacobson æè®®è®©è¶…æ—¶å€¼å¯¹å¾€è¿”æ—¶é—´çš„å˜åŒ–ä»¥åŠå¹³æ»‘çš„å¾€è¿”æ—¶é—´è¦å˜å¾—æ•æ„Ÿã€‚è¿™ç§æ”¹å˜è¦æ±‚è·Ÿè¸ªå¦ä¸€ä¸ªå¹³æ»‘å˜é‡RTTVAR[ Round-Trip Time VARiation]</p><script type="math/tex; mode=display">RTTVAR=\beta RTTVAR+(1-\beta)\vert SRTT-R\vert</script><p>é€šå¸¸<script type="math/tex">\beta=\frac{3}{4}</script></p><p><strong><em>C. RTO</em></strong></p><p>é‡ä¼ è¶…æ—¶å€¼RTO</p><script type="math/tex; mode=display">RTO=SRTT+4\times RTTVAR</script><p>ä½†æ˜¯é‡‡é›†å¾€è¿”æ—¶é—´æ ·å€¼Rè¿‡ç¨‹ä¸­è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯</p><blockquote><p>å½“ä¸€ä¸ªæ®µè¶…æ—¶å¹¶é‡æ–°å‘é€ä»¥åè¯¥æ€ä¹ˆåŠï¼Ÿç¡®è®¤åˆ°è¾¾æ—¶ï¼Œæ— æ³•åˆ¤æ–­è¯¥ç¡®è®¤æ˜¯é’ˆå¯¹ç¬¬ä¸€æ¬¡ä¼ è¾“ï¼Œè¿˜æ˜¯é’ˆå¯¹åæ¥çš„é‡ä¼ ã€‚</p><p>è‹¥çŒœæµ‹é”™è¯¯ï¼Œåˆ™ä¼šä¸¥é‡å½±å“é‡ä¼ è¶…æ—¶å€¼RTT</p></blockquote><p><strong><em>Karnç®—æ³•</em></strong></p><blockquote><p>ä¸æ›´æ–°ä»»ä½•é‡ä¼ æ®µçš„ä¼°ç®—å€¼ã€‚</p><p>æ­¤å¤–ï¼Œæ¯æ¬¡è¿ç»­é‡ä¼ çš„è¶…æ—¶é—´éš”å€¼åŠ å€ï¼Œç›´åˆ°æ®µèƒ½ä¸€æ¬¡é€šè¿‡ä¸ºæ­¢ã€‚</p></blockquote><h3 id="B-æŒç»­è®¡æ—¶å™¨-persistence-timer"><a href="#B-æŒç»­è®¡æ—¶å™¨-persistence-timer" class="headerlink" title="B. æŒç»­è®¡æ—¶å™¨ persistence timer"></a>B. æŒç»­è®¡æ—¶å™¨ persistence timer</h3><p>é‡ä¼ è®¡æ—¶å™¨å¹¶ä¸æ˜¯ TCP ä½¿ç”¨çš„å”¯ä¸€è®¡æ—¶å™¨ã€‚ç¬¬äºŒä¸ªè®¡æ—¶å™¨æ˜¯æŒç»­è®¡æ—¶å™¨ã€‚å®ƒçš„è®¾è®¡æ„å›¾æ˜¯ä¸ºäº†é¿å…å‡ºç°ä»¥ä¸‹æ‰€è¿°çš„æ­»é”æƒ…å†µ:</p><blockquote><p>æ¥æ”¶ç«¯å‘é€ä¸€ä¸ªçª—å£å¤§å°ä¸º 0 çš„ç¡®è®¤ï¼Œè®©å‘é€ç«¯ç­‰ä¸€ç­‰ã€‚ç¨åï¼Œæ¥æ”¶ç«¯æ›´æ–°äº†çª—å£ï¼Œä½†æ˜¯ï¼Œæºå¸¦æ›´æ–°æ¶ˆæ¯çš„æ•°æ®åŒ…ä¸¢å¤±äº†ã€‚</p><p>ç°åœ¨ï¼Œå‘é€ç«¯å’Œæ¥æ”¶ç«¯éƒ½åœ¨ç­‰å¾…å¯¹æ–¹çš„è¿›ä¸€æ­¥åŠ¨ä½œã€‚</p><p>å½“æŒç»­è®¡æ—¶å™¨è¶…æ—¶åï¼Œå‘é€ç«¯ç»™æ¥æ”¶ç«¯å‘é€ä¸€ä¸ªæ¢è¯¢æ¶ˆæ¯ã€‚æ¥æ”¶ç«¯å¯¹æ¢è¯¢æ¶ˆæ¯çš„å“åº”æ˜¯å°†çª—å£å¤§å°å‘Šè¯‰å‘é€ç«¯ã€‚å¦‚æœå®ƒä» ç„¶ä¸º 0ï¼Œåˆ™é‡ç½®æŒç»­è®¡æ—¶å™¨ï¼Œå¹¶å¼€å§‹ä¸‹ä¸€è½®å¾ªç¯ã€‚å¦‚æœå®ƒé 0ï¼Œåˆ™ç°åœ¨å¯ä»¥å‘é€æ•°æ®äº†ã€‚</p></blockquote><h3 id="C-ä¿æ´»è®¡æ—¶å™¨-keepalive-timer"><a href="#C-ä¿æ´»è®¡æ—¶å™¨-keepalive-timer" class="headerlink" title="C. ä¿æ´»è®¡æ—¶å™¨[keepalive timer]"></a>C. ä¿æ´»è®¡æ—¶å™¨[keepalive timer]</h3><p>to check whether the other side is still there</p><p>å½“ä¸€ä¸ªè¿æ¥ç©ºé—²äº†è¾ƒé•¿ä¸€æ®µæ—¶é—´ä»¥åï¼Œä¿æ´»è®¡æ—¶å™¨å¯èƒ½è¶…æ—¶ï¼Œä»è€Œä¿ƒä½¿æŸä¸€ç«¯æŸ¥çœ‹å¦ä¸€ç«¯æ˜¯å¦ä»ç„¶è¿˜åœ¨ã€‚ å¦‚æœå¦ä¸€ç«¯æ²¡æœ‰å“åº”ï¼Œåˆ™ç»ˆæ­¢è¿æ¥ã€‚</p><h2 id="5-9-TCP-congestion-control"><a href="#5-9-TCP-congestion-control" class="headerlink" title="5.9 TCP congestion control"></a>5.9 TCP congestion control</h2><center><img src="image-20191203131449883.png" srcset="/img/loading.gif" alt="image-20191203131449883" style="zoom:40%;" /></center><p>å½“æä¾›ç»™ä»»ä½•ç½‘ç»œçš„è´Ÿè½½è¶…è¿‡å®ƒçš„å¤„ç†èƒ½åŠ›æ—¶ï¼Œæ‹¥å¡ä¾¿ä¼šäº§ç”Ÿã€‚å½“è·¯ç”±å™¨ä¸Šçš„é˜Ÿåˆ—å¢é•¿åˆ°å¾ˆå¤§æ—¶ï¼Œç½‘ç»œå±‚æ£€æµ‹åˆ°æ‹¥å¡ï¼Œå¹¶è¯•å›¾é€šè¿‡ä¸¢å¼ƒæ•°æ®åŒ…æ¥ç®¡ç†æ‹¥å¡ã€‚ä¼ è¾“å±‚æ¥æ”¶åˆ°ä»ç½‘ç»œå±‚åé¦ˆæ¥çš„æ‹¥å¡ä¿¡æ¯ï¼Œå¹¶å‡æ…¢å®ƒå‘é€åˆ°ç½‘ç»œçš„æµé‡é€Ÿç‡ã€‚</p><ul><li><p>TCPç»´æŒä¸€ä¸ª<strong><em><u>æ‹¥å¡çª—å£</u></em></strong> (congestion window ï¼‰ï¼Œ<strong><em>çª—å£å¤§å°æ˜¯ä»»ä½•æ—¶å€™å‘é€ç«¯å¯ä»¥å¾€ç½‘ç»œå‘é€çš„<u>å­—èŠ‚æ•°</u></em></strong>ã€‚ç›¸åº”çš„é€Ÿç‡åˆ™æ˜¯çª—å£å¤§å°é™¤ä»¥è¿æ¥çš„<strong><em>å¾€è¿”æ—¶é—´</em></strong>ã€‚ TCP æ ¹æ® AIMD è§„åˆ™æ¥è°ƒæ•´è¯¥çª—å£çš„å¤§å°ã€‚</p></li><li><p>ä¸€ä¸ªæµé‡æ§åˆ¶çª—å£ï¼Œè¯¥çª—å£æŒ‡å‡ºäº†<strong><em>æ¥æ”¶ç«¯å¯ä»¥ç¼“å†²çš„å­—èŠ‚æ•°</em></strong>ã€‚</p></li></ul><p>è¦å¹¶å‘è·Ÿè¸ªè¿™ä¸¤ä¸ªçª—å£ï¼Œå¯èƒ½å‘é€çš„å­—èŠ‚æ•°æ˜¯ä¸¤ä¸ªçª—å£ä¸­è¾ƒå°çš„é‚£ä¸ªã€‚ å› æ­¤ï¼Œæœ‰æ•ˆçª—å£æ˜¯å‘é€ç«¯è®¤ä¸ºçš„åº”è¯¥å¤§å°å’Œæ¥æ”¶ç«¯è®¤ä¸ºçš„åº”è¯¥å¤§å°ä¸¤è€…ä¸­çš„<strong><em>è¾ƒå°è€…</em></strong>ã€‚</p><blockquote><p>å¦‚æœæ‹¥å¡çª—å£æˆ–æµé‡æ§åˆ¶çª—å£æš‚æ—¶å·±æ»¡ï¼Œåˆ™ TCP å°†åœæ­¢å‘é€æ•°æ®ã€‚</p><p>å¦‚æœæ¥æ”¶ç«¯è¯´â€œå‘é€ 64 KBæ•°æ®â€ï¼Œä½†å‘é€ç«¯çŸ¥é“è¶…è¿‡ 32KB çš„çªå‘å°†é˜»å¡ç½‘ç»œï¼Œå®ƒå°±åªå‘é€32KB</p><p>å¦‚æœæ¥æ”¶ç«¯è¯´â€œå‘é€ 64 KBæ•°æ®â€ï¼Œå‘é€ç«¯çŸ¥é“é«˜è¾¾ 128 KBçš„çªå‘é€šè¿‡ç½‘ç»œéƒ½æ¯«ä¸è´¹åŠ›ï¼Œå®ƒä¼šå‘é€è¦æ±‚çš„å…¨éƒ¨ 64 KBã€‚</p></blockquote><p><br/></p><p>Congestion Control Algorithm by Van Jacobson (1988) </p><ul><li><p>To approximate an <strong>AIMD</strong> congestion window</p></li><li><p>To represent congestion signal by packet loss</p></li><li>To measure packet loss by a retransmission timer </li><li>To split data into segments (Ack Clock) </li><li>To use the optimal congestion window </li></ul><center><img src="image-20191203140815575.png" srcset="/img/loading.gif" alt="image-20191203140815575" style="zoom:50%;" /></center><p><br/></p><h3 id="i-slow-start"><a href="#i-slow-start" class="headerlink" title="i. slow start"></a>i. slow start</h3><p>ä»åˆå§‹å€¼1å¯åŠ¨ï¼Œå‘ˆæŒ‡æ•°å¢é•¿</p><center><img src="image-20191212234251930.png" srcset="/img/loading.gif" alt="image-20191212234251930" style="zoom:40%;" /></center><blockquote><p>åœ¨ç¬¬ä¸€æ¬¡å¾€è¿”æ—¶é—´ï¼Œå‘é€ç«¯æŠŠä¸€ä¸ªæ•°æ®åŒ…æ³¨å…¥ç½‘ç»œï¼ˆå¹¶ä¸”æ¥æ”¶ç«¯æ¥æ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…ï¼‰ã€‚åœ¨æ¥ä¸‹æ¥çš„ä¸€ä¸ªå¾€è¿”æ—¶é—´ï¼Œå‘é€ç«¯å‘å‡ºä¸¤ä¸ªæ•°æ®åŒ…ï¼Œç„¶ååœ¨ç¬¬ä¸‰ä¸ªå¾€è¿”æ—¶é—´å‘é€å››ä¸ªã€‚</p><p>å½“å‘é€ç«¯å¾—åˆ°ä¸€ä¸ªç¡®è®¤ï¼Œä»–å°±æŠŠæ‹¥å¡çª—å£çš„å¤§å°+1ï¼Œå¹¶ç«‹å³å°†ä¸¤ä¸ªæ•°æ®åŒ…å‘é€åˆ°ç½‘ç»œä¸­</p></blockquote><p>ç”±äºæ…¢é€Ÿå¯åŠ¨å¯¼è‡´æ‹¥å¡çª—å£æŒ‰æŒ‡æ•°å¢é•¿ï¼Œç½‘ç»œå¾ˆå¿«æ‹¥å¡ã€‚ä¸ºäº†ä¿æŒå¯¹æ…¢é€Ÿå¯åŠ¨çš„æ§åˆ¶ï¼Œå‘é€ç«¯ä¸ºæ¯ä¸ªè¿æ¥ç»´æŒä¸€ä¸ª<strong><em><u>slow start threshold</u></em></strong>ã€‚</p><blockquote><p>æœ€åˆï¼Œè¿™ä¸ªå€¼è¢«è®¾ç½®å¾—ä»»æ„é«˜ã€‚ TCP ä»¥æ…¢é€Ÿå¯åŠ¨æ–¹å¼ä¸æ–­å¢åŠ æ‹¥å¡çª—å£ï¼Œç›´åˆ°å‘ç”Ÿè¶…æ—¶ï¼Œæˆ–è€…æ‹¥å¡çª—å£è¶…è¿‡è¯¥é˜”å€¼ã€‚</p><p>æ¯å½“æ£€æµ‹åˆ°ä¸¢åŒ…ï¼Œæ¯”å¦‚è¶…æ—¶äº†ï¼Œslow start thresholdå°±è¢«è®¾ç½®ä¸ºå½“å‰æ‹¥å¡çª—å£çš„ä¸€åŠï¼Œæ•´ä¸ªè¿‡ç¨‹å†é‡æ–°å¯åŠ¨ã€‚</p></blockquote><h3 id="ii-Congestion-Control"><a href="#ii-Congestion-Control" class="headerlink" title="ii. Congestion Control"></a>ii. Congestion Control</h3><p>ä¸€æ—¦slow startè¶…è¿‡äº†threshold, TCPå°±åˆ‡æ¢åˆ°çº¿æ€§å¢åŠ ï¼Œæ¯ä¸ªå¾€è¿”æ—¶é—´ï¼Œæ‹¥å¡çª—å£åªå¢åŠ ä¸€æ®µ</p><center><img src="image-20191203143540623.png" srcset="/img/loading.gif" alt="image-20191203143540623" style="zoom:40%;" /></center><p>æ‹¥å¡çª—å£cwndå’Œæœ€å¤§æ®µé•¿MSSï¼Œä¸€ä¸ªå¸¸è§çš„è¿‘ä¼¼åšæ³•</p><p>é’ˆå¯¹cwnd/MSSä¸­å¯èƒ½è¢«ç¡®è®¤çš„æ¯ä¸ªæ•°æ®åŒ…ï¼Œå°†cwndå¢åŠ $(MSS \times MSS)/cwnd$</p><h3 id="iii-TCP-Tahoe"><a href="#iii-TCP-Tahoe" class="headerlink" title="iii.  TCP Tahoe"></a>iii.  TCP Tahoe</h3><center><img src="image-20191203144306819.png" srcset="/img/loading.gif" alt="image-20191203144306819" style="zoom:50%;" /></center><center><img src="image-20191215202752438.png" srcset="/img/loading.gif" alt="image-20191215202752438" style="zoom:50%;" /></center><ul><li>When <strong>cwnd</strong> is below <strong>Threshold</strong>, sender in <u>slow-start</u> phase, window grows <u>exponentially</u>. </li></ul><center><img src="image-20191215205611729.png" srcset="/img/loading.gif" alt="image-20191215205611729" style="zoom: 33%;" /></center><center><img src="image-20191215205648912.png" srcset="/img/loading.gif" alt="image-20191215205648912" style="zoom:33%;" /></center><center><img src="image-20191215205720002.png" srcset="/img/loading.gif" alt="image-20191215205720002" style="zoom: 33%;" /></center><center><img src="image-20191215205754864.png" srcset="/img/loading.gif" alt="image-20191215205754864" style="zoom:33%;" /></center><ul><li>When <strong>cwnd</strong> is above <strong>Threshold</strong>, sender is in <u>congestion-avoidanc</u>e phase, window grows <u>linearly</u>. </li></ul><center><img src="image-20191215205825740.png" srcset="/img/loading.gif" alt="image-20191215205825740" style="zoom:33%;" /></center><ul><li><p>When packet loss occurs</p><center><img src=image-20191215205912344.png" alt="image-20191215205912344" style="zoom:33%;" /></center><ul><li><strong>cwnd</strong> instead set to 1 MSS; </li><li>window then grows exponentially to a <strong>threshold</strong>, then grows linearly</li><li>Threshold =1/2 of <strong>cwnd</strong> before loss event </li></ul></li></ul><center><img src="image-20191215205948869.png" srcset="/img/loading.gif" alt="image-20191215205948869" style="zoom:33%;" /></center><p><br/></p><h3 id="iv-TCP-Reno"><a href="#iv-TCP-Reno" class="headerlink" title="iv. TCP Reno"></a>iv. TCP Reno</h3><center><img src="image-20191203144359731.png" srcset="/img/loading.gif" alt="image-20191203144359731" style="zoom:40%;" /></center><div class="note note-info">            <p>å‘é€ç«¯æœ‰ä¸€ä¸ªå¿«é€Ÿæ–¹æ³•æ¥è¯†åˆ«å®ƒçš„åŒ…å·±ç»è¢«ä¸¢å¤±ã€‚å½“ä¸¢å¤±æ•°æ®åŒ…çš„åç»­æ•°æ®åŒ…åˆ°è¾¾æ¥æ”¶ç«¯æ—¶ï¼Œå®ƒä»¬è§¦å‘ç»™å‘é€ç«¯è¿”å›ç¡®è®¤ã€‚è¿™äº›ç¡®è®¤æ®µæºå¸¦ç€ç›¸åŒçš„ç¡®è®¤å·ï¼Œç§°ä¸ºé‡å¤ç¡®è®¤ã€‚å‘é€ç«¯æ¯æ¬¡æ”¶åˆ°é‡å¤ç¡®è®¤æ—¶ï¼Œå¾ˆå¯èƒ½å¦ä¸€ä¸ªåŒ…å·±ç»åˆ°è¾¾æ¥æ”¶ç«¯ï¼Œè€Œä¸¢å¤±çš„é‚£ä¸ªåŒ…ä»ç„¶æ²¡æœ‰å‡ºç°ã€‚TCPè®¤ä¸ºä¸‰ä¸ªé‡å¤ç¡®è®¤æ„å‘³ç€è¿™ä¸ªæ•°æ®åŒ…å·²ç»ä¸¢å¤±</p>          </div><center><img src="image-20191203144834670.png" srcset="/img/loading.gif" alt="image-20191203144834670" style="zoom:35%;" /></center><ul><li>When <strong>cwnd</strong> is below <strong>Threshold</strong>, sender in <u>slow-start</u> phase, window grows <u>exponentially</u>. </li><li>When <strong>cwnd</strong> is above <strong>Threshold</strong>, sender is in <u>congestion-avoidanc</u>e phase, window grows <u>linearly</u>. </li><li>When a triple duplicate ACK occurs <ul><li><strong>cwnd</strong> is cut in half</li><li>window then grows linearly </li><li>Threshold =1/2 of <strong>cwnd</strong> before loss event </li></ul></li><li>When timeout occurs <ul><li><strong>cwnd</strong> instead set to 1 MSS; </li><li>window then grows exponentially to a <strong>threshold</strong>, then grows linearly </li><li>Threshold =1/2 of <strong>cwnd</strong> before loss event </li></ul></li></ul><p>æ€»ç»“å¦‚ä¸‹ï¼š</p><center><img src="image-20191203150750984.png" srcset="/img/loading.gif" alt="image-20191203150750984" style="zoom:40%;" /></center><h3 id="v-TCP-throughput"><a href="#v-TCP-throughput" class="headerlink" title="v. TCP throughput"></a>v. TCP throughput</h3><p>Whatâ€™s the average throughput of TCP as a function of window size and RTT?[Ignore slow start]</p><blockquote><p>Let W be the window size when loss occurs. </p><p>When window is W, throughput is $\frac{W}{RTT }$</p><p>Just after loss, window drops to $\frac{W}{2}$, throughput to $\frac{W}{2RTT}$. </p><p>Average throughout: $\frac{0.75 W}{RTT}$</p></blockquote><h3 id="vi-ä¸€é“ä¾‹é¢˜"><a href="#vi-ä¸€é“ä¾‹é¢˜" class="headerlink" title="vi. ä¸€é“ä¾‹é¢˜"></a>vi. ä¸€é“ä¾‹é¢˜</h3><center><img src="image-20191203151238340.png" srcset="/img/loading.gif" alt="image-20191203151238340" style="zoom:40%;" /></center><ul><li><p><strong>(1).</strong> Identify the intervals of time when TCP slow start is operating. </p><p>çœ‹å„é˜¶æ®µæŒç»­çš„æ—¶é—´ã€‚slow startæœ‰ä¸¤æ®µã€‚ç­”æ¡ˆæ˜¯9</p></li><li><p><strong>(2).</strong> Identify the intervals of time when TCP congestion avoidance is </p><p>operating. </p><p>15</p></li><li><p><strong>(3).</strong> After the 16th transmission round, is segment loss detected by a triple duplicate ACK or by a timeout? </p><p>triple duplicate ACK å› ä¸ºcwndåªé™äº†ä¸€åŠ</p></li><li><p><strong>(4).</strong> After the 22nd transmission round, is segment loss detected by a triple duplicate ACK or by a timeout? </p><p>timeout, å› ä¸º cwndé™ä¸º1</p></li><li><p><strong>(5).</strong> What is the initial value of <strong>Threshold</strong> at the first transmission round? </p><p>32 å› ä¸º32çš„æ—¶å€™è¿›å…¥äº†congestion avoidanceé˜¶æ®µ</p></li><li><p><strong>(6).</strong> What is the value of <strong>Threshold</strong> at the 18th transmission round? </p><p>21 thresholdå˜æˆ16th cwndçš„ä¸€åŠ</p></li><li><p><strong>(7).</strong> What is the value of <strong>Threshold</strong> at the 24th transmission round? </p><p>13 thresholdå˜æˆ16th cwndçš„ä¸€åŠ</p></li><li><p><strong>(8).</strong> Assuming a packet loss is detected after the 26th round by the receipt of a triple duplicate ACK, what will be the values of the <strong>cwnd</strong> and <strong>Threshold</strong>? </p><p>cwnd:4     threshold:4</p></li><li><p><strong>(9).</strong> Suppose <strong>TCP Tahoe</strong> is used (instead of TCP Reno), and assume that triple duplicate ACKs are received at the 16th round. What are the <strong>Threshold</strong> and <strong>cwnd</strong> at the 19th round? </p><p>cwnd:4     threshold:21</p></li></ul><p><br/></p><p>reference:</p><p>[1] <a href="https://andrewpqc.github.io/2018/07/16/transport-layer-udp-and-tcp/" target="_blank" rel="noopener">https://andrewpqc.github.io/2018/07/16/transport-layer-udp-and-tcp/</a></p>]]></content>
    
    
    <categories>
      
      <category>Computer Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer Network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CA - Storage</title>
    <link href="/2019/12/08/ComputerArchitecture/Storage/"/>
    <url>/2019/12/08/ComputerArchitecture/Storage/</url>
    
    <content type="html"><![CDATA[<h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h1><center><img src="image-20191208134608723.png" srcset="/img/loading.gif" alt="image-20191208134608723" style="zoom:50%;" /></center><h2 id="1-1-ç¼“å­˜æ€§èƒ½"><a href="#1-1-ç¼“å­˜æ€§èƒ½" class="headerlink" title="1.1 ç¼“å­˜æ€§èƒ½"></a>1.1 ç¼“å­˜æ€§èƒ½</h2><p>CPU execution time</p><script type="math/tex; mode=display">=(CPU\, clock\, cycles + Memory\, stall\, cycles)\times Clock\, cycle\, time</script><p>{:.warning}</p><p>è¿™é‡ŒCPU clock ciclesåŒ…æ‹¬handle cache hit/missçš„æ—¶é—´</p><center><img src="image-20191208135106480.png" srcset="/img/loading.gif" alt="image-20191208135106480" style="zoom:60%;" /></center><center><img src="image-20191208135244903.png" srcset="/img/loading.gif" alt="image-20191208135244903" style="zoom:60%;" /></center><p>çœ‹ä¸€é“ä¾‹é¢˜</p><blockquote><p>a computer with CPI=1 when cache hit.  </p><p>50% instructions are loads and stores;</p><p>2% miss rate, 25 cc miss penalty;</p><p><strong>Q:</strong> how much faster would the computer be if all instructions were cache hits?</p></blockquote><p>Answer:</p><ol><li>always hit:</li></ol><p>CPU execution time = (CPU clocks cycles + Memory stall cycles) * clock cycle</p><p>=<script type="math/tex">(IC \times CPI + 0) \times clock\,cycle</script></p><p>=<script type="math/tex">IC \times clock\, cycle</script></p><p><br/></p><ol><li>with misses</li></ol><p>Memory stall cycles</p><p>= $IC \times \frac{Memory\, accesses}{Instruction}\times Miss\, rate\times Miss\, penalty$</p><p>=$IC\times(1+0.5)\times 0.02\times 25$</p><p>=$IC\times 0.75$</p><p>memory accesses=1.5æ˜¯å› ä¸ºæ‰§è¡Œä»»ä½•ä¸€æ¡æŒ‡ä»¤éƒ½è¦è®¿é—®memoryå–æŒ‡ä»¤ï¼Œå¹¶ä¸”50%çš„æŒ‡ä»¤æ˜¯load, store å› æ­¤ 1+0.5=1.5</p><p>CPU execution time = (CPU clocks cycles + Memory stall cycles) $\times$ clock cycle</p><p>=$(IC\times 1.0+IC\times 0.75)\times$clock cycle</p><p>=$1.75\times $clock cycle</p><p>æ‰€ä»¥æ¯”å€¼æ˜¯1.75</p><h2 id="1-2-4ä¸ªå­˜å‚¨å™¨å±‚æ¬¡ç»“æ„é—®é¢˜"><a href="#1-2-4ä¸ªå­˜å‚¨å™¨å±‚æ¬¡ç»“æ„é—®é¢˜" class="headerlink" title="1.2 4ä¸ªå­˜å‚¨å™¨å±‚æ¬¡ç»“æ„é—®é¢˜"></a>1.2 4ä¸ªå­˜å‚¨å™¨å±‚æ¬¡ç»“æ„é—®é¢˜</h2><p>Q1: Where can a block be placed in the upper level? (block placement)</p><p>Q2: How is a block found if it is in the upper level? (block identification)</p><p>Q3: Which block should be replaced on a miss? (block replacement)</p><p>Q4: What happens on a write? (write strategy)</p><center><img src="image-2019120874232.png" srcset="/img/loading.gif" alt="æˆªå±2019-12-08ä¸‹åˆ7.42.32" style="zoom:67%;" /></center><center><img src="image-20191208194519623.png" srcset="/img/loading.gif" alt="image-20191208194519623" style="zoom: 67%;" /></center><h3 id="A-Write-Strategy"><a href="#A-Write-Strategy" class="headerlink" title="A. Write Strategy"></a>A. Write Strategy</h3><p><code>Write hit</code></p><ul><li>write-through: info is written to both the block in the cache and to the block in the lower-level memory</li><li>write-back: info is written only to the block in the cache;  to the main memory only when the modified cache block is replaced[dirty bit]</li></ul><p><code>Write miss</code></p><ul><li>Write allocate: data at the missed-<strong>write</strong> location is loaded to cache, followed by a <strong>write</strong>-hit operation  </li><li>No-write allocate[write around]: data at the missed-<strong>write</strong> location is not loaded to cache, and is written directly to the backing store.  ;  <em>until the program tries to read the block, the data is loaded to cache;</em></li></ul><center><img src="image-20191208201918610.png" srcset="/img/loading.gif" alt="image-20191208201918610" style="zoom:50%;" /></center><ol><li>No-Write allocate:  4 misses + 1 hit</li></ol><center><img src="image-20191208202025669.png" srcset="/img/loading.gif" alt="image-20191208202025669" style="zoom:50%;" /></center><ol><li>Write allocate:  2 misses + 3 hits</li></ol><center><img src="image-20191208202722945.png" srcset="/img/loading.gif" alt="image-20191208202722945" style="zoom:50%;" /></center><h1 id="2-ç¼“å­˜æ€§èƒ½"><a href="#2-ç¼“å­˜æ€§èƒ½" class="headerlink" title="2. ç¼“å­˜æ€§èƒ½"></a>2. ç¼“å­˜æ€§èƒ½</h1><h3 id="Hit-or-Miss-How-long-will-it-take"><a href="#Hit-or-Miss-How-long-will-it-take" class="headerlink" title="Hit or Miss: How long will it take?"></a>Hit or Miss: How long will it take?</h3><p>Average memory access time = Hit time + Miss rate x Miss penalty</p><ul><li><strong>Example</strong></li></ul><blockquote><p>16KB instr cache + 16KB data cache;</p><p>or, 32KB unified cache;</p><p>36% data transfer instructions;</p><p>(load/store takes 1 extra cc on unified cache)</p><p>1 CC hit; 200 CC miss penalty;</p></blockquote><center><img src="image-20191208204528711.png" srcset="/img/loading.gif" alt="image-20191208204528711" style="zoom:30%;" /></center><blockquote><p><strong>Q1:</strong> split cache or unified cache has lower miss rate? </p></blockquote><p>Answer:</p><center><img src="image-20191208204804983.png" srcset="/img/loading.gif" alt="image-20191208204804983" style="zoom:40%;" /></center><ol><li>split cache</li></ol><p>16KB instruction Miss rate</p><p>â€‹        = <script type="math/tex">\frac{3.82}{1000}/1=0.004</script></p><p>16KB data miss rate</p><p>â€‹        =<script type="math/tex">\frac{40.9}{1000}/0.36=0.114</script></p><p>assume 74% of memory accesses are instruction references</p><p>Overall miss rate</p><p>â€‹        =<script type="math/tex">(74\%\times 0.004)+(26\%\times 0.114)=0.0326</script></p><ol><li>unified cache</li></ol><p>Miss rate</p><p>=<script type="math/tex">\frac{43.3}{1000}/(1.0+0.36)=0.0318</script></p><blockquote><p><strong>Q2:</strong> average memory access time?</p></blockquote><center><img src="image-20191208205644462.png" srcset="/img/loading.gif" alt="image-20191208205644462" style="zoom:40%;" /></center><center><img src="image-20191208205754992.png" srcset="/img/loading.gif" alt="image-20191208205754992" style="zoom:40%;" /></center><h2 id="2-1-å­˜å‚¨å™¨å¹³å‡è®¿é—®æ—¶é—´ä¸å¤„ç†å™¨æ€§èƒ½"><a href="#2-1-å­˜å‚¨å™¨å¹³å‡è®¿é—®æ—¶é—´ä¸å¤„ç†å™¨æ€§èƒ½" class="headerlink" title="2.1 å­˜å‚¨å™¨å¹³å‡è®¿é—®æ—¶é—´ä¸å¤„ç†å™¨æ€§èƒ½"></a>2.1 å­˜å‚¨å™¨å¹³å‡è®¿é—®æ—¶é—´ä¸å¤„ç†å™¨æ€§èƒ½</h2><h1 id="3-Six-Basic-Cache-Optimizations"><a href="#3-Six-Basic-Cache-Optimizations" class="headerlink" title="3. Six Basic Cache Optimizations"></a>3. Six Basic Cache Optimizations</h1><p>æˆ‘ä»¬å°†æ‰€æœ‰ç¼ºå¤±åˆ†æˆä¸‰ç±»</p><ul><li><p>å¼ºåˆ¶ç¼ºå¤±[Compulsory]</p><p>cold-start/first-reference misses;</p></li><li><p>å®¹é‡ç¼ºå¤±[Capacity]</p><p>cache size limit;</p><p> blocks discarded and later retrieved;</p></li><li><p>å†²çªç¼ºå¤±</p><p>collision misses: associativity</p><p>a block discarded and later retrieved in a set;</p></li></ul><center><img src="image-20191208213224033.png" srcset="/img/loading.gif" alt="image-20191208213224033" style="zoom:30%;" /></center><center><img src="image-20191208213207928.png" srcset="/img/loading.gif" alt="image-20191208213207928" style="zoom:30%;" /></center><center><img src="image-20191208213148539.png" srcset="/img/loading.gif" alt="image-20191208213148539" style="zoom:30%;" /></center><h2 id="3-1-Larger-Block-size"><a href="#3-1-Larger-Block-size" class="headerlink" title="3.1 Larger Block size"></a>3.1 Larger Block size</h2><ul><li><p><strong>Reduce</strong> compulsory misses</p><p>â€‹    Leverage spatial locality</p></li><li><p><strong>Reduce</strong> static power</p><p>â€‹    block sizeå¢å¤§ï¼Œåœ°å€é‡Œé¢indexä½å°±å˜å¤šï¼Œtagä½æ•°å°±å˜å°‘ï¼Œæ¯”è¾ƒæ—¶éœ€è¦çš„å·¥ä½œé‡å°±å˜å°‘</p></li><li><p><strong>Increase</strong> conflict/capacity misses</p><p>â€‹    Fewer block in the cache</p></li></ul><center><img src="image-20191208214954621.png" srcset="/img/loading.gif" alt="image-20191208214954621" style="zoom: 30%;" /></center><h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><center><img src="image-20191208215035983.png" srcset="/img/loading.gif" alt="image-20191208215035983" style="zoom:40%;" /></center><p><strong>Answer</strong></p><p> avg mem access time</p><p>â€‹        =hit time + miss rate x miss penalty</p><div class="note note-info">            <p> assume 1-CC hit time</p><p> for a 256-byte block in a 256 KB cache:</p><p> avg mem access time</p><p>â€‹        = 1 + 0.49% x (80 + 2x256/16) = 1.5 cc</p>          </div><p> 2x256/16æ˜¯å› ä¸ºå­˜å‚¨å™¨2ccèƒ½ç»™cacheä¼ å›16bytes</p><h2 id="3-2-Larger-cache"><a href="#3-2-Larger-cache" class="headerlink" title="3.2 Larger cache"></a>3.2 Larger cache</h2><ul><li><p><strong>Reduce</strong> capacity misses</p></li><li><p><strong>Increase</strong> hit time, cost, and power</p></li></ul><h2 id="3-3-Higher-Associativity"><a href="#3-3-Higher-Associativity" class="headerlink" title="3.3 Higher Associativity"></a>3.3 Higher Associativity</h2><ul><li><p><strong>Reduce</strong> conflict misses</p></li><li><p><strong>Increase</strong> hit time</p></li></ul><h2 id="3-4-Multilevel-cache"><a href="#3-4-Multilevel-cache" class="headerlink" title="3.4 Multilevel cache"></a>3.4 Multilevel cache</h2><ul><li><strong>Reduce</strong> miss penalty</li></ul><p><br/></p><h4 id="A-Two-level-cache"><a href="#A-Two-level-cache" class="headerlink" title="A. Two-level cache"></a>A. Two-level cache</h4><p> Add another level of cache between the original cache and memory</p><ul><li><p><strong>L1</strong>: small enough to match the clock cycle time of the fast processor;</p></li><li><p><strong>L2</strong>: large enough to capture many accesses that would go to main memory, lessening miss penalty</p></li></ul><center><img src="image-20191208220714030.png" srcset="/img/loading.gif" alt="image-20191208220714030" style="zoom:50%;" /></center><h4 id="B-Average-memory-access-time"><a href="#B-Average-memory-access-time" class="headerlink" title="B. Average memory access time"></a>B. Average memory access time</h4><p>=Hit timeL1 + Miss rateL1 x Miss penaltyL1</p><p>=Hit timeL1 + Miss rateL1</p><p> x(Hit timeL2+Miss rateL2xMiss penaltyL2)</p><h4 id="C-Average-mem-stalls-per-instruction"><a href="#C-Average-mem-stalls-per-instruction" class="headerlink" title="C. Average mem stalls per instruction"></a>C. Average mem stalls per instruction</h4><p>=Misses per instructionL1 x Hit timeL2</p><p> + Misses per instrL2 x Miss penaltyL2</p><h4 id="D-Local-miss-rate"><a href="#D-Local-miss-rate" class="headerlink" title="D. Local miss rate"></a>D. Local miss rate</h4><p> the number of misses in a cache</p><p> divided by the total number of mem accesses to <u>this cache</u>;</p><p> {:.info}</p><p>åˆ†æˆ Miss rateL1, Miss rateL2</p><h4 id="E-Global-miss-rate"><a href="#E-Global-miss-rate" class="headerlink" title="E. Global miss rate"></a>E. Global miss rate</h4><p> the number of misses in the cache </p><p> divided by the number of mem accesses generated by the processor;</p><p> {:.info}</p><p>L1çš„å…¨å±€ç¼ºå¤±ç‡Miss rate<strong>L1</strong>,<u>L2çš„å…¨å±€ç¼ºå¤±ç‡ Miss rateL1 x Miss rateL2</u></p><h4 id="Example-1"><a href="#Example-1" class="headerlink" title="Example"></a>Example</h4><blockquote><p>1000 mem references -&gt; 40 misses in L1 and 20 misses in L2;</p><p>miss penalty from L2 is 200 cc;</p><p>hit time of L2 is 10 cc;</p><p>hit time of L1 is 1 cc;</p><p>1.5 mem references per instruction;</p><p> <strong>Q: 1.</strong> various miss rates?</p></blockquote><p> <strong>L1:</strong> local = global</p><p> 40/1000 = 4%</p><p> <strong>L2:</strong></p><p> local: 20/40 = 50%</p><p> global: 20/1000 = 2%</p><blockquote><p><strong>Q: 2.</strong> avg mem access time?</p></blockquote><p>average memory access time</p><p>=Hit timeL1 + Miss rateL1</p><p> x(Hit timeL2+Miss rateL2xMiss penaltyL2)</p><p>=1 + 4% x (10 + 50% x 200)</p><p>=5.4</p><blockquote><p> <strong>Q: 3.</strong> avg stall cycles per instruction?</p></blockquote><p>average stall cycles per instruction</p><p>=Misses per instructionL1 x Hit timeL2</p><p> + Misses per instrL2 x Miss penaltyL2</p><p>=(1.5x40/1000)x10+(1.5x20/1000)x200</p><p>=6.6</p><h2 id="2-5-Prioritize-read-misses-over-writes"><a href="#2-5-Prioritize-read-misses-over-writes" class="headerlink" title="2.5  Prioritize read misses over writes"></a>2.5  Prioritize read misses over writes</h2><ul><li><strong>Reduce</strong> miss penalty</li></ul><div class="note note-info">            <p>è¿™ç§æ–¹æ³•ä½¿å¾—åœ¨write bufferå°†æ•°æ®å†™å…¥memoryä¹‹å‰ï¼Œå°±å¯ä»¥ä¸ºreadæ“ä½œæä¾›æœåŠ¡</p>          </div><h2 id="2-6-Avoid-address-translation-during-indexing-cache"><a href="#2-6-Avoid-address-translation-during-indexing-cache" class="headerlink" title="2.6 Avoid address translation during indexing cache"></a>2.6 Avoid address translation during indexing cache</h2><p>è™šæ‹Ÿç¼“å­˜</p><h1 id="4-Ten-advanced-cache-optimizations"><a href="#4-Ten-advanced-cache-optimizations" class="headerlink" title="4. Ten advanced cache optimizations"></a>4. Ten advanced cache optimizations</h1><center><img src="image-20191209100308445.png" srcset="/img/loading.gif" alt="image-20191209100308445" style="zoom: 33%;" /></center><h2 id="4-1-Small-and-Simple-First-Level-Caches"><a href="#4-1-Small-and-Simple-First-Level-Caches" class="headerlink" title="4.1 Small and Simple First-Level Caches"></a>4.1 Small and Simple First-Level Caches</h2><ul><li>Small size</li></ul><blockquote><p>support a fast clock cycle</p><p>reduce power</p></blockquote><ul><li>Lower associativity</li></ul><blockquote><p>reduce both hit time and power</p><p>(direct-mapped caches can overlap the tag check with the transmission of the data)</p></blockquote><h2 id="4-2-Way-prediction"><a href="#4-2-Way-prediction" class="headerlink" title="4.2 Way prediction"></a>4.2 Way prediction</h2><p>â€¢Reduce conflict misses and hit time</p><p>â€¢<strong>Way prediction</strong></p><p> <em>block predictor bits</em> are added to each block to predict the way/block within the set of the <em>next</em> cache access</p><p> the multiplexor is set <strong>early to select the desired block</strong>;</p><p> only a single tag comparison is performed <strong>in parallel with cache reading</strong>;</p><p> a miss results in checking the other blocks for matches in the next clock cycle;</p><h2 id="4-3-Pipelined-Cache-Access"><a href="#4-3-Pipelined-Cache-Access" class="headerlink" title="4.3 Pipelined Cache Access"></a>4.3 Pipelined Cache Access</h2><ul><li><p>Increase cache bandwidth</p></li><li><p>Higher latency</p></li><li><p>Greater penalty on mispredicted branches and more clock cycles between issuing the load and using the data </p></li></ul><h2 id="4-4-Nonblocking-caches"><a href="#4-4-Nonblocking-caches" class="headerlink" title="4.4 Nonblocking caches"></a>4.4 Nonblocking caches</h2><blockquote><p>å¯¹äºå…è®¸ä¹±åºæ‰§è¡Œçš„æµæ°´åŒ–è®¡ç®—æœºï¼Œä»–çš„å¤„ç†å™¨ä¸å¿…å› ä¸ºä¸€æ¬¡æ•°æ®ç¼“å­˜ç¼ºå¤±è€Œåœé¡¿ã€‚åœ¨ç­‰å¾…æ•°æ®ç¼“å­˜è¿”å›ç¼ºå¤±æ•°æ®æ—¶ï¼Œå¤„ç†å™¨å¯ä»¥ç»§ç»­ä»æŒ‡ä»¤ç¼“å­˜ä¸­æå–æŒ‡ä»¤ã€‚nonblocking cacheå…è®¸æ•°æ®ç¼“å­˜åœ¨ä¸€æ¬¡ç¼ºå¤±æœŸé—´ç»§ç»­æä¾›ç¼“å­˜å‘½ä»¤</p></blockquote><ul><li>Increase cache bandwidth</li></ul><h2 id="4-5-Multibanked-caches"><a href="#4-5-Multibanked-caches" class="headerlink" title="4.5 Multibanked caches"></a>4.5 Multibanked caches</h2><blockquote><p>Divide cache into independent banks that support simultaneous accesses</p><p>Sequential interleaving spread the addresses of blocks sequentially across the banks</p></blockquote><center><img src="image-20191217202233856.png" srcset="/img/loading.gif" alt="image-20191217202233856" style="zoom:50%;" /></center><ul><li>Increase cache bandwidth</li></ul><h2 id="4-6-Critical-Word-First-amp-Early-Restart"><a href="#4-6-Critical-Word-First-amp-Early-Restart" class="headerlink" title="4.6 Critical Word First &amp; Early Restart"></a>4.6 Critical Word First &amp; Early Restart</h2><p>é€šå¸¸CPUåªä¼šrequestä¸€ä¸ªword, ä½†æ˜¯ä¸€ä¸ªcache lineå¯¹åº”äº†å¾ˆå¤šä¸ªword</p><ul><li>critical word first</li></ul><blockquote><p>é¦–å…ˆè¯·æ±‚critical wordä¹Ÿå°±æ˜¯CPU requestçš„é‚£ä¸ªword, ç„¶åå‘é€ç»™CPU, ç„¶åå†å»è¯·æ±‚ä¸€ä¸ªcache lineå‰©ä½™çš„éƒ¨åˆ†</p></blockquote><ul><li>early restart</li></ul><blockquote><p>æŒ‰æ­£å¸¸é¡ºåºè·å–word, ä¸éœ€è¦ç­‰å¾…ä¸€ä¸ªcache lineå…¨éƒ¨æ”¾å…¥ç¼“å­˜å†å‘é€ç»™å¤„ç†å™¨ï¼Œè€Œæ˜¯critical wordåˆ°äº†å°±ç›´æ¥å‘é€ç»™å¤„ç†å™¨ï¼Œä¸éœ€è¦ç­‰å¾…è¿˜æ²¡æœ‰å®Œæˆä¼ è¾“çš„word</p></blockquote><ul><li>Reduce miss penalty</li></ul><h2 id="4-7-Merging-Write-buffer"><a href="#4-7-Merging-Write-buffer" class="headerlink" title="4.7 Merging Write buffer"></a>4.7 Merging Write buffer</h2><p>Write merging merges four entries (with sequential addresses)  into a single buffer entry</p><center><img src="image-20191217203849064.png" srcset="/img/loading.gif" alt="image-20191217203849064" style="zoom:50%;" /></center><ul><li>Reduce miss penalty</li></ul><h2 id="4-8-Compiler-optimizations"><a href="#4-8-Compiler-optimizations" class="headerlink" title="4.8 Compiler optimizations"></a>4.8 Compiler optimizations</h2><h3 id="A-Loop-interchange"><a href="#A-Loop-interchange" class="headerlink" title="A. Loop interchange"></a>A. Loop interchange</h3><h4 id="before"><a href="#before" class="headerlink" title="before"></a>before</h4><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">100</span>; j++) &#123;  <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5000</span>; i++) &#123;    x[i][j] = <span class="hljs-number">2</span> * x[i][j];  &#125;&#125;</code></pre></div><p>x[i][j]è®¿é—®ä¹‹åè®¿é—®x[i+1][j],è¿™ä¸­é—´å·®äº†100ä¸ªæ•°æ®</p><h4 id="after"><a href="#after" class="headerlink" title="after"></a>after</h4><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5000</span>; i++) &#123;  <span class="hljs-keyword">for</span>(j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">100</span>; j++) &#123;    x[i][j] = <span class="hljs-number">2</span> * x[i][j]  &#125;&#125;</code></pre></div><p>x[i][j]è®¿é—®ä¹‹åè®¿é—®x[i][j+1], è¿™ä¸­é—´åªå·®äº†ä¸€ä¸ªæ•°æ®ï¼Œå°±å¯ä»¥æŒ‰ç…§æ•°æ®å­˜å‚¨çš„é¡ºåºæ¥è®¿é—®ï¼Œå¢å¼ºäº†space localityã€‚</p><p>è¿™æ ·ä¸€æ¬¡missä¹‹åï¼Œloadå¤šä¸ªwordè¿›cacheçš„è¯ï¼Œç¼ºå¤±å°±ä¼šå˜å°‘</p><h3 id="B-Blocking-åˆ†å—"><a href="#B-Blocking-åˆ†å—" class="headerlink" title="B. Blocking[åˆ†å—]"></a>B. Blocking[åˆ†å—]</h3><h4 id="before-1"><a href="#before-1" class="headerlink" title="before"></a>before</h4><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; N; i++) &#123;  <span class="hljs-keyword">for</span>(j = <span class="hljs-number">0</span>; j &lt; N; j++) &#123;    &#123;      r = <span class="hljs-number">0</span>;      <span class="hljs-comment">//yçš„è¡Œ * zçš„åˆ—</span>      <span class="hljs-keyword">for</span>(k = <span class="hljs-number">0</span>; k &lt; N; k++) &#123;        r = r + y[i][k] * z[k][j]      &#125;    &#125;  &#125;&#125;</code></pre></div><p><img src="image-20191217210134473.png" srcset="/img/loading.gif" alt="image-20191217210134473" style="zoom:50%;" /></p><h4 id="after-1"><a href="#after-1" class="headerlink" title="after"></a>after</h4><p><em>maximize accesses to loaded data before they are replaced</em></p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(jj = <span class="hljs-number">0</span>; jj &lt; N; jj = jj + B) &#123;  <span class="hljs-keyword">for</span>(kk = <span class="hljs-number">0</span>; kk &lt; N; kk = kk + B) &#123;    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; N; i++) &#123;      <span class="hljs-keyword">for</span>(j = jj; j &lt; min(jj+B, N); j++) &#123;        &#123;          r = <span class="hljs-number">0</span>;          <span class="hljs-keyword">for</span>(k = kk; k &lt; min(kk); k++) &#123;            r = r + y[i][k] * z[k][j];          &#125;          x[i][j] = x[i][j] + r;        &#125;      &#125;    &#125;  &#125;&#125;</code></pre></div><p><img src="image-20191217210322625.png" srcset="/img/loading.gif" alt="image-20191217210322625" style="zoom:50%;" /></p><h2 id="4-9-Hardware-prefetching"><a href="#4-9-Hardware-prefetching" class="headerlink" title="4.9 Hardware prefetching"></a>4.9 Hardware prefetching</h2><p>æŒ‡ä»¤å’Œæ•°æ®éƒ½å¯ä»¥é¢„å–ï¼Œæ—¢å¯ä»¥ç›´æ¥æ”¾åœ¨cacheä¸­ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨ä¸€ä¸ªè®¿é—®é€Ÿåº¦å¿«äºmain memoryçš„å¤–éƒ¨ç¼“å†²åŒºä¸­ã€‚</p><p>ä¸‹é¢æ¥çœ‹ä¸€ä¸‹æŒ‡ä»¤é¢„å–</p><p>é€šå¸¸ï¼Œå¤„ç†å™¨åœ¨ä¸€æ¬¡ç¼ºå¤±æ—¶æå–ä¸¤ä¸ªå—ã€‚è¢«è¯·æ±‚å—å’Œä¸‹ä¸€ä¸ªç›¸é‚»å—</p><ul><li>è¢«è¯·æ±‚å—æ”¾åœ¨ä»–è¿”å›æ—¶çš„æŒ‡ä»¤ç¼“å­˜ä¸­</li><li>é¢„å–å—æ”¾åœ¨æŒ‡ä»¤æµç¼“å†²åŒºä¸­ã€‚</li></ul><p>è¯·æ±‚æ—¶ï¼Œå¦‚æœå‘ç°è¢«è¯·æ±‚å—ä½äºæŒ‡ä»¤æµç¼“å†²åŒºï¼Œé‚£ä¹ˆåŸç¼“å­˜è¯·æ±‚å–æ¶ˆï¼Œä»æµç¼“å†²åŒºæ¥è¯»å–è¿™ä¸ªå—ã€‚å¹¶å‘å‡ºä¸‹ä¸€æ¡é¢„å–è¯·æ±‚</p><ul><li>Reduce miss penalty/rate</li></ul><h2 id="4-10-Compiler-Prefetching"><a href="#4-10-Compiler-Prefetching" class="headerlink" title="4.10 Compiler Prefetching"></a>4.10 Compiler Prefetching</h2><p>ä½œä¸ºhardware prefetchingçš„æ›¿ä»£æ–¹æ³•ã€‚å¯ä»¥åœ¨å¤„ç†å™¨éœ€è¦æŸä¸€æ•°æ®ä¹‹å‰ï¼Œç”±ç¼–è¯‘å™¨æ’å…¥è¯·æ±‚è¯¥æ•°æ®çš„é¢„å–æŒ‡ä»¤</p><p>æœ‰ä»¥ä¸‹ä¸¤ç§prefetch</p><ul><li><p><strong>Register</strong> <strong>prefetch</strong></p><p>load the value into a register</p></li><li><p><strong>Cache</strong> <strong>prefetch</strong></p><p>load data into the cache</p></li></ul><p><strong>Example</strong></p><p>16-byte blocks;</p><p>8-byte elements for a and b;</p><p>write-back strategy</p><p>a[0][0] miss, copy both a[0][0],a[0][1] as one block contains 16/8 = 2;</p><p><strong><em>before</em></strong></p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i = i + <span class="hljs-number">1</span>)  <span class="hljs-keyword">for</span>(j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">100</span>; j = j + <span class="hljs-number">1</span>)    a[i][j] = b[j][<span class="hljs-number">0</span>] * b[j + <span class="hljs-number">1</span>][<span class="hljs-number">0</span>]</code></pre></div><p>ç¼ºå¤±æ¬¡æ•°</p><p>å¯¹äºa, $3\times(100/2)=150$æ¬¡ç¼ºå¤±</p><p>å¯¹äºb, bä¸ä¼šä»ç©ºé—´å±€éƒ¨æ€§å—ç›Šï¼Œä½†æ˜¯å¯ä»¥ä»æ—¶é—´å±€éƒ¨æ€§å—ç›Š</p><p>bä»b[0][0]è®¿é—®åˆ°b[100][0]ä¸€å…±æœ‰101æ¬¡ç¼ºå¤±</p><p>æ€»å…±251æ¬¡ç¼ºå¤±</p><p><strong><em>after prefetching</em></strong></p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">100</span>; j++) &#123;  prefetch(b[j+<span class="hljs-number">7</span>][<span class="hljs-number">0</span>]);  prefetch(a[<span class="hljs-number">0</span>][j+<span class="hljs-number">7</span>]);  a[<span class="hljs-number">0</span>][j] = b[j][<span class="hljs-number">0</span>] * b[j+<span class="hljs-number">1</span>][<span class="hljs-number">0</span>];&#125;<span class="hljs-keyword">for</span>(i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">3</span>; i++) &#123;  <span class="hljs-keyword">for</span>(j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">100</span>; j++) &#123;prefetch(a[i][j+<span class="hljs-number">7</span>]);    a[i][j] = b[j][<span class="hljs-number">0</span>] * b[j+<span class="hljs-number">1</span>][<span class="hljs-number">0</span>];  &#125;&#125;</code></pre></div><p>ä¿®æ”¹åï¼Œå°†ä¼šé¢„å–a[i][7]â€”-a[i][99]å’Œb[7][0]â€”b[100][0]</p><p>æ‰€ä»¥éé¢„å–ç¼ºå¤±åªä¼šå‡ºç°åœ¨å‰å‡ ä¸ªå¾ªç¯</p><ul><li>ç¬¬ä¸€ä¸ªloopè®¿é—®b[0][0]â€”-b[6][0]çš„7æ¬¡ç¼ºå¤±</li><li>ç¬¬ä¸€ä¸ªloopè®¿é—®a[0][0]â€”a[0][7]çš„4æ¬¡ç¼ºå¤±</li><li>ç¬¬äºŒä¸ªloopè®¿é—®a[1][0]â€”a[1][6]çš„4æ¬¡ç¼ºå¤±</li><li>ç¬¬äºŒä¸ªloopè®¿é—®a[2][0]â€”a[2][6]çš„4æ¬¡ç¼ºå¤±</li></ul><p>æ€»å…±æœ‰19æ¬¡éé¢„å–ç¼ºå¤±</p><p><strong>Reduce</strong> miss penalty/rate</p><h1 id="5-Memory"><a href="#5-Memory" class="headerlink" title="5. Memory"></a>5. Memory</h1><p>Performance Measures</p><ul><li><strong>Latency</strong></li></ul><div class="note note-warning">            <p>the time to retrieve the first word of the block</p>          </div><p> important for caches;</p><p> harder to reduce;</p><blockquote><p><strong>access time</strong>: the time between when a read is requested and when the desired word arrives;</p><p><strong>cycle time</strong>: the minimum time between unrelated requests to memory;</p><p><em>or</em> the minimum time between the start of an access and the start of the next access;</p></blockquote><ul><li><strong>Bandwidth</strong> </li></ul><p>the time to retrieve the rest of this block</p><h2 id="5-1-RAM"><a href="#5-1-RAM" class="headerlink" title="5.1 RAM"></a>5.1 RAM</h2><p><a href="https://www.zhihu.com/question/30492703" target="_blank" rel="noopener">Zhihu Birkeeâ€™s answer</a></p><p>RAMï¼ŒRandom-Access Memoryï¼Œå³éšæœºå­˜å–å­˜å‚¨å™¨ï¼Œå…¶å®å°±æ˜¯å†…å­˜ï¼Œæ–­ç”µä¼šä¸¢å¤±æ•°æ®ã€‚<br>ä¸»è¦åˆ†ä¸ºSRAMï¼ˆstaticï¼‰å’ŒDRAMï¼ˆdynamic)ã€‚ä¸»è¦çš„åŒºåˆ«åœ¨äºå­˜å‚¨å•å…ƒï¼ŒDRAMä½¿ç”¨ç”µå®¹ç”µè·è¿›è¡Œå­˜å‚¨ã€‚éœ€è¦ä¸€ç›´åˆ·æ–°å……ç”µã€‚SRAMæ˜¯ç”¨é”å­˜å™¨é”ä½ä¿¡æ¯ï¼Œä¸éœ€è¦åˆ·æ–°ã€‚ä½†ä¹Ÿéœ€è¦å……ç”µä¿æŒã€‚</p><center><table>  <tr>    <td><div class="card">     <div class="card__image">       <img class="image" src="image-20191209104433202.png" srcset="/img/loading.gif" alt="image-20191209104433202" style="zoom:50%;" />   </div>     <div class="card__content">         <div class="card__header">             <h4>DRAMçš„åŸºæœ¬å­˜å‚¨å•å…ƒ</h4>         </div>         <p>åˆ©ç”¨ä¸€ä¸ªæ™¶ä½“ç®¡è¿›è¡Œæ§åˆ¶ç”µå®¹çš„å……æ”¾ç”µ</p>    </div></div></td>  <td><div class="card">     <div class="card__image">       <img class="image" src="image-20191209104458720.png" srcset="/img/loading.gif" alt="image-20191209104458720" style="zoom:50%;" />   </div>     <div class="card__content">         <div class="card__header">             <h4>DRAMä¸€èˆ¬çš„å¯»å€æ¨¡å¼</h4>         </div>         <p>æ§åˆ¶çš„æ™¶ä½“ç®¡é›†æˆåœ¨å•ä¸ªå­˜å‚¨å•å…ƒä¸­</p>    </div> </div></td>  </tr></table></center><h2 id="5-2-SRAM-for-cache-Static-Random-Access-Memory"><a href="#5-2-SRAM-for-cache-Static-Random-Access-Memory" class="headerlink" title="5.2 SRAM for cache[Static Random Access Memory]"></a>5.2 SRAM for cache[Static Random Access Memory]</h2><ul><li><p>Six transistors per bit to prevent the information from being disturbed when read</p></li><li><p>Donâ€™t need to refresh, so access time is very close to cycle time</p></li></ul><h2 id="5-3-DRAM-for-main-memory-Dynamic-Random-Access-Memory"><a href="#5-3-DRAM-for-main-memory-Dynamic-Random-Access-Memory" class="headerlink" title="5.3 DRAM for main memory[Dynamic Random Access Memory]"></a>5.3 DRAM for main memory[Dynamic Random Access Memory]</h2><center><img src="image-20191209105411600.png" srcset="/img/loading.gif" alt="image-20191209105411600" style="zoom:30%;" /></center><center><img src="image-20191209105418930.png" srcset="/img/loading.gif" alt="image-20191209105418930" style="zoom:30%;" /></center><p>bing row into row buffer</p><center><img src="image-20191209105429474.png" srcset="/img/loading.gif" alt="image-20191209105429474" style="zoom:30%;"/></center><p>select Data via Multiplexor</p><center><img src="image-20191209105442259.png" srcset="/img/loading.gif" alt="image-20191209105442259" style="zoom:30%;"/></center><p>Data selected</p><center><img src="image-20191209105451917.png" srcset="/img/loading.gif" alt="image-20191209105451917" style="zoom:30%;"/></center><p>Row buffer hit</p><center><img src="image-20191209105459461.png" srcset="/img/loading.gif" alt="image-20191209105459461" style="zoom:30%;"/></center><p>Row buffer conflict</p><br>## 5.6 æé«˜å­˜å‚¨å™¨çš„å¯é æ€§### Error type* **Soft errors**<div class="note note-info">            <p>changes to a cellâ€™s contents, not a change in the circuitry</p>          </div>* **Hard errors**<div class="note note-info">            <p>permanent changes in the operation of one or more memory cells</p>          </div>### Error detection and fix<center><table>  <tr>    <td><div class="card">     <div class="card__content">         <div class="card__header">             <h4>Parity only</h4>         </div>         <p>only one bit of overhead to detect a single error in a sequence of bits;</p>    </div></div></td>  <td><div class="card">      <div class="card__content">         <div class="card__header">             <h4>ECC only</h4>         </div>         <p>detect two errors and correct a single error with 8-bit overhead per 64 data bits</p>    </div> </div></td>    <td><div class="card">      <div class="card__content">         <div class="card__header">             <h4>Chipkill</h4>         </div>         <p>ç±»ä¼¼äºåœ¨ç£ç›˜ä¸­ä½¿ç”¨RAIDæ–¹æ³•ï¼Œå®ƒåˆ†æ•£æ•°æ®å’ŒECCä¿¡æ¯ï¼Œåœ¨å•ä¸ªå­˜å‚¨å™¨èŠ¯ç‰‡å®Œå…¨å¤±æ•ˆæ—¶ï¼Œå¯ä»¥ä»å…¶ä½™å­˜å‚¨å™¨èŠ¯ç‰‡ä¸­é‡æ„ä¸¢å¤±æ•°æ®</p>    </div> </div></td>  </tr></table></center><h1 id="6-Disk"><a href="#6-Disk" class="headerlink" title="6. Disk"></a>6. Disk</h1><div class="item">     <div class="item__image">     <img class="image image--lg" src="image-20191209113803942.png" srcset="/img/loading.gif" alt="image-20191209113803942" style="zoom:50%;" />    <img class="image image--lg" src="image-20191209113823956.png" srcset="/img/loading.gif" alt="image-20191209113823956" style="zoom:50%;" />     </div>     <div class="item__content">       <div class="item__header">           <h4>Disk</h4>       </div>       <div class="item__description">         <p>Sector: minimum storage unit. A block may span multiple sectors</p>     <p>Cluster:(dis)contiguous groups of sectors to reduce the overhead of managing on-disk data structures; may span more than one track</p>      </div>     </div> </div><p>Areal density = $\frac{Tracks}{Inch}$ on a disk surface $\times$ $\frac{Bits}{Inch}$ on a track</p><h2 id="6-1-RAID-Redundant-Arrays-of-Inepensive-Disk"><a href="#6-1-RAID-Redundant-Arrays-of-Inepensive-Disk" class="headerlink" title="6.1 RAID[Redundant Arrays of Inepensive Disk]"></a>6.1 RAID[Redundant Arrays of Inepensive Disk]</h2><ul><li>RAID 0: No Redundancy</li><li>RAID 1: Mirroring / Shadowing</li></ul><blockquote><p>Two copies for every piece of data</p><p>one logical write = two physical writes</p><p>100% capacity/space  overhead</p></blockquote><center><img src="IMG_2C62CE9D9D16-1.jpeg" srcset="/img/loading.gif" alt="IMG_2C62CE9D9D16-1" style="zoom:50%;" /></center><ul><li>RAID 2:</li></ul><blockquote><p>Each bit of data word is written to a data disk drive</p><p>Each data word has its (Hamming Code) ECC word recorded on the ECC disks</p><p>On read, the ECC code verifies correct data or corrects single disks errors</p></blockquote><center><img src="image-20191216120558419.png" srcset="/img/loading.gif" alt="image-20191216120558419" style="zoom:50%;" /></center><ul><li>RAID 3:</li></ul><blockquote><p>RAID 3 Pæ ¡éªŒç›˜å­˜çš„æ˜¯å‰é¢æ‰€æœ‰ç›˜æ•°æ®çš„å’Œã€‚</p><p>ä»–å¾ˆæ…¢ï¼Œå› ä¸ºæ¯è¯»å–ä¸€æ¬¡ç£ç›˜æ•°æ®ï¼Œæ ¡éªŒæ—¶è¦è¯»å–å…¶ä»–æ‰€æœ‰ç£ç›˜æ‰èƒ½ç®—æ ¡éªŒå’Œ</p><p>ç£ç›˜åäº†çš„è¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡checksumæ¢å¤æ•°æ®</p></blockquote><center><img src="IMG_E9E135911744-1.png" srcset="/img/loading.gif" alt="IMG_E9E135911744-1" style="zoom:50%;" /></center><center><img src="image-20191216121018499.png" srcset="/img/loading.gif" alt="image-20191216121018499" style="zoom:50%;" /></center><ul><li>RAID 4</li></ul><center><img src="IMG_17517EAA2585-1.png" srcset="/img/loading.gif" alt="IMG_17517EAA2585-1" style="zoom: 33%;" /></center><ul><li>RAID 5</li></ul><center><img src="IMG_8BFCBD97FD85-1.png" srcset="/img/loading.gif" alt="IMG_8BFCBD97FD85-1" style="zoom:30%;" /></center><ul><li>RAID 6</li></ul><blockquote><p>row parity</p></blockquote><center><img src="image-20191216130127847.png" srcset="/img/loading.gif" alt="image-20191216130127847" style="zoom:30%;" /></center><blockquote><p>Diagonal parity</p></blockquote><center><img src="image-20191216130657742.png" srcset="/img/loading.gif" alt="image-20191216130657742" style="zoom:30%;" /></center><p>çœ‹ä¸€ä¸ªä¾‹å­</p><p>disk 1å’Œdisk 3 double failure</p><center><img src="image-20191216130845614.png" srcset="/img/loading.gif" alt="image-20191216130845614" style="zoom:30%;" /></center><p>First recover Disk 3 stripe 0. Because its diagonal parity is independent from the other failed disk 1.</p><center><img src="image-20191216130921114.png" srcset="/img/loading.gif" alt="image-20191216130921114" style="zoom:30%;" /></center><p>When Disk 3 stripe 0 is recoverd, then we can recover Disk 1 stripe 3. Because on its row, only its stripe is failed. So we can use the row parity to recover the stripe.</p><center><img src="image-20191216130953500.png" srcset="/img/loading.gif" alt="image-20191216130953500" style="zoom:30%;" /></center><p>Now, we have recovered Disk 1 stripe 3 and Disk 3 stripe 0</p><center><img src="image-20191216131127165.png" srcset="/img/loading.gif" alt="image-20191216131127165" style="zoom:30%;" /></center><p>ä»¥ä¸‹åŒç†</p><center><img src="image-20191216131242663.png" srcset="/img/loading.gif" alt="image-20191216131242663" style="zoom:30%;" /></center><center><img src="image-20191216131302430.png" srcset="/img/loading.gif" alt="image-20191216131302430" style="zoom:30%;" /></center><center><img src="image-20191216131334869.png" srcset="/img/loading.gif" alt="image-20191216131334869" style="zoom:30%;" /></center><center><img src="image-20191216131357343.png" srcset="/img/loading.gif" alt="image-20191216131357343" style="zoom:30%;" /></center><center><img src="image-20191216131420435.png" srcset="/img/loading.gif" alt="image-20191216131420435" style="zoom:30%;" /></center><center><img src="image-20191216131449208.png" srcset="/img/loading.gif" alt="image-20191216131449208" style="zoom:30%;" /></center><center><img src="image-20191216131514362.png" srcset="/img/loading.gif" alt="image-20191216131514362" style="zoom:30%;" /></center><center><img src="image-20191216131536642.png" srcset="/img/loading.gif" alt="image-20191216131536642" style="zoom:30%;" /></center><center><img src="image-20191216131556362.png" srcset="/img/loading.gif" alt="image-20191216131556362" style="zoom:30%;" /></center><h1 id="7-I-O-performance"><a href="#7-I-O-performance" class="headerlink" title="7. I/O performance"></a>7. I/O performance</h1><h3 id="unique-measures"><a href="#unique-measures" class="headerlink" title="unique measures"></a>unique measures</h3><ul><li>Diversity</li></ul><blockquote><p>which I/O devices can connect to the computer system?</p></blockquote><ul><li>Capacity</li></ul><blockquote><p>how many I/O devices can connect to a computer system?</p></blockquote><h3 id="Metrics"><a href="#Metrics" class="headerlink" title="Metrics"></a>Metrics</h3><ul><li><p>response time[latency]</p></li><li><p>throughout[bandwidth]</p></li></ul><center><img src="image-20191216102829183.png" srcset="/img/loading.gif" alt="image-20191216102829183" style="zoom:50%;" /></center><h2 id="7-1-Throughout-VS-Response-Time"><a href="#7-1-Throughout-VS-Response-Time" class="headerlink" title="7.1 Throughout VS Response Time"></a>7.1 Throughout VS Response Time</h2><p><strong><em>Transaction</em></strong></p><blockquote><p>An interation between human and computer is called <strong><em><u>transaction</u></em></strong></p></blockquote><p>A <strong><em><u>transaction time</u></em></strong> is divided into three parts:</p><blockquote><ul><li><u>entry time</u></li></ul><blockquote><p>The time for user to enter the command</p></blockquote><ul><li><u>system response time</u></li></ul><blockquote><p>The time between when the user enters the command and the complete response is displayed</p></blockquote><ul><li><u>think time</u></li></ul><blockquote><p>The time from the reception of the response until the user begins to <strong><em><u>enter the next command</u></em></strong></p></blockquote></blockquote><center><img src="image-20191216210721189.png" srcset="/img/loading.gif" alt="image-20191216210721189" style="zoom:40%;" /></center><center><img src="image-20191216210659441.png" srcset="/img/loading.gif" alt="image-20191216210659441" style="zoom:50%;" /></center><p>More transaction time reduction than just the response time reduction. People need less time to think when given a faster response</p><h2 id="7-2-Transaction-Processing-Benchmarks"><a href="#7-2-Transaction-Processing-Benchmarks" class="headerlink" title="7.2 Transaction-Processing Benchmarks"></a>7.2 Transaction-Processing Benchmarks</h2><h3 id="A-SPEC"><a href="#A-SPEC" class="headerlink" title="A. SPEC"></a>A. SPEC</h3><h3 id="B-TPC-C"><a href="#B-TPC-C" class="headerlink" title="B. TPC_C"></a>B. TPC_C</h3><h2 id="7-3-A-little-Queuing-Theory-to-calculate-response-time-and-throughput"><a href="#7-3-A-little-Queuing-Theory-to-calculate-response-time-and-throughput" class="headerlink" title="7.3 A little Queuing Theory[to calculate response time and throughput]"></a>7.3 A little Queuing Theory[to calculate response time and throughput]</h2><center><img src="image-20191216104938324.png" srcset="/img/loading.gif" alt="image-20191216104938324" style="zoom:50%;" /></center><p><strong><em>Flow-balanced State</em></strong></p><ul><li><p>If the system is in <strong>steady state</strong>,  then the number of tasks entering the system must equal the number of tasks leaving the system</p></li><li><p>This <strong>flow-balanced state</strong> is necessary but not sufficient for steady state</p></li><li><p>The system has reached <strong>steady state</strong> if the system has been observed for a sufficiently long time and  mean waiting times stabilize</p></li></ul><h3 id="A-littleâ€™s-law-important"><a href="#A-littleâ€™s-law-important" class="headerlink" title="A. littleâ€™s law[important]"></a>A. littleâ€™s law[important]</h3><h4 id="i-Assumptions"><a href="#i-Assumptions" class="headerlink" title="i. Assumptions"></a>i. Assumptions</h4><div class="note note-info">            <p>input rate = output rate; </p><p>a steady supply of tasks independent for how long they wait for service;</p>          </div><h4 id="ii-littleâ€™s-law"><a href="#ii-littleâ€™s-law" class="headerlink" title="ii. littleâ€™s law"></a>ii. littleâ€™s law</h4><div class="note note-error">            <p>Mean number of tasks in system =  Arrival rate $\times$ Mean response time</p><p>æ³¨æ„arrival rate è¡¨ç¤ºå•ä½æ—¶é—´åˆ°äº†å‡ ä¸ªtask</p>          </div><h4 id="iii-single-server-model"><a href="#iii-single-server-model" class="headerlink" title="iii. single-server model"></a>iii. single-server model</h4><center><img src="image-20191216214128113.png" srcset="/img/loading.gif" alt="image-20191216214128113" style="zoom: 40%;" /></center><ul><li>$Time_{server}$  â€”Average time to service a task; average  $service_{rate}=1/Time_{server}$</li><li>$Time_{queue}$â€”Average time per task in the queue.</li><li>$Time_{system}$ â€”Average time per task in the system, or the response time, which is $Time_{queue}+Time_{server}$ .</li><li>Arrival rateâ€”Average number of arriving tasks/second</li><li>$Length_{server}$â€”Average number of tasks in service.</li><li>$Length_{queue}$â€”Average length of queue.</li><li>$Length_{system}$â€”Average number of tasks in system, which is $Length_{server}+Length_{queue}$</li></ul><p><strong><em>Server Utilization</em></strong></p><div class="note note-info">            <p>Server utilization = Arrival rate$\times$ $Time_{server}$</p>          </div><center><img src="image-20191216110406290.png" srcset="/img/loading.gif" alt="image-20191216110406290" style="zoom:50%;" /></center><p><br/></p><p><strong><em>Time queue</em></strong></p><p>$Time_{queue}=Length_{queue}\times Time_{server}+$Mean time to complete the task being serviced when new task arrives if server is busy</p><p>$Time_{queue}=Time_{server}\times \frac{Server\;utilization}{1-Server\; utilization}$</p><script type="math/tex; mode=display">\begin{equation}\begin{aligned}Length_{queue}=&Arrival\; rate\times Time_{server}\times\frac{Server\;utilization}{1-Server\; utilization}\\ =&\frac{Server\; utilization^2}{1-Server\; utilization}\end{aligned}\end{equation}</script><h4 id="iv-M-M-1-queue"><a href="#iv-M-M-1-queue" class="headerlink" title="iv. M/M/1 queue"></a>iv. M/M/1 queue</h4><blockquote><p><strong>M</strong>: <em>Markov</em></p><p>exponentially random request arrival;</p><p><strong>M</strong>: <em>Markov</em></p><p>exponentially random service time</p><p><strong>1</strong></p><p>single server</p></blockquote><p><strong>assumptions</strong></p><blockquote><p>The system is in equilibrium</p><p><em>Interarrival</em> <em>times</em> [times between two successive requests arriving] are exponentionally distributed</p><p><em>Infinite population model</em>: unlimited number of sources of requests</p><p>Server starts on the next job immediately after finishing prior one</p><p>FIFO queue with unlimited length</p><p>One server only</p></blockquote><center><img src="image-20191216222544839.png" srcset="/img/loading.gif" alt="image-20191216222544839" style="zoom:50%;" /></center><center><img src="image-20191216222600418.png" srcset="/img/loading.gif" alt="image-20191216222600418" style="zoom:50%;" /></center><center><img src="image-20191216222618484.png" srcset="/img/loading.gif" alt="image-20191216222618484" style="zoom:50%;" /></center><h4 id="v-M-M-m-queue"><a href="#v-M-M-m-queue" class="headerlink" title="v. M/M/m queue"></a>v. M/M/m queue</h4><center><img src="image-20191216222740597.png" srcset="/img/loading.gif" alt="image-20191216222740597" style="zoom:50%;" /></center><center><img src="image-20191216222905001.png" srcset="/img/loading.gif" alt="image-20191216222905001" style="zoom:40%;" /></center>]]></content>
    
    
    <categories>
      
      <category>Computer Architecture</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer Architecture</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Computer network--ç½‘ç»œå±‚part2</title>
    <link href="/2019/12/06/ComputerNetwork/NetworkLayer2/"/>
    <url>/2019/12/06/ComputerNetwork/NetworkLayer2/</url>
    
    <content type="html"><![CDATA[<h1 id="3-æ‹¥å¡æ§åˆ¶ç®—æ³•"><a href="#3-æ‹¥å¡æ§åˆ¶ç®—æ³•" class="headerlink" title="3. æ‹¥å¡æ§åˆ¶ç®—æ³•"></a>3. æ‹¥å¡æ§åˆ¶ç®—æ³•</h1><h3 id="i-ä»€ä¹ˆæ˜¯æ‹¥å¡-congestion"><a href="#i-ä»€ä¹ˆæ˜¯æ‹¥å¡-congestion" class="headerlink" title="i. ä»€ä¹ˆæ˜¯æ‹¥å¡[congestion]"></a>i. ä»€ä¹ˆæ˜¯æ‹¥å¡[congestion]</h3><div class="note note-warning">            <p>ç½‘ç»œä¸­å­˜åœ¨å¤ªå¤šçš„æ•°æ®åŒ…å¯¼è‡´æ•°æ®åŒ…è¢«å»¶è¿Ÿå»¶è¿Ÿå’Œä¸¢å¤±ï¼Œä»è€Œé™ä½äº†ä¼ è¾“æ€§èƒ½ï¼Œè¿™ç§æƒ…å†µç§°ä¸ºæ‹¥å¡</p>          </div><p>ç½‘ç»œå±‚å’Œä¼ è¾“å±‚å…±åŒæ‰¿æ‹…ç€å¤„ç†æ‹¥å¡çš„è´£ä»»ã€‚</p><ul><li><p>ç”±äºæ‹¥å¡å‘ç”Ÿåœ¨ç½‘ç»œå†…ï¼Œæ­£æ˜¯ç½‘ç»œå±‚ç›´æ¥ç»å†ç€æ‹¥å¡ï¼Œè€Œä¸”å¿…é¡»ç”±å®ƒæœ€ç»ˆç¡®å®šå¦‚ä½•å¤„ç†è¿‡è½½çš„æ•°æ®åŒ…ã€‚</p></li><li><p>ç„¶è€Œï¼Œæ§åˆ¶æ‹¥å¡çš„æœ€æœ‰æ•ˆæ–¹æ³•æ˜¯å‡å°‘ä¼ è¾“å±‚æ³¨å…¥ç½‘ç»œçš„è´Ÿè½½ã€‚è¿™å°±éœ€è¦ç½‘ç»œå±‚å’Œä¼ è¾“å±‚å…±åŒåŠªåŠ›ååŒå·¥ä½œã€‚</p></li></ul><h3 id="ii-æ‹¥å¡çš„å½±å“"><a href="#ii-æ‹¥å¡çš„å½±å“" class="headerlink" title="ii. æ‹¥å¡çš„å½±å“"></a>ii. æ‹¥å¡çš„å½±å“</h3><center><img src="image-20191202212045404.png" srcset="/img/loading.gif" alt="image-20191202212045404" style="zoom:30%;" /></center><ul><li>å½“ä¸»æœºå‘é€åˆ°ç½‘ç»œçš„æ•°æ®åŒ…æ•°é‡åœ¨å…¶æ‰¿è½½èƒ½åŠ›èŒƒå›´ä¹‹å†…æ—¶ï¼Œ é€è¾¾çš„æ•°æ®åŒ…æ•°ä¸å‘é€çš„æ•°æ®åŒ…æ•°æˆæ­£æ¯”ä¾‹å¢é•¿</li><li>ç„¶è€Œï¼Œéšç€è´Ÿè½½æ¥è¿‘æ‰¿è½½èƒ½åŠ›ï¼Œå¶å°”çªå‘çš„æµé‡å¡«æ»¡äº†è·¯ç”±å™¨å†…éƒ¨çš„ç¼“å†²åŒºï¼Œå› è€ŒæŸäº›æ•°æ®åŒ…ä¼šè¢«ä¸¢å¤±ã€‚è¿™äº›ä¸¢å¤±çš„æ•°æ®åŒ…æ¶ˆè€—äº†éƒ¨åˆ†å®¹é‡ï¼Œå› æ­¤ï¼Œé€è¾¾çš„æ•°æ®åŒ…æ•°é‡ä½äºç†æƒ³æ›²çº¿ã€‚ç½‘ç»œç°åœ¨å¼€å§‹æ‹¥å¡ã€‚</li></ul><ul><li>é™¤éç½‘ç»œæ˜¯ç²¾å¿ƒè®¾è®¡çš„ï¼Œå¦åˆ™å®ƒææœ‰å¯èƒ½ä¼šé­é‡æ‹¥å¡å´©æºƒ [Ccongestion collapse ]ï¼Œè¡¨ç°ä¸ºéšç€æ³¨å…¥è´Ÿè½½çš„å¢åŠ åˆ°è¶…å‡ºç½‘ç»œçš„å®¹é‡ï¼Œç½‘ç»œæ€§èƒ½éª¤é™ã€‚</li></ul><p><br/></p><p>æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶</p><blockquote><ul><li>æ‹¥å¡æ§åˆ¶çš„ä»»åŠ¡æ˜¯ç¡®ä¿ç½‘ç»œèƒ½å¤Ÿæ‰¿è½½æ‰€æœ‰åˆ°è¾¾çš„æµé‡ã€‚è¿™æ˜¯ä¸€ä¸ªå…¨å±€æ€§çš„é—®é¢˜ï¼Œæ¶‰åŠå„æ–¹é¢çš„è¡Œä¸ºï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„ä¸»æœºå’Œæ‰€æœ‰çš„è·¯ç”±å™¨ã€‚</li><li>ä¸æ­¤ç›¸åï¼Œæµé‡æ§åˆ¶åªä¸ç‰¹å®šçš„å‘é€æ–¹å’Œç‰¹å®šçš„æ¥æ”¶æ–¹ä¹‹é—´çš„ç‚¹åˆ°ç‚¹æµé‡æœ‰å…³ã€‚å®ƒçš„ä»»åŠ¡æ˜¯ç¡®ä¿ä¸€ä¸ªå¿«é€Ÿçš„å‘é€æ–¹ä¸ä¼šæŒç»­åœ°ä»¥è¶…è¿‡æ¥æ”¶æ–¹æ¥æ”¶èƒ½åŠ›çš„é€Ÿç‡ä¼ è¾“æ•°æ®ã€‚</li></ul></blockquote><p><br/></p><h2 id="3-1-æ‹¥å¡æ§åˆ¶çš„é€”å¾„"><a href="#3-1-æ‹¥å¡æ§åˆ¶çš„é€”å¾„" class="headerlink" title="3.1 æ‹¥å¡æ§åˆ¶çš„é€”å¾„"></a>3.1 æ‹¥å¡æ§åˆ¶çš„é€”å¾„</h2><p>æ‹¥å¡çš„å‡ºç°æ„å‘³ç€è´Ÿè½½ï¼ˆæš‚æ—¶ï¼‰å¤§äºèµ„æºï¼ˆåœ¨ç½‘ç»œçš„ä¸€éƒ¨åˆ†ã€‰å¯ä»¥å¤„ç†çš„èƒ½åŠ›ã€‚</p><p>å¾ˆè‡ªç„¶èƒ½æƒ³åˆ°ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆ</p><ul><li>å¢åŠ èµ„æº</li><li>å‡å°‘è´Ÿè½½ã€‚</li></ul><center><img src="image-20191202215504805.png" srcset="/img/loading.gif" alt="image-20191202215504805" style="zoom: 33%;" /></center><h2 id="3-2-æµé‡æ„ŸçŸ¥è·¯ç”±-traffic-aware-routing"><a href="#3-2-æµé‡æ„ŸçŸ¥è·¯ç”±-traffic-aware-routing" class="headerlink" title="3.2 æµé‡æ„ŸçŸ¥è·¯ç”±[traffic-aware routing]"></a>3.2 æµé‡æ„ŸçŸ¥è·¯ç”±[traffic-aware routing]</h2><p>æŠŠé“¾è·¯æƒé‡è®¾ç½®æˆä¸€ä¸ªï¼ˆå›ºå®šï¼‰é“¾è·¯å¸¦å®½ã€ä¼ è¾“å»¶è¿Ÿã€ï¼ˆå¯å˜ï¼‰æµ‹é‡è´Ÿè½½æˆ–å¹³å‡æ’é˜Ÿå»¶è¿Ÿçš„å‡½æ•°ã€‚åœ¨æ‰€æœ‰å…¶ä»–æ¡ä»¶éƒ½ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæœ€å°æƒé‡çš„è·¯å¾„æ›´é’çé‚£äº›<strong><em>è½»è´Ÿè½½</em></strong>çš„è·¯å¾„ã€‚</p><p><br/></p><h2 id="3-3-å‡†å…¥æ§åˆ¶-admission-control"><a href="#3-3-å‡†å…¥æ§åˆ¶-admission-control" class="headerlink" title="3.3 å‡†å…¥æ§åˆ¶[admission control]"></a>3.3 å‡†å…¥æ§åˆ¶[admission control]</h2><p>ä¸€ç§å¹¿æ³›åº”ç”¨äºè™šç”µè·¯ç½‘ç»œï¼Œé˜²æ­¢å‡ºç°æ‹¥å¡çš„æŠ€æœ¯æ˜¯å‡†å…¥æ§åˆ¶ï¼ˆ admission control ï¼‰</p><p>æ€æƒ³ï¼š</p><div class="note note-warning">            <p>é™¤éç½‘ç»œå¯ä»¥æºå¸¦é¢å¤–çš„æµé‡è€Œä¸ä¼šå˜å¾—æ‹¥å¡ï¼Œå¦åˆ™ä¸å†å»ºç«‹æ–°çš„è™šç”µè·¯ã€‚å› æ­¤ï¼Œä»»ä½•å»ºç«‹æ–°çš„è™šç”µè·¯çš„å°è¯•æˆ–è®¸ä¼šå¤±è´¥ã€‚</p>          </div><p>å¸¸ç”¨ï¼š<u>leaky bucket</u> or <u>token bucket</u></p><h2 id="3-4-æµé‡è°ƒèŠ‚-traffic-throttling"><a href="#3-4-æµé‡è°ƒèŠ‚-traffic-throttling" class="headerlink" title="3.4 æµé‡è°ƒèŠ‚[traffic throttling]"></a>3.4 æµé‡è°ƒèŠ‚[traffic throttling]</h2><p>åœ¨ Internet å’Œè®¸å¤šå…¶ä»–è®¡ç®—æœºç½‘ç»œä¸­ï¼Œå‘é€æ–¹è°ƒæ•´å®ƒä»¬çš„ä¼ è¾“é€Ÿåº¦ä»¥ä¾¿å‘é€ç½‘ç»œèƒ½å®é™…ä¼ é€çš„æµé‡ã€‚åœ¨è¿™ç§è®¾ç½®ä¸‹ï¼Œç½‘ç»œçš„ç›®æ ‡æ˜¯åœ¨æ‹¥å¡å‘ç”Ÿä¹‹å‰æ­£å¸¸å·¥ä½œã€‚</p><p>è€Œå½“æ‹¥å¡è¿«åœ¨çœ‰ç«ï¼Œå®ƒå¿…é¡»å‘Šè¯‰å‘é€æ–¹ç´§æ€¥åˆ¹è½¦æ”¾æ…¢ä¼ è¾“é€Ÿåº¦ã€‚è¿™ç§åé¦ˆæ˜¯ä¸€ç§å¸¸æ€è€Œä¸æ˜¯é’ˆå¯¹ç‰¹æ®Šæƒ…å†µçš„ä¸€ç§å¤„ç†ã€‚</p><p><br/></p><h3 id="é™åˆ¶æµé‡çš„æ–¹æ³•"><a href="#é™åˆ¶æµé‡çš„æ–¹æ³•" class="headerlink" title="é™åˆ¶æµé‡çš„æ–¹æ³•"></a>é™åˆ¶æµé‡çš„æ–¹æ³•</h3><p>è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š</p><h4 id="1-è·¯ç”±å™¨å¿…é¡»ç¡®å®šä½•æ—¶å¿«è¦æ¥è¿‘æ‹¥å¡ï¼Œæœ€å¥½åœ¨æ‹¥å¡å‘ç”Ÿä¹‹å‰èƒ½ç¡®å®š-æ’é˜Ÿæ—¶å»¶"><a href="#1-è·¯ç”±å™¨å¿…é¡»ç¡®å®šä½•æ—¶å¿«è¦æ¥è¿‘æ‹¥å¡ï¼Œæœ€å¥½åœ¨æ‹¥å¡å‘ç”Ÿä¹‹å‰èƒ½ç¡®å®š-æ’é˜Ÿæ—¶å»¶" class="headerlink" title="1. è·¯ç”±å™¨å¿…é¡»ç¡®å®šä½•æ—¶å¿«è¦æ¥è¿‘æ‹¥å¡ï¼Œæœ€å¥½åœ¨æ‹¥å¡å‘ç”Ÿä¹‹å‰èƒ½ç¡®å®š[æ’é˜Ÿæ—¶å»¶]"></a>1. è·¯ç”±å™¨å¿…é¡»ç¡®å®šä½•æ—¶å¿«è¦æ¥è¿‘æ‹¥å¡ï¼Œæœ€å¥½åœ¨æ‹¥å¡å‘ç”Ÿä¹‹å‰èƒ½ç¡®å®š[æ’é˜Ÿæ—¶å»¶]</h4><blockquote><p>è§£å†³æ–¹æ³•ï¼šæ¯ä¸ªè·¯ç”±å™¨è¿ç»­ç›‘æµ‹å®ƒæ­£åœ¨ä½¿ç”¨çš„èµ„æºã€‚å¯ä»¥è¾“å‡ºåœ¨è·¯ç”±å™¨å†…ç¼“å†²çš„æ’é˜Ÿæ•°æ®åŒ…ã€‚è·¯ç”±å™¨å†…éƒ¨çš„æ’é˜Ÿå»¶è¿Ÿç›´æ¥æ•è·äº†æ•°æ®åŒ…ç»å†è¿‡çš„ä»»ä½•æ‹¥å¡æƒ…å†µ</p><p>ä¸ºäº†ç»´æŒè‰¯å¥½çš„æ’é˜Ÿå»¶è¿Ÿä¼°è®¡d, å‡è®¾sè¡¨ç¤ºç¬æ—¶é˜Ÿåˆ—é•¿åº¦çš„æ ·å€¼, då¯ä»¥å®šæœŸç”Ÿæˆï¼ŒæŒ‰å¦‚ä¸‹æ–¹å¼æ›´æ–°ï¼Œå…¶ä¸­$\alpha$æ˜¯ä¸€ä¸ªå‚æ•°ï¼ŒåŠ æƒç§»åŠ¨å¹³å‡</p><script type="math/tex; mode=display">d_{new}=\alpha d_{old}+(1-\alpha)s</script><p>å¦‚æœdå‡é«˜åˆ°æŸä¸€ä¸ªé˜ˆå€¼ä¹‹ä¸Šï¼Œåˆ™è·¯ç”±å™¨å°±è¦å¼€å§‹æ³¨æ„æ‹¥å µäº†</p></blockquote><h4 id="2-è·¯ç”±å™¨å¿…é¡»åŠæ—¶æŠŠåé¦ˆæ¶ˆæ¯ä¼ é€’ç»™é€ æˆæ‹¥å¡çš„å‘é€æ–¹"><a href="#2-è·¯ç”±å™¨å¿…é¡»åŠæ—¶æŠŠåé¦ˆæ¶ˆæ¯ä¼ é€’ç»™é€ æˆæ‹¥å¡çš„å‘é€æ–¹" class="headerlink" title="2. è·¯ç”±å™¨å¿…é¡»åŠæ—¶æŠŠåé¦ˆæ¶ˆæ¯ä¼ é€’ç»™é€ æˆæ‹¥å¡çš„å‘é€æ–¹"></a>2. è·¯ç”±å™¨å¿…é¡»åŠæ—¶æŠŠåé¦ˆæ¶ˆæ¯ä¼ é€’ç»™é€ æˆæ‹¥å¡çš„å‘é€æ–¹</h4><p><strong>2.A æŠ‘åˆ¶åŒ…</strong></p><blockquote><ul><li>è·¯ç”±å™¨é€‰æ‹©ä¸€ä¸ªè¢«æ‹¥å¡çš„æ•°æ®åŒ…ï¼Œç»™è¯¥æ•°æ®åŒ…çš„æºä¸»æœºè¿”å›ä¸€ä¸ªæŠ‘åˆ¶åŒ…ï¼ˆchoke packet ï¼‰ã€‚</li></ul><p>æŠ‘åˆ¶åŒ…ä¸­çš„<strong><em><u>ç›®æ ‡åœ°å€</u></em></strong>å–è‡ªè¯¥æ‹¥å¡æ•°æ®åŒ…ã€‚åŒæ—¶ï¼Œåœ¨åŸæ¥çš„æ‹¥å¡æ•°æ®åŒ…ä¸Šæ·»åŠ ä¸€ä¸ª<strong><em><u>æ ‡è®°</u></em></strong>ï¼ˆè®¾ç½®å¤´éƒ¨ä¸­çš„ä¸€ä½ï¼‰ï¼Œå› è€Œå®ƒåœ¨å‰è¡Œçš„è·¯å¾„ä¸Šä¸ä¼šäº§ç”Ÿæ›´å¤šçš„æŠ‘åˆ¶åŒ…ã€‚</p><ul><li><p>æ•°æ®åŒ…çš„è½¬å‘è¿‡ç¨‹å¦‚åŒå¹³å¸¸ ä¸€æ ·ã€‚ </p></li><li><p>å½“æºä¸»æœºæ”¶åˆ°äº†æŠ‘åˆ¶åŒ…ï¼ŒæŒ‰ç…§è¦æ±‚å®ƒå¿…é¡»å‡å°‘å‘é€ç»™æŒ‡å®šç›®æ ‡çš„æµé‡ï¼Œæ¯”å¦‚è¯´å‡å°‘ 50% ã€‚</p></li></ul><p>åœ¨æ•°æ®æŠ¥ç½‘ç»œä¸­ï¼Œå‘ç”Ÿæ‹¥å¡æ—¶è·¯ç”±å™¨ç®€å•åœ°éšæœºé€‰æ‹©ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå¾ˆæœ‰å¯èƒ½å°±æŠŠæŠ‘ åˆ¶åŒ…å‘ç»™äº†å¿«é€Ÿå‘é€æ–¹ï¼Œå› ä¸ºå‘é€æ–¹çš„é€Ÿåº¦è¶Šå¿«ï¼Œå®ƒçš„æ•°æ®åŒ…æ’é˜Ÿåœ¨è·¯ç”±å™¨é˜Ÿåˆ—ä¸­çš„æ•°ç›®å°±è¶Šå¤šã€‚</p></blockquote><center><img src="image-20191205230214522.png" srcset="/img/loading.gif" alt="image-20191205230214522" style="zoom:50%;" /></center><p><strong>2.B é€è·³åå‹[hop-by-hop choke packets]</strong></p><p>å› ä¸ºä¼ æ’­å»¶è¿Ÿçš„å½±å“ï¼Œæ‹¥å¡ä¿¡å·å‘å‡ºåˆ°èµ·ä½œç”¨ä¹‹é—´å·²ç»æœ‰å¾ˆå¤šæ–°çš„æ•°æ®åŒ…æ³¨å…¥äº†ç½‘ç»œã€‚</p><p>å› æ­¤ï¼Œå¯ä»¥è®©æŠ‘åˆ¶åŒ…åœ¨æ²¿é€”çš„æ¯ä¸€è·³éƒ½å‘æŒ¥ä½œç”¨</p><center><img src="image-20191205232440838.png" srcset="/img/loading.gif" alt="image-20191205232440838" style="zoom:50%;" /></center><p><strong>2.C Explicit Congestion Notification [ECN]</strong></p><blockquote><ul><li><p>è·¯ç”±å™¨å¯ä»¥åœ¨å®ƒè½¬å‘çš„ä»»ä½•æ•°æ®åŒ…ä¸Šæ‰“ä¸Šæ ‡è®°[è®¾ç½®æ•°æ®åŒ…å¤´çš„æŸä¸€ä¸ªæ ‡å¿—ä½]å‘å‡ºä¿¡å·ï¼Œè¡¨æ˜å®ƒæ­£åœ¨ç»å†ç€æ‹¥å¡ã€‚</p></li><li><p>å½“ç½‘ç»œä¼ é€’æ•°æ®åŒ…æ—¶ï¼Œ æ¥æ”¶æ–¹å¯ä»¥æ³¨æ„åˆ°æœ‰ä¸ªæ‹¥å¡å·±ç»å‘ç”Ÿï¼Œåœ¨å®ƒå‘é€åº”ç­”åŒ…æ—¶é¡ºä¾¿å‘ŠçŸ¥å‘é€æ–¹ã€‚</p></li><li><p>ç„¶åå‘é€æ–¹å¯ä»¥åƒä»¥å‰é‚£æ ·ç´§æ€¥åˆ¹è½¦é™ä½ä¼ è¾“é€Ÿç‡ã€‚</p></li></ul></blockquote><center><img src="image-20191205231809305.png" srcset="/img/loading.gif" alt="image-20191205231809305" style="zoom:50%;" /></center><p><br/></p><h2 id="3-5-è´Ÿè½½è„±è½-load-shedding"><a href="#3-5-è´Ÿè½½è„±è½-load-shedding" class="headerlink" title="3.5 è´Ÿè½½è„±è½[load shedding]"></a>3.5 è´Ÿè½½è„±è½[load shedding]</h2><p>å½“è·¯ç”±å™¨å› ä¸ºæ¥ä¸åŠå¤„ç†æ•°æ®åŒ…è€Œé¢ä¸´è¢«è¿™äº›æ•°æ®åŒ…æ·¹æ²¡çš„å±é™©æ—¶ï¼Œå°±å°†å®ƒä»¬ä¸¢å¼ƒã€‚</p><p>å…³é”®é—®é¢˜ï¼šé€‰æ‹©ä¸¢å¼ƒå“ªä¸ªæ•°æ®åŒ…</p><ul><li>æ—§çš„æ¯”æ–°çš„å¥½ï¼Œä¸¢æ–°åŒ…[wineç­–ç•¥]</li><li>æ–°çš„æ¯”æ—§çš„å¥½[milk ç­–ç•¥]</li></ul><h3 id="éšæœºæ—©æœŸæ£€æµ‹-random-early-detection"><a href="#éšæœºæ—©æœŸæ£€æµ‹-random-early-detection" class="headerlink" title="éšæœºæ—©æœŸæ£€æµ‹[random early detection]"></a>éšæœºæ—©æœŸæ£€æµ‹[random early detection]</h3><p>ä¸ºä»€ä¹ˆæ—©æœŸï¼š</p><blockquote><p>åœ¨æ‹¥å¡åˆšå‡ºç°è‹—å¤´æ—¶å°±å¤„ç†å®ƒæ¯”ç­‰æ‹¥å¡å½¢æˆä¹‹åå†è®¾æ³•è§£å†³å®ƒæ›´åŠ æœ‰æ•ˆï¼Œå³åœ¨æ‰€æœ‰çš„ç¼“å†²ç©ºé—´éƒ½ç²¾ç–²åŠ›ç«­ä¹‹å‰ä¸¢å¼ƒæ•°æ®åŒ…ã€‚</p></blockquote><p>ä¸ºä»€ä¹ˆéšæœº:</p><blockquote><p>éšæœºé€‰æ‹©ä¸¢å¼ƒçš„æ•°æ®åŒ…ä½¿å¾—å¿«é€Ÿå‘é€æ–¹å‘ç°ä¸¢åŒ…çš„å¯èƒ½æ€§æ›´å¤§ã€‚å‘é€æ–¹æ²¡æœ‰æ”¶åˆ°æœŸå¾…çš„ç¡®è®¤ä¿¡æ¯æ—¶ï¼Œå°±ä¼šè®¤ä¸ºä¸¢åŒ…äº†ï¼Œç„¶åä¼ è¾“åè®®å°†æ”¾æ…¢é€Ÿåº¦ã€‚å› æ­¤ï¼Œä¸¢å¤±çš„æ•°æ®åŒ…èµ·åˆ°äº†ä¼ é€’æŠ‘åˆ¶åŒ…çš„åŒæ ·ä½œç”¨</p></blockquote><p><br/></p><h1 id="4-æœåŠ¡è´¨é‡-QUALITY-OF-SERVICE"><a href="#4-æœåŠ¡è´¨é‡-QUALITY-OF-SERVICE" class="headerlink" title="4. æœåŠ¡è´¨é‡[QUALITY OF SERVICE ]"></a>4. æœåŠ¡è´¨é‡[QUALITY OF SERVICE ]</h1><p>A flow is a stream of packets from a source to a destination.</p><p>The needs of each flow can be characterized by fourprimary parameters:</p><ul><li><p>Reliability(å¯é æ€§)</p></li><li><p>å»¶è¿Ÿ(Delay)</p></li><li><p>æŠ–åŠ¨(Jitter)</p></li><li><p>å¸¦å®½(Bandwidth)</p></li></ul><h2 id="4-1-åº”ç”¨éœ€æ±‚"><a href="#4-1-åº”ç”¨éœ€æ±‚" class="headerlink" title="4.1 åº”ç”¨éœ€æ±‚"></a>4.1 åº”ç”¨éœ€æ±‚</h2><center><img src="image-20191205233904014.png" srcset="/img/loading.gif" alt="image-20191205233904014" style="zoom:30%;" /></center><h2 id="4-2-æµé‡æ•´å½¢-traffic-shaping"><a href="#4-2-æµé‡æ•´å½¢-traffic-shaping" class="headerlink" title="4.2 æµé‡æ•´å½¢[traffic shaping]"></a>4.2 æµé‡æ•´å½¢[traffic shaping]</h2><center><img src="image-20191206000433623.png" srcset="/img/loading.gif" alt="image-20191206000433623" style="zoom:50%;" /></center><h1 id="5-INTERNETWORKING-ç½‘ç»œäº’è¿"><a href="#5-INTERNETWORKING-ç½‘ç»œäº’è¿" class="headerlink" title="5. INTERNETWORKING [ç½‘ç»œäº’è¿]"></a>5. INTERNETWORKING [ç½‘ç»œäº’è¿]</h1><h2 id="5-1-How-networks-differ"><a href="#5-1-How-networks-differ" class="headerlink" title="5.1 How networks differ"></a>5.1 How networks differ</h2><center><img src="image-20191224232122964.png" srcset="/img/loading.gif" alt="image-20191224232122964" style="zoom:40%;" /></center><h2 id="5-2-How-networks-can-be-connected"><a href="#5-2-How-networks-can-be-connected" class="headerlink" title="5.2 How networks can be connected"></a>5.2 How networks can be connected</h2><p>å¤šåè®®è·¯ç”±å™¨[multiprotocol router]</p><center><img src="image-20191224232335024.png" srcset="/img/loading.gif" alt="image-20191224232335024" style="zoom:40%;" /></center><h2 id="5-3-Tunneling"><a href="#5-3-Tunneling" class="headerlink" title="5.3 Tunneling"></a>5.3 Tunneling</h2><p>å¤„ç†ä¸¤ä¸ªä¸åŒç½‘ç»œç›¸äº’è¿æ¥æ—¶çš„ä¸€èˆ¬æƒ…å†µè¶…çº§å›°éš¾ã€‚ç„¶è€Œï¼Œå´å­˜åœ¨ä¸€ç§æœ€å¸¸è§çš„ç”šè‡³å¯ç®¡ç†ä¸åŒç½‘ç»œåè®®çš„æƒ…å½¢ã€‚</p><blockquote><p>è¿™ç§æƒ…å½¢å°±æ˜¯æºä¸»æœºå’Œç›®æ ‡ä¸»æœºæ‰€åœ¨ç½‘ç»œçš„ç±»å‹å®Œå…¨ç›¸åŒï¼Œ ä½†å®ƒä»¬ä¸­é—´å´éš”ç€ä¸€ä¸ªä¸åŒç±»å‹çš„ç½‘ç»œã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œè¯·è€ƒè™‘ä¸€å®¶è·¨å›½é“¶è¡Œï¼Œå®ƒåœ¨å·´é»æœ‰ä¸€ ä¸ªIPv6 ç½‘ï¼Œåœ¨ä¼¦æ•¦ä¹Ÿæœ‰ä¸€ä¸ª IPv6 ç½‘, ä½†æ˜¯è¿æ¥å·´é»å’Œä¼¦æ•¦åŠäº‹å¤„çš„å´æ˜¯ IPv4 Internet</p></blockquote><p>å¯ä»¥ç”¨tunnelingæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><ul><li>ä¸ºäº†ç»™ä¼¦æ•¦åŠäº‹å¤„çš„ä¸»æœºå‘é€ä¸€ä¸ª IP æ•°æ®åŒ…ï¼Œå·´é»çš„ä¸»æœºæ„é€ ä¸€ä¸ªåŒ…å«ä¼¦æ•¦ IPv6 åœ°å€çš„æ•°æ®åŒ…</li><li>ç„¶åå°†è¯¥æ•°æ®åŒ…å‘é€åˆ°è¿æ¥å·´é» IPv6 ç½‘ç»œåˆ° IPv4 Internet ä¸Šçš„å¤šåè®®è·¯ç”±å™¨</li><li>å½“è¯¥å¤šåè®®è·¯ç”±å™¨è·å¾— IPv6æ•°æ®åŒ…åï¼Œå®ƒæŠŠè¯¥æ•°æ®åŒ…ç”¨ä¸€ä¸ª IPv4 å¤´å°è£…ï¼Œå°è£…åçš„ IPv4 æ•°æ®åŒ…æŒ‡å‘å¤šåè®®è·¯ç”±å™¨å¦ ä¸€è¾¹çš„ IPv4ï¼Œè¯¥ç½‘ç»œä¸ä¼¦æ•¦çš„ IPv6ç½‘ç»œç›¸è¿ï¼šä¹Ÿå°±æ˜¯è¯´ï¼Œè·¯ç”±å™¨å°†ä¸€ä¸ªIPv6æ•°æ®åŒ…æ”¾ å…¥åˆ°ä¸€ä¸ªIPv4æ•°æ®åŒ…ä¸­ã€‚</li><li>å½“è¿™ä¸ªåŒ…è£¹ç€çš„æ•°æ®åŒ…åˆ°è¾¾ä¼¦æ•¦è·¯ç”±å™¨ï¼ŒåŸæ¥çš„ IPv6 æ•°æ®åŒ… è¢«æå–å‡ºæ¥ï¼Œå¹¶è¢«å‘é€ç»™æœ€ç»ˆçš„ç›®æ ‡ä¸»æœºã€‚</li></ul><div class="note note-success">            <p>å¯ä»¥æŠŠé€šè¿‡ IPv4 Internet çš„è·¯å¾„çœ‹ä½œæ˜¯ä¸€æ ¹ä»ä¸€ä¸ªå¤šåè®®è·¯ç”±å™¨å»¶ä¼¸åˆ°å¦ä¸€ä¸ªå¤šåè®®è·¯ç”±å™¨çš„å¤§éš§é“ã€‚</p>          </div><center><img src="image-20191224232619688.png" srcset="/img/loading.gif" alt="image-20191224232619688" style="zoom:40%;" /></center><h2 id="5-4-Internetwork-Routing"><a href="#5-4-Internetwork-Routing" class="headerlink" title="5.4 Internetwork Routing"></a>5.4 Internetwork Routing</h2><h3 id="AS-Autonamous-System"><a href="#AS-Autonamous-System" class="headerlink" title="AS[Autonamous System]"></a>AS[Autonamous System]</h3><blockquote><p>each network is operated independently of all the others, it is often referred to as an AS (Autonomous System).</p></blockquote><p>Use Two-level routing</p><ul><li>Internet(inter-AS) routing: Exterior gateway protocol, like BGP</li><li>Intranet(intra-AS) routing: Interior gateway protocol, like LS, DV</li></ul><h2 id="5-5-Internetworking-Fragmentation"><a href="#5-5-Internetworking-Fragmentation" class="headerlink" title="5.5 Internetworking: Fragmentation"></a>5.5 Internetworking: Fragmentation</h2><p>æ¯ä¸ªç½‘ç»œæˆ–é“¾è·¯éƒ½ä¼šé™åˆ¶å…¶æ•°æ®åŒ…çš„æœ€å¤§é•¿åº¦ã€‚ä¸»æœºä¸€èˆ¬å€¾å‘äºä¼ è¾“å¤§çš„æ•°æ®åŒ…ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥é™ä½å¼€é”€ï¼Œæ¯”å¦‚æµªè´¹åœ¨å¤´å­—èŠ‚ä¸Šçš„å¸¦å®½ã€‚å½“ä¸€ä¸ªå¤§æ•°æ®åŒ…è¦ç©¿è¿‡ä¸€ä¸ªæœ€å¤§æ•°æ®åŒ…å°ºå¯¸å¤ªå°çš„ç½‘ç»œæ—¶ï¼Œä¸€ä¸ªæ˜æ˜¾çš„ç½‘ç»œäº’è”é—®é¢˜å°±å‡ºç°äº†ã€‚</p><p>MTU[path Maximum Transmission Unit]</p><blockquote><p>åˆ°è¾¾æ¥æ”¶æ–¹å¯ä»¥å‘é€çš„æœ€å¤§æ•°æ®åŒ…å°ºå¯¸</p></blockquote><p>å¯ä»¥å¯¹æ•°æ®åŒ…è¿›è¡Œåˆ†æ®µæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ç§åˆ†æ®µç­–ç•¥</p><h3 id="A-transparent"><a href="#A-transparent" class="headerlink" title="A. transparent"></a>A. transparent</h3><blockquote><p>ç”±â€œå°æ•°æ® åŒ…â€ç½‘ç»œå¼•èµ·çš„åˆ†æ®µè¿‡ç¨‹å¯¹äºæ²¿é€”åç»­çš„ç½‘ç»œéƒ½æ˜¯é€æ˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»è¯¥ç½‘ç»œä¸€ç›´åˆ°æœ€ç»ˆçš„ç›®æ ‡é€”ä¸­çš„æ¯ä¸ªç½‘ç»œéƒ½æ„Ÿè§‰ä¸åˆ°æ›¾ç»å‘ç”Ÿè¿‡åˆ†æ®µ</p></blockquote><p>ä¸€äº›é—®é¢˜</p><ul><li>å‡ºå£è·¯ç”±å™¨å¿…é¡»çŸ¥é“ä»€ä¹ˆæ—¶å€™å®ƒå·±ç»æ¥æ”¶åˆ°äº†å…¨éƒ¨çš„æ®µï¼Œæ‰€ä»¥æ¯ä¸ªåˆ†æ®µä¸­å¿…é¡»æä¾›ä¸€ä¸ªè®¡æ•°å­—æ®µæˆ–è€…ä¸€ä¸ªâ€œæ•°æ®åŒ…ç»“æŸâ€æ ‡å¿—ä½ã€‚</li><li>ç”±äºæ‰€æœ‰çš„æ•°æ®åŒ…å¿…é¡»ç»è¿‡åŒä¸€ä¸ªå‡ºå£è·¯ç”±å™¨æ‰èƒ½è¿›è¡Œé‡ç»„ï¼Œå› æ­¤è·¯ç”±å—åˆ°äº†é™åˆ¶ã€‚ç”±äºä¸å…è®¸æœ‰äº›æ®µæ²¿ç€ä¸€æ¡è·¯å¾„åˆ°è¾¾æœ€ç»ˆç›®æ ‡ï¼Œè€Œå¦ä¸€äº›æ®µæ²¿ç€ä¸€æ¡ä¸ç›¸äº¤è·¯å¾„åˆ°è¾¾æœ€ç»ˆç›®æ ‡ï¼Œæ‰€ä»¥ï¼Œå¯èƒ½ä¼šæŸå¤±ä¸€äº›æ€§èƒ½ã€‚</li><li>è·¯ç”±å™¨å¯èƒ½ä¸å¾—ä¸åšå¤§é‡çš„å·¥ä½œã€‚å¦‚æœä¸æ˜¯æ‰€æœ‰çš„æ®µéƒ½å·±åˆ°è¾¾ï¼Œå®ƒè¿˜éœ€è¦ç¼“å†²åˆ°è¾¾çš„æ®µï¼Œå¹¶ä¸”å†³å®šä½•æ—¶ä¸¢å¼ƒè¿™äº›æ®µã€‚</li></ul><center><img src="image-20191224233917684.png" srcset="/img/loading.gif" alt="image-20191224233917684" style="zoom:40%;" /></center><h3 id="B-nontransparent"><a href="#B-nontransparent" class="headerlink" title="B. nontransparent"></a>B. nontransparent</h3><p><code>ä¼˜ç‚¹</code></p><p>æ˜¯è·¯ç”±å™¨åšçš„å·¥ä½œæ¯”è¾ƒå°‘</p><p>IPé‡‡ç”¨çš„æ˜¯éé€æ˜æ–¹å¼ã€‚</p><blockquote><p>ç»™æ¯ä¸ªæ®µä¸€ä¸ªæ•°æ®åŒ…åºå·(æ‰€æœ‰çš„æ•°æ®åŒ…éƒ½æºå¸¦), ä¸€ä¸ªæ•°æ®åŒ…å†…çš„ç»å¯¹å­—èŠ‚åç§»é‡å’Œä¸€ä¸ªæŒ‡æ˜æ˜¯å¦åˆ°è¾¾æ•°æ®åŒ…æœ«å°¾çš„æ ‡å¿—ä½</p></blockquote><center><img src="image-20191224234335972.png" srcset="/img/loading.gif" alt="image-20191224234335972" style="zoom:40%;" /></center><p><strong><em>path MTU discovery</em></strong></p><p>è¿™æ ·è¿˜æ˜¯ä¼šå­˜åœ¨é—®é¢˜ã€‚ä½†çœŸæ­£çš„é—®é¢˜é¦–å…ˆè¿˜æ˜¯å› ä¸ºæ®µçš„å­˜åœ¨ï¼Œå› æ­¤å¼€é”€å¯èƒ½æ¯”é€æ˜åˆ†æ®µé«˜ã€‚å› ä¸ºé™¤äº†å¢åŠ å¤´å¼€é”€ï¼Œæ•°æ®åŒ…çš„ä¸¢å¤±æ¦‚ç‡ä¹Ÿå¢åŠ äº†ã€‚</p><p>æˆ‘ä»¬è¦æä¾›åœ¨ç½‘ç»œä¸­é¿å…åˆ†æ®µæ“ä½œçš„æ–¹å¼ã€‚</p><blockquote><p>æ¯ä¸ª IP æ•°æ®åŒ…å‘å‡ºæ—¶åœ¨å®ƒçš„å¤´è®¾ç½®ä¸€ä¸ªæ¯”ç‰¹ï¼ŒæŒ‡ç¤ºä¸å…è®¸å¯¹è¯¥æ•°æ®åŒ…å®æ–½åˆ†æ®µæ“ä½œã€‚</p><p>å¦‚æœä¸€ä¸ªè·¯ç”±å™¨æ¥æ”¶çš„æ•°æ®åŒ…å¤ªå¤§ï¼Œå®ƒå°±ç”Ÿæˆä¸€ä¸ªæŠ¥é”™æ•°æ®åŒ…å¹¶å‘é€ç»™æºç«¯ï¼Œç„¶åä¸¢å¼ƒè¯¥æ•°æ®åŒ…</p><p>å½“æºç«¯æ”¶åˆ°æŠ¥é”™æ•°æ®åŒ…ï¼Œå®ƒå°±ä½¿ç”¨æŠ¥é”™æ•°æ®åŒ…æºå¸¦çš„ä¿¡æ¯é‡æ–°å°†å‡ºé”™æ•°æ®åŒ…åˆ†æ®µï¼Œæ¯ä¸ªæ®µè¶³å¤Ÿå°åˆ°æŠ¥é”™è·¯ç”±å™¨èƒ½å¤„ç†ã€‚</p><p>å¦‚æœæ²¿ç€è·¯å¾„å‰è¿›åˆé‡åˆ°ä¸€ä¸ªMTUæ›´å°çš„è·¯ç”±å™¨ï¼Œé‚£ä¹ˆé‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚</p></blockquote><center><img src="image-20191224234604657.png" srcset="/img/loading.gif" alt="image-20191224234604657" style="zoom:50%;" /></center><h1 id="6"><a href="#6" class="headerlink" title="6"></a>6</h1><h2 id="6-1-IPv4åè®®"><a href="#6-1-IPv4åè®®" class="headerlink" title="6.1 IPv4åè®®"></a>6.1 IPv4åè®®</h2><p>IPæ•°æ®åŒ…åŒ…å«ï¼š</p><ul><li>ä¸€ä¸ªå¤´[20bytesçš„å®šé•¿éƒ¨åˆ†å’Œå¯é€‰çš„å˜é•¿éƒ¨åˆ†ç»„æˆ]</li><li>ä¸€ä¸ªæ­£æ–‡</li></ul><center><img src="image-20191126085207750.png" srcset="/img/loading.gif" alt="image-20191126085207750" style="zoom:50%;" /></center><ul><li><p>version: æ•°æ®æŠ¥å±äºåè®®çš„å“ªä¸ªç‰ˆæœ¬, IPv4è¯¥å­—æ®µæ€»æ˜¯4</p></li><li><p>IHL[internet header length]: ç”±äºå¤´çš„é•¿åº¦ä¸å›ºå®šï¼ŒIHLå­—æ®µæŒ‡æ˜å¤´åˆ°åº•æœ‰å¤šé•¿ï¼Œä»¥32bitsé•¿åº¦ä¸ºå•ä½ã€‚</p><p>IHLçš„æœ€å°å€¼ä¸º5ï¼Œ5words=160bits=20bytes, è¿™è¡¨æ˜å¤´æ²¡æœ‰optionså­—æ®µã€‚</p><p>IHLçš„æœ€å¤§å€¼ä¸º15</p></li><li><p>Differentiated services: </p><ul><li><strong>Type of service</strong> (past): 3 for priority, 3 for Delay, Throughput, and Reliability, and 2 unused. </li><li><strong>Differentiated services</strong> (now): 6 for service class, 2 for congestion (e.g. ECN). </li></ul></li><li><p>Total length: the length of header and data. ä»¥bytesä¸ºå•ä½ æœ€å¤§å€¼ä¸º65535bytes</p></li><li><p>Identification: è®©ç›®æ ‡ä¸»æœºç¡®å®šä¸€ä¸ªæ–°åˆ°è¾¾çš„åˆ†æ®µ<strong><em>å±äºå“ªä¸€ä¸ªæ•°æ®æŠ¥</em></strong>ã€‚åŒä¸€ä¸ªæ•°æ®æŠ¥çš„æ‰€æœ‰æ®µåŒ…å«åŒæ ·çš„è¡¨ç¤ºå€¼</p></li><li><p>ç°è‰²çš„éƒ¨åˆ†æ˜¯ä¸€ä¸ªæœªä½¿ç”¨çš„ä½</p></li><li><p>DFï¼š Donâ€™t fragmentï¼Œä¸åˆ†æ®µæ ‡å¿—ä½ ã€‚åªæœ‰å½“ DF = 0 æ—¶æ‰å…è®¸åˆ†ç‰‡  </p></li><li><p>MFï¼šmore fragmentã€‚é™¤äº†æœ€åä¸€ä¸ªæ®µï¼Œå…¶ä»–æ®µéƒ½å¿…é¡»è®¾ç½®è¿™ä¸€ä½ã€‚MF = 1 è¡¨ç¤ºåé¢â€œè¿˜æœ‰åˆ†ç‰‡â€ã€‚MF = 0 è¡¨ç¤ºæœ€åä¸€ä¸ªåˆ†ç‰‡</p></li><li><p>Fragment: æŒ‡æ˜è¯¥æ®µåœ¨æ•°æ®æŠ¥ä¸­çš„ä½ç½®ã€‚é™¤äº†æ•°æ®åŒ…çš„æœ€åä¸€ä¸ªæ®µï¼Œå…¶ä»–æ‰€æœ‰æ®µçš„é•¿åº¦å¿…é¡»æ˜¯8bytesçš„å€æ•°ã€‚è¿™ä¸ªå€¼æ˜¯è¯¥æ®µç¬¬ä¸€ä¸ªæ¯”ç‰¹åœ¨æœªåˆ†æ®µçš„æ•°æ®ä¸­æ‰€å¤„çš„ä½ç½®/8</p></li><li><p>Time to live: é™åˆ¶æ•°æ®æŠ¥ç”Ÿå­˜æœŸçš„è®¡æ•°å™¨ã€‚è®¡æ•°å•ä½è¢«è®¾ç½®ä¸ºç§’ã€‚åœ¨æ¯ä¸€è·³ä¸Šè¯¥è®¡æ•°å™¨å¿…é¡»è¢«é€’å‡ã€‚å®é™…ä¸Šæ˜¯<strong><em>è·³è®¡æ•°å™¨</em></strong>ï¼Œå½“ä»–é€’å‡åˆ°0æ—¶ï¼Œæ•°æ®æŠ¥å°±è¢«ä¸¢å¼ƒã€‚</p></li><li><p>Protocol: æŒ‡æ˜è¯¥å°†å®ƒäº¤ç»™å“ªä¸ªä¼ è¾“è¿›ç¨‹[TCP UDP â€¦]</p></li><li><p>Header checksum: </p></li><li><p>Source address: æºIPåœ°å€</p></li><li><p>Destination addressï¼š ç›®æ ‡IPåœ°å€</p></li><li><p>options</p></li></ul><center><img src="image-20191126090914574.png" srcset="/img/loading.gif" alt="image-20191126090914574" style="zoom:50%;" /></center><p><a href="https://blog.csdn.net/ztguang/article/details/70949781" target="_blank" rel="noopener">OSPF protocol</a></p><h3 id="æ•°æ®åŒ…åˆ†æ®µ"><a href="#æ•°æ®åŒ…åˆ†æ®µ" class="headerlink" title="æ•°æ®åŒ…åˆ†æ®µ"></a>æ•°æ®åŒ…åˆ†æ®µ</h3><p>æ³¨æ„é™¤äº†æ•°æ®åŒ…çš„æœ€åä¸€ä¸ªæ®µï¼Œå…¶ä»–æ‰€æœ‰æ®µçš„é•¿åº¦å¿…é¡»æ˜¯8bytesçš„å€æ•°</p><center><img src="image-20191225002643293.png" srcset="/img/loading.gif" alt="image-20191225002643293" style="zoom:50%;" /></center><ul><li><p>å…ˆæ‰¾total lengthå­—æ®µï¼ŒçŸ¥é“æ•°æ®åŒ…header+dataçš„byteæ•°</p></li><li><p>å†æ‰¾IHL, çŸ¥é“headerçš„wordæ•°</p></li><li><p>total-lengthå¾—åˆ°data.</p></li><li><p>ä¸€ä¸ªæ•°æ®åŒ…æœ€å¤šå‘é€max byte, ç”¨max - IHLå°±æ˜¯ä¸€ä¸ªæ•°æ®åŒ…å¯ä»¥å‘é€çš„dataå¤§å°</p><ul><li>å¦‚æœä¸æ˜¯æœ€åä¸€ä¸ªfragmentçš„è¯ï¼Œéœ€è¦å‡å»ä¸€äº›å¤§å°ï¼Œä½¿å¾—å‘é€çš„æ•°æ®æ˜¯8bytesçš„å€æ•°</li><li>å¦‚æœä¸æ˜¯æœ€åä¸€ä¸ªåˆ†æ®µï¼Œæ— æ‰€è°“</li></ul></li><li>è®¾ç½®DF=0, MF=1[å¦‚æœä¸æ˜¯æœ€åä¸€ä¸ªfragment], offsetç”¨ä¸Šè¿°æ–¹æ³•è®¡ç®—</li></ul><h2 id="6-2-IPåœ°å€"><a href="#6-2-IPåœ°å€" class="headerlink" title="6.2 IPåœ°å€"></a>6.2 IPåœ°å€</h2><p>ä¸€ä¸ªIPåœ°å€å¹¶ä¸çœŸæ­£æŒ‡å‘ä¸€å°ä¸»æœºï¼Œè€Œæ˜¯æŒ‡å‘ä¸€ä¸ªç½‘ç»œæ¥å£ï¼Œæ‰€ä»¥å¦‚æœä¸€å°ä¸»æœºåœ¨ä¸¤ä¸ªç½‘ç»œä¸Šï¼Œå®ƒå¿…é¡»æœ‰ä¸¤ä¸ªIPåœ°å€ã€‚ç„¶è€Œå¤§å¤šæ•°ä¸»æœºéƒ½è¿åœ¨ä¸€ä¸ªç½‘ç»œï¼Œå› è€Œåªæœ‰ä¸€ä¸ªIPåœ°å€ã€‚</p><p>è·¯ç”±å™¨æœ‰å¤šä¸ªæ¥å£ï¼Œä»è€Œæœ‰å¤šä¸ªIPåœ°å€</p><h3 id="A-å‰ç¼€"><a href="#A-å‰ç¼€" class="headerlink" title="A.å‰ç¼€"></a>A.å‰ç¼€</h3><p>IPåœ°å€å…·æœ‰å±‚æ¬¡æ€§ï¼Œå¯ä»¥å°†IPåœ°å€åˆ†æˆä¸¤éƒ¨åˆ†</p><ul><li>é«˜ä½å¯å˜é•¿ç½‘ç»œ</li><li>ä½ä½çš„ä¸»æœº</li></ul><center><img src="image-20191126091437663.png" srcset="/img/loading.gif" alt="image-20191126091437663" style="zoom:50%;" /></center><p><strong>å­ç½‘æ©ç </strong>å¯ä»¥ä¸ä¸€ä¸ªIPåœ°å€è¿›è¡ŒANDæ“ä½œï¼Œæå–å‡ºIPåœ°å€çš„networkéƒ¨åˆ†</p><p>å¦‚ä¸Šå›¾ï¼Œå­ç½‘æ©ç ä¸º255.255.255.0</p><h3 id="B-å­ç½‘"><a href="#B-å­ç½‘" class="headerlink" title="B.å­ç½‘"></a>B.å­ç½‘</h3><center><img src="image-20191126091938551.png" srcset="/img/loading.gif" alt="image-20191126091938551" style="zoom:50%;" /></center><h3 id="C-CIDR-æ— ç±»åŸŸé—´è·¯ç”±"><a href="#C-CIDR-æ— ç±»åŸŸé—´è·¯ç”±" class="headerlink" title="C. CIDR æ— ç±»åŸŸé—´è·¯ç”±"></a>C. CIDR æ— ç±»åŸŸé—´è·¯ç”±</h3><center><img src="image-20191126113616524.png" srcset="/img/loading.gif" alt="image-20191126113616524" style="zoom: 33%;" /></center><p>Question:</p><center><img src="image-20191126113649618.png" srcset="/img/loading.gif" alt="image-20191126113649618" style="zoom: 33%;" /></center><p><strong><em>å¯¹äºA:</em></strong></p><center><img src="image-20191126114956080.png" srcset="/img/loading.gif" alt="image-20191126114956080" style="zoom:50%;" /></center><p>å› ä¸ºéœ€è¦1024ä¸ªåœ°å€ï¼Œæ‰€ä»¥hostæœ‰10ä½ï¼Œå­ç½‘æ©ç æ˜¯22ä½</p><p>202.101.0.0/22</p><p><strong><em>å¯¹äºB:</em></strong></p><center><img src="image-20191126115309939.png" srcset="/img/loading.gif" alt="image-20191126115309939" style="zoom:50%;" /></center><p>hostæœ‰11ä½ï¼Œå­ç½‘æ©ç æ˜¯21ä½</p><p>202.101.8.0/21</p><p><strong><em>å¯¹äºC:</em></strong></p><center><img src="image-20191126115323260.png" srcset="/img/loading.gif" alt="image-20191126115323260" style="zoom:50%;" /></center><p>hostæœ‰11ä½ï¼Œå­ç½‘æ©ç æ˜¯21ä½</p><p>202.101.16.0/21</p><h3 id="E-NAT"><a href="#E-NAT" class="headerlink" title="E. NAT"></a>E. NAT</h3><p>å¤„ç†IPv4åœ°å€çŸ­ç¼ºçš„é—®é¢˜ã€‚</p><blockquote><p>NAT çš„åŸºæœ¬æ€æƒ³æ˜¯ ISP ä¸ºæ¯ä¸ªå®¶åº­æˆ–æ¯ä¸ªå…¬å¸åˆ†é…ä¸€ä¸ªIPåœ°å€ï¼Œç”¨è¿™ä¸ª IP åœ°å€æ¥ä¼ è¾“Internet æµé‡ã€‚åœ¨å®¢æˆ·ç½‘ç»œå†…éƒ¨ï¼Œæ¯å°è®¡ç®—æœºæœ‰å”¯ä¸€çš„IP åœ°å€ï¼Œè¯¥åœ°å€ä¸»è¦ç”¨æ¥è·¯ç”±å†…éƒ¨æµé‡ã€‚ç„¶è€Œï¼Œå½“ä¸€ä¸ªæ•°æ®åŒ…éœ€è¦ç¦»å¼€å®¢æˆ·ç½‘ç»œï¼Œå‘å‘å…¶ä»– ISP æ—¶ï¼Œå®ƒå¿…é¡»æ‰§è¡Œä¸€ä¸ªåœ°å€è½¬æ¢ï¼ŒæŠŠå”¯ä¸€çš„å†…éƒ¨ IP åœ°å€è½¬æ¢æˆé‚£ä¸ªå…±äº«çš„å…¬å…± IP åœ°å€ã€‚è¿™ç§åœ°å€è½¬æ¢ä½¿ç”¨äº† IP åœ°å€çš„ä¸‰ä¸ªèŒƒå›´ï¼Œè¿™äº›åœ°å€å·±ç»è¢«å£°æ˜ä¸ºç§æœ‰åŒ–ã€‚ä»»ä½•ç½‘ç»œå¯ä»¥åœ¨å†…éƒ¨éšæ„åœ°ä½¿ç”¨è¿™äº›åœ°å€ã€‚ä»…æœ‰çš„è§„åˆ™æ˜¯ä¸å…è®¸åŒ…å«è¿™äº›åœ°å€çš„æ•°æ®åŒ…å‡ºç°åœ¨ Internet ä¸Šã€‚è¿™ 3 ä¸ªä¿ç•™çš„åœ°å€èŒƒå›´ä¸ºï¼š</p><p>10.0.0.0~ 10.255.255.255/8 (16 777216 ä¸ªä¸»æœºï¼‰</p><p>172.16.0.0 ~ 172.31.255.255/12 ( 1048576 ä¸ªä¸»æœºã€‰</p><p>192.168.0.0~ 192.168.255.255/16 (65536 ä¸ªä¸»æœºã€‰</p></blockquote><center><img src="image-20191227230836370.png" srcset="/img/loading.gif" alt="image-20191227230836370" style="zoom:35%;" /></center><h2 id="6-4-IPv6-Protocol"><a href="#6-4-IPv6-Protocol" class="headerlink" title="6.4 IPv6 Protocol"></a>6.4 IPv6 Protocol</h2><p>IPv6åè®®é‡‡ç”¨128ä½åœ°å€ï¼ŒåŸºæœ¬åœ¨æœªæ¥ä»»ä½•æ—¶é—´éƒ½ä¸å¯èƒ½å‡ºç°åœ°å€çŸ­ç¼ºé—®é¢˜</p><h3 id="ä¸»è¦çš„IPv6å¤´-40bytes"><a href="#ä¸»è¦çš„IPv6å¤´-40bytes" class="headerlink" title="ä¸»è¦çš„IPv6å¤´[40bytes]"></a>ä¸»è¦çš„IPv6å¤´[40bytes]</h3><center><img src="image-20191126120754968.png" srcset="/img/loading.gif" alt="image-20191126120754968" style="zoom: 40%;" /></center><ul><li><p>version: å¯¹äºIPv6,æ€»æ˜¯6</p></li><li><p>Differentiated services: åŒºåˆ†æ•°æ®åŒ…çš„æœåŠ¡ç±»åˆ«</p></li><li><p>Flow label: ä¸ºæºç«¯å’Œæ¥æ”¶æ–¹æä¾›äº†ä¸€ç§å»ºç«‹ä¼ªè¿æ¥çš„æ–¹å¼ï¼Œå³æºç«¯å’Œæ¥æ”¶æ–¹æŠŠä¸€ç»„å…·æœ‰åŒæ ·éœ€æ±‚å¹¶å¸Œæœ›å¾—åˆ°ç½‘ç»œåŒç­‰å¯¹å¾…çš„æ•°æ®æŠ¥æ‰“ä¸Šæ ‡è®°ã€‚</p></li><li>payload length: æ•°æ®çš„å­—èŠ‚æ•°ï¼Œè¿™é‡Œæ˜¯ä¸åŒ…æ‹¬å¤´çš„ï¼Œå’ŒIPv4ä¸ä¸€æ ·</li><li>Next header: æŒ‡æ˜å½“å‰å¤´åè¿˜æœ‰å“ªç§æ‰©å±•å¤´ã€‚å¦‚æœå½“å‰çš„å¤´æ˜¯æœ€åä¸€ä¸ªIPå¤´ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªå¤´å­—æ®µæŒ‡å®šäº†è¯¥æ•°æ®æŠ¥å°†è¢«ä¼ é€’ç»™å“ªä¸ªä¼ è¾“åè®®å¤„ç†(TCP, UDP)</li><li><p>Hop limit: è·³æ•°é™åˆ¶ï¼Œç›¸å½“äºIPv4çš„TTL</p></li><li><p>entension</p></li></ul><p>IPv6åœ°å€çš„ä¹¦å†™</p><p><strong>8</strong> groups of <strong>4</strong> hexadecimal digits with colons between the groups</p><p>e.g. 8000:0000:0000:0000:0123:4567:89AB:CDEF</p><p>ä¼˜åŒ–</p><ol><li><p>leading zeros within a group can be omitted</p><p>0123å¯ä»¥å†™ä½œ123</p></li><li><p>one or more groups of 16 zero bits can be replaced by a pair of colons</p><p>8000::123:4567:89AB:CDEF</p></li><li><p>IPv4 addresses can be written as a pair of colons and an old dotted decimal number</p><p>::192.31.20.46</p></li></ol><h2 id="6-4-Internetæ§åˆ¶åè®®"><a href="#6-4-Internetæ§åˆ¶åè®®" class="headerlink" title="6.4 Internetæ§åˆ¶åè®®"></a>6.4 Internetæ§åˆ¶åè®®</h2><h3 id="ICMPâ€”-Internet-Control-Message-Protocol"><a href="#ICMPâ€”-Internet-Control-Message-Protocol" class="headerlink" title="ICMPâ€”-Internet Control Message Protocol"></a>ICMPâ€”-Internet Control Message Protocol</h3><p>å½“è·¯ç”±å™¨åœ¨å¤„ç†ä¸€ä¸ªæ•°æ®åŒ…çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†æ„å¤–ï¼Œå¯ä»¥ç”¨è¿‡ICMPå‘æ•°æ®åŒ…çš„æºç«¯æŠ¥å‘Šæœ‰å…³äº‹ä»¶</p><p>ICMPè¿˜å¯ä»¥ç”¨æ¥æµ‹è¯•Internet</p><center><img src="image-20191129174803743.png" srcset="/img/loading.gif" alt="image-20191129174803743" style="zoom:50%;" /></center><h3 id="ARPâ€”-The-address-resolution-protocol"><a href="#ARPâ€”-The-address-resolution-protocol" class="headerlink" title="ARPâ€”-The address resolution protocol"></a>ARPâ€”-The address resolution protocol</h3><center><img src="image-20191227233627543.png" srcset="/img/loading.gif" alt="image-20191227233627543" style="zoom:50%;" /></center><p>ä½œç”¨æ˜¯ï¼šå°†IPåœ°å€è§£æä¸ºMACåœ°å€</p><p>ä¸ºä»€ä¹ˆåŒæ—¶éœ€è¦IPåœ°å€å’ŒMACåœ°å€å‘¢ï¼Ÿ</p><p><a href="https://www.jianshu.com/p/0ce15c07b294" target="_blank" rel="noopener">IP/MAC address</a></p><p>ipåœ°å€è´Ÿè´£æ ‡è®°å‘é€æ–¹å’Œæ¥æ”¶æ–¹ï¼ŒMACåœ°å€è´Ÿè´£ä¼ è¾“è¿‡ç¨‹ä¸­çš„åˆ†æ®µä¼ é€ï¼Œæ¯”å¦‚ä¸‹ä¸€è·³çš„MACåœ°å€ã€‚</p><p><a href="https://blog.csdn.net/u010164190/article/details/79446575" target="_blank" rel="noopener">ARPè¯¦è§£</a></p><p><a href="https://blog.csdn.net/lm409/article/details/80299823" target="_blank" rel="noopener">ARPè¯¦è§£2</a></p><h3 id="DHCPâ€”-Dynamic-Host-Configuration-Protocol"><a href="#DHCPâ€”-Dynamic-Host-Configuration-Protocol" class="headerlink" title="DHCPâ€”-Dynamic Host Configuration Protocol"></a>DHCPâ€”-Dynamic Host Configuration Protocol</h3><p>åŠ¨æ€è·å–IPåœ°å€</p><p><a href="https://blog.csdn.net/wuruixn/article/details/8282554" target="_blank" rel="noopener">DHCPåè®®çš„å·¥ä½œè¿‡ç¨‹</a></p><center><img src="image-20191227233813861.png" srcset="/img/loading.gif" alt="image-20191227233813861" style="zoom:50%;" /></center><blockquote><p>é‡‡ç”¨ DHCP æ—¶ï¼Œæ¯ä¸ªç½‘ç»œå¿…é¡»æœ‰ä¸€ä¸ª DHCP æœåŠ¡å™¨è´Ÿè´£åœ°å€é…ç½®ã€‚</p><ul><li>å½“è®¡ç®—æœºå¯åŠ¨æ—¶ï¼Œ å®ƒæœ‰ä¸€ä¸ªåµŒå…¥åœ¨ NIC ä¸­çš„å†…ç½®ä»¥å¤ªç½‘åœ°å€æˆ–å…¶ä»–é“¾è·¯å±‚åœ°å€ï¼Œä½†æ²¡æœ‰ IP åœ°å€ã€‚åƒ ARP ä¸€ æ ·ï¼Œè¯¥è®¡ç®—æœºåœ¨è‡ªå·±çš„ç½‘ç»œä¸Šå¹¿æ’­ä¸€ä¸ªæŠ¥æ–‡ï¼Œè¯·æ±‚ IP åœ°å€ã€‚è¿™ä¸ªè¯·æ±‚æŠ¥æ–‡å°±æ˜¯ DHCP DISCOVER åŒ…</li><li>è¿™ä¸ªåŒ…å¿…é¡»åˆ°è¾¾ DHCP æœåŠ¡å™¨ã€‚å¦‚æœ DHCP æœåŠ¡å™¨æ²¡æœ‰ç›´æ¥è¿åœ¨æœ¬åœ°ç½‘ç»œï¼Œ é‚£ä¹ˆå¿…é¡»å°†è·¯ç”±å™¨é…ç½®æˆèƒ½æ¥æ”¶ DHCP å¹¿æ’­å¹¶å°†è¯¥è¯·æ±‚æŠ¥æ–‡ä¸­ç»§ç»™ DHCP æœåŠ¡å™¨ï¼Œç”± DHCP æœåŠ¡å™¨æ¥å¤„ç† DHCP æŠ¥æ–‡ã€‚</li><li>å½“ DHCP æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œå®ƒå°±ä¸ºè¯¥ä¸»æœºåˆ†é…ä¸€ä¸ªç©ºé—²çš„ IP åœ°å€ï¼Œå¹¶é€šè¿‡ DHCP OFFER åŒ…è¿”å›ç»™ä¸»æœºï¼ˆè¿™ä¸ªæŠ¥æ–‡æˆ–è®¸ä¹Ÿè¦é€šè¿‡è·¯ç”±å™¨ä¸­ç»§ã€‰ã€‚ä¸ºäº†åœ¨ä¸»æœºæ²¡æœ‰ IP åœ°å€çš„æƒ…å†µä¸‹å®Œæˆæ­¤é¡¹å·¥ä½œï¼ŒæœåŠ¡å™¨ç”¨ä¸»æœºçš„ä»¥å¤ªç½‘åœ°å€æ¥æ ‡è¯†è¿™å°ä¸»æœºï¼ˆä¸»æœºçš„ä»¥å¤ªç½‘åœ°å€ç”± DHCP DISCOVER åŒ…æºå¸¦è¿‡æ¥ï¼‰ã€‚</li></ul></blockquote><p>ä¸ºäº†ç¡®å®šä¸€ä¸ªä¸»æœºæ‹¥æœ‰IPåœ°å€çš„æ—¶é—´ï¼Œé‡‡ç”¨äº†leasingæŠ€æœ¯ã€‚åœ¨leasingæœŸæ»¡å‰ï¼Œä¸»æœºå¿…é¡»å’ŒDHCPç»­è®¢ã€‚</p><h3 id="Label-Switching-and-MPLS"><a href="#Label-Switching-and-MPLS" class="headerlink" title="Label Switching and MPLS"></a>Label Switching and MPLS</h3><p>MPLS(multiprotocol label switching)</p><p>MPLS åœ¨æ¯ä¸ªæ•°æ®åŒ…å‰é¢å¢åŠ ä¸€ä¸ªæ ‡ç­¾ï¼Œè·¯ç”±å™¨æ ¹æ®<strong><em><u>æ•°æ®åŒ…æ ‡ç­¾</u></em></strong>è€Œä¸æ˜¯æ•°æ®åŒ…ç›®æ ‡åœ°å€å®æ–½è½¬å‘ã€‚ç”¨æ ‡ç­¾ä½œä¸ºä¸€ä¸ªå†…éƒ¨è¡¨çš„ç´¢å¼•ï¼Œå¿«é€ŸæŸ¥æ‰¾è¯¥è¡¨æ‰¾å‡ºæ­£ç¡®çš„è¾“å‡ºçº¿è·¯ï¼Œå› è€Œè¿™åªæ˜¯ä¸€ä¸ªè¡¨æŸ¥æ“ä½œã€‚ä½¿ç”¨è¿™ç§æŠ€æœ¯ï¼Œè·¯ç”±å™¨çš„è½¬å‘é€Ÿåº¦éå¸¸å¿«ã€‚</p><center><img src="image-20191227234537219.png" srcset="/img/loading.gif" alt="image-20191227234537219" style="zoom:50%;" /></center>]]></content>
    
    
    <categories>
      
      <category>Computer Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer Network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Computer network--ç½‘ç»œå±‚part1</title>
    <link href="/2019/12/06/ComputerNetwork/NetworkLayer/"/>
    <url>/2019/12/06/ComputerNetwork/NetworkLayer/</url>
    
    <content type="html"><![CDATA[<h1 id="1-ç½‘ç»œå±‚çš„è®¾è®¡é—®é¢˜"><a href="#1-ç½‘ç»œå±‚çš„è®¾è®¡é—®é¢˜" class="headerlink" title="1. ç½‘ç»œå±‚çš„è®¾è®¡é—®é¢˜"></a>1. ç½‘ç»œå±‚çš„è®¾è®¡é—®é¢˜</h1><h2 id="1-1-å­˜å‚¨è½¬å‘æ•°æ®åŒ…äº¤æ¢"><a href="#1-1-å­˜å‚¨è½¬å‘æ•°æ®åŒ…äº¤æ¢" class="headerlink" title="1.1 å­˜å‚¨è½¬å‘æ•°æ®åŒ…äº¤æ¢"></a>1.1 å­˜å‚¨è½¬å‘æ•°æ®åŒ…äº¤æ¢</h2><p>é˜´å½±æ¤­åœ†ä¸­çš„æ˜¯ç½‘ç»œæœåŠ¡æä¾›å•†(ISP)çš„è®¾å¤‡</p><p>å¦‚æœä¸€å°ä¸»æœºæƒ³è¦å‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼Œä»–å°±å°†æ•°æ®åŒ…ä¼ è¾“ç»™æœ€è¿‘çš„è·¯ç”±å™¨ã€‚</p><p>åœ¨è¯¥æ•°æ®åŒ…åˆ°è¾¾è·¯ç”±å™¨ï¼Œå¹¶ä¸”è·¯ç”±å™¨çš„é“¾è·¯å±‚å®Œæˆäº†å¯¹å®ƒæ ¡éªŒå’Œçš„éªŒè¯ä¹‹åï¼Œå®ƒå…ˆè¢«å­˜å‚¨åœ¨è·¯ç”±å™¨ä¸Šï¼›ç„¶åæ²¿ç€è·¯å¾„è¢«è½¬å‘åˆ°ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ï¼Œç›´è‡³åˆ°è¾¾ç›®æ ‡ä¸»æœº</p><center><img src="image-20191119095439198.png" srcset="/img/loading.gif" alt="image-20191119095439198" style="zoom: 25%;" /></center><h2 id="1-2-æä¾›ç»™ä¼ è¾“å±‚çš„æœåŠ¡"><a href="#1-2-æä¾›ç»™ä¼ è¾“å±‚çš„æœåŠ¡" class="headerlink" title="1.2 æä¾›ç»™ä¼ è¾“å±‚çš„æœåŠ¡"></a>1.2 æä¾›ç»™ä¼ è¾“å±‚çš„æœåŠ¡</h2><ol><li>å‘ä¸Šæä¾›çš„æœåŠ¡åº”è¯¥ç‹¬ç«‹äºè·¯ç”±å™¨æŠ€æœ¯ã€‚</li><li>åº”è¯¥å‘ä¼ è¾“å±‚å±è”½è·¯ç”±å™¨çš„æ•°é‡ã€ç±»å‹å’Œæ‹“æ‰‘å…³ç³»ã€‚ </li><li>ä¼ è¾“å±‚å¯ç”¨çš„ç½‘ç»œåœ°å€åº”è¯¥æœ‰ä¸€ä¸ªç»Ÿä¸€ç¼–å€æ–¹æ¡ˆï¼Œç”šè‡³å¯ä»¥è·¨è¶Š LAN å’Œ WANã€‚</li></ol><h2 id="1-3-æ— è¿æ¥æœåŠ¡çš„å®ç°"><a href="#1-3-æ— è¿æ¥æœåŠ¡çš„å®ç°" class="headerlink" title="1.3 æ— è¿æ¥æœåŠ¡çš„å®ç°"></a>1.3 æ— è¿æ¥æœåŠ¡çš„å®ç°</h2><blockquote><p>æ‰€æœ‰çš„æ•°æ®åŒ…éƒ½è¢«ç‹¬ç«‹åœ°æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œå¹¶ä¸”æ¯ä¸ªæ•°æ®åŒ…ç‹¬ç«‹è·¯ç”±ï¼Œä¸éœ€è¦æå‰å»ºç«‹ä»»ä½• è®¾ç½®ã€‚åœ¨è¿™æ ·çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæ•°æ®åŒ…é€šå¸¸ç§°ä¸ºæ•°æ®æŠ¥[datagram]ï¼Œå®ƒç±»ä¼¼äºç”µæŠ¥[telegram], å¯¹åº”çš„ç½‘ç»œç§°ä¸ºæ•°æ®æŠ¥ç½‘ç»œ[datagram network]</p></blockquote><center><img src="image-20191219154907937.png" srcset="/img/loading.gif" alt="image-20191219154907937" style="zoom:40%;" /></center><h2 id="1-4-é¢å‘è¿æ¥æœåŠ¡çš„å®ç°"><a href="#1-4-é¢å‘è¿æ¥æœåŠ¡çš„å®ç°" class="headerlink" title="1.4 é¢å‘è¿æ¥æœåŠ¡çš„å®ç°"></a>1.4 é¢å‘è¿æ¥æœåŠ¡çš„å®ç°</h2><blockquote><p>åœ¨å‘é€æ•°æ®åŒ…ä¹‹å‰ï¼Œå¿…é¡»é¦–å…ˆå»ºç«‹èµ·ä¸€æ¡ä»æºè·¯ç”±å™¨åˆ°ç›®æ ‡è·¯ç”±å™¨ä¹‹é—´çš„è·¯å¾„ã€‚è¿™ä¸ªè¿æ¥ç§°ä¸ºè™šç”µè·¯[VC, virtual circuit]ï¼Œå®ƒç±»ä¼¼äºç”µè¯ç³»ç»Ÿä¸­å»ºç«‹çš„ç‰©ç†ç”µè·¯ï¼Œå¯¹åº”çš„ç½‘ç»œç§°ä¸ºè™šç”µè·¯ç½‘ç»œ[virtual-circuit network]</p></blockquote><p>è™šç”µè·¯èƒŒåçš„æ€æƒ³æ˜¯é¿å…ä¸ºè¦å‘é€çš„æ•°æ®åŒ…é€‰æ‹©æ–°è·¯å¾„ã€‚ç›¸åï¼Œå½“å»ºç«‹ä¸€ä¸ªè¿æ¥æ—¶ï¼Œä»æºæœºå™¨åˆ°ç›®æ ‡æœºå™¨ä¹‹é—´çš„ä¸€æ¡è·¯å¾„å°±è¢«å½“ä½œè¿™ä¸ªè¿æ¥çš„ä¸€éƒ¨åˆ†ç¡®å®šäº†ä¸‹æ¥ï¼Œå¹¶ä¸”ä¿å­˜åœ¨è¿™äº›ä¸­é—´è·¯ç”±å™¨çš„è¡¨ä¸­ã€‚æ‰€æœ‰éœ€è¦åœ¨è¿™ä¸ªè¿æ¥ä¸Šé€šè¿‡çš„æµé‡ï¼Œéƒ½ä½¿ç”¨è¿™æ¡è·¯å¾„ã€‚</p><p>å¦‚å›¾ï¼Œä¸»æœºH1ä¸ä¸»æœºH2ä¹‹é—´å»ºç«‹äº†è¿æ¥1ã€‚è¿™æ¡è¿æ¥è¢«è®°å½•åœ¨æ¯ä¸ªè·¯ç”±è¡¨ä¸­çš„ç¬¬ä¸€é¡¹ä¸­ã€‚ </p><p>A è·¯ç”±è¡¨çš„ç¬¬ä¸€è¡Œè¯´æ˜å¦‚æœä¸€ ä¸ªæ ‡ç¤ºäº†è¿æ¥æ ‡è¯†ç¬¦1çš„æ•°æ®åŒ…æ¥è‡ªäºH1ï¼Œé‚£ä¹ˆå®ƒå°†è¢«å‘é€åˆ°è·¯ç”±å™¨ Cï¼Œå¹¶ä¸”èµ‹äºˆè¿æ¥æ ‡è¯†ç¬¦ 1 ã€‚ç±»ä¼¼åœ°ï¼Œ Cè·¯ç”±è¡¨ä¸­çš„ç¬¬ä¸€é¡¹å°†è¯¥æ•°æ®åŒ…è·¯ç”±åˆ° Eï¼Œä¹Ÿèµ‹äºˆè¿æ¥æ ‡è¯†ç¬¦ 1</p><p>ç°åœ¨æˆ‘ä»¬æ¥è€ƒè™‘å¦‚æœ H3 ä¹Ÿå¸Œæœ›ä¸ H2 å»ºç«‹è¿æ¥åˆ™æƒ…å½¢ä¼šæ€ä¹ˆæ ·ã€‚ H3 é€‰æ‹©è¿æ¥æ ‡è¯†ç¬¦ 1 [å› ä¸ºæ˜¯å®ƒå‘èµ·è¿æ¥ï¼Œè€Œä¸”è¿™æ˜¯å®ƒå”¯ä¸€çš„è¿æ¥]ï¼Œå¹¶ä¸”å‘Šè¯‰ç½‘ç»œè¦å»ºç«‹è™šç”µè·¯ã€‚å› æ­¤è·¯ç”±è¡¨å¢åŠ äº†ç¬¬äºŒè¡Œã€‚è¯·æ³¨æ„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå†²çªï¼Œå› ä¸ºï¼Œå°½ç®¡ A å¾ˆå®¹æ˜“åŒºåˆ†å‡ºæ ‡è¯†è¿æ¥ 1 çš„æ•°æ®åŒ…æ˜¯æ¥è‡ªH1è¿˜æ˜¯æ¥è‡ª H3 ï¼Œä½†æ˜¯ï¼Œ C æ— æ³•åŒºåˆ†å®ƒä»¬ã€‚åŸºäºè¿™ä¸ªåŸå› ï¼Œ A ç»™ç¬¬äºŒä¸ªè¿æ¥çš„å‡ºå¢ƒæµé‡åˆ†é…ä¸€ä¸ªä¸åŒçš„è¿æ¥æ ‡è¯†ç¬¦ã€‚è¿™ç§é¿å…å†²çªçš„åšæ³•è¯´æ˜äº†ä¸ºä»€ä¹ˆè·¯ç”±å™¨éœ€è¦å…·å¤‡æ›¿æ¢å‡ºå¢ƒæ•°æ®åŒ…ä¸­è¿æ¥æ ‡è¯†ç¬¦çš„èƒ½åŠ›ã€‚</p><center><img src="image-20191219154931266.png" srcset="/img/loading.gif" alt="image-20191219154931266" style="zoom:50%;" /></center><h2 id="1-5-è™šç”µè·¯å’Œæ•°æ®æŠ¥ç½‘ç»œçš„æ¯”è¾ƒ"><a href="#1-5-è™šç”µè·¯å’Œæ•°æ®æŠ¥ç½‘ç»œçš„æ¯”è¾ƒ" class="headerlink" title="1.5 è™šç”µè·¯å’Œæ•°æ®æŠ¥ç½‘ç»œçš„æ¯”è¾ƒ"></a>1.5 è™šç”µè·¯å’Œæ•°æ®æŠ¥ç½‘ç»œçš„æ¯”è¾ƒ</h2><center><img src="image-20191219222827287.png" srcset="/img/loading.gif" alt="image-20191219222827287" style="zoom:40%;" /></center><ul><li>å»ºç«‹æ—¶é—´ï¼š <ul><li>è™šç”µè·¯éœ€è¦ä¸€ä¸ªå»ºç«‹é˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µèŠ±è´¹æ—¶é—´ä¹Ÿæ¶ˆè€—èµ„æºã€‚ä½†æ˜¯ï¼Œä»˜å‡ºè¿™ä¸ªä»£ä»·åï¼Œå¤„ç†ä¸€ä¸ªæ•°æ®åŒ…çš„æ–¹æ³•å´éå¸¸ç®€å•ï¼šè·¯ç”±å™¨åªè¦ä½¿ç”¨ç”µè·¯å·ä½œ ä¸ºç´¢å¼•ï¼Œåœ¨è¡¨ä¸­æ‰¾åˆ°è¯¥æ•°æ®åŒ…çš„å»å‘å³å¯ã€‚</li><li>åœ¨æ•°æ®æŠ¥ç½‘ç»œä¸­ï¼Œä¸éœ€è¦å»ºç«‹ç”µè·¯ï¼Œä½†è·¯ç”±å™¨éœ€è¦æ‰§è¡Œä¸€ä¸ªæ›´ä¸ºå¤æ‚çš„æŸ¥æ‰¾è¿‡ç¨‹ä»¥ä¾¿æ‰¾åˆ°ç›®æ ‡è¡¨é¡¹ã€‚</li></ul></li><li>é¿å…æ‹¥å¡ï¼š<ul><li>è™šç”µè·¯åœ¨å»ºç«‹è¿æ¥æ¥æ—¶ï¼Œèµ„æºå¯ä»¥æå‰é¢„ç•™ï¼ˆæ¯”å¦‚ç¼“å†²åŒºç©ºé—´ã€å¸¦å®½å’Œ CPU å‘¨æœŸã€‰ã€‚ä¸€æ—¦æ•°æ®åŒ…å¼€å§‹åˆ°æ¥ï¼Œ æ‰€éœ€è¦çš„å¸¦å®½å’Œè·¯ç”±å™¨å®¹é‡éƒ½å·²ç»å‡†å¤‡å°±ç»ªã€‚</li><li>è€Œå¯¹äºæ•°æ®æŠ¥ç½‘ç»œï¼Œé¿å…æ‹¥å¡æ›´å›°éš¾äº›ã€‚</li></ul></li><li>è„†å¼±æ€§ï¼š<ul><li>è™šç”µè·¯ä¹Ÿå­˜åœ¨è„†å¼±æ€§é—®é¢˜ã€‚å¦‚æœä¸€å°è·¯ç”±å™¨å´©æºƒå¹¶ä¸”å†…å­˜ä¸­çš„æ•°æ®å…¨éƒ¨ä¸¢å¤±ï¼Œé‚£ä¹ˆå³ ä½¿å®ƒä¸€ç§’é’Ÿä¹‹ååˆé‡æ–°å¯åŠ¨ï¼Œæ‰€æœ‰ä»å®ƒè¿™é‡Œç»è¿‡çš„è™šç”µè·¯éƒ½å°†ä¸å¾—ä¸ä¸­æ–­ã€‚</li><li>å¦‚æœä¸€å°æ•°æ®æŠ¥è·¯ç”±å™¨å²©æœºï¼Œåªæœ‰é‚£äº›å½“æ—¶å°šç•™åœ¨è·¯ç”±å™¨é˜Ÿåˆ—ä¸­çš„æ•°æ®åŒ…ç”¨æˆ·ä¼šå—åˆ°å½±å“</li></ul></li></ul><h1 id="2-è·¯ç”±ç®—æ³•"><a href="#2-è·¯ç”±ç®—æ³•" class="headerlink" title="2. è·¯ç”±ç®—æ³•"></a>2. è·¯ç”±ç®—æ³•</h1><p>è·¯ç”±ç®—æ³•æ˜¯ç½‘ç»œå±‚è½¯ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè´Ÿè´£ç¡®å®šä¸€ä¸ªå…¥å¢ƒæ•°æ®åŒ…åº”è¯¥è¢«å‘é€åˆ°å“ªä¸€æ¡è¾“å‡ºçº¿è·¯ä¸Šã€‚</p><p><strong>è·¯ç”±</strong>å’Œ<strong>è½¬å‘</strong>è¿™ä¸¤ä¸ªåŠŸèƒ½çš„åŒºåˆ«</p><ul><li>è·¯ç”±</li></ul><div class="note note-warning">            <p>æ¶‰åŠä¸€ä¸ªç½‘ç»œçš„<strong>æ‰€æœ‰è·¯ç”±å™¨</strong>ï¼Œç»ç”±è·¯ç”±é€‰æ‹©åè®®å…±åŒäº¤äº’ï¼Œæ¥å†³å®šåˆ†ç»„ä»æºåˆ°ç›®çš„åœ°ç»“ç‚¹æ‰€é‡‡å–çš„è·¯ </p>          </div><ul><li>è½¬å‘</li></ul><div class="note note-warning">            <p>åˆ†ç»„åœ¨<strong>å•ä¸€çš„è·¯ç”±å™¨</strong>ä»ä¸€æ¡å…¥é“¾è·¯åˆ°ä¸€æ¡å‡ºé“¾è·¯åˆ°ä¼ é€ </p>          </div><p><br/></p><p>è·¯ç”±ç®—æ³•å¯ä»¥åˆ†æˆä¸¤ç±»</p><blockquote><ul><li><p>éè‡ªé€‚åº”ç®—æ³•ï¼šä¸ä¼šæ ¹æ®å½“å‰æµ‹é‡æˆ–è€…ä¼°è®¡çš„æµé‡å’Œæ‹“æ‰‘ç»“æ„ï¼Œæ¥è°ƒæ•´å®ƒä»¬çš„è·¯ç”±å†³ç­–ã€‚</p></li><li><p>è‡ªé€‚åº”ç®—æ³•</p></li></ul></blockquote><h2 id="2-1-ä¼˜åŒ–åŸåˆ™"><a href="#2-1-ä¼˜åŒ–åŸåˆ™" class="headerlink" title="2.1 ä¼˜åŒ–åŸåˆ™"></a>2.1 ä¼˜åŒ–åŸåˆ™</h2><p>æœ€ä¼˜åŒ–åŸåˆ™ï¼š</p><div class="note note-warning">            <p>å¦‚æœè·¯ç”±å™¨Jåœ¨ä»è·¯ç”±å™¨Iåˆ°è·¯ç”±å™¨Kçš„æœ€ä¼˜è·¯å¾„ä¸Šï¼Œé‚£ä¹ˆä»Jåˆ°Kåˆ°æœ€ä¼˜è·¯å¾„å¿…å®šéµå¾ªåŒæ ·çš„è·¯ç”±</p>          </div><center><img src="image-20191129193218868.png" srcset="/img/loading.gif" alt="image-20191129193218868" style="zoom:50%;" /></center><p>ç›´æ¥æ¨è®ºï¼šä»æ‰€æœ‰çš„æºåˆ°ä¸€ä¸ªæŒ‡å®šç›®æ ‡çš„æœ€ä¼˜è·¯å¾„çš„é›†åˆæ„æˆäº†ä¸€æ£µä»¥ç›®æ ‡èŠ‚ç‚¹ä¸ºæ ¹çš„æ ‘ã€‚è¿™æ ·çš„æ ‘ç§°ä¸º<strong><em>æ±‡é›†æ ‘[sink tree]</em></strong></p><p>è·¯ç”±ç®—æ³•çš„ç›®æ ‡å°±æ˜¯ä¸ºæ‰€æœ‰çš„è·¯ç”±å™¨æ‰¾åˆ°æ±‡é›†æ ‘ï¼Œå¹¶æ ¹æ®æ±‡é›†æ ‘æ¥è½¬å‘æ•°æ®åŒ…</p><center><img src="image-20191129193740688.png" srcset="/img/loading.gif" alt="image-20191129193740688" style="zoom:50%;" /></center><h2 id="2-2-æœ€çŸ­è·¯å¾„ç®—æ³•"><a href="#2-2-æœ€çŸ­è·¯å¾„ç®—æ³•" class="headerlink" title="2.2 æœ€çŸ­è·¯å¾„ç®—æ³•"></a>2.2 æœ€çŸ­è·¯å¾„ç®—æ³•</h2><p>å¯ä»¥é€‰æ‹©è·ç¦»ã€å¸¦å®½ã€å¹³å‡æµé‡ã€é€šä¿¡æˆæœ¬ã€å¹³å‡å»¶è¿Ÿç­‰ä½œä¸ºè·¯å¾„çš„æƒé‡</p><p>ä½¿ç”¨Dijkstraç®—æ³•</p><table>  <tr>    <td><img src="image-20191202182043293.png" srcset="/img/loading.gif" alt="image-20191202182043293" style="zoom:50%;" /></td>    <td><img src="image-20191202182130071.png" srcset="/img/loading.gif" alt="image-20191202182130071" style="zoom:50%;" /></td>  </tr>  <tr>    <td><img src="image-20191202182159979.png" srcset="/img/loading.gif" alt="image-20191202182159979" style="zoom:50%;" /></td>    <td><img src="image-20191202182231738.png" srcset="/img/loading.gif" alt="image-20191202182231738" style="zoom:50%;" /></td>  </tr>  <tr>    <td><img src="image-20191202182426228.png" srcset="/img/loading.gif" alt="image-20191202182426228" style="zoom:50%;" /></td>  </tr></table><h2 id="2-3-æ³›æ´ªç®—æ³•-flooding"><a href="#2-3-æ³›æ´ªç®—æ³•-flooding" class="headerlink" title="2.3 æ³›æ´ªç®—æ³•[flooding]"></a>2.3 æ³›æ´ªç®—æ³•[flooding]</h2><p>floodingå°†æ¯ä¸€ä¸ªå…¥å¢ƒæ•°æ®åŒ…å‘é€åˆ°é™¤äº†è¯¥æ•°æ®åŒ…åˆ°è¾¾çš„é‚£æ¡çº¿è·¯ä»¥å¤–çš„æ¯æ¡å‡ºå¢ƒçº¿è·¯ã€‚</p><p>æ³›æ´ªæ³•ä¼šäº§ç”Ÿå¤§é‡çš„é‡å¤æ•°æ®åŒ…ã€‚äº‹å®ä¸Šï¼Œé™¤éé‡‡å–æŸäº›æªæ–½æ¥æŠ‘åˆ¶æ³›æ´ªè¿‡ç¨‹ï¼Œå¦åˆ™å°†ä¼šäº§ç”Ÿæ— é™å¤šçš„æ•°æ®åŒ…ã€‚</p><ul><li><p>åœ¨æ¯ä¸ªæ•°æ®åŒ…çš„headerä¸­è®¾ç½®ä¸€ä¸ªhop counter</p><blockquote><p>æ¯ç»è¿‡ä¸€è·³è¯¥è®¡æ•°å™¨å‡ä¸€ï¼Œå½“è®¡æ•°å™¨åˆ°è¾¾ 0 æ—¶å°±ä¸¢å¼ƒè¯¥æ•°æ®åŒ…ã€‚</p><p>ç†æƒ³æƒ…å†µä¸‹ï¼Œè·³è®¡æ•°å™¨çš„åˆå§‹å€¼åº”è¯¥ç­‰äºä»æºç«¯åˆ°æ¥æ”¶æ–¹ä¹‹é—´è·¯å¾„çš„é•¿åº¦ã€‚å¦‚æœå‘é€æ–¹ä¸çŸ¥é“è¯¥è·¯å¾„æœ‰å¤šé•¿ï¼Œ å®ƒå¯ä»¥å°†è®¡æ•°å™¨çš„åˆå§‹å€¼è®¾ç½®ä¸ºæœ€åæƒ…å½¢ä¸‹çš„é•¿åº¦ï¼Œå³ç½‘ç»œçš„ç›´å¾„ã€‚</p></blockquote></li><li><p>keep track of which packets have been flooded, to avoid sending them out a second time.</p></li></ul><p><br/></p><h2 id="2-4-è·ç¦»çŸ¢é‡ç®—æ³•-Distance-Vector"><a href="#2-4-è·ç¦»çŸ¢é‡ç®—æ³•-Distance-Vector" class="headerlink" title="2.4 è·ç¦»çŸ¢é‡ç®—æ³•[Distance Vector]"></a>2.4 è·ç¦»çŸ¢é‡ç®—æ³•[Distance Vector]</h2><blockquote><p>æ¯ä¸ªè·¯ç”±å™¨ç»´æŠ¤ä¸€å¼ è¡¨ï¼ˆå³ ä¸€ä¸ªçŸ¢é‡ã€‰ï¼Œè¡¨ä¸­åˆ—å‡ºäº†å½“å‰å·±çŸ¥çš„åˆ°æ¯ä¸ªç›®æ ‡çš„æœ€ä½³è·ç¦»ï¼Œä»¥åŠæ‰€ä½¿ç”¨çš„é“¾è·¯ã€‚</p><p>è¿™äº›è¡¨é€šè¿‡é‚»å±…ä¹‹é—´ç›¸äº’äº¤æ¢ä¿¡æ¯è€Œä¸æ–­è¢«æ›´æ–°ï¼Œæœ€ç»ˆæ¯ä¸ªè·¯ç”±å™¨éƒ½äº†è§£åˆ°è¾¾æ¯ä¸ªç›®çš„åœ°çš„æœ€ä½³é“¾è·¯ã€‚</p></blockquote><p><a href="https://blog.csdn.net/u013007900/article/details/45565389" target="_blank" rel="noopener">è·ç¦»çŸ¢é‡ç®—æ³•è¯¦è§£</a></p><h3 id="i-count-to-infinity-problem"><a href="#i-count-to-infinity-problem" class="headerlink" title="i. count-to-infinity problem"></a>i. count-to-infinity problem</h3><p>è™½ç„¶DVç®—æ³•æ€»æ˜¯èƒ½å¤Ÿæ”¶æ•›åˆ°æ­£ç¡®çš„ç­”æ¡ˆï¼Œä½†é€Ÿåº¦å¯èƒ½éå¸¸æ…¢ã€‚å°¤å…¶æ˜¯å®ƒ</p><ul><li>å¯¹äºå¥½æ¶ˆæ¯çš„ååº”éå¸¸è¿…é€Ÿ</li><li>è€Œå¯¹äºåæ¶ˆæ¯çš„ååº”å¼‚å¸¸è¿Ÿç¼“ã€‚</li></ul><h4 id="i-A-æ¥çœ‹ä¸€ä¸‹å¯¹å¥½æ¶ˆæ¯æ˜¯æ€ä¹ˆååº”çš„"><a href="#i-A-æ¥çœ‹ä¸€ä¸‹å¯¹å¥½æ¶ˆæ¯æ˜¯æ€ä¹ˆååº”çš„" class="headerlink" title="i.A æ¥çœ‹ä¸€ä¸‹å¯¹å¥½æ¶ˆæ¯æ˜¯æ€ä¹ˆååº”çš„"></a>i.A æ¥çœ‹ä¸€ä¸‹å¯¹å¥½æ¶ˆæ¯æ˜¯æ€ä¹ˆååº”çš„</h4><center><img src="image-20191202184133049.png" srcset="/img/loading.gif" alt="image-20191202184133049" style="zoom: 40%;" /></center><p>ä»¥è·³æ•°ä½œä¸ºè·¯å¾„çš„æƒé‡</p><p>å‡è®¾Aæœ€åˆå¤„äºåœæœºçŠ¶æ€ï¼Œè€ƒè™‘Açªç„¶å¯åŠ¨çš„æƒ…å†µ</p><blockquote><ol><li><p>ä¸€å¼€å§‹ï¼ŒBã€Cã€Dã€Eéƒ½ä¸å’ŒAè¿é€šï¼Œæ‰€ä»¥éƒ½æ˜¯â€œÂ·â€çŠ¶æ€</p></li><li><p>åœ¨ç¬¬ä¸€æ¬¡äº¤æ¢æ—¶ï¼Œ B çŸ¥é“å®ƒå·¦è¾¹çš„é‚»å±…åˆ° A çš„å»¶è¿Ÿä¸º 0 ã€‚äºæ˜¯ B åœ¨å®ƒçš„è·¯ç”±è¡¨ä¸­å»ºç«‹ä¸€ä¸ªè¡¨é¡¹ï¼Œè¯´æ˜ A ç¦»å®ƒä¸€è·³è¿œã€‚æ‰€æœ‰å…¶ä»–çš„è·¯ç”±å™¨ä»ç„¶è®¤ä¸º A æ˜¯åœæœºçš„ã€‚</p></li><li>åœ¨æ¥ä¸‹å»çš„äº¤æ¢ä¸­ï¼ŒCçŸ¥é“Bæœ‰ä¸€æ¡è·¯å¾„é€šå‘Aï¼Œå¹¶ä¸”è·¯å¾„é•¿åº¦ä¸º1ï¼Œæ‰€ä»¥å®ƒæ›´æ–°è‡ªå·±çš„è·¯ç”±è¡¨ï¼ŒæŒ‡æ˜å®ƒåˆ° A çš„è·¯å¾„é•¿åº¦ä¸º 2ï¼Œä½†æ˜¯ D å’Œ E è¦åˆ°ä»¥åæ‰èƒ½å¬åˆ°è¿™ä¸ªå¥½æ¶ˆæ¯ã€‚</li></ol></blockquote><p>ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡º</p><p>å¥½æ¶ˆæ¯æ‰©æ•£çš„é€Ÿåº¦æ˜¯æ¯äº¤æ¢ä¸€æ¬¡å¾€è¿œå¤„èµ°ä¸€è·³ã€‚å¦‚æœä¸€ä¸ªç½‘ç»œä¸­æœ€é•¿è·¯å¾„æ˜¯ N è·³ï¼Œé‚£ä¹ˆç»è¿‡ N æ¬¡äº¤æ¢ä¹‹åï¼Œæ¯ä¸ªè·¯ç”±å™¨éƒ½å°†çŸ¥é“æ–°æ¢å¤çš„é“¾è·¯å’Œè·¯ç”±å™¨ã€‚</p><h4 id="i-B-å†æ¥çœ‹ä¸€ä¸‹å¯¹åæ¶ˆæ¯çš„ååº”"><a href="#i-B-å†æ¥çœ‹ä¸€ä¸‹å¯¹åæ¶ˆæ¯çš„ååº”" class="headerlink" title="i.B å†æ¥çœ‹ä¸€ä¸‹å¯¹åæ¶ˆæ¯çš„ååº”"></a>i.B å†æ¥çœ‹ä¸€ä¸‹å¯¹åæ¶ˆæ¯çš„ååº”</h4><center><img src="image-20191202185212842.png" srcset="/img/loading.gif" alt="image-20191202185212842" style="zoom:40%;" /></center><p>ä»¥è·³æ•°ä½œä¸ºè·¯å¾„çš„æƒé‡</p><p>å‡è®¾Aæœ€åˆå¤„äºå¯åŠ¨çŠ¶æ€ï¼Œè€ƒè™‘Açªç„¶åœæœºæˆ–è€…Aå’ŒBä¹‹é—´é“¾è·¯æ–­äº†çš„æƒ…å†µ</p><blockquote><ol><li>ä¸€å¼€å§‹ï¼ŒBã€Cã€Dã€Eéƒ½æœ‰é€šå‘Açš„é“¾è·¯</li><li>åœ¨ç¬¬ä¸€æ¬¡ä¿¡æ¯äº¤æ¢æ—¶ï¼Œ B æ²¡æœ‰å¬åˆ°æ¥è‡ª A çš„ä»»ä½•ä¿¡æ¯ã€‚å¹¸è¿çš„æ˜¯ï¼Œ C è¯´â€œåˆ«æ‹…å¿ƒï¼Œæˆ‘æœ‰ä¸€æ¡é€šå‘ A çš„é•¿åº¦ä¸º 2 çš„è·¯å¾„â€ï¼Œ B å¹¶ä¸æ€€ç–‘ C å¦‚ä½•åˆ°è¾¾Aã€‚å› æ­¤ï¼Œ B è®¤ä¸ºå®ƒå¯ä»¥é€šè¿‡ C åˆ°è¾¾ Aï¼Œè·¯å¾„é•¿åº¦ä¸º 3 ã€‚åœ¨ç¬¬ä¸€æ¬¡äº¤æ¢ä¹‹åï¼Œ D å’Œ E å¹¶ä¸æ›´æ–°å®ƒä»¬çš„ A è¡¨é¡¹ã€‚</li><li>åœ¨ç¬¬äºŒæ¬¡ä¿¡æ¯äº¤æ¢æ—¶ï¼Œ C æ³¨æ„åˆ°ï¼Œå®ƒçš„æ¯ä¸€ä¸ªé‚»å±…éƒ½å£°ç§°æœ‰ä¸€æ¡é€šå‘ A çš„é•¿åº¦ä¸º 3 çš„è·¯å¾„ã€‚å®ƒéšæœºåœ°æŒ‘é€‰å‡ºä¸€æ¡ï¼Œå¹¶ä¸”å°†å®ƒåˆ°Açš„è·ç¦»æ›´æ–°ä¸º4ã€‚</li><li>é€šè¿‡åç»­çš„äº¤æ¢ï¼Œå¯ä»¥å¾—åˆ°å›¾ä¸­ä½™ä¸‹çš„è®°å½•å†å²ã€‚</li></ol></blockquote><p>é€æ¸åœ°ï¼Œæ‰€æœ‰çš„è·¯ç”±å™¨éƒ½ä¼šè¶‹å‘æ— ç©·å¤§ï¼Œä½†æ˜¯æ‰€éœ€äº¤æ¢çš„æ¬¡æ•°ä¾èµ–äºä»£è¡¨æ— ç©·å¤§çš„æ•°å€¼ã€‚ç”±äºè¿™æ ·çš„åŸå› ï¼Œæ˜æ™ºçš„åšæ³•æ˜¯å°†æ— ç©·å¤§è®¾ç½®ä¸ºæœ€é•¿çš„è·¯å¾„+1</p><p><a href="https://blog.csdn.net/tianlongtc/article/details/80261581" target="_blank" rel="noopener">æ¯’æ€§é€†è½¬</a></p><p><br/></p><h2 id="2-5-é“¾è·¯çŠ¶æ€è·¯ç”±-link-state-routing"><a href="#2-5-é“¾è·¯çŠ¶æ€è·¯ç”±-link-state-routing" class="headerlink" title="2.5 é“¾è·¯çŠ¶æ€è·¯ç”±[link state routing]"></a>2.5 é“¾è·¯çŠ¶æ€è·¯ç”±[link state routing]</h2><ol><li>å‘ç°å®ƒçš„é‚»å±…èŠ‚ç‚¹ï¼Œå¹¶äº†è§£å…¶ç½‘ç»œåœ°å€ã€‚</li><li>è®¾ç½®åˆ°æ¯ä¸ªé‚»å±…èŠ‚ç‚¹çš„è·ç¦»æˆ–è€…æˆæœ¬åº¦é‡å€¼ã€‚</li><li>æ„é€ ä¸€ä¸ªåŒ…å«æ‰€æœ‰åˆšåˆšè·çŸ¥çš„é“¾è·¯ä¿¡æ¯åŒ…ã€‚</li><li>å°†è¿™ä¸ªåŒ…å‘é€ç»™æ‰€æœ‰å…¶ä»–çš„è·¯ç”±å™¨ï¼Œå¹¶æ¥æ”¶æ¥è‡ªæ‰€æœ‰å…¶ä»–è·¯ç”±å™¨çš„ä¿¡æ¯åŒ…ã€‚</li><li>è®¡ç®—å‡ºåˆ°æ¯ä¸ªå…¶ä»–è·¯ç”±å™¨çš„æœ€çŸ­è·¯å¾„ã€‚</li></ol><p><br/></p><h3 id="i-å‘ç°é‚»å±…"><a href="#i-å‘ç°é‚»å±…" class="headerlink" title="i. å‘ç°é‚»å±…"></a>i. å‘ç°é‚»å±…</h3><p>é¦–å…ˆè·¯ç”±å™¨è¦æ‰¾åˆ°å®ƒçš„é‚»å±…ã€‚</p><p>è·¯ç”±å™¨åœ¨æ¯ä¸€æ¡ç‚¹åˆ°ç‚¹çº¿è·¯ä¸Šå‘é€ä¸€ä¸ªç‰¹æ®Šçš„ HELLO æ•°æ®åŒ…ï¼Œçº¿è·¯å¦ä¸€ç«¯çš„è·¯ç”±å™¨åº”è¯¥è¿”å›ä¸€ä¸ªåº”ç­”è¯´æ˜è‡ªå·±æ˜¯è°ã€‚</p><p><br/></p><p>æ³¨æ„ï¼Œè¿™é‡Œä¼šå°†LANçœ‹æˆä¸€ä¸ªpseudonode</p><center><img src="image-20191224223921157.png" srcset="/img/loading.gif" alt="image-20191224223921157" style="zoom:50%;" /></center><h3 id="ii-è®¾ç½®é“¾è·¯æˆæœ¬"><a href="#ii-è®¾ç½®é“¾è·¯æˆæœ¬" class="headerlink" title="ii. è®¾ç½®é“¾è·¯æˆæœ¬"></a>ii. è®¾ç½®é“¾è·¯æˆæœ¬</h3><p>éœ€è¦æ¯æ¡é“¾è·¯ä»¥è·ç¦»ã€æˆæœ¬ã€å»¶è¿Ÿåº¦é‡ã€‚</p><p>æµ‹å®šå»¶è¿Ÿçš„æ–¹æ³•æ˜¯ï¼š</p><blockquote><p>é€šè¿‡çº¿è·¯ç»™å¦ä¸€è¾¹å‘é€ä¸€ä¸ªç‰¹æ®Šçš„ ECHO æ•°æ®åŒ…ï¼Œè¦æ±‚å¯¹æ–¹ç«‹å³å‘å›ã€‚é€šè¿‡æµ‹é‡å¾€è¿”æ—¶é—´å†é™¤ä»¥ 2</p></blockquote><p><br/></p><h3 id="iii-æ„é€ é“¾è·¯çŠ¶æ€åŒ…-link-state-packets"><a href="#iii-æ„é€ é“¾è·¯çŠ¶æ€åŒ…-link-state-packets" class="headerlink" title="iii. æ„é€ é“¾è·¯çŠ¶æ€åŒ…[link state packets]"></a>iii. æ„é€ é“¾è·¯çŠ¶æ€åŒ…[link state packets]</h3><center><img src="image-20191203080937476.png" srcset="/img/loading.gif" alt="image-20191203080937476" style="zoom: 33%;" /></center><h4 id="iii-A-link-state-packetsçš„ç»“æ„"><a href="#iii-A-link-state-packetsçš„ç»“æ„" class="headerlink" title="iii.A link state packetsçš„ç»“æ„"></a>iii.A link state packetsçš„ç»“æ„</h4><ul><li>å‘é€æ–¹çš„æ ‡è¯†ç¬¦</li><li>åºå·[Seq]</li><li>å¹´é¾„[Age]</li><li>é‚»å±…åˆ—è¡¨ï¼Œå¯¹äºæ¯ä¸ªé‚»å±…ï¼ŒåŒæ—¶ç»™å‡ºåˆ°è¿™ä¸ªé‚»å±…çš„å»¶è¿Ÿ</li></ul><h4 id="iii-B-ä»€ä¹ˆæ—¶å€™æ„é€ æ•°æ®åŒ…"><a href="#iii-B-ä»€ä¹ˆæ—¶å€™æ„é€ æ•°æ®åŒ…" class="headerlink" title="iii.B ä»€ä¹ˆæ—¶å€™æ„é€ æ•°æ®åŒ…"></a>iii.B ä»€ä¹ˆæ—¶å€™æ„é€ æ•°æ®åŒ…</h4><ul><li>å‘¨æœŸæ€§åœ°åˆ›å»ºæ•°æ®åŒ…</li><li>æ¯å½“å‘ç”ŸæŸäº›é‡è¦çš„äº‹æƒ…æ—¶æ‰åˆ›å»ºæ•°æ®åŒ…ï¼Œæ¯”å¦‚ä¸€æ¡çº¿è·¯æ–­æ‰æˆ–è€…ä¸€ä¸ªé‚»å±…èŠ‚ç‚¹åœæœºâ€¦</li></ul><p><br/></p><h3 id="iv-åˆ†å‘é“¾è·¯çŠ¶æ€åŒ…"><a href="#iv-åˆ†å‘é“¾è·¯çŠ¶æ€åŒ…" class="headerlink" title="iv. åˆ†å‘é“¾è·¯çŠ¶æ€åŒ…"></a>iv. åˆ†å‘é“¾è·¯çŠ¶æ€åŒ…</h3><p>é“¾è·¯çŠ¶æ€è·¯ç”±ç®—æ³•æœ€æŠ€å·§çš„éƒ¨åˆ†åœ¨äºåˆ†å‘é“¾è·¯çŠ¶æ€æ•°æ®åŒ…</p><p><br/></p><p>æ€è·¯ï¼š</p><p>æ³›æ´ªå°†link state packetsåˆ†å‘ç»™æ‰€æœ‰è·¯ç”±å™¨ã€‚ä¸ºäº†æ§åˆ¶floodingè§„æ¨¡ï¼Œæ¯ä¸ªæ•°æ®åŒ…éƒ½æœ‰ä¸€ä¸ªåºå·ã€‚</p><ul><li><p>Sequence number increments for each new pkt sent.</p></li><li><p>Routers keeps track of all the (source router, sequence) pairs they see.</p></li><li><p>If pkt is new, forward to lines except the incoming one</p></li><li><p>Else, discard.</p></li><li><p>If sequence number is lower than highest one seen so far, reject as obsolete.</p></li><li><p>To include age of each packet and decrement it once per second. If age hits 0, discard the information.</p></li></ul><p><br/></p><p>å¯èƒ½äº§ç”Ÿçš„é—®é¢˜ä¸è§£å†³æ–¹æ³•</p><ul><li><p>å¦‚æœåºå·ç»•å›ï¼Œå¯èƒ½ä¼šäº§ç”Ÿæ··æ·†ã€‚</p><blockquote><p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ä¸€ä¸ª 32 ä½çš„åºå·ã€‚</p></blockquote></li><li><p>å¦‚æœä¸€ä¸ªè·¯ç”±å™¨å´©æºƒäº†ï¼Œé‚£ä¹ˆå®ƒå°†ä¸¢å¤±æ‰€æœ‰çš„åºå·è®°å½•è¡¨ã€‚å¦‚æœå®ƒå†ä» 0 å¼€å§‹ï¼Œ é‚£ä¹ˆï¼Œä¸‹ä¸€ä¸ªæ•°æ®åŒ…å°†è¢«ä½œä¸ºé‡å¤æ•°æ®åŒ…è€Œæ‹’ç»ã€‚</p><p>å†æ¬¡ï¼Œå¦‚æœä¸€ä¸ªåºå·è¢«ç ´åäº†ï¼Œæ¯”å¦‚å‘é€æ–¹å‘é€çš„åºå·ä¸º 4ï¼Œä½†æ˜¯ç”±äºäº§ç”Ÿäº† 1 ä½é”™ è¯¯ï¼Œæ‰€ä»¥æ¥æ”¶æ–¹çœ‹åˆ°çš„åºå·æ˜¯ 65540 ï¼Œé‚£ä¹ˆï¼Œåºå·ä» 5 åˆ° 65540 çš„æ•°æ®åŒ…éƒ½å°†è¢«å½“ä½œè¿‡æ—¶æ•°æ®åŒ…è€Œæ‹’ç»æ¥å—ï¼Œå› ä¸ºæ¥æ”¶æ–¹è®¤ä¸ºå½“å‰çš„åºå·æ˜¯ 65540 ã€‚</p><blockquote><p>è§£å†³æ–¹æ¡ˆï¼šåœ¨æ¯ä¸ªæ•°æ®åŒ…çš„åºå·ä¹‹ååŒ…å«ä¸€ä¸ªå¹´é¾„[ age ]å®‡æ®µï¼Œ å¹¶ä¸”æ¯ç§’é’Ÿå°†å¹´é¾„å‡ 1 ã€‚å½“å¹´é¾„å­—æ®µçš„å€¼è¢«å‡åˆ° 0 æ—¶ï¼Œæ¥è‡ªè·¯ç”±å™¨çš„è¯¥ä¿¡æ¯å°†è¢«ä¸¢å¼ƒã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œæ¯”å¦‚è¯´ 10 ç§’ï¼Œä¸€ä¸ªæ–°çš„æ•°æ®åŒ…å°±ä¼šåˆ°æ¥ï¼š</p></blockquote></li></ul><center><img src="image-20191203083626941.png" srcset="/img/loading.gif" alt="image-20191203083626941" style="zoom:40%;" /></center><h3 id="v-Computing-the-new-routes"><a href="#v-Computing-the-new-routes" class="headerlink" title="v. Computing the new routes"></a>v. Computing the new routes</h3><p>Once a router has accumulated a full set of link state packets, it can construct the entire subnet graph because every link is represented.</p><p>åœ¨è·¯ç”±å™¨æœ¬åœ°è¿è¡ŒDijkstraç®—æ³•ï¼Œæ¥è®¡ç®—è·¯ç”±</p><p><br/></p><h3 id="LS-DVçš„æ¯”è¾ƒ"><a href="#LS-DVçš„æ¯”è¾ƒ" class="headerlink" title="LS-DVçš„æ¯”è¾ƒ"></a>LS-DVçš„æ¯”è¾ƒ</h3><center><img src="image-20191203084340533.png" srcset="/img/loading.gif" alt="image-20191203084340533" style="zoom: 40%;" /></center><h2 id="2-6-å±‚æ¬¡è·¯ç”±"><a href="#2-6-å±‚æ¬¡è·¯ç”±" class="headerlink" title="2.6 å±‚æ¬¡è·¯ç”±"></a>2.6 å±‚æ¬¡è·¯ç”±</h2><p>ä¸ºä»€ä¹ˆè¦åˆ†å±‚ï¼š</p><div class="note note-info">            <p>éšç€ç½‘ç»œè§„æ¨¡çš„å¢é•¿ï¼Œè·¯ç”±å™¨çš„è·¯ç”±è¡¨ä¹Ÿæˆæ¯”ä¾‹åœ°å¢é•¿ï¼ä¸æ–­å¢é•¿çš„è·¯ç”±è¡¨ä¸ä»…æ¶ˆè€—è·¯ç”±å™¨å†…å­˜ï¼Œè€Œä¸”è¿˜éœ€è¦æ›´å¤šçš„ CPU æ—¶é—´æ¥æ‰«æè·¯ç”±è¡¨ä»¥åŠæ›´å¤šçš„å¸¦å®½æ¥å‘é€æœ‰å…³çš„çŠ¶æ€ æŠ¥å‘Šã€‚å½“ç½‘ç»œå¢é•¿åˆ°ä¸€å®šæ—¶å¯èƒ½ä¼šè¾¾åˆ°æŸç§ç¨‹åº¦ï¼Œæ­¤æ—¶æ¯ä¸ªè·¯ç”±å™¨ä¸å¤ªå¯èƒ½å†ä¸ºå…¶ä»–æ¯ä¸€ä¸ªè·¯ç”±å™¨ç»´æŠ¤ä¸€ä¸ªè¡¨é¡¹ã€‚æ‰€ä»¥ ï¼Œ è·¯ç”±ä¸å¾—ä¸åˆ†å±‚æ¬¡è¿›è¡Œ</p>          </div><p><br/></p><p>Two level routing:</p><blockquote><ul><li><p>Every router knows all the details about how to route packets to destinations within its own region</p></li><li><p>but knows nothing about the internal structure of other regions.</p></li></ul></blockquote><p><br/></p><p>Multiple-level routing</p><blockquote><p>regions-&gt;clusters-&gt;zones-&gt;groups-&gt;â€¦</p></blockquote><p><br/></p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªtwo-level routingçš„ä¾‹å­ï¼Œå…¶ä¸­æœ‰5ä¸ªåŒºåŸŸ</p><p>è·¯ç”±å™¨1Açš„å®Œæ•´è·¯ç”±è¡¨[å›¾b]æœ‰17ä¸ªè¡¨é¡¹ã€‚</p><p>å¦‚æœé‡‡ç”¨åˆ†çº§è·¯ç”±ï¼Œåˆ™è·¯ç”±å™¨å¦‚å›¾cæ‰€ç¤ºï¼Œè·¯ç”±è¡¨æœ‰7é¡¹</p><center><img src="image-20191203084908185.png" srcset="/img/loading.gif" alt="image-20191203084908185" style="zoom:35%;" /></center><p>åº”è¯¥åˆ†æˆå¤šå°‘å±‚</p><blockquote><p>å¯¹äºä¸€ä¸ªåŒ…å« N ä¸ªè·¯ç”±å™¨çš„ç½‘ç»œï¼Œæœ€ä¼˜çš„å±‚æ•°æ˜¯ lnNï¼Œæ¯ä¸ªè·¯ç”±å™¨æ‰€éœ€çš„è·¯ç”±å™¨è¡¨é¡¹æ˜¯ elnN ä¸ªã€‚</p></blockquote><p>ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸€ä¸ªå…·æœ‰ 720 ä¸ªè·¯ç”±å™¨çš„å­ç½‘ã€‚å¦‚æœæ²¡æœ‰åˆ†å±‚ï¼Œæ¯ä¸ªè·¯ç”±å™¨éœ€è¦ 720 ä¸ªè·¯ç”±è¡¨é¡¹</p><p>å¦‚æœå­ç½‘è¢«åˆ† æˆ 24 ä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸ 30 ä¸ªè·¯ç”±å™¨ï¼Œé‚£ä¹ˆæ¯ä¸ªè·¯ç”±å™¨åªéœ€è¦ 30 ä¸ªæœ¬åœ°è¡¨é¡¹ï¼ŒåŠ ä¸Š 23 ä¸ª è¿œç¨‹è¡¨é¡¹ï¼Œæ€»å…± 53 ä¸ªè¡¨é¡¹</p><p>å¦‚æœé‡‡ç”¨ä¸‰çº§å±‚æ¬¡ç»“æ„ï¼Œæ€»å…± 8 ä¸ªç°‡ï¼Œæ¯ä¸ªç°‡åŒ…å« 9 ä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸ 10 ä¸ªè·¯ç”±å™¨ï¼Œé‚£ä¹ˆï¼Œæ¯ä¸ªè·¯ç”±å™¨éœ€è¦ 10 ä¸ªè¡¨é¡¹ç”¨äºè®°å½•æœ¬åœ°è·¯ç”±å™¨ï¼Œ 8 ä¸ªè¡¨é¡¹ç”¨äºåˆ°åŒä¸€ç°‡å†…å…¶ä»–åŒºåŸŸçš„è·¯ç”±ï¼Œ 7 ä¸ªè¡¨é¡¹ç”¨äºè¿œç¨‹çš„ç°‡ï¼Œæ€»å…± 25 ä¸ªè¡¨é¡¹ã€‚</p><h2 id="2-7-å¹¿æ’­è·¯ç”±"><a href="#2-7-å¹¿æ’­è·¯ç”±" class="headerlink" title="2.7 å¹¿æ’­è·¯ç”±"></a>2.7 å¹¿æ’­è·¯ç”±</h2><p>å¹¿æ’­ï¼što send a packet to all destinations simultaneously.</p><p>å¹¿æ’­çš„æ–¹æ³•</p><ul><li><p>è®©æºæœºå™¨ç»™æ¯ä¸€ä¸ªç›®æ ‡å•ç‹¬å‘é€ä¸€ä¸ªæ•°æ®åŒ…</p><blockquote><p>ä¸ä»…æµªè´¹å¸¦å®½ï¼Œè€Œä¸”è¦æ±‚æºæœºå™¨æ‹¥æœ‰æ‰€æœ‰ç›®æ ‡æœºå™¨çš„å®Œæ•´åœ°å€</p></blockquote></li><li><p>å¤šç›®æ ‡è·¯ç”±[multidestination routing]</p><blockquote><p>æ¯ä¸ªæ•°æ®åŒ…åŒ…å«ä¸€ç»„ç›®æ ‡åœ°å€ï¼Œæˆ–è€…ä¸€ä¸ªä½å›¾ï¼Œç”±è¯¥ä½å›¾æŒ‡å®šæ‰€æœŸæœ›åˆ°è¾¾çš„ç›®æ ‡ã€‚</p><p>å½“ä¸€ä¸ªæ•°æ®åŒ…åˆ°è¾¾ä¸€ä¸ªè·¯ç”±å™¨æ—¶ï¼Œ è·¯ç”±å™¨æ£€æŸ¥æ•°æ®åŒ…æºå¸¦çš„æ‰€æœ‰ç›®æ ‡ï¼Œç¡®å®šå“ªäº›è¾“å‡ºçº¿è·¯æ˜¯å¿…è¦çš„[åªè¦ä¸€æ¡è¾“å‡ºçº¿è·¯æ˜¯åˆ°è¾¾è‡³å°‘ä¸€ä¸ªç›®æ ‡çš„æœ€ä½³è·¯å¾„ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯å¿…è¦çš„]ã€‚</p><p>è·¯ç”±å™¨ä¸ºæ¯ä¸€æ¡éœ€è¦ç”¨åˆ°çš„è¾“å‡ºçº¿è·¯ç”Ÿæˆä¸€ä»½è¯¥æ•°æ®åŒ…æ–°çš„å‰¯æœ¬ï¼Œåœ¨è¿™ä»½å‰¯æœ¬ä¸­åªåŒ…å«é‚£äº›ä½¿ç”¨è¿™æ¡çº¿è·¯çš„ç›®æ ‡åœ°å€ã€‚å®é™…ä¸Šï¼ŒåŸæ¥çš„ç›®æ ‡é›†åˆè¢«åˆ†æ•£åˆ°è¿™äº›è¾“å‡ºçº¿è·¯ä¸Šã€‚</p><p>åœ¨ç»è¿‡äº†è¶³å¤Ÿå¤šçš„è·³æ•°ä¹‹åï¼Œæ¯ä¸ªæ•°æ®åŒ…å°†åªåŒ…å«ä¸€ä¸ªç›®æ ‡åœ°å€ï¼Œå› æ­¤å¯ä»¥è¢«å½“ä½œæ™®é€šçš„æ•°æ®åŒ…æ¥å¯¹å¾…ã€‚</p><p>ä¼˜ç‚¹ï¼šå½“å¤šä¸ªæ•°æ®åŒ…å¿…é¡»éµå¾ªåŒæ ·çš„è·¯å¾„æ—¶ï¼Œå…¶ä¸­ä¸€ä¸ªæ•°æ®åŒ…æ‰¿æ‹…äº†å…¨éƒ¨çš„è´¹ç”¨ï¼Œè€Œå…¶ä»–çš„æ•°æ®åŒ…åˆ™æ˜¯å…è´¹æ­è½½ã€‚å› æ­¤ï¼Œç½‘ç»œå¸¦å®½çš„åˆ©ç”¨ç‡æ›´é«˜ã€‚</p><p>ç¼ºç‚¹ï¼šä¾ç„¶è¦æ±‚æºç«¯çŸ¥é“å…¨éƒ¨çš„ç›®æ ‡åœ°å€ï¼Œå¯¹äºè·¯ç”±å™¨æ¥è¯´ï¼Œè¦ç¡®å®šä»å“ªäº›çº¿è·¯è½¬å‘å¤šç›®æ ‡æ•° æ®åŒ…çš„å·¥ä½œé‡å¤ªå¤§ï¼Œå°¤å…¶æ˜¯å¤„ç†å¤šä¸ªä¸åŒçš„æ•°æ®åŒ…æ—¶ã€‚</p></blockquote></li><li><p>flooding</p></li><li><p>é€†å‘è·¯å¾„è½¬å‘[reverse path forwarding]</p><p>å½“ä¸€ä¸ªå¹¿æ’­æ•°æ®åŒ…åˆ°è¾¾ä¸€ä¸ªè·¯ç”±å™¨æ—¶ï¼Œè·¯ç”±å™¨æ£€æŸ¥å®ƒåˆ°æ¥çš„é‚£æ¡çº¿è·¯æ˜¯å¦æ­£æ˜¯é€šå¸¸ç”¨æ¥ç»™å¹¿æ’­æºç«¯å‘é€æ•°æ®åŒ…ç”¨çš„é‚£æ¡çº¿è·¯ã€‚</p><ul><li>å¦‚æœæ˜¯ï¼Œåˆ™è¯¥å¹¿æ’­æ•°æ®åŒ…æ˜¯æ²¿ç€æœ€ä½³è·¯å¾„è¢«è½¬å‘è¿‡æ¥çš„ï¼Œå› è€Œæ˜¯åˆ°è¾¾å½“å‰è·¯ç”±å™¨çš„ç¬¬ä¸€ä»½å‰¯æœ¬ã€‚è¯¥è·¯ç”±å™¨å°†è¯¥æ•°æ®åŒ…è½¬å‘åˆ°é™¤äº†åˆ°æ¥çš„é‚£æ¡çº¿è·¯ä¹‹å¤–çš„æ‰€æœ‰ å…¶ä»–çº¿è·¯ä¸Šã€‚</li><li>å¦‚æœå¹¿æ’­æ•°æ®åŒ…æ˜¯ä»å…¶ä»–ä»»ä½•ä¸€æ¡å¹¶éé¦–é€‰çš„åˆ°è¾¾å¹¿æ’­æºçš„çº¿è·¯å…¥å¢ƒçš„è¯ï¼Œè¯¥æ•°æ®åŒ…è¢«å½“ä½œä¸€ä¸ªå¯èƒ½çš„é‡å¤æ•°æ®åŒ…è€Œä¸¢å¼ƒã€‚</li></ul><center><img src="image-20191205155744495.png" srcset="/img/loading.gif" alt="image-20191205155744495" style="zoom:40%;" /></center><p><br/></p></li></ul><center><img src="image-20191205154558002.png" srcset="/img/loading.gif" alt="image-20191205154558002" style="zoom:50%;" /></center><blockquote><p>(a)éƒ¨åˆ†æ˜¾ç¤ºäº†ä¸€ä¸ªç½‘ç»œï¼Œ (b )éƒ¨åˆ†æ˜¾ç¤ºäº†è¯¥ç½‘ç»œä¸­è·¯ç”±å™¨ <strong><em>I</em></strong> çš„ä¸€æ£µæ±‡é›†æ ‘ï¼Œå›¾(céƒ¨åˆ†æ˜¾ç¤ºäº†é€†å‘è·¯å¾„ç®—æ³•æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><ol><li>åœ¨ç¬¬ä¸€è·³ï¼Œ I å‘é€æ•°æ®åŒ…ç»™ Fã€ Hã€ J å’Œ Nï¼Œå¦‚æ ‘ä¸­ç¬¬äºŒè¡Œæ‰€ç¤ºã€‚è¿™äº›æ•°æ®åŒ…ä¸­çš„æ¯ä¸€ä¸ªéƒ½æ˜¯åœ¨é€šå‘ I çš„é¦–é€‰è·¯å¾„ï¼ˆå‡å®šé¦–é€‰çš„è·¯å¾„éƒ½æ²¿ç€æ±‡é›†æ ‘)åˆ°æ¥çš„ï¼Œ è¿™ç‚¹ç”¨å­—æ¯å¤–é¢åŠ ä¸€ä¸ªåœ†åœˆæ¥è¡¨ç¤ºã€‚</li><li>åœ¨ç¬¬äºŒè·³ï¼Œå…±äº§ç”Ÿäº† 8 ä¸ªæ•°æ®åŒ…ï¼Œå…¶ä¸­ï¼Œåœ¨ç¬¬ä¸€è·³æ¥æ”¶åˆ°æ•°æ®åŒ…çš„è·¯ç”±å™¨å„äº§ç”Ÿ 2 ä¸ªæ•°æ®åŒ…ã€‚ç»“æœï¼Œæ‰€æœ‰è¿™ 8 ä¸ªæ•°æ®åŒ…éƒ½åˆ°è¾¾äº†ä»¥å‰æ²¡æœ‰è®¿é—®è¿‡çš„è·¯ç”±å™¨ï¼Œå…¶ä¸­ 5 ä¸ªæ˜¯æ²¿ç€é¦–é€‰çº¿è·¯åˆ°æ¥çš„ã€‚</li><li>åœ¨ç¬¬ä¸‰è·³æ‰€äº§ç”Ÿçš„ 6 ä¸ªæ•°æ®åŒ…ä¸­ï¼Œåªæœ‰ 3 ä¸ªæ˜¯æ²¿é¦–é€‰è·¯å¾„ï¼ˆåœ¨ Cã€ E å’Œ Kï¼‰åˆ°æ¥çš„ï¼Œå…¶ä»–çš„éƒ½æ˜¯é‡å¤æ•°æ®åŒ…ã€‚åœ¨ç»è¿‡äº”è·³å’Œ 24 ä¸ªæ•°æ®åŒ…ä»¥ åï¼Œå¹¿æ’­è¿‡ç¨‹ç»ˆæ­¢ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœå®Œå…¨æ²¿ç€æ±‡é›†æ ‘çš„è¯ï¼Œåªéœ€è¦ 4 è·³å’Œ 14 ä¸ªæ•°æ®åŒ…ã€‚</li></ol></blockquote><ul><li>spanning tree</li></ul><p>æ”¹è¿›äº†é€†å‘è·¯å¾„è½¬å‘ã€‚</p><p>æ¯ä¸ªè·¯ç”±å™¨éƒ½çŸ¥é“å®ƒçš„å“ªäº›çº¿è·¯å±äºç”Ÿæˆæ ‘ï¼Œå®ƒå°±å¯ä»¥å°†ä¸€ä¸ªäººå¢ƒå¹¿æ’­æ•°æ®åŒ…å¤åˆ¶åˆ°é™¤äº†è¯¥æ•°æ®åŒ…åˆ°æ¥çš„é‚£æ¡çº¿è·¯ä¹‹å¤–çš„æ‰€æœ‰<strong><em><u>ç”Ÿæˆæ ‘çº¿è·¯</u></em></strong>ä¸Šã€‚</p><blockquote><p>å’Œé€†å‘è·¯å¾„è½¬å‘ç›¸æ¯”ï¼Œé€†å‘è·¯å¾„è½¬å‘å¹¶ä¸åªè½¬å‘åˆ°ç”Ÿæˆæ ‘çº¿è·¯ï¼Œè¿˜ä¼šè½¬å‘åˆ°å…¶ä»–çº¿è·¯ï¼Œè¿™äº›æ•°æ®åŒ…ä¼šè¢«è®¤ä¸ºæ˜¯å¯èƒ½çš„é‡å¤æ•°æ®åŒ…è€Œè¢«ä¸¢å¼ƒï¼›è€Œç”Ÿæˆæ ‘ç®—æ³•æ²¡æœ‰ä¸¢å¼ƒé—®é¢˜</p></blockquote><p><br/></p><h2 id="2-8-ç»„æ’­è·¯ç”±-multicast"><a href="#2-8-ç»„æ’­è·¯ç”±-multicast" class="headerlink" title="2.8 ç»„æ’­è·¯ç”±[multicast]"></a>2.8 ç»„æ’­è·¯ç”±[multicast]</h2><p>to send messages to well-defined groups that are numerically large in size but small compared to the network as whole.</p><center><img src="image-20191205155836717.png" srcset="/img/loading.gif" alt="image-20191205155836717" style="zoom: 40%;" /></center><p>é€šè¿‡ä¿®å»ºå¹¿æ’­ç”Ÿæˆæ ‘æŠŠä¸é€šå¾€ç»„æˆå‘˜çš„é“¾è·¯ä»æ ‘ä¸­åˆ æ‰ã€‚ä¿®å»ºç»“æœå¾—åˆ°çš„æ˜¯ä¸€é¢—æœ‰æ•ˆçš„ç»„æ’­ç”Ÿæˆæ ‘ã€‚</p><p><br/></p><p>ç”Ÿæˆæ ‘çš„ä¿®å»ºæ–¹æ³•ï¼š</p><ul><li><p>link state: </p></li><li><p>DV</p></li><li><p>core-based trees</p><blockquote><p>æ‰€æœ‰è·¯ç”±å™¨éƒ½åŒæ„æŸä¸ªè·¯ç”±å™¨ä½œä¸ºæ ¹ï¼Œè¿™ä¸ªæ ¹ç§°ä¸ºæ ¸å¿ƒï¼ˆ core ï¼‰æˆ–ä¼šèšç‚¹ï¼ˆrendezvous point )ï¼Œç„¶åæ¯ä¸ªæˆå‘˜é€šè¿‡ç»™æ ¹å‘é€ä¸€ä¸ªæ•°æ®åŒ…æ¥å»ºç«‹è¿™æ£µæ ‘ã€‚</p><p>ä¸ºäº†æŠŠæ•°æ®åŒ…å‘é€åˆ°è¿™ä¸ªç»„ï¼Œå‘é€è€…æŠŠæ•°æ®åŒ…å‘ç»™æ ¸å¿ƒï¼šå½“æ•°æ®åŒ…åˆ°è¾¾æ ¸å¿ƒåï¼Œå®ƒå†è¢«æ²¿ç€æ ‘å¾€ä¸‹è½¬å‘</p></blockquote></li></ul><h2 id="2-9-é€‰æ’­è·¯ç”±-Anycast-routing"><a href="#2-9-é€‰æ’­è·¯ç”±-Anycast-routing" class="headerlink" title="2.9 é€‰æ’­è·¯ç”±[Anycast routing]"></a>2.9 é€‰æ’­è·¯ç”±[Anycast routing]</h2><p>åœ¨é€‰æ’­æ–¹å¼ä¸‹ï¼Œæ•°æ®åŒ…è¢«ä¼  é€’ç»™æœ€è¿‘çš„ä¸€ä¸ªç»„æˆå‘˜ã€‚</p><h3 id="ä¸ºä»€ä¹ˆè¦é€‰æ’­ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦é€‰æ’­ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦é€‰æ’­ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦é€‰æ’­ï¼Ÿ</h3><blockquote><p>æœ‰æ—¶ï¼Œå¯¹å®¢æˆ·æœ€é‡è¦çš„æ˜¯è·å¾—æ­£ç¡®çš„ä¿¡æ¯è€Œä¸æ˜¯ä¸å“ªä¸ªèŠ‚ç‚¹å–å¾—è”ç³»ï¼Œä»»ä½•èŠ‚ç‚¹éƒ½å¯ä»¥ï¼Œ åªè¦å®ƒèƒ½æä¾›æ‰€éœ€çš„æœåŠ¡</p></blockquote><p>LS, DVç®—æ³•å¯ä»¥ç”¨æ¥ç”Ÿäº§é€‰æ’­è·¯ç”±ã€‚</p><p>å‡è®¾æˆ‘ä»¬è¦é€‰æ’­æ•°æ®åŒ…åˆ°ç»„1çš„æˆå‘˜ï¼Œè¯¥ç»„æˆå‘˜éƒ½å°†è¢«èµ‹äºˆ ä¸€ä¸ªç»„åœ°å€1è€Œä¸æ˜¯ä¸€ä¸ªä¸ªç‹¬ç«‹çš„åœ°å€ã€‚è·ç¦»çŸ¢é‡è·¯ç”±å°†åƒå¾€å¸¸ä¸€æ ·åˆ†å‘å‘é‡ï¼Œå¹¶ä¸”èŠ‚ç‚¹å°†åªé€‰æ‹©åˆ°ç›®çš„åœ°1çš„æœ€çŸ­è·¯å¾„ã€‚è¿™å°†å¯¼è‡´æ•°æ®åŒ…è¢«å‘é€åˆ°ç›®çš„åœ°1çš„æœ€è¿‘å®ä¾‹ã€‚</p><p>æ­¤è¿‡ç¨‹ä¹‹æ‰€ä»¥èƒ½æ­£å¸¸å·¥ä½œæ˜¯å› ä¸ºè·¯ç”±åè®®è®¤ä¸ºèŠ‚ç‚¹1çš„å®ä¾‹éƒ½æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œ</p><center><img src="image-20191224225002633.png" srcset="/img/loading.gif" alt="image-20191224225002633" style="zoom:50%;" /></center><p>æ€»ç»“</p><ul><li><p>unicastï¼šæºç»™å•ä¸ªç›®æ ‡èŠ‚ç‚¹å‘é€</p></li><li><p>broadcast: æºç»™æ‰€æœ‰ç›®æ ‡èŠ‚ç‚¹å‘é€</p></li><li><p>multicast: æºç»™ä¸€ç»„ç›®æ ‡èŠ‚ç‚¹å‘é€</p></li><li><p>Anycast: a packet is delivered to the nearest member of a group.</p></li></ul><h2 id="2-10-Routing-for-the-mobile-hosts"><a href="#2-10-Routing-for-the-mobile-hosts" class="headerlink" title="2.10 Routing for the mobile hosts"></a>2.10 Routing for the mobile hosts</h2><center><img src="image-20191224231029464.png" srcset="/img/loading.gif" alt="image-20191224231029464" style="zoom:50%;" /></center><h2 id="2-11-Routing-in-Ad-Hoc-Networks"><a href="#2-11-Routing-in-Ad-Hoc-Networks" class="headerlink" title="2.11 Routing in Ad Hoc Networks"></a>2.11 Routing in Ad Hoc Networks</h2><p>In ad-hoc network, the network topology may be changing all the time.</p><p><strong><em>AODV</em></strong>: </p><blockquote><p>Ad hoc On-demand Distance Vector. The most popular routing algorithm for Ad Hoc Networks.</p></blockquote><p>Consider the problem: A wants to send to I</p><blockquote><p>(a) A broadcasts, attempting to reach I.</p><p>(b) B and D received, establish reverse paths to A.</p><p>(c) B and D broadcast. C, F, and G received, establish reverse paths to B and D.</p><p>(d) C,F,G broadcast. E, H, and I received (I reached!).</p><p>I sends back a REPLY along the reverse path. G and D establish to path to I when they process REPLY.</p></blockquote><center><img src="image-20191224231601828.png" srcset="/img/loading.gif" alt="image-20191224231601828" style="zoom:50%;" /></center>]]></content>
    
    
    <categories>
      
      <category>Computer Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer Network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Computer network--MACå­å±‚</title>
    <link href="/2019/11/12/ComputerNetwork/MACLayer/"/>
    <url>/2019/11/12/ComputerNetwork/MACLayer/</url>
    
    <content type="html"><![CDATA[<p>è®¡ç®—æœºç½‘ç»œè¯¾ç¨‹-MACå­å±‚æ€»ç»“</p><a id="more"></a><style>  .page__header .header__brand path {    fill: rgba(255, 255, 255, .95);  }</style><p>ç½‘ç»œé“¾è·¯å¯ä»¥åˆ†æˆä¸¤ç±»</p><ul><li>ç‚¹åˆ°ç‚¹è¿æ¥[PPPåè®®]</li><li>å¹¿æ’­ä¿¡é“</li></ul><h1 id="1-ä¿¡é“åˆ†é…é—®é¢˜"><a href="#1-ä¿¡é“åˆ†é…é—®é¢˜" class="headerlink" title="1. ä¿¡é“åˆ†é…é—®é¢˜"></a>1. ä¿¡é“åˆ†é…é—®é¢˜</h1><h2 id="1-1é™æ€ä¿¡é“åˆ†é…"><a href="#1-1é™æ€ä¿¡é“åˆ†é…" class="headerlink" title="1.1é™æ€ä¿¡é“åˆ†é…"></a>1.1é™æ€ä¿¡é“åˆ†é…</h2><p>åœ¨å¤šä¸ªç«äº‰ç”¨æˆ·ä¹‹é—´åˆ†é…å•ä¸ªä¿¡é“çš„ä¼ ç»Ÿåšæ³•æ˜¯æŠŠä¿¡é“å®¹é‡æ‹†å¼€åˆ†ç»™å¤šä¸ªç”¨æˆ·ä½¿ç”¨</p><h2 id="1-2-åŠ¨æ€ä¿¡é“åˆ†é…"><a href="#1-2-åŠ¨æ€ä¿¡é“åˆ†é…" class="headerlink" title="1.2 åŠ¨æ€ä¿¡é“åˆ†é…"></a>1.2 åŠ¨æ€ä¿¡é“åˆ†é…</h2><h3 id="1-2-1-å…³é”®å‡è®¾"><a href="#1-2-1-å…³é”®å‡è®¾" class="headerlink" title="1.2.1 å…³é”®å‡è®¾"></a>1.2.1 å…³é”®å‡è®¾</h3><ul><li><p>æµé‡ç‹¬ç«‹</p><p>æ¨¡å‹ç”±Nä¸ªç‹¬ç«‹çš„ç«™ç»„æˆï¼Œæ¯ä¸ªç«™éƒ½æœ‰ä¸€ä¸ªç¨‹åºæˆ–è€…ç”¨æˆ·è¦ä¼ è¾“çš„å¸§ã€‚åœ¨é•¿åº¦ä¸º$\Delta t$çš„é—´éš”å†…ï¼ŒæœŸæœ›äº§ç”Ÿçš„å¸§æ•°æ˜¯$\lambda \Delta t$ã€‚è¿™é‡Œçš„$\lambda$ä¸ºå¸¸æ•°(æ–°å¸§çš„åˆ°è¾¾ç‡)ã€‚</p></li><li><p><strong>å•ä¿¡é“</strong></p><p>æ‰€æœ‰çš„é€šä¿¡éƒ½ç”¨è¿™ä¸€ä¸ªä¿¡é“</p></li><li><p>å†²çªå¯è§‚å¯Ÿ</p><p>å¦‚æœä¸¤å¸§åŒæ—¶ä¼ è¾“ï¼Œåˆ™ä»–ä»¬åœ¨æ—¶é—´ä¸Šå°±æœ‰é‡å ï¼Œäº§ç”Ÿæ··ä¹±çš„ä¿¡å·ï¼Œè¿™å°±æ˜¯å†²çªã€‚æ‰€æœ‰çš„ç«™éƒ½èƒ½æ£€æµ‹åˆ°å†²çªã€‚å†²çªçš„å¸§å¿…é¡»åœ¨ä»¥åå†æ¬¡è¢«å‘é€</p><p>[å†²çªçš„è¯ä¼šå‘é€ç«™ç‚¹ä¼šæ£€æµ‹åˆ°å¢å¼ºçš„ä¿¡å·</p></li><li><p>æ—¶é—´è¿ç»­æˆ–åˆ†æ§½</p><p>æ—¶é—´å¯ä»¥å‡è®¾è¿ç»­ï¼šä»»æ„æ—¶åˆ»éƒ½å¯ä»¥å¼€å§‹ä¼ è¾“å¸§</p><p>æ—¶é—´å¯ä»¥åˆ†æ§½ï¼ˆç¦»æ•£ï¼‰</p></li><li><p>è½½æ³¢ä¾¦å¬æˆ–ä¸å¬</p></li></ul><h3 id="1-2-2-å¤šè·¯è®¿é—®åè®®"><a href="#1-2-2-å¤šè·¯è®¿é—®åè®®" class="headerlink" title="1.2.2 å¤šè·¯è®¿é—®åè®®"></a>1.2.2 å¤šè·¯è®¿é—®åè®®</h3><h4 id="i-çº¯ALOHA"><a href="#i-çº¯ALOHA" class="headerlink" title="i. çº¯ALOHA"></a>i. çº¯ALOHA</h4><p>æ€æƒ³:</p><blockquote><p>æœ‰æ•°æ®è¦å‘å°±å‘é€</p><p>å¦‚æœå¸§ç ´åäº†ï¼Œåˆ™å‘é€æ–¹ç­‰å¾…ä¸€ä¸ªéšæœºæ—¶é—´åå†æ¬¡å‘é€</p></blockquote><p><img src="image-20191115204112604.png" srcset="/img/loading.gif" alt="image-20191115204112604" style="zoom:50%;" /></p><p>å¸§æ—¶[frame time]</p><blockquote><p>ä¼ è¾“ä¸€ä¸ªæ ‡å‡†çš„ã€å›ºå®šé•¿åº¦çš„å¸§éœ€è¦çš„æ—¶é—´[å¸§çš„é•¿åº¦/æ¯”ç‰¹ç‡]</p></blockquote><p>å‡å®šç«™äº§ç”Ÿçš„æ–°å¸§å¯ä»¥æ¨¡å‹åŒ–ä¸ºä¸€ä¸ªå¹³å‡æ¯â€œå¸§æ—¶â€äº§ç”Ÿ N ä¸ªå¸§çš„æ³Šæ¾åˆ†å¸ƒ</p><p>å‡ºäº†æ–°ç”Ÿæˆçš„å¸§å¤–ï¼Œæ¯ä¸ªç«™è¿˜ä¼šäº§ç”Ÿç”±äºå…ˆå‰é­å—å†²çªè€Œé‡ä¼ çš„é‚£äº›å¸§</p><p>è¿›ä¸€æ­¥å‡è®¾åœ¨æ¯ä¸ªâ€œå¸§æ—¶â€ä¸­ï¼Œè€å¸§å’Œæ–°å¸§åˆèµ·æ¥ä¹Ÿç¬¦åˆæ³Šæ¾åˆ†å¸ƒï¼Œæ¯ä¸ªå¸§æ—¶çš„å¹³å‡å¸§æ•°æ˜¯Gï¼Œæ˜¾ç„¶$G\geq N$</p><p>å‚æ•°å®šä¹‰</p><ul><li>å¸§æ—¶T[..frame length/bit rate]ï¼šå‘é€ä¸€ä¸ªæ ‡å‡†é•¿çš„å¸§æ‰€éœ€çš„æ—¶é—´</li><li>ååç‡Throughput Sï¼šåœ¨ä¸€ä¸ªå¸§æ—¶Tå†…å‘é€æˆåŠŸçš„å¹³å‡å¸§æ•°ï¼ˆ0&lt;S&lt;1ï¼ŒS=1æ—¶ä¿¡é“åˆ©ç”¨ç‡100%ï¼‰</li><li>è¿è½½è´Ÿè½½Offered load Gï¼šä¸€ä¸ªå¸§æ—¶Tå†…æ‰€æœ‰é€šä¿¡ç«™æ€»å…±å‘é€çš„å¸§å¹³å‡å€¼ï¼ˆåŒ…æ‹¬åŸå‘å’Œé‡å‘å¸§ï¼‰ï¼ˆGâ‰¥Sï¼ŒG=Sè¡¨ç¤ºæ— å†²çªï¼‰</li><li>P0ï¼šä¸€å¸§å‘é€æˆåŠŸï¼ˆæœªå‘ç”Ÿå†²çªï¼‰çš„æ¦‚ç‡ï¼Œå‘é€æˆåŠŸçš„åˆ†ç»„åœ¨å·²å‘é€åˆ†ç»„çš„æ€»æ•°ä¸­æ‰€å çš„æ¯”ä¾‹ï¼›å…¬å¼ï¼š$S = G\times P0$</li></ul><p>å¦‚ä½•è®¡ç®—P0</p><p>å†²çªå±é™©æœŸï¼š2T[2ä¸ªå¸§æ—¶]</p><p>åœ¨è¿™ä¸ªå±é™©æœŸï¼Œç”Ÿæˆå¸§çš„å‡å€¼ä¸º2G</p><p><img src="image-20191115204525493.png" srcset="/img/loading.gif" alt="image-20191115204525493" style="zoom:50%;" /><br><br/></p><p><img src="IMG_2DF27CD714C6-1.png" srcset="/img/loading.gif" alt="IMG_2DF27CD714C6-1" style="zoom: 33%;" /><br>åœ¨2Tæ—¶é—´å†…å‘é€æˆåŠŸçš„æ¦‚ç‡=2Tæ—¶é—´å†…æ²¡æœ‰å…¶ä»–å¸§ç”Ÿæˆçš„æ¦‚ç‡</p><p>$P_0=\frac{(G\cdot 2)^0e^{-G\cdot 2}}{0!}=e^{-2G}$</p><p>$S=GP_0=Ge^{-2G}$</p><h4 id="ii-åˆ†æ§½ALOHA"><a href="#ii-åˆ†æ§½ALOHA" class="headerlink" title="ii. åˆ†æ§½ALOHA"></a>ii. åˆ†æ§½ALOHA</h4><p>æ€æƒ³</p><blockquote><p>æ—¶é—´ç¦»æ•£åŒ–</p><p>å¿…é¡»è¦ç­‰åˆ°ä¸€ä¸ªæ—¶é—´æ§½ç‚¹å¼€å§‹æ—¶åˆ»æ‰èƒ½å‘é€å¸§</p></blockquote><p><img src="image-20191115210524429.png" srcset="/img/loading.gif" alt="image-20191115210524429" style="zoom:50%;" /><br>æ€§èƒ½å¦‚ä½•ï¼Ÿ</p><p>åªéœ€è¦åœ¨å½“å‰å¸§æ—¶æ²¡æœ‰å…¶ä»–ç«™å‘é€å¸§å°±å¯ä»¥ä¿è¯ä¸€ä¸ªå¸§å‘é€æˆåŠŸ</p><p>$P_0=\frac{(G\cdot 1)^0e^{-G\cdot 1}}{0!}=e^{-G}$</p><p>$S=GP_0=Ge^{-G}$</p><p><img src="image-20191115210722147.png" srcset="/img/loading.gif" alt="image-20191115210722147" style="zoom:50%;" /></p><h3 id="1-2-3-è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®åè®®"><a href="#1-2-3-è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®åè®®" class="headerlink" title="1.2.3 è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®åè®®"></a>1.2.3 è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®åè®®</h3><p>ä¸Šé¢ä¸¤ç§å±äºä¸å¬å°±è¯´</p><p>ä¸‹é¢æˆ‘ä»¬å¯ä»¥å°è¯•å…ˆå¬å†è¯´çš„æ–¹å¼[å‘é€å¸§ä¹‹å‰æ£€æµ‹ä¿¡é“ä¸­æ˜¯å¦æœ‰æ•°æ®åœ¨å‘é€]</p><h4 id="i-CSMA-Carrier-sense-multiple-access-without-CD-collision-detection"><a href="#i-CSMA-Carrier-sense-multiple-access-without-CD-collision-detection" class="headerlink" title="i. CSMA[Carrier sense multiple access] without CD[collision detection]"></a>i. CSMA[Carrier sense multiple access] without CD[collision detection]</h4><p>A. Persistent CSMA[1-persistent]</p><ul><li>If the channel is <strong>idle</strong>, the station <strong>transmits</strong> a frame. </li><li>If the channel is <strong>busy</strong>, the station <strong>waits</strong> until it becomes idle. Then the station transmits a frame. </li><li>If a <strong>collision occurs</strong>, the station <strong>waits a random</strong> <strong>amount of time</strong> and starts all over again. </li></ul><p>è¿™ä¸ªåè®®ä¹Ÿå«1-persistentï¼Œå› ä¸º<strong>ä¸åœåœ°å»senseä¿¡é“</strong>ï¼Œåªè¦ä¿¡é“ç©ºé—²å°±èƒ½å‘ç°ã€‚å½“æ–°åˆ°ç©ºé—²æ—¶ï¼Œä»–ä¼ è¾“æ•°æ®çš„æ¦‚ç‡ä¸º1ã€‚é—®é¢˜æ˜¯ï¼Œå¦‚æœä¸¤ä¸ªstationéƒ½åœ¨ç­‰å¾…ä¿¡é“ï¼Œé‚£ä¹ˆå½“ä¿¡é“ç©ºé—²æ—¶ï¼Œä»–ä»¬åŒæ—¶å‘é€ï¼Œè¿™å¿…ç„¶äº§ç”Ÿå†²çª</p><p><br/></p><p>B. Non-persistent CSMA</p><ul><li><p>If the channel is <strong>idle</strong>, the station <strong>transmits</strong> a frame. </p></li><li><p>If the channel is <strong>in use</strong>, the station <strong>does not</strong> continually sense it. Instead, it <strong>waits a random</strong> <strong>period of time</strong> and then repeats the algorithm. </p></li><li><p>If a <strong>collision occurs</strong>, the station <strong>waits a random</strong> <strong>amount of time</strong> and starts all over again. </p></li></ul><p>è¿™ç§æ–¹å¼ä¿¡é“åˆ©ç”¨ç‡æ¯”1-persistenté«˜ï¼Œä½†æ˜¯æ¯”1-persistentçš„delayæ—¶é—´é•¿</p><p><br/></p><p>C. p-persistent CSMA</p><p> <strong>Applied to slotted channels</strong></p><ul><li>If the channel is <strong>idle</strong>, it <strong>transmits with a probability</strong> <strong>p</strong>. With a probability <em>q=1-p</em>, it defers until the next slot. </li><li>If that slot is also idle, it either transmits or defers again, with probabilities <em>p</em> and <em>q</em>. </li><li>This process is repeated until either the frame has been transmitted or another station has begun transmitting. </li><li>If the channel is <strong>busy</strong>, it <strong>waits until the next slot</strong> and applies the above algorithm.</li></ul><p><img src="image-20191115220004447.png" srcset="/img/loading.gif" alt="image-20191115220004447" style="zoom: 25%;" /></p><h4 id="ii-CSMA-with-CD"><a href="#ii-CSMA-with-CD" class="headerlink" title="ii. CSMA with CD"></a>ii. CSMA with CD</h4><p>æ€æƒ³</p><blockquote><p>As soon as stations detect a collision, they stop their transmissions</p></blockquote><p>CSMA/CDå¯ä»¥å‡ºäºä»¥ä¸‹å‡ ç§çŠ¶æ€</p><ul><li>contention</li><li>transmission</li><li>idle</li></ul><p><img src="image-20191115220550462.png" srcset="/img/loading.gif" alt="image-20191115220550462" style="zoom: 33%;" /><br>ç«äº‰ç®—æ³•ï¼š</p><blockquote><p>å‡è®¾ä¸¤ä¸ªç«™åŒæ—¶åœ¨t0æ—¶åˆ»å¼€å§‹ä¼ é€æ•°æ®ï¼Œä»–ä»¬éœ€è¦å¤šé•¿æ—¶é—´æ‰èƒ½æ„è¯†åˆ°å‘ç”Ÿå†²çªå‘¢ï¼Ÿ 2$\tau$</p><p>å› æ­¤ï¼Œå°†CSMA/CDç«äº‰çœ‹æˆä¸€ä¸ªåˆ†æ§½ALOHAç³»ç»Ÿï¼Œæ—¶é—´æ§½å®½åº¦ä¸º$2\tau$</p><p>CSMA/CD å’Œåˆ†æ§½ ALOHA çš„åŒºåˆ«åœ¨äºï¼Œ åªæœ‰ä¸€ä¸ªç«™èƒ½ç”¨æ¥ä¼ è¾“çš„æ—¶é—´æ§½ï¼ˆå³ä¿¡é“è¢«æŠ“ä½äº†ï¼‰<strong><em>åé¢ç´§è·Ÿçš„é‚£äº›æ—¶é—´æ§½è¢«ç”¨æ¥ä¼ è¾“è¯¥å¸§çš„å…¶ä½™éƒ¨åˆ†</em></strong>ã€‚å¦‚æœå¸§æ—¶ç›¸æ¯”ä¼ æ’­æ—¶é—´é•¿å¾ˆå¤šï¼Œè¿™ç§å·®å¼‚å°†èƒ½å¤§å¤§æé«˜åè®®çš„æ€§èƒ½ã€‚</p></blockquote><p><img src="IMG_D9933EA1BF2A-1.png" srcset="/img/loading.gif" alt="IMG_D9933EA1BF2A-1" style="zoom: 33%;" /></p><h3 id="1-2-4-æ— å†²çªåè®®"><a href="#1-2-4-æ— å†²çªåè®®" class="headerlink" title="1.2.4 æ— å†²çªåè®®"></a>1.2.4 æ— å†²çªåè®®</h3><h4 id="i-ä½å›¾åè®®"><a href="#i-ä½å›¾åè®®" class="headerlink" title="i. ä½å›¾åè®®"></a>i. ä½å›¾åè®®</h4><p>ä¸€å…±æœ‰Nä¸ªstationï¼Œæ¯ä¸ªç«äº‰æœŸåŒ…å«Nä¸ªæ§½ã€‚å¦‚æœ0å·stationæœ‰ä¸€å¸§è¦å‘é€ï¼Œé‚£ä¹ˆä»–åœ¨0å·æ§½ä¸­ä¼ è¾“1ä½ã€‚è¿™ä¸ªæ§½ä¸å…è®¸å…¶ä»–stationå‘é€ã€‚</p><p>å½“æ‰€æœ‰Nä¸ªæ§½éƒ½ç»è¿‡åï¼Œæ¯ä¸ªç«™éƒ½çŸ¥é“å“ªäº›ç«™å¸Œæœ›ä¼ é€æ•°æ®ã€‚</p><p>è¿™æ˜¯ï¼ŒæŒ‰ç…§æ•°å­—é¡ºåºå¼€å§‹ä¼ é€æ•°æ®</p><p><img src="image-20191115224154892.png" srcset="/img/loading.gif" alt="image-20191115224154892" style="zoom:50%;" /><br>æ¯ä¸ªç«™éƒ½åŒæ„ä¸‹ä¸€ä¸ªæ˜¯è°ä¼ è¾“ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šå‘ç”Ÿå†²çª</p><p>å½“æœ€åä¸€ä¸ªå°±ç»ªç«™ä¼ é€å®Œå®ƒçš„å¸§åï¼Œå¦ä¸€ä¸ªNä½ç«äº‰æœŸåˆå¼€å§‹äº†</p><p>Notations</p><ul><li>The time unit is one contention bit </li><li><em>N</em>: contention period</li><li><em>d</em>: data frame length </li></ul><p>æ€§èƒ½åˆ†æ</p><ul><li>low load</li></ul><blockquote><ul><li>for low-numbered stations ,æ¯”å¦‚0ï¼Œ1</li></ul><p>å¦‚æœå½“è¿™ä¸ªstationåšå¥½å‘é€æ•°æ®çš„å‡†å¤‡æ—¶ï¼Œå½“å‰æ§½å‡ºäºä½å›¾ä¸­é—´çš„æŸä¸ªåœ°æ–¹ï¼Œé‚£ä¹ˆè¿™ä¸ªstationéœ€è¦ç­‰å¾…å®Œæˆå½“å‰æ‰«æçš„N/2ä¸ªæ§½ï¼Œåœ¨ç­‰å¾…å®Œæˆä¸‹ä¸€æ¬¡æ‰«æçš„å¦å¤–Nä¸ªæ§½ï¼Œç„¶åæ‰èƒ½å¼€å§‹ä¼ è¾“æ•°æ®</p><p>å¦‚æœå¤„äºå¼€å¤´çš„è¯ï¼Œä¸€ç§æƒ…å†µæ˜¯åˆšå¥½è½®åˆ°ä»–çš„æ§½ï¼Œé‚£ä¹ˆç­‰å¾…Nå°±å¯ä»¥ï¼›ä¸€ç§æƒ…å†µæ˜¯é”™è¿‡ä»–çš„æ§½ï¼Œé‚£ä¹ˆä»–è¦ç­‰è¿‡è¿™Næ¬¡ä»¥åŠä¸‹ä¸ªNä¸ªæ§½ã€‚å¹³å‡ä¸º1.5</p><p>ç­‰å¾…æ—¶é—´ä¸º1.5N</p><ul><li>for high-numbered stations, æ¯”å¦‚ä¸Šå›¾6,7</li></ul><p>è¦ä¹ˆåˆšå¥½è½®åˆ°ä»–ä¸ç­‰ï¼Œè¦ä¹ˆåˆšå¥½é”™è¿‡ä»–ç­‰N</p><p>å¹³å‡ç­‰å¾…0.5Nä¸ªæ§½</p></blockquote><p>å¹³å‡è€Œè¨€ï¼Œdelay for all stations is N</p><p>ä¿¡é“åˆ©ç”¨ç‡ä¸º: $\frac{d}{N+d}$ æ¯ä¸€å¸§çš„é¢å¤–å¼€é”€æ˜¯Nä½ï¼Œæ•°æ®é•¿åº¦ä¸ºdä½</p><ul><li>high load</li></ul><blockquote><p>the ğ‘ bit contention period is distributed over ğ‘ frames, yielding an overhead of only 1 bit per frame, </p></blockquote><p>the efficiency: $\frac{ğ‘‘}{d + 1}$ </p><h4 id="ii-token-passing"><a href="#ii-token-passing" class="headerlink" title="ii. token passing"></a>ii. token passing</h4><p>ä»¤ç‰Œä»£è¡¨å‘é€æƒé™ï¼Œä»¤ç‰Œä»¥é¢„å®šä¹‰çš„é¡ºåºä»ä¸€ä¸ªç«™ä¼ åˆ°ä¸‹ä¸€ä¸ªç«™</p><p>å¦‚æœç«™æœ‰ä¸ªç­‰å¾…ä¼ è¾“çš„å¸§é˜Ÿåˆ—ï¼Œå½“ä»–æ¥æ”¶åˆ°ä»¤ç‰Œå°±å¯ä»¥å‘é€å¸§ï¼Œç„¶åå†æŠŠä»¤ç‰Œä¼ é€’åˆ°ä¸‹ä¸€ç«™ï¼›å¦‚æœæ²¡æœ‰å¸§è¦ä¼ ï¼Œåˆ™åªæ˜¯ç®€å•æŠŠä»¤ç‰Œä¼ é€’ä¸‹å»</p><p><img src="image-20191115233333760.png" srcset="/img/loading.gif" alt="image-20191115233333760" style="zoom:50%;" /></p><h4 id="iii-Binary-Countdown"><a href="#iii-Binary-Countdown" class="headerlink" title="iii. Binary Countdown"></a>iii. Binary Countdown</h4><h3 id="1-2-5-æœ‰é™ç«äº‰åè®®"><a href="#1-2-5-æœ‰é™ç«äº‰åè®®" class="headerlink" title="1.2.5 æœ‰é™ç«äº‰åè®®"></a>1.2.5 æœ‰é™ç«äº‰åè®®</h3><p>ç›®å‰ä¸ºæ­¢</p><ul><li>Methods with contention <ul><li><strong>Under</strong> <strong>low</strong> <strong>load</strong>, the contention method (i.e., pure or slotted ALOHA, CSMA) is preferable due to its low delay.  </li><li><strong>Under</strong> <strong>high</strong> <strong>load</strong>, the contention method becomes increasingly less efficient. </li></ul></li><li>Methods without contention <ul><li>Under low load, the collision-free method has high delay. </li><li>Under high load, the collision-free method becomes increasingly more efficient. </li></ul></li></ul><p>ç»¼åˆä»–ä»¬çš„ä¼˜ç‚¹ç¼ºç‚¹ï¼Œæå‡ºlimited-contention protocols</p><p>æœ‰é™ç«äº‰åè®®åœ¨ä½è´Ÿè½½ä¸‹æ¥ç”¨ç«äº‰çš„åšæ³•è€Œæä¾›è¾ƒçŸ­çš„å»¶è¿Ÿï¼Œä½†åœ¨é«˜è´Ÿè½½ä¸‹æ¥ç”¨æ— å†²çªæŠ€æœ¯ï¼Œ ä»è€Œè·å¾—è‰¯å¥½çš„ä¿¡é“æ•ˆç‡</p><h4 id="Adaptive-Tree-Walk"><a href="#Adaptive-Tree-Walk" class="headerlink" title="Adaptive Tree Walk"></a>Adaptive Tree Walk</h4><p>æŠŠç«™çœ‹ä½œäºŒå‰æ ‘çš„<strong>å¶èŠ‚ç‚¹</strong></p><p>åœ¨ä¸€æ¬¡æˆåŠŸä¼ é€ä¹‹åçš„ç¬¬ä¸€ä¸ªç«äº‰æ§½ï¼Œå³ 0 å·æ§½ä¸­ï¼Œå…è®¸æ‰€æœ‰çš„ç«™å°è¯•è·å–ä¿¡é“ã€‚</p><p>å¦‚æœå®ƒä»¬ä¹‹ä¸­çš„æŸä¸€ä¸ªè·å¾—äº†ä¿¡é“ï¼Œåˆ™å¾ˆå¥½ï¼›å¦‚æœå‘ç”Ÿäº†å†²çªï¼Œåˆ™åœ¨1å·æ§½ä¸­ï¼Œ åªæœ‰ä½äºæ ‘ä¸­ 2 å·èŠ‚ç‚¹ä¹‹ä¸‹çš„é‚£äº›ç«™æ‰å¯ä»¥å‚ä¸ç«äº‰ã€‚</p><p>å¦‚æœå…¶ä¸­çš„æŸä¸ªç«™è·å¾—äº†ä¿¡é“ï¼Œåˆ™ åœ¨è¯¥ç«™å‘é€å®Œä¸€å¸§ä¹‹åçš„é‚£ä¸ªæ§½è¢«ä¿ç•™ç»™ä½äºèŠ‚ç‚¹ 3 ä¸‹é¢çš„é‚£äº›ç«™ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœèŠ‚ç‚¹ 2 ä¸‹é¢çš„ä¸¤ä¸ªæˆ–è€…å¤šä¸ªç«™éƒ½è¦ä¼ è¾“æ•°æ®ï¼Œåˆ™åœ¨ 1 å·æ§½ä¸­å°±ä¼šå‘ç”Ÿå†²çªï¼Œæ­¤æ—¶ï¼Œä¸‹ä¸€ä¸ªæ§½ï¼Œ å³ 2 å·æ§½å°±ç”±ä½äºèŠ‚ç‚¹ 4 ä¸‹é¢çš„ç«™æ¥ç«äº‰ã€‚</p><p><img src="image-20191115234633276.png" srcset="/img/loading.gif" alt="image-20191115234633276" style="zoom:50%;" /></p><h3 id="1-2-6-æ— é™å±€åŸŸç½‘åè®®"><a href="#1-2-6-æ— é™å±€åŸŸç½‘åè®®" class="headerlink" title="1.2.6 æ— é™å±€åŸŸç½‘åè®®"></a>1.2.6 æ— é™å±€åŸŸç½‘åè®®</h3><p>å‡è®¾æ¯ä¸ªæ— çº¿ç”µå‘å°„å™¨æœ‰æŸä¸ªå›ºå®šçš„ä¼ æ’­èŒƒå›´ï¼Œç”¨ä¸€ä¸ªåœ†å½¢è¦†ç›–åŒºåŸŸè¡¨ç¤ºï¼Œåœ¨è¿™åŒºåŸŸå†…çš„å¦ä¸€ä¸ªç«™å¯ä»¥ä¾¦å¬å¹¶æ¥æ”¶è¯¥ç«™çš„ä¼ è¾“</p><h4 id="éšè—ç»ˆç«¯é—®é¢˜"><a href="#éšè—ç»ˆç«¯é—®é¢˜" class="headerlink" title="éšè—ç»ˆç«¯é—®é¢˜"></a>éšè—ç»ˆç«¯é—®é¢˜</h4><blockquote><p>å‡è®¾æœ‰3æ— çº¿é€šä¿¡ç«™ABCå¦‚ä¸‹æ‰€ç¤ºï¼š<br>A        B         - C </p><p>å…¶ä¸­Båœ¨Cçš„æ— çº¿ç”µæ³¢èŒƒå›´å†…ï¼Œä½†Aä¸åœ¨Cçš„æ— çº¿ç”µæ³¢èŒƒå›´å†…ã€‚æ­¤æ—¶Cæ­£åœ¨å‘Bä¼ é€æ•°æ®ï¼Œè€ŒAä¹Ÿè¯•å›¾å‘Bä¼ é€æ•°æ®ã€‚æ­¤æ—¶ï¼ŒAä¸èƒ½å¤Ÿç›‘å¬åˆ°Bæ­£åœ¨å¿™ï¼ˆå› ä¸ºAåœ¨ç›‘å¬ä¿¡é“çš„æ—¶å€™ä»€ä¹ˆä¹Ÿå¬ä¸åˆ°ï¼Œæ‰€ä»¥å®ƒä¼šé”™è¯¯çš„è®¤ä¸ºæ­¤æ—¶å¯ä»¥å‘Bä¼ é€æ•°æ®äº†ï¼‰ã€‚å¦‚æœAå‘Bä¼ é€æ•°æ®ï¼Œåˆ™å°†å¯¼è‡´é”™è¯¯ã€‚æ­¤å³éšè—ç«™é—®é¢˜ã€‚å…¶ä¸­Cæ˜¯Açš„éšè—ç«™ã€‚</p></blockquote><h4 id="æš´éœ²ç»ˆç«¯é—®é¢˜"><a href="#æš´éœ²ç»ˆç«¯é—®é¢˜" class="headerlink" title="æš´éœ²ç»ˆç«¯é—®é¢˜"></a>æš´éœ²ç»ˆç«¯é—®é¢˜</h4><blockquote><p>å‡è®¾æœ‰3æ— çº¿é€šä¿¡ç«™ABCå¦‚ä¸‹æ‰€ç¤ºï¼š<br>-A        B          C </p><p>å…¶ä¸­Båœ¨Açš„æ— çº¿ç”µæ³¢èŒƒå›´å†…ï¼Œä½†Cä¸åœ¨Açš„æ— çº¿ç”µæ³¢èŒƒå›´å†…ã€‚æ­¤æ—¶Aæ­£åœ¨ä¼ é€æ•°æ®ï¼ˆå‘é™¤Bä»¥å¤–çš„æŸé€šä¿¡ç«™ï¼‰ï¼Œè€ŒBå¸Œæœ›ç»™Cå‘é€æ•°æ®ï¼Œä½†æ˜¯é”™è¯¯åœ°è®¤ä¸ºè¯¥ä¼ é€è¿‡ç¨‹å°†ä¼šå¤±è´¥ï¼ˆå› ä¸ºBä¼šç›‘å¬åˆ°ä¸€æ¬¡ä¼ è¾“ï¼Œæ‰€ä»¥å®ƒä¼šé”™è¯¯åœ°è®¤ä¸ºæ­¤æ—¶ä¸èƒ½å‘Cå‘é€æ•°æ®ï¼‰ã€‚æ­¤å³æš´éœ²ç«™é—®é¢˜ã€‚å…¶ä¸­Aæ˜¯Bçš„æš´éœ²ç«™</p></blockquote><h4 id="å†²çªé¿å…å¤šè·¯è®¿é—®ï¼ˆMACA-Multiple-Access-with-Collision-Avoidance"><a href="#å†²çªé¿å…å¤šè·¯è®¿é—®ï¼ˆMACA-Multiple-Access-with-Collision-Avoidance" class="headerlink" title="å†²çªé¿å…å¤šè·¯è®¿é—®ï¼ˆMACA, Multiple Access with Collision Avoidance)"></a>å†²çªé¿å…å¤šè·¯è®¿é—®ï¼ˆMACA, Multiple Access with Collision Avoidance)</h4><p><img src="image-20191116001108257.png" srcset="/img/loading.gif" alt="image-20191116001108257" style="zoom:50%;" /></p><p>è€ƒè™‘Aå¦‚ä½•å‘Bå‘é€ä¸€å¸§ã€‚ </p><blockquote><ul><li><p>Aé¦–å…ˆç»™Bå‘é€ä¸€ ä¸ª RTS (Request To Sendå¸§)ï¼Œè¿™ä¸ªçŸ­å¸§ (30 å­—èŠ‚ï¼‰åŒ…å«äº†éšåå°†è¦å‘é€çš„æ•°æ®å¸§çš„é•¿åº¦</p></li><li><p>ç„¶åï¼Œ B ç”¨ä¸€ä¸ª CTS (Clear to Send ï¼‰ä½œä¸ºåº”ç­”ï¼Œ æ­¤ CTS å¸§ä¹ŸåŒ…å«äº†æ•°æ®é•¿åº¦ï¼ˆä» RTS å¸§ä¸­å¤åˆ¶è¿‡æ¥ï¼‰ã€‚ A åœ¨æ”¶åˆ°äº†CTS å¸§ä¹‹åä¾¿å¼€å§‹ä¼ è¾“ã€‚</p></li></ul></blockquote><p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹ï¼Œå¦‚æœå…¶ä»–ç«™ä¹Ÿå¬åˆ°äº†è¿™äº›å¸§ï¼Œå®ƒä»¬ä¼šå¦‚ä½•ååº”ã€‚</p><blockquote><ul><li>å¦‚æœä¸€ä¸ªç«™å¬åˆ°äº† RTS å¸§ï¼Œé‚£ä¹ˆå®ƒä¸€å®šç¦» A å¾ˆè¿‘ï¼Œå®ƒå¿…é¡»ä¿æŒæ²‰é»˜ï¼Œè‡³å°‘ç­‰å¾…è¶³å¤Ÿé•¿çš„æ—¶é—´ä»¥ä¾¿åœ¨æ— å†²çªæƒ…å†µä¸‹ CTS è¢«è¿”å›ç»™ A</li><li>å¦‚æœä¸€ä¸ªç«™å¬åˆ°äº† CTS ï¼Œåˆ™å®ƒä¸€å®šç¦» B å¾ˆè¿‘ï¼Œåœ¨æ¥ä¸‹æ¥çš„æ•°æ®ä¼ é€è¿‡ç¨‹ ä¸­å®ƒå¿…é¡»ä¸€ç›´ä¿æŒæ²‰é»˜ï¼Œåªè¦æ£€æŸ¥ CTS å¸§ï¼Œè¯¥ç«™å°±å¯ä»¥çŸ¥é“æ•°æ®å¸§çš„é•¿åº¦ï¼ˆå³æ•°æ®ä¼ è¾“è¦æŒç»­å¤šä¹…ï¼‰ã€‚</li></ul></blockquote><p>ä½†æ˜¯è¿™æ ·ä»ç„¶å¯èƒ½å‘ç”Ÿå†²çªï¼šB å’Œ C å¯èƒ½åŒæ—¶ç»™ A å‘é€ RTS</p><p>è¿™ç§æ–¹æ³•å¯¹éšè—ç»ˆç«¯æ¯”è¾ƒæœ‰æ•ˆï¼Œæ— åŠ©äºæš´éœ²ç»ˆç«¯é—®é¢˜</p><h1 id="2-ä»¥å¤ªç½‘"><a href="#2-ä»¥å¤ªç½‘" class="headerlink" title="2. ä»¥å¤ªç½‘"></a>2. ä»¥å¤ªç½‘</h1><h2 id="2-1-ç»å…¸ä»¥å¤ªç½‘ç‰©ç†å±‚"><a href="#2-1-ç»å…¸ä»¥å¤ªç½‘ç‰©ç†å±‚" class="headerlink" title="2.1 ç»å…¸ä»¥å¤ªç½‘ç‰©ç†å±‚"></a>2.1 ç»å…¸ä»¥å¤ªç½‘ç‰©ç†å±‚</h2><p><img src="image-20191116182110572.png" srcset="/img/loading.gif" alt="image-20191116182110572" style="zoom:50%;" /></p><p>é‡‡ç”¨Machester encoding</p><p>Differential Manchester encoding :</p><p>æ—¶é’Ÿçš„é¢‘ç‡æ˜¯æ¯”ç‰¹ç‡çš„ä¸¤å€ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªbit æ—¶é—´å†…ï¼Œæ—¶é’Ÿä¼šäº§ç”Ÿä¸€æ¬¡è·³å˜ã€‚æ—¶é’ŸXOR bitï¼Œäº§ç”Ÿè¾“å‡º</p><p><img src="image-20191116183235764.png" srcset="/img/loading.gif" alt="image-20191116183235764" style="zoom:50%;" /></p><blockquote><p>ç¬¬ä¸€ä¸ªbitæ—¶é—´tå†…ï¼Œä¼ è¾“çš„bitæ˜¯1ï¼Œæ—¶é’Ÿåœ¨[0,t/2]å†…æ˜¯0ï¼Œä¸bit 1å¼‚æˆ–ï¼Œç¼–ç æˆ1;</p><p>åœ¨[t/2, t]å†…æ—¶é’Ÿè·³å˜åˆ°1ï¼Œä¸bit 0å¼‚æˆ–ï¼Œç¼–ç æˆ0.</p><p>å› æ­¤æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªbitæ—¶é—´çœ‹åˆ°çš„ç¼–ç å…ˆæ˜¯1åç¿»è½¬åˆ°0</p></blockquote><p>é—®é¢˜ï¼šéœ€è¦ä¸¤å€äºNRZçš„å¸¦å®½ï¼Œä¸€ä¸ªbitæ—¶é—´ä»–è¦ä¼ è¾“ä¸¤ä¸ªä¿¡å·</p><h2 id="2-2-ç»å…¸ä»¥å¤ªç½‘MACå­å±‚åè®®"><a href="#2-2-ç»å…¸ä»¥å¤ªç½‘MACå­å±‚åè®®" class="headerlink" title="2.2 ç»å…¸ä»¥å¤ªç½‘MACå­å±‚åè®®"></a>2.2 ç»å…¸ä»¥å¤ªç½‘MACå­å±‚åè®®</h2><p><img src="image-20191116183434635.png" srcset="/img/loading.gif" alt="image-20191116183434635" style="zoom:50%;" /></p><p><img src="IMG_2710(20191116-184052).png" srcset="/img/loading.gif" alt="IMG_2710(20191116-184052)" style="zoom: 33%;" /></p><p>è¿™é‡Œæœ‰æ•ˆå¸§é•¿å¿…é¡»&gt;=64å­—èŠ‚</p><p>å‡å»ç›®çš„åœ°å€åŸåœ°å€ç±»å‹å’Œchecksumä¹‹åï¼Œæ•°æ®éƒ¨åˆ†éƒ¨åˆ†&gt;=46å­—èŠ‚</p><blockquote><p>å› ä¸ºäº‰ç”¨æœŸä¸º$2\tau$ï¼Œé€šå¸¸å–ä¸º51.2us</p><p>å¯¹äº10Mb/sä»¥å¤ªç½‘ï¼Œåœ¨äº‰ç”¨æœŸå¯ä»¥å‘é€512bitï¼Œä¹Ÿå°±æ˜¯64å­—èŠ‚</p><p>ä½¿ç”¨CSMA/CD, ç›´åˆ°ä¿¡é“ç©ºé—²æ‰ä¼šå‘é€å¸§</p><p>å¦‚æœä¸¤ä¸ªç«™åŒæ—¶å‘é€æ•°æ®ï¼Œåˆ™åœ¨$2\tau$æ—¶é—´å†…ä¼šæ£€æµ‹åˆ°å†²çªã€‚ä¹Ÿå°±æ˜¯åœ¨å‰64ä¸ªå­—èŠ‚å°±å¯ä»¥æ£€æµ‹åˆ°å†²çªã€‚å¦‚æœå‰64ä¸ªå­—èŠ‚ä¸å†²çªï¼Œåˆ™å°±ä¸ä¼šå†²çªã€‚</p></blockquote><h3 id="äºŒè¿›åˆ¶æŒ‡æ•°åé€€-binary-exponential-backoff-çš„CSMA-CA"><a href="#äºŒè¿›åˆ¶æŒ‡æ•°åé€€-binary-exponential-backoff-çš„CSMA-CA" class="headerlink" title="äºŒè¿›åˆ¶æŒ‡æ•°åé€€[binary exponential backoff]çš„CSMA/CA"></a>äºŒè¿›åˆ¶æŒ‡æ•°åé€€[binary exponential backoff]çš„CSMA/CA</h3><p>è¿™ä¸ªåè®®ç¡®å®šäº†éšæœºç­‰å¾…æ—¶é—´</p><p>ä¸€ä¸ªæ—¶é—´æ§½ä¸º$2\tau$, åŸºæœ¬é€€é¿æ—¶é—´ä¸º$2\tau$</p><p>ç¬¬ä¸€æ¬¡å†²çªå‘ç”Ÿåï¼Œæ¯ä¸ªç«™éšæœºç­‰å¾… 0 ä¸ªæˆ–è€… 1 ä¸ªæ—¶é—´æ§½ï¼Œä¹‹åå†é‡è¯•å‘é€ã€‚å¦‚æœä¸¤ä¸ªç«™å†²çªä¹‹åé€‰æ‹©äº†åŒä¸€ä¸ªéšæœºæ•°ï¼Œé‚£ä¹ˆå®ƒä»¬å°†å†æ¬¡å†²çªã€‚åœ¨ç¬¬äºŒæ¬¡å†²çªåï¼Œæ¯ä¸ªç«™éšæœºé€‰æ‹©ç­‰å¾…0ã€1ã€2æˆ–3ä¸ªæ—¶é—´æ§½ ã€‚å¦‚æœç¬¬ä¸‰æ¬¡å†²çªåˆå‘ç”Ÿäº†ï¼ˆå‘ç”Ÿçš„æ¦‚ç‡ä¸º 0.25 ï¼‰ï¼Œåˆ™ä¸‹ä¸€æ¬¡ç­‰å¾…çš„æ—¶é—´æ§½æ•°ä» 0 åˆ° $2^3-1$ ä¹‹é—´éšæœºé€‰æ‹©ã€‚</p><p>è¾¾åˆ° 10 æ¬¡å†²çªä¹‹åï¼Œéšæœºæ•°çš„é€‰æ‹©åŒºé—´è¢«å›ºå®šåœ¨æœ€å¤§å€¼ 1023 ï¼Œä»¥åä¸å†å¢åŠ ã€‚ åœ¨ 16 æ¬¡å†²çªä¹‹åï¼Œæ§åˆ¶å™¨æ”¾å¼ƒåŠªåŠ›ï¼Œå¹¶ç»™è®¡ç®—æœºè¿”å›ä¸€ä¸ªå¤±è´¥æŠ¥å‘Š ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œå¦‚ä¸‹</p><p><img src="IMG_D69A5042B9FC-1%202.png" srcset="/img/loading.gif" alt="IMG_D69A5042B9FC-1 2" style="zoom:76%;" /></p><p>å®è´¨ï¼š</p><blockquote><p> å†²çªçš„æ¬¡æ•°å¤§æ¦‚èƒ½ç¡®å®šè¦å‘é€çš„ç«™çš„æ•°é‡ï¼ŒäºŒè¿›åˆ¶é€€é¿å¿«é€Ÿæ”¶æ•›åˆ°é€‚åº”çš„æ•°é‡</p></blockquote><p><br/></p><h2 id="2-3-Switched-Ethernetäº¤æ¢å¼ä»¥å¤ªç½‘"><a href="#2-3-Switched-Ethernetäº¤æ¢å¼ä»¥å¤ªç½‘" class="headerlink" title="2.3 Switched Ethernetäº¤æ¢å¼ä»¥å¤ªç½‘"></a>2.3 Switched Ethernetäº¤æ¢å¼ä»¥å¤ªç½‘</h2><p>åœ¨é›†çº¿å™¨ä¸­ï¼Œæ‰€æœ‰ç«™éƒ½ä½äºåŒä¸€ä¸ªå†²çªåŸŸ (<strong><em>collision domain</em></strong>), å®ƒä»¬å¿…é¡»ä½¿ç”¨ CSMA/CD ç®—æ³•æ¥è°ƒåº¦å„è‡ªçš„ä¼ è¾“ã€‚åœ¨äº¤æ¢æœºä¸­ï¼Œæ¯ä¸ªç«¯å£æœ‰è‡ªå·±ç‹¬ç«‹çš„å†²çªåŸŸã€‚</p><p>In a hub, all stations are in the same collision domain; while in a switch, each portis a collision domain.</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œç”µç¼†æ˜¯å…¨åŒå·¥çš„[åŒæ—¶å…è®¸ä¸¤ä¸ªæ–¹å‘å‘é€æ•°æ®]ï¼Œç«™å’Œç«¯å£å¯ä»¥åŒæ—¶å¾€ç”µç¼†ä¸Šå‘é€å¸§ï¼Œæ ¹æœ¬æ— é¡»æ‹…å¿ƒå…¶ä»–ç«™æˆ–è€…ç«¯å£ã€‚ç°åœ¨å†²çªä¸å¯èƒ½å‘ç”Ÿï¼Œå› è€Œ CSMA/CD ä¹Ÿå°±ä¸éœ€è¦äº†ã€‚ç„¶åï¼Œå¦‚æœç”µç¼†æ˜¯åŠåŒå·¥çš„[åŒæ—¶åªå…è®¸ä¸€ä¸ªæ–¹å‘å‘é€æ•°æ®]ï¼Œåˆ™ç«™å’Œç«¯å£å¿…é¡»ä»¥é€šå¸¸çš„ CSMA/CD æ–¹å¼ç«äº‰ä¼ è¾“ã€‚</p><p><img src="my_1568281840_ZK4myJNWO8.png" srcset="/img/loading.gif" alt="_1568281840_ZK4myJNWO8" style="zoom:67%;" /></p><blockquote><p>äº¤æ¢æœºçš„æ€§èƒ½ä¼˜äºé›†çº¿å™¨æœ‰ä¸¤æ–¹é¢çš„åŸå› ã€‚</p><ul><li>ç”±äºæ²¡æœ‰å†²çªï¼Œå®¹é‡çš„ä½¿ç”¨æ›´ä¸ºæœ‰æ•ˆã€‚</li><li>æœ‰äº†äº¤æ¢æœºå¯ä»¥åŒæ—¶å‘é€å¤šä¸ªå¸§ï¼ˆç”±ä¸åŒçš„ç«™å‘å‡ºã€‰ã€‚è¿™äº›å¸§åˆ°è¾¾äº¤æ¢æœºç«¯å£äº•ç©¿è¿‡äº¤æ¢æœºèƒŒæ¿è¾“å‡ºåˆ°é€‚å½“çš„ç«¯å£ã€‚ç„¶è€Œï¼Œç”±äºä¸¤å¸§å¯èƒ½åœ¨åŒä¸€æ—¶é—´å»å¾€åŒä¸€ä¸ªè¾“å‡ºç«¯å£ï¼Œäº¤æ¢æœºå¿…é¡»æœ‰ç¼“å†²ï¼Œä»¥ä¾¿å®ƒæš‚æ—¶æŠŠè¾“å…¥å¸§æ’å…¥é˜Ÿåˆ—ç›´åˆ°å¸§è¢«ä¼ è¾“åˆ°è¾“å‡ºç«¯å£ã€‚</li></ul></blockquote><p>ä¸å¯èƒ½åšåˆ°çš„ã€‚ç³»ç»Ÿæ€»ååé‡é€šå¸¸å¯ä»¥æé«˜ä¸€ä¸ªæ•°é‡çº§ï¼Œä¸»è¦å–å†³äºç«¯å£æ•°ç›®å’Œæµé‡æ¨¡å¼ã€‚</p><h2 id="2-4-Fastethernet-100Mbps"><a href="#2-4-Fastethernet-100Mbps" class="headerlink" title="2.4 Fastethernet[100Mbps]"></a>2.4 Fastethernet[100Mbps]</h2><p>802.3u</p><p><img src="image-20191231000041449.png" srcset="/img/loading.gif" alt="image-20191231000041449" style="zoom:50%;" /></p><h2 id="2-5-Gigabit-Ethernet-1Gbps"><a href="#2-5-Gigabit-Ethernet-1Gbps" class="headerlink" title="2.5 Gigabit Ethernet[1Gbps]"></a>2.5 Gigabit Ethernet[1Gbps]</h2><p><img src="image-20191231000139476.png" srcset="/img/loading.gif" alt="image-20191231000139476" style="zoom:50%;" /></p><h2 id="2-6-10-Gigabit-Ethernet-10Gbps"><a href="#2-6-10-Gigabit-Ethernet-10Gbps" class="headerlink" title="2.6 10 Gigabit Ethernet[10Gbps]"></a>2.6 10 Gigabit Ethernet[10Gbps]</h2><p><img src="image-20191231000528967.png" srcset="/img/loading.gif" alt="image-20191231000528967" style="zoom:50%;" /></p><h1 id="3-æ— é™å±€åŸŸç½‘"><a href="#3-æ— é™å±€åŸŸç½‘" class="headerlink" title="3. æ— é™å±€åŸŸç½‘"></a>3. æ— é™å±€åŸŸç½‘</h1><h2 id="3-1-The-802-11-Architecture-and-Protocol-Stack"><a href="#3-1-The-802-11-Architecture-and-Protocol-Stack" class="headerlink" title="3.1 The 802.11: Architecture and Protocol Stack"></a>3.1 The 802.11: Architecture and Protocol Stack</h2><p><img src="image-20191231001119031.png" srcset="/img/loading.gif" alt="image-20191231001119031" style="zoom:50%;" /></p><p>802.11 ç½‘ç»œçš„ä½¿ç”¨æ¨¡å¼æœ‰ä¸¤ç§ï¼š</p><blockquote><ul><li>æœ€æ™®éä½¿ç”¨çš„æŠŠå®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ç¬”è®°æœ¬ç”µè„‘å’Œæ™ºèƒ½æ‰‹æœºå®¢æˆ·ç«¯ï¼‰ï¼Œè¿æ¥åˆ°å¦ä¸€ä¸ªç½‘ç»œï¼ˆæ¯”å¦‚å…¬å¸å†…è”ç½‘æˆ– Internet ï¼‰ã€‚è¿™ç§ä½¿ç”¨æ¨¡å¼å¦‚å›¾ (a) æ‰€ç¤ºã€‚åœ¨æœ‰æ¶æ„æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯ä¸ä¸€ä¸ªæ¥å…¥ç‚¹ï¼ˆ AP, Access Point ï¼‰å…³è”ï¼Œè¯¥æ¥å…¥ç‚¹åˆä¸å…¶ä»–ç½‘ç»œè¿æ¥ã€‚å®¢æˆ·ç«¯å‘é€å’Œæ¥æ”¶æ•°æ®åŒ…éƒ½è¦é€šè¿‡ AP è¿›è¡Œã€‚å‡ ä¸ªæ¥å…¥ç‚¹å¯é€šè¿‡ä¸€ä¸ªç§°ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆ distribution system ï¼‰çš„æœ‰çº¿ç½‘ç»œè¿æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªæ‰©å±•çš„ 802.11 ç½‘ç»œã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡å®ƒä»¬çš„æ¥å…¥ç‚¹å‘å…¶ä»–å®¢æˆ·ç«¯å‘é€å¸§ã€‚</li><li>å¦ä¸€ç§æ¨¡å¼ï¼Œå¦‚å›¾ 4-23 (b ï¼‰æ‰€ç¤ºï¼Œæ˜¯ä¸€ç§è‡ªç»„ç»‡ç½‘ç»œï¼ˆ ad hoc network ï¼‰ã€‚è¿™ç§æ¨¡å¼ä¸‹ çš„ç½‘ç»œç”±ä¸€ç»„ç›¸äº’å…³è”çš„è®¡ç®—æœºç»„æˆï¼Œå®ƒä»¬ç›¸äº’ä¹‹é—´å¯ä»¥ç›´æ¥å‘å¯¹æ–¹å‘é€å¸§ã€‚è¿™é‡Œæ²¡æœ‰æ¥å…¥ç‚¹ã€‚ç”±äº Internet æ¥å…¥æ˜¯æ— çº¿çš„æ€æ‰‹çº§åº”ç”¨ï¼Œè‡ªç»„ç»‡ç½‘ç»œå¹¶æ²¡æœ‰é‚£ä¹ˆå—æ¬¢è¿ã€‚</li></ul></blockquote><p><img src="image-20191231222744244.png" srcset="/img/loading.gif" alt="image-20191231222744244" style="zoom:50%;" /></p><p>æ‰€æœ‰ 802 åè®®çš„æ•°æ®é“¾è·¯å±‚åˆ†ä¸ºä¸¤ä¸ªæˆ–æ›´å¤šä¸ªå­å±‚ã€‚åœ¨ 802.11 ä¸­ </p><blockquote><ul><li>ä»‹è´¨è®¿é—®æ§åˆ¶ï¼ˆMAC, Medium Access Control) å­å±‚å†³å®šå¦‚ä½•åˆ†é…ä¿¡é“ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹ä¸€ä¸ªè°å¯ä»¥å‘é€ã€‚</li><li>åœ¨å®ƒä¸Šæ–¹çš„æ˜¯é€»è¾‘é“¾è·¯æ§åˆ¶ï¼ˆ LLC, Logical Link Control) å­å±‚ï¼Œå®ƒçš„å·¥ä½œæ˜¯éšè— 802 ç³»åˆ—åè®®ä¹‹é—´çš„å·®å¼‚ï¼Œä½¿å®ƒä»¬åœ¨ç½‘ç»œå±‚çœ‹æ¥å¹¶æ— å·®åˆ«ã€‚</li></ul></blockquote><h2 id="3-2-The-802-11-Physical-Protocol"><a href="#3-2-The-802-11-Physical-Protocol" class="headerlink" title="3.2 The 802.11: Physical Protocol"></a>3.2 The 802.11: Physical Protocol</h2><ul><li>802.11: FHSS(Frequency Hopping Spread Specture) and Infrared[2.4Mbps]</li><li>802.11a: OFDM(Orthogonal Frequency Division Multiplexing) at 5GHz (54Mbps)</li><li>802.11b: HR-DSSS (High Rate Direct Sequence Spread Spectrum) (11Mbps)</li><li>802.11g: OFDM(Orthogonal Frequency Division Multiplexing) at 2.4 GHz (54Mbps)</li><li>802.11n: MIMO OFDM (Multiple-Input Multiple-Output Orthogonal Frequency Division Multiplexing) at multiple frequencies. (600Mbps)</li></ul><h2 id="3-3-The-802-11-Sublayer-Protocol"><a href="#3-3-The-802-11-Sublayer-Protocol" class="headerlink" title="3.3 The 802.11: Sublayer Protocol"></a>3.3 The 802.11: Sublayer Protocol</h2><h3 id="A-é—®é¢˜1"><a href="#A-é—®é¢˜1" class="headerlink" title="A. é—®é¢˜1"></a>A. é—®é¢˜1</h3><blockquote><p>æ— çº¿ç”µå‡ ä¹æ€»æ˜¯åŠåŒå·¥çš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¸èƒ½åœ¨ä¸€ä¸ªé¢‘ç‡ä¸Šä¼ è¾“çš„åŒæ—¶ä¾¦å¬è¯¥é¢‘ç‡ä¸Šçš„çªå‘å™ªå£°ã€‚æ¥æ”¶åˆ°çš„ä¿¡å·å¾ˆå®¹æ˜“å˜å¾—æ¯”å‘å°„ä¿¡å·å¼±ä¸Šä¸€ç™¾ä¸‡å€ï¼Œå› æ­¤å®ƒæ— æ³•åœ¨åŒä¸€æ—¶é—´å¬åˆ°è¿™ä¹ˆå¾®å¼±çš„ä¿¡å·ã€‚è€Œåœ¨ä»¥å¤ªç½‘ä¸­ï¼Œä¸€ä¸ªç«™åªè¦ç­‰åˆ°ä»‹è´¨ç©ºé—²ï¼Œç„¶åå¼€å§‹ä¼ è¾“ã€‚ å¦‚æœå®ƒæ²¡æœ‰åœ¨å‘é€çš„å‰ 64 ä¸ªå­—èŠ‚æœŸé—´æ”¶åˆ°è¿”å›çš„çªå‘å™ªå£°ï¼Œåˆ™å‡ ä¹å¯ä»¥è‚¯å®šå¸§èƒ½æ­£ç¡®åœ°ä¼ é€å‡ºå»ã€‚ä½†å¯¹äºæ— çº¿ä»‹è´¨ï¼Œè¿™ç§å†²çªæ£€æµ‹æœºåˆ¶æ ¹æœ¬ä¸èµ·ä½œç”¨ã€‚</p><p>å› ä¸ºå†²çªæ£€æµ‹ä¸èµ·ä½œç”¨ï¼Œæ‰€ä»¥802.11å°è¯•é¿å…å†²çªã€‚é‡‡ç”¨çš„åè®®ä¸ºå¸¦æœ‰å†²çªé¿å…çš„CSMA/CAï¼ŒCSMA with collision avoidance.</p></blockquote><h4 id="è§£å†³æ–¹å¼ï¼šCSMA-CA"><a href="#è§£å†³æ–¹å¼ï¼šCSMA-CA" class="headerlink" title="è§£å†³æ–¹å¼ï¼šCSMA/CA"></a>è§£å†³æ–¹å¼ï¼šCSMA/CA</h4><ul><li><p>é€šè¿‡ä¾¦å¬ç¡®å®šåœ¨ä¸€ä¸ªå¾ˆçŸ­çš„æ—¶é—´å†…[è¿™æ®µæ—¶é—´ç§°ä¸º <strong><em>DIFS</em></strong> ]æ²¡æœ‰ä¿¡å·ï¼šç„¶åå€’è®¡æ•°ç©ºé—²æ—¶é—´æ§½</p></li><li><p>å½“æœ‰å¸§åœ¨å‘é€æ—¶æš‚åœè¯¥è®¡æ•°å™¨ï¼šå½“è®¡æ•°å™¨é€’å‡åˆ° 0, è¯¥ç«™å°±å‘é€è‡ªå·±çš„å¸§ã€‚</p><ul><li>å¦‚æœå¸§å‘é€æˆåŠŸï¼Œç›®æ ‡ç«™ç«‹å³å‘é€ä¸€ä¸ªçŸ­ç¡®è®¤ã€‚</li><li>å¦‚æœæ²¡æœ‰æ”¶åˆ°ç¡®è®¤ï¼Œ åˆ™å¯æ¨æ–­å‡ºä¼ è¾“å‘ç”Ÿäº†é”™è¯¯ï¼Œæ— è®ºæ˜¯å†²çªæˆ–æ˜¯å…¶ä»–ä»€ä¹ˆé”™ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‘é€æ–¹è¦åŠ å€åé€€é€‰æ‹©çš„æ—¶é—´æ§½æ•°ï¼Œå†é‡æ–°è¯•å›¾å‘é€ã€‚å¦‚æ­¤åå¤ï¼Œè¿ç»­åƒä»¥å¤ªç½‘é‚£æ ·ä»¥æŒ‡æ•°åé€€ï¼Œç›´åˆ°æˆåŠŸå‘é€å¸§æˆ–è¾¾åˆ°é‡ä¼ çš„æœ€å¤§æ¬¡æ•°ã€‚</li></ul></li></ul><blockquote><p>ä¸‹å›¾ç»™å‡ºäº†ä¸€ä¸ªå‘é€å¸§çš„æ—¶åºä¾‹å­ã€‚ </p><p>A ç«™é¦–å…ˆå‘å‡ºä¸€ä¸ªå¸§ã€‚</p><p>å½“ A å‘é€æ—¶ï¼Œ B ç«™å’Œ C ç«™å‡†å¤‡å°±ç»ªå‘é€ã€‚å®ƒä»¬çœ‹åˆ°ä¿¡é“æ­£å¿™ï¼Œä¾¿ç­‰å¾…å®ƒå˜æˆç©ºé—²ã€‚ä¸ä¹…ï¼Œ A æ”¶åˆ°ä¸€ä¸ªç¡®è®¤ï¼Œä¿¡é“è¿›å…¥ç©ºé—²çŠ¶æ€ã€‚</p><p>ç„¶è€Œï¼Œä¸æ˜¯ä¸¤ä¸ªç«™éƒ½å‘å‡ºä¸€å¸§ä»è€Œç«‹å³äº§ç”Ÿå†²çªï¼Œè€Œæ˜¯ B ç«™å’Œ C ç«™éƒ½æ‰§è¡Œåé€€ç®—æ³•ã€‚ C ç«™é€‰æ‹©äº†ä¸€ä¸ªè¾ƒçŸ­çš„åé€€æ—¶é—´ï¼Œå› è€Œå…ˆè·å¾—å‘é€æƒã€‚ B ç«™ä¾¦å¬åˆ° C åœ¨ä½¿ç”¨ä¿¡é“æ—¶<u>æš‚åœè‡ªå·±çš„å€’è®¡æ—¶</u>ï¼Œå¹¶åœ¨ C æ”¶åˆ°ç¡®è®¤ä¹‹åç«‹å³<u>æ¢å¤å€’è®¡æ—¶</u>ã€‚ä¸€æ—¦ B å®Œæˆäº†åé€€ï¼Œç«‹å³å‘é€è‡ªå·±çš„å¸§ã€‚</p></blockquote><p><img src="image-20191231223848359.png" srcset="/img/loading.gif" alt="image-20191231223848359" style="zoom:50%;" /></p><p>802.11å’Œä»¥å¤ªç½‘æœ‰ä¸¤ä¸ªä¸»è¦åŒºåˆ«</p><ul><li>é¦–å…ˆï¼Œæ—©æœŸçš„åé€€æœ‰åŠ©äºé¿å…å†²çªã€‚å†²çªé¿å…åœ¨æ— çº¿ä¼ è¾“ä¸­éå¸¸é‡è¦ï¼Œå³ä½¿åªå‘ç”Ÿä¸€ä¸ªå†²çªå› ä¸ºæ•´ä¸ªå¸§éƒ½è¢«ä¼ è¾“äº†å‡ºå»ï¼Œå› æ­¤å†²çªçš„ä»£ä»·éå¸¸æ˜‚è´µã€‚</li><li>å…¶æ¬¡ï¼Œåˆ©ç”¨ç¡®è®¤æ¥æ¨æ–­æ˜¯å¦å‘ç”Ÿå†²çªï¼Œå› ä¸ºå†²çªæ— æ³•è¢«æ£€æµ‹å‡ºæ¥ã€‚</li></ul><p>è¿™ç§æ“ä½œæ¨¡å¼ç§°ä¸º<strong><em><u>åˆ†å¸ƒå¼åè°ƒåŠŸèƒ½ DCF Distributed Coordination Function</u></em></strong>ã€‚å› ä¸ºæ¯ä¸ªç«™éƒ½ç‹¬ç«‹è¡Œäº‹ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ç§ä¸­å¤®æ§åˆ¶æœºåˆ¶ã€‚[â€¦æ ‡å‡†è¿˜åŒ…æ‹¬ä¸€ä¸ªå¯é€‰çš„æ“ä½œæ¨¡å¼ï¼Œç§°ä¸ºç‚¹åè°ƒåŠŸèƒ½ï¼ˆ PCF, Point Coordination Functionï¼‰ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œ AP æ§åˆ¶è‡ªå·±è¦†ç›–èŒƒå›´å†…çš„ä¸€åˆ‡æ´»åŠ¨ã€‚</p><h3 id="B-é—®é¢˜2-éšè—æš´éœ²ç»ˆç«¯é—®é¢˜"><a href="#B-é—®é¢˜2-éšè—æš´éœ²ç»ˆç«¯é—®é¢˜" class="headerlink" title="B. é—®é¢˜2: éšè—æš´éœ²ç»ˆç«¯é—®é¢˜"></a>B. é—®é¢˜2: éšè—æš´éœ²ç»ˆç«¯é—®é¢˜</h3><p>ä¸ºäº†å‡å°‘ç©¶ç«Ÿå“ªä¸ªç«™åœ¨å‘é€çš„æ¨¡ç³Šä¸æ¸…ï¼Œ 802.11 å®šä¹‰ä¿¡é“ä¾¦å¬åŒ…æ‹¬ç‰©ç†ä¾¦å¬å’Œè™šæ‹Ÿä¾¦å¬ä¸¤éƒ¨åˆ†ã€‚</p><ul><li>ç‰©ç†ä¾¦å¬åªæ˜¯ç®€å•åœ°æ£€æŸ¥ä»‹è´¨ï¼Œçœ‹æ˜¯å¦å­˜åœ¨æœ‰æ•ˆçš„ä¿¡å·</li><li>è™šæ‹Ÿä¾¦å¬ï¼Œæ¯ä¸ªç«™å¯ä»¥ä¿ç•™ä¸€ä¸ªä¿¡é“ä½•æ—¶è¦ç”¨çš„é€»è¾‘è®°å½•ï¼Œè¿™æ˜¯é€šè¿‡è·Ÿè¸ªç½‘ç»œåˆ†é…å‘é‡ï¼ˆ NAV, Network Allocation Vectorï¼‰è·å¾—çš„ã€‚æ¯ä¸ªå¸§æºå¸¦ä¸€ä¸ª NAVå­—æ®µï¼Œè¯´æ˜è¿™ä¸ªå¸§æ‰€å±çš„ä¸€ç³»åˆ—æ•°æ®å°†ä¼ è¾“å¤šé•¿æ—¶é—´ã€‚æ— æ„ä¸­å¬åˆ°è¿™ä¸ªå¸§çš„ç«™å°±çŸ¥é“æ— è®ºè‡ªå·±æ˜¯å¦èƒ½å¤Ÿä¾¦å¬åˆ°ç‰©ç†ä¿¡å·ï¼Œç”± NAVæ‰€æŒ‡å‡ºçš„æ—¶é—´æ®µä¿¡é“ä¸€å®šæ˜¯ç¹å¿™çš„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ•°æ®å¸§çš„ NAV ç»™å‡ºäº†å‘é€ä¸€ä¸ªç¡®è®¤æ‰€éœ€è¦çš„æ—¶é—´ã€‚æ‰€æœ‰å¬åˆ°è¯¥æ•°æ®å¸§çš„ç«™å°†åœ¨å‘é€ç¡®è®¤æœŸé—´æ¨è¿Ÿå‘é€ï¼Œè€Œä¸ç®¡å®ƒä»¬æ˜¯å¦èƒ½å¬åˆ°ç¡®è®¤çš„å‘é€ã€‚</li></ul><p>å¯é€‰çš„ RTS/CTS æœºåˆ¶ä½¿ç”¨ NAV æ¥é˜²æ­¢éšè—ç»ˆç«¯åœ¨åŒä¸€æ—¶é—´å‘é€ã€‚</p><blockquote><p>åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œ A æƒ³ç»™ B å‘é€ï¼Œ C æ˜¯ A èŒƒå›´å†…çš„ä¸€ä¸ªç«™ï¼ˆä¹Ÿæœ‰å¯èƒ½åœ¨ B çš„èŒƒå›´å†…ï¼Œä½† è¿™å¹¶ä¸é‡è¦ï¼‰ã€‚ D åœ¨ B èŒƒå›´å†…ï¼Œä½†ä¸åœ¨ A çš„èŒƒå›´å†…ã€‚</p><p>C A B  D</p></blockquote><p><img src="image-20191231233241805.png" srcset="/img/loading.gif" alt="image-20191231233241805" style="zoom:50%;" /></p><p>å…·ä½“çš„</p><p>å¯¹Aå’ŒBæ¥è¯´</p><blockquote><ul><li>è¯¥åè®®å¼€å§‹äºå½“ A å†³å®šå‘ B å‘é€æ•°æ®æ—¶ã€‚ A é¦–å…ˆç»™ B å‘é€ä¸€ä¸ª RTS å¸§ï¼Œè¯·æ±‚å¯¹æ–¹å…è®¸è‡ªå·±å‘é€ä¸€ä¸ªå¸§ç»™å®ƒã€‚</li><li>å¦‚æœ B æ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ï¼Œå®ƒå°±ä»¥ CTS å¸§ä½œä¸ºåº”ç­”ï¼Œè¡¨æ˜ä¿¡é“è¢«æ¸…é™¤å¯ä»¥å‘é€ã€‚</li><li>ä¸€æ—¦æ”¶åˆ° CTS å¸§ï¼Œ A å°±å‘é€æ•°æ®å¸§ï¼Œäº•å¯åŠ¨ä¸€ä¸ª ACK è®¡æ—¶å™¨ã€‚</li><li>å½“æ­£ç¡®çš„æ•°æ®å¸§åˆ°è¾¾åï¼Œ B ç”¨ä¸€ä¸ª ACK å¸§å›å¤ Aï¼Œå®Œæˆæ­¤æ¬¡äº¤æµã€‚å¦‚æœ A çš„ ACK è®¡æ—¶å™¨è¶…æ—¶å‰ï¼Œ ACK æ²¡æœ‰è¿”å›ï¼Œåˆ™å¯è§†ä¸ºå‘ç”Ÿäº†ä¸€ä¸ªå†²çªï¼Œç»è¿‡ä¸€æ¬¡åé€€æ•´ä¸ªåè®®é‡æ–°å¼€å§‹è¿è¡Œã€‚</li></ul></blockquote><p>å¯¹Cå’ŒDæ¥è¯´</p><blockquote><p>C å’Œ D çš„è§’åº¦æ¥çœ‹è¿™æ¬¡æ•°æ®äº¤æµã€‚ C åœ¨ A çš„èŒƒå›´å†…ï¼Œå› æ­¤å®ƒå¯èƒ½ä¼šæ”¶åˆ° RTS å¸§ã€‚</p><p>å¦‚æœæ”¶åˆ°äº†ï¼Œå®ƒå°±æ„è¯†åˆ°å¾ˆå¿«æœ‰äººè¦å‘é€æ•°æ®ã€‚ä» RTS è¯·æ±‚å¸§æä¾›çš„ä¿¡æ¯ï¼Œå¯ä»¥ä¼°ç®—å‡ºæ•°æ®åºåˆ—å°†éœ€è¦ä¼ å¤šé•¿æ—¶é—´ï¼ŒåŒ…æ‹¬æœ€åçš„ ACKã€‚å› æ­¤ï¼Œå®ƒåœæ­¢ä¼ è¾“ä»»ä½•ä¸œè¥¿ï¼Œç›´åˆ°æ­¤æ¬¡æ•°æ®äº¤æ¢å®Œæˆã€‚å®ƒé€šè¿‡æ›´æ–°è‡ªå·±çš„ NAV è®°å½•è¡¨æ˜ä¿¡é“æ­£å¿™ã€‚</p><p>D æ— æ³•å¬åˆ° RTS ï¼Œä½†å®ƒç¡®å®å¬åˆ°äº† CTS ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ›´æ–°è‡ªå·±çš„ NAVã€‚ è¯·æ³¨æ„ï¼Œ NAV ä¿¡å·æ˜¯ä¸ä¼ è¾“çš„ï¼Œå®ƒä»¬åªæ˜¯ç”±ç«™å†…éƒ¨ä½¿ç”¨ï¼Œæé†’è‡ªå·±ä¿ç•™ä¸€å®šæ—¶é—´å†…çš„å®‰é™ã€‚</p></blockquote><ul><li>å¯é æ€§ï¼š æ— çº¿ç½‘ç»œç¯å¢ƒå˜ˆæ‚ï¼Œå¹¶ä¸”ä¸å¯é ï¼Œè¿™æ˜¯å› ä¸ºç›¸å½“å¤§ä¸€éƒ¨åˆ†è¦å—åˆ°æ¥è‡ªå…¶ä»–ç§ç±»è®¾å¤‡çš„å¹²æ‰°</li></ul><blockquote><p>å¢åŠ ä¼ è¾“æˆåŠŸæ¦‚ç‡æ‰€ç”¨çš„ç­–ç•¥æ˜¯</p><ul><li><p>é™ä½ä¼ è¾“é€Ÿç‡ã€‚åœ¨ä¸€ä¸ªç»™å®šçš„ä¿¡å™ªæ¯”ç¯å¢ƒä¸‹ï¼Œé€Ÿåº¦æ”¾æ…¢å¯ä»¥ä½¿ç”¨æ›´å¥å£®çš„è°ƒåˆ¶è§£è°ƒæŠ€æœ¯ï¼Œå¸§å°±è¶Šæœ‰å¯èƒ½è¢«æ­£ç¡®æ¥æ”¶ã€‚</p></li><li><p>å‘é€çŸ­å¸§ã€‚è€ƒè™‘ä»»ä½•ä¸€ä½éƒ½æœ‰å¯èƒ½å‡ºé”™ï¼ŒçŸ­å¸§æ¯ä¸€ä½éƒ½ä¸å‡ºé”™çš„æ¦‚ç‡æ¯”é•¿å¸§é«˜</p></li></ul></blockquote><ul><li>èŠ‚çœç”µæº</li><li>æœåŠ¡è´¨é‡</li></ul><blockquote><p>æ‰©å±•äº† CSMA/CAï¼Œå¹¶ä¸”ä»”ç»†å®šä¹‰å¸§ä¹‹é—´çš„å„ç§æ—¶é—´é—´éš”ã€‚ ä¸€å¸§å‘å‡ºå»åï¼Œéœ€è¦ä¿æŒä¸€æ®µç‰¹å®šæ—¶é—´çš„ç©ºé—²ä»¥ä¾¿æ£€æŸ¥ä¿¡é“ä¸åœ¨è¢«ç”¨ï¼Œç„¶åä»»ä½•ç«™æ‰å¯ä»¥å‘é€å¸§ã€‚</p><p>è¿™é‡Œçš„å…³é”®å°±åœ¨äº<strong><em><u>ä¸ºä¸åŒç±»å‹çš„å¸§ç¡®å®šä¸åŒçš„æ—¶é—´é—´éš”</u></em></strong>ã€‚</p><p>5 ä¸ªæ—¶é—´é—´éš”å¦‚ä¸‹å›¾ã€‚å¸¸è§„çš„æ•°æ®å¸§ä¹‹é—´çš„é—´éš”ç§°ä¸º DCF å¸§é—´éš” [DIFS, DCF InterFrame Spacing ]ã€‚ä»»ä½•ç«™éƒ½å¯ä»¥åœ¨ä»‹è´¨ç©ºé—² DIFS åå°è¯•æŠ“å–ä¿¡é“å‘é€ä¸€ä¸ªæ–°å¸§ã€‚é‡‡ç”¨é€šå¸¸çš„ç«äº‰è§„åˆ™ï¼Œå¦‚æœå‘ç”Ÿå†²çªæˆ–è®¸è¿˜éœ€è¦äºŒè¿›åˆ¶æŒ‡æ•°åé€€ã€‚æœ€çŸ­çš„é—´éš”æ˜¯çŸ­å¸§é—´é—´éš”( SIFS, Short InterFrame Spacing ï¼‰ã€‚å®ƒå…è®¸ä¸€æ¬¡å¯¹è¯çš„å„æ–¹å…·æœ‰ä¼˜å…ˆæŠ“ä½ä¿¡é“çš„æœºä¼šã€‚ä¾‹å­ åŒ…æ‹¬è®©æ¥æ”¶æ–¹å‘é€ ACKã€è¯¸å¦‚ RTS å’Œ CTS çš„å…¶ä»–æ§åˆ¶å¸§åºåˆ—ï¼Œ æˆ–è€…è®©å‘é€æ–¹çªå‘ä¸€ç³»åˆ— æ®µã€‚å‘é€æ–¹åªéœ€ç­‰å¾… SIFS å³å¯å‘é€ä¸‹ä¸€æ®µï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†é˜»æ­¢ä¸€æ¬¡æ•°æ®äº¤æµä¸­é—´è¢«å…¶ä»–ç«™ æ¨ªæ’ä¸€å¸§ã€‚</p></blockquote><p><img src="image-20200101001413274.png" srcset="/img/loading.gif" alt="image-20200101001413274" style="zoom:50%;" /></p><blockquote><ul><li><p>æœ€çŸ­çš„é—´éš”æ˜¯çŸ­å¸§é—´é—´éš”( SIFS, Short InterFrame Spacing ï¼‰ã€‚å®ƒå…è®¸ä¸€æ¬¡å¯¹è¯çš„å„æ–¹å…·æœ‰ä¼˜å…ˆæŠ“ä½ä¿¡é“çš„æœºä¼š</p></li><li><p>å¸¸è§„çš„æ•°æ®å¸§ä¹‹é—´çš„é—´éš”ç§°ä¸º DCF å¸§é—´éš” (DIFS, DCF InterFrame Spacing ï¼‰ã€‚ä»»ä½•ç«™éƒ½å¯ä»¥åœ¨ä»‹è´¨ç©ºé—² DIFS åå°è¯•æŠ“å–ä¿¡é“å‘é€ä¸€ä¸ªæ–°å¸§</p></li><li>ä¸¤ä¸ªä»²è£å¸§é—´ç©ºé—´ï¼ˆ AIFS, Arbitration lnterFrame Space ï¼‰é—´éš”æ˜¾ç¤ºäº†ä¸¤ä¸ªä¸åŒä¼˜å…ˆçº§ çš„ä¾‹å­ã€‚çŸ­çš„æ—¶é—´é—´éš” AIFS1 å°äº DIFS ï¼Œä½†æ¯” SIFS é•¿ã€‚è¾ƒé•¿çš„æ—¶é—´é—´éš” AIFS4 æ¯” DIFS è¿˜å¤§</li><li>æ‰©å±•å¸§é—´é—´éš” ï¼ˆEIFS, Extended InterFrame Spacing ï¼‰ ï¼Œä»…ç”¨äºä¸€ä¸ªç«™åˆšåˆšæ”¶åˆ°åå¸§æˆ–æœªçŸ¥å¸§åæŠ¥å‘Šé—®é¢˜</li></ul></blockquote><h2 id="3-4-802-11å¸§ç»“æ„"><a href="#3-4-802-11å¸§ç»“æ„" class="headerlink" title="3.4 802.11å¸§ç»“æ„"></a>3.4 802.11å¸§ç»“æ„</h2><p>The 802.11 standard defines three different classes of frames:</p><ul><li><p>Data</p></li><li><p>Control</p></li><li><p>Management</p></li></ul><p><img src="image-20200101005700537.png" srcset="/img/loading.gif" alt="image-20200101005700537" style="zoom:40%;" /></p><h1 id="4-Data-link-layer-Switching"><a href="#4-Data-link-layer-Switching" class="headerlink" title="4. Data link layer Switching"></a>4. Data link layer Switching</h1><p>ç½‘æ¡¥å·¥ä½œåœ¨<strong><em>æ•°æ®é“¾è·¯å±‚</em></strong>ï¼Œå› æ­¤å®ƒä»¬é€šè¿‡æ£€æŸ¥æ•°æ®é“¾è·¯å±‚åœ°å€æ¥è½¬å‘å¸§ã€‚</p><h2 id="4-1-Uses-of-Bridges"><a href="#4-1-Uses-of-Bridges" class="headerlink" title="4.1 Uses of Bridges"></a>4.1 Uses of Bridges</h2><p>Why bridges are used?</p><ul><li><p>Different organizations have different LANs, but need communicate.</p></li><li><p>Different locations have different LANs. Using bridges are cost effective than using a centralized switch.</p></li><li><p>Multiple LANs are used to accommodate the load.</p></li></ul><p><img src="image-20200101010533214.png" srcset="/img/loading.gif" alt="image-20200101010533214" style="zoom:50%;" /></p><h2 id="4-2-Learning-Bridges"><a href="#4-2-Learning-Bridges" class="headerlink" title="4.2 Learning Bridges"></a>4.2 Learning Bridges</h2><p>æ‰€æœ‰é™„åœ¨ç½‘æ¡¥åŒä¸€ç«¯å£çš„ç«™éƒ½å±äº<strong><em><u>åŒä¸€ä¸ªå†²çªåŸŸ</u></em></strong>ï¼Œè¯¥å†²çªåŸŸå’Œå…¶ä»–ç«¯å£çš„å†²çªåŸŸæ˜¯ä¸åŒã€‚å¦‚æœå­˜åœ¨å¤šä¸ªç«™ï¼Œä¾‹å¦‚ä¼ ç»Ÿçš„ä»¥å¤ªç½‘ã€é›†çº¿å™¨æˆ–åŠåŒå·¥é“¾è·¯ï¼Œé‚£ä¹ˆå¸§çš„å‘é€éœ€è¦ç”¨åˆ° CSMA/CD åè®®ã€‚</p><p>ä¸¤ä¸ªå±€åŸŸç½‘æ¡¥æ¥åœ¨ä¸€èµ·çš„æ‹“æ‰‘ç»“æ„åˆ†ä¸¤ç§æƒ…å†µ</p><ul><li>å·¦ä¾§ä¸¤ä¸ªå¤šç‚¹å±€åŸŸç½‘ï¼Œæ¯”å¦‚ç»å…¸ä»¥å¤ªç½‘é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„ç«™è¿æ¥åœ¨ä¸€èµ·ï¼Œè¿™ä¸ªç«™å°±æ˜¯åŒå±äºä¸¤ä¸ªå±€åŸŸç½‘çš„ç½‘æ¡¥ã€‚</li><li>åœ¨å³ä¾§ï¼Œå±€åŸŸç½‘ç”¨ç‚¹åˆ°ç‚¹ç”µç¼†è¿æ¥åœ¨ä¸€èµ·ï¼ŒåŒ…æ‹¬ä¸€ä¸ªé›†çº¿å™¨ã€‚</li></ul><p><img src="image-20200101010628782.png" srcset="/img/loading.gif" alt="image-20200101010628782" style="zoom:50%;" /></p><p>ç½‘æ¡¥ç®—æ³•</p><ul><li><p>When the first bridges are first plugged in, all the hash tables are empty. None of the bridges know where any of the destinations are, so they use the <strong><em>flooding algorithm</em></strong>.å¯¹äºæ¯ä¸ªå‘å‘æœªçŸ¥ç›® æ ‡åœ°å€çš„å…¥å¢ƒå¸§ï¼Œç½‘æ¡¥å°†å®ƒè¾“å‡ºåˆ°æ‰€æœ‰çš„ç«¯å£ï¼Œä½†å®ƒæ¥çš„é‚£ä¸ªè¾“å…¥ç«¯å£é™¤å¤–</p></li><li><p>As time goes on, the bridges learn where destinations are. (<strong><em>backward learning</em></strong>)ç½‘æ¡¥å¯ä»¥çœ‹å¾—åˆ°æ¯ä¸ªç«¯å£ä¸Šå‘é€çš„æ‰€æœ‰å¸§ã€‚é€šè¿‡æ£€æŸ¥è¿™äº›å¸§çš„æºåœ°å€ï¼Œ ç½‘æ¡¥å°±å¯è·çŸ¥é€šè¿‡é‚£ä¸ªç«¯å£èƒ½è®¿é—®åˆ°å“ªäº›æœºå™¨ã€‚ä¾‹å¦‚ï¼Œä¸Šå›¾(b)ä¸­ï¼Œç½‘æ¡¥ B1çœ‹åˆ°ç«¯å£ 3 ä¸Šçš„ä¸€å¸§æ¥è‡ªç«™ Cï¼Œé‚£ä¹ˆå®ƒå°±çŸ¥é“é€šè¿‡ç«¯å£ 3 ä¸€å®šèƒ½åˆ°è¾¾ C ï¼Œå› æ­¤å®ƒå°±åœ¨å“ˆå¸Œè¡¨ ä¸­æ„é€ ä¸€é¡¹ã€‚ä»¥åæ‰€æœ‰æŠµè¾¾ B1 è¦å» C çš„å¸§éƒ½å°†è¢«è½¬å‘åˆ°ç«¯å£ 3ã€‚</p></li><li><p>Whenever a frame whose source is already in the table arrives, its entry is updated with the current time. (time updating) </p></li><li>Periodically, a process in the bridge scans the hash and purges all entries more than a few minutes old. (Aging)</li></ul><p>å¯¹äºä¸€ä¸ªå…¥å¢ƒå¸§ï¼Œå®ƒåœ¨ç½‘æ¡¥ä¸­çš„è·¯ç”±è¿‡ç¨‹å–å†³äºå®ƒä»å“ªä¸ªç«¯å£æ¥ï¼ˆæºç«¯å£ï¼‰ï¼Œä»¥åŠå®ƒè¦å¾€å“ªä¸ªç›®æ ‡åœ°å€å»ï¼ˆç›®æ ‡ç«¯å£ï¼‰ã€‚æ•´ä¸ªè½¬å‘è¿‡ç¨‹å¦‚ä¸‹ï¼š </p><ol><li><p>å¦‚æœå»å¾€ç›®æ ‡åœ°å€çš„ç«¯å£ä¸æºç«¯å£ç›¸åŒï¼Œåˆ™ä¸¢å¼ƒè¯¥å¸§ã€‚</p><blockquote><p>è€ƒè™‘ä¸Šå›¾bä¸­ï¼Œç«™ E å’Œ F éƒ½è¿åˆ°é›†çº¿å™¨ H1ï¼Œè¿›è€Œå†è¿æ¥åˆ°ç½‘æ¡¥ B2 ã€‚å¦‚æœ E å‘é€ä¸€ä¸ªå¸§ç»™ F ï¼Œé›†çº¿å™¨å°†ä¸­ç»§è¯¥å¸§åˆ° B2 ä»¥åŠ Fã€‚è¿™å°±æ˜¯é›†çº¿å™¨è¯¥åšçš„äº‹æƒ…ä¸€ä¸€å®ƒä»¬ç”¨æœ‰çº¿æŠŠæ‰€æœ‰ç«¯å£è¿åœ¨ä¸€èµ·ï¼Œè¿™æ ·ä»ä¸€ä¸ªç«¯å£è¾“å…¥çš„å¸§åªæ˜¯è¾“å‡ºåˆ°æ‰€æœ‰å…¶ä»–ç«¯å£ã€‚è¯¥å¸§æœ€ç»ˆå°†ä»ç«¯å£ 2 åˆ°è¾¾ B2 ï¼Œè¿™æ­£æ˜¯å®ƒåˆ°è¾¾ç›®çš„åœ°çš„æ­£ç¡®è¾“å‡ºç«¯å£ã€‚ç½‘æ¡¥ B2 åªéœ€ä¸¢å¼ƒè¯¥å¸§ã€‚</p></blockquote></li><li><p>å¦‚æœå»å¾€ç›®æ ‡åœ°å€çš„ç«¯å£ä¸æºç«¯å£ä¸åŒï¼Œåˆ™è½¬å‘è¯¥å¸§åˆ°ç›®æ ‡ç«¯å£ã€‚</p></li><li><p>å¦‚æœç›®æ ‡ç«¯å£æœªçŸ¥ï¼Œåˆ™ä½¿ç”¨æ³›æ´ªæ³•ï¼Œå°†å¸§å‘é€åˆ°æ‰€æœ‰çš„ç«¯å£ï¼Œé™¤äº†å®ƒå…¥å¢ƒçš„é‚£ä¸ªã€‚</p></li></ol><h2 id="4-3-Spanning-Tree-Bridges"><a href="#4-3-Spanning-Tree-Bridges" class="headerlink" title="4.3 Spanning Tree Bridges"></a>4.3 Spanning Tree Bridges</h2><p>ä¸ºäº†æé«˜å¯é æ€§ï¼Œç½‘æ¡¥ä¹‹é—´å¯ä½¿ç”¨å†—ä½™é“¾è·¯ã€‚åœ¨ä¸‹å›¾æ‰€ç¤ºçš„ä¾‹å­ä¸­ï¼Œåœ¨ä¸€å¯¹ç½‘æ¡¥ä¹‹é—´å¹¶è¡Œè®¾ç½®äº†ä¸¤æ¡é“¾è·¯ã€‚è¿™ç§è®¾è®¡å¯ç¡®ä¿ä¸€æ¡é“¾è·¯å²©æ‰åï¼Œç½‘ç»œä¸ä¼šè¢«åˆ†æˆä¸¤ç»„è®¡ç®—æœºï¼Œ ä½¿å¾—å®ƒä»¬ä¹‹é—´æ— æ³•é€šä¿¡ã€‚</p><p>è¿™ç§å†—ä½™å¼•å…¥äº†ä¸€äº›é¢å¤–çš„é—®é¢˜ï¼Œå› ä¸ºå®ƒç”Ÿæˆäº†æ‹“æ‰‘ç¯è·¯ã€‚</p><p><img src="image-20200101013110957.png" srcset="/img/loading.gif" alt="image-20200101013110957" style="zoom:40%;" /></p><p>è§£å†³ç¯è·¯é—®é¢˜çš„æ–¹æ³•æ˜¯ï¼Œæ„é€ ç”Ÿæˆæ ‘</p><blockquote><p>5 ä¸ªç½‘æ¡¥äº’è”åœ¨ä¸€èµ·ï¼ŒåŒæ—¶è¿˜æœ‰ç«™ä¸è¿™äº›ç½‘æ¡¥è¿æ¥ã€‚æ¯ä¸ªç«™åªä¸ä¸€ä¸ªç½‘æ¡¥ç›¸è¿ã€‚åœ¨ç½‘æ¡¥ä¹‹é—´æœ‰ä¸€äº›å†—ä½™è¿æ¥ï¼Œå› æ­¤å¦‚æœè¿™äº›é“¾è·¯éƒ½ç”¨ï¼Œå¸§å°±æœ‰å¯èƒ½æ²¿ç€ç¯è·¯è½¬å‘ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°†è¿™ç§æ‹“æ‰‘ç»“æ„æŠ½è±¡æˆä¸€ä¸ªå›¾ï¼Œç½‘æ¡¥ä¸ºèŠ‚ç‚¹ã€‚ç‚¹åˆ°ç‚¹çš„é“¾è·¯æ˜¯è¾¹ã€‚ é€šè¿‡å»æ‰ä¸€äº›é“¾è·¯ï¼ˆå›¾ä¸­ç”¨è™šçº¿è¡¨ç¤ºï¼‰ï¼Œæ•´ä¸ªå›¾å³è¢«ç®€åŒ–ä¸ºä¸€æ£µç”Ÿæˆæ ‘ï¼Œ æŒ‰ç…§å®šä¹‰è¿™æ ‘ä¸Šæ²¡æœ‰ç¯è·¯ã€‚åˆ©ç”¨è¿™æ£µç”Ÿæˆæ ‘ï¼Œä»æ¯ä¸ªç«™åˆ°æ¯ä¸ªå…¶ä»–ç«™æ°å¥½åªæœ‰ä¸€æ¡è·¯å¾„ã€‚ </p><p>ä¸€æ—¦ç½‘æ¡¥åŒæ„è¿™æ£µç”Ÿæˆæ ‘ï¼Œåˆ™ç«™ä¹‹é—´çš„æ‰€æœ‰è½¬å‘éƒ½å°†æ²¿ç€è¿™æ£µæ ‘è¿›è¡Œã€‚ç”±äºä»æ¯ä¸ªæºåˆ°æ¯ ä¸ªç›®æ ‡éƒ½åªæœ‰å”¯ä¸€ä¸€æ¡è·¯å¾„å¯èµ°ï¼Œæ‰€ä»¥ä¸å¯èƒ½äº§ç”Ÿç¯è·¯ã€‚</p></blockquote><p><img src="image-20200101013333406.png" srcset="/img/loading.gif" alt="image-20200101013333406" style="zoom:50%;" /></p><h2 id="4-4-ä¸­ç»§å™¨ï¼é›†çº¿å™¨ï¼ç½‘æ¡¥ï¼äº¤æ¢æœºï¼è·¯ç”±å™¨å’Œç½‘å…³"><a href="#4-4-ä¸­ç»§å™¨ï¼é›†çº¿å™¨ï¼ç½‘æ¡¥ï¼äº¤æ¢æœºï¼è·¯ç”±å™¨å’Œç½‘å…³" class="headerlink" title="4.4 ä¸­ç»§å™¨ï¼é›†çº¿å™¨ï¼ç½‘æ¡¥ï¼äº¤æ¢æœºï¼è·¯ç”±å™¨å’Œç½‘å…³"></a>4.4 ä¸­ç»§å™¨ï¼é›†çº¿å™¨ï¼ç½‘æ¡¥ï¼äº¤æ¢æœºï¼è·¯ç”±å™¨å’Œç½‘å…³</h2><p><img src="image-20200101013706679.png" srcset="/img/loading.gif" alt="image-20200101013706679" style="zoom:50%;" /></p><h3 id="ç‰©ç†å±‚ï¼š"><a href="#ç‰©ç†å±‚ï¼š" class="headerlink" title="ç‰©ç†å±‚ï¼š"></a>ç‰©ç†å±‚ï¼š</h3><h4 id="A-Repeaterä¸­ç»§å™¨"><a href="#A-Repeaterä¸­ç»§å™¨" class="headerlink" title="A. Repeaterä¸­ç»§å™¨"></a>A. Repeaterä¸­ç»§å™¨</h4><p>ç”¨æ¥åœ¨ç‰©ç†å±‚æ”¾å¤§ä¿¡å·</p><h4 id="B-Hubé›†çº¿å™¨"><a href="#B-Hubé›†çº¿å™¨" class="headerlink" title="B. Hubé›†çº¿å™¨"></a>B. Hubé›†çº¿å™¨</h4><p>é›†çº¿å™¨æœ‰è®¸å¤šæ¡è¾“å…¥çº¿è·¯ï¼Œå®ƒå°†è¿™äº›è¾“å…¥çº¿è·¯è¿æ¥åœ¨ä¸€èµ·ã€‚ä»ä»»ä½• ä¸€æ¡çº¿è·¯ä¸Šåˆ°è¾¾çš„å¸§éƒ½è¢«å‘é€åˆ°æ‰€æœ‰å…¶ä»–çš„çº¿è·¯ä¸Šã€‚å¦‚æœä¸¤å¸§åŒæ—¶åˆ°è¾¾ï¼Œå®ƒä»¬å°†ä¼šå†²çªã€‚</p><h3 id="æ•°æ®é“¾è·¯å±‚"><a href="#æ•°æ®é“¾è·¯å±‚" class="headerlink" title="æ•°æ®é“¾è·¯å±‚"></a>æ•°æ®é“¾è·¯å±‚</h3><h4 id="A-ç½‘æ¡¥-äº¤æ¢æœº"><a href="#A-ç½‘æ¡¥-äº¤æ¢æœº" class="headerlink" title="A. ç½‘æ¡¥/äº¤æ¢æœº"></a>A. ç½‘æ¡¥/äº¤æ¢æœº</h4><p><img src="my_1568281840_ZK4myJNWO8.png" srcset="/img/loading.gif" alt="_1568281840_ZK4myJNWO8" style="zoom:67%;" /></p><p>ä¸é›†çº¿å™¨ä¸åŒçš„æ˜¯ç½‘æ¡¥çš„æ¯ä¸ªç«¯å£è¢«éš”ç¦»æˆå®ƒ è‡ªå·±ä¸€ä¸ªå†²çªåŸŸï¼šå¦‚æœç«¯å£æ˜¯å…¨åŒå·¥çš„ç‚¹åˆ°ç‚¹çº¿è·¯ï¼Œåˆ™éœ€è¦ç”¨åˆ° CSMA/CD ç®—æ³•ã€‚å½“åˆ°è¾¾ ä¸€å¸§æ—¶ï¼Œç½‘æ¡¥ä»å¸§å¤´æå–å‡ºå¸§çš„ç›®çš„åœ°å€ï¼Œå¹¶ç”¨è¯¥åœ°å€æŸ¥è¯¢ä¸€å¼ åº”è¯¥æŠŠå¸§å‘å¾€å“ªé‡Œå»çš„è¡¨ã€‚</p><h4 id=""><a href="#" class="headerlink" title=" "></a> </h4><h2 id="4-5-VLAN"><a href="#4-5-VLAN" class="headerlink" title="4.5 VLAN"></a>4.5 VLAN</h2><p><img src="image-20200101014524120.png" srcset="/img/loading.gif" alt="image-20200101014524120" style="zoom:50%;" /></p><p>ä¸ºäº†ä½¿VLANæ­£å¸¸åœ°è¿è¡Œï¼Œç½‘æ¡¥å¿…é¡»å»ºç«‹é…ç½®è¡¨ã€‚è¿™äº›é…ç½®è¡¨æŒ‡æ˜äº†é€šè¿‡å“ªäº›ç«¯å£å¯ä»¥è®¿é—®å“ªäº›VLANã€‚å½“ä¸€å¸§åˆ°æ¥æ—¶ï¼Œæ¯”å¦‚è¯´æ¥è‡ªç°è‰²VLANï¼Œé‚£ä¹ˆè¿™å¸§å¿…é¡»è¢«è½¬å‘åˆ°æ‰€æœ‰æ ‡è®°ä¸º G çš„ç«¯å£ã€‚è¿™ä¸€æ¡è§„åˆ™å¯¹äºç½‘æ¡¥ä¸çŸ¥é“ç›®çš„åœ°ä½ç½®çš„æ™®é€šæµé‡ï¼ˆå³å•æ’­ï¼‰ä»¥åŠç»„æ’­å’Œå¹¿æ’­æµé‡éƒ½é€‚ç”¨ã€‚æ³¨æ„ï¼Œä¸€ä¸ªç«¯å£å¯ä»¥æ ‡è®°ä¸ºå¤šç§VLANé¢œè‰²ã€‚</p><p>refences</p><p>[1]<a href="https://blog.csdn.net/Jaihk662/article/details/80386620" target="_blank" rel="noopener">https://blog.csdn.net/Jaihk662/article/details/80386620</a></p>]]></content>
    
    
    <categories>
      
      <category>Computer Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer Network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Computer network--æ•°æ®é“¾è·¯å±‚</title>
    <link href="/2019/10/16/ComputerNetwork/DataLinkLayer/"/>
    <url>/2019/10/16/ComputerNetwork/DataLinkLayer/</url>
    
    <content type="html"><![CDATA[<p>è®¡ç®—æœºç½‘ç»œè¯¾ç¨‹â€”æ•°æ®é“¾è·¯å±‚æ€»ç»“</p><a id="more"></a><style>  .page__header .header__brand path {    fill: rgba(255, 255, 255, .95);  }</style><p><br/></p><h1 id="1-æ•°æ®é“¾è·¯å±‚çš„è®¾è®¡é—®é¢˜"><a href="#1-æ•°æ®é“¾è·¯å±‚çš„è®¾è®¡é—®é¢˜" class="headerlink" title="1. æ•°æ®é“¾è·¯å±‚çš„è®¾è®¡é—®é¢˜"></a>1. æ•°æ®é“¾è·¯å±‚çš„è®¾è®¡é—®é¢˜</h1><p>æ•°æ®é“¾è·¯å±‚ä½¿ç”¨ç‰©ç†å±‚æä¾›çš„æœåŠ¡åœ¨é€šä¿¡ä¿¡é“ä¸Šå‘é€å’Œæ¥æ”¶æ¯”ç‰¹ã€‚è¦å®ç°çš„åŠŸèƒ½åŒ…æ‹¬</p><ul><li>å‘ç½‘ç»œå±‚æä¾›ä¸€ä¸ªå®šä¹‰è‰¯å¥½çš„æœåŠ¡æ¥å£</li><li>å¤„ç†ä¼ è¾“é”™è¯¯</li><li>è°ƒèŠ‚æ•°æ®æµï¼Œç¡®ä¿æ…¢é€Ÿçš„æ¥å—æ–¹ä¸ä¼šè¢«å¿«é€Ÿçš„å‘é€æ–¹æ·¹æ²¡</li></ul><p>æ•°æ®åŒ…è¢«å°è£…æˆå¸§ï¼Œæ¯ä¸ªå¸§åŒ…å«ä¸€ä¸ªHeader,ä¸€ä¸ªPayload field,ä¸€ä¸ªTrailer</p><center><img src="image-20191012225542485.png" srcset="/img/loading.gif" alt="image-20191012225542485" style="zoom:50%;" /></center><h2 id="1-1-æä¾›ç»™ç½‘ç»œå±‚çš„æœåŠ¡"><a href="#1-1-æä¾›ç»™ç½‘ç»œå±‚çš„æœåŠ¡" class="headerlink" title="1.1 æä¾›ç»™ç½‘ç»œå±‚çš„æœåŠ¡"></a>1.1 æä¾›ç»™ç½‘ç»œå±‚çš„æœåŠ¡</h2><p>ä¸‰ç§æœåŠ¡ç±»å‹</p><ul><li>æ— ç¡®è®¤çš„æ— è¿æ¥æœåŠ¡</li></ul><blockquote><p>ç‰¹ç‚¹</p><ul><li><p>äº‹å…ˆä¸ç”¨å»ºç«‹ç‰©ç†è¿æ¥ï¼Œäº‹åä¹Ÿä¸ç”¨é‡Šæ”¾é€»è¾‘è¿æ¥</p></li><li><p>æºæœºå™¨å‘ç›®æ ‡æœºå™¨å‘é€ç‹¬ç«‹çš„frame,ç›®æ ‡æœºå™¨ä¸å¯¹è¿™äº›frameè¿›è¡Œç¡®è®¤</p></li></ul><p>é€‚åˆçš„åœºåˆ</p><ul><li><p>å®æ—¶é€šä¿¡[æ•°æ®è¿Ÿåˆ°æ¯”æ•°æ®å—æŸæ›´éš¾å¿å—]</p></li><li><p>é”™è¯¯ç‡æ¯”è¾ƒä½çš„åœºåˆ[å› ä¸ºæ•°æ®é“¾è·¯å±‚å¯é æ€§ä¸é«˜ï¼Œæ‰€ä»¥ç‰©ç†å±‚reliableè¦æ±‚ä¼šé«˜ä¸€ç‚¹ï¼Œé€‚åˆæœ‰çº¿ç½‘ç»œ</p></li></ul></blockquote><ul><li>æœ‰ç¡®è®¤çš„æ— è¿æ¥æœåŠ¡</li></ul><blockquote><p>ç‰¹ç‚¹</p><ul><li>ä¸ç”¨å»ºç«‹ç‰©ç†è¿æ¥</li><li>å‘é€çš„æ¯ä¸€å¸§éƒ½è¦å•ç‹¬ç¡®è®¤ï¼Œè¿™æ ·å‘é€æ–¹å¯ä»¥çŸ¥é“ä¸€ä¸ªå¸§æ˜¯å¦å·²ç»æ­£ç¡®åˆ°è¾¾ç›®çš„åœ°ã€‚å¦‚æœä¸€ä¸ªå¸§åœ¨åˆ¶å®šæ—¶é—´é—´éš”å†…è¿˜æ²¡æœ‰åˆ°è¾¾ï¼Œåˆ™å‘é€æ–¹å°†å†æ¬¡å‘é€è¯¥å¸§</li><li>ä¸èƒ½ä¿è¯æ”¶åˆ°åŒ…çš„é¡ºåºå’Œå‘é€é¡ºåºä¸€è‡´</li></ul><p>é€‚ç”¨åœºåˆ</p><ul><li>ä¸å¯é çš„ä¿¡é“ï¼šæ— çº¿ç³»ç»Ÿ,WiFi</li></ul></blockquote><ul><li>æœ‰ç¡®è®¤çš„æœ‰è¿æ¥æœåŠ¡</li></ul><blockquote><p>æºæœºå™¨å’Œç›®æ ‡æœºå™¨åœ¨ä¼ è¾“ä»»ä½•æ•°æ®ä¹‹å‰è¦å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œè¿æ¥å‘é€æ¯ä¸€å¸§éƒ½è¢«ç¼–å·ï¼Œæ•°æ®é“¾è·¯å±‚ç¡®ä¿å‘å‡ºçš„æ¯ä¸ªå¸§éƒ½ä¼šçœŸæ­£è¢«æ¥æ”¶æ–¹æŒ‰é¡ºåºæ”¶åˆ°ä¸”åªæ”¶åˆ°ä¸€æ¬¡ã€‚ç›¸å½“äºæä¾›äº†ä¸€ä¸ªå¯é çš„æ¯”ç‰¹æµ</p><p>é€‚ç”¨åœºåˆ</p><ul><li>é•¿è·ç¦»ä¸”ä¸å¯é çš„é“¾è·¯ </li></ul></blockquote><h2 id="1-2-framing-æˆå¸§"><a href="#1-2-framing-æˆå¸§" class="headerlink" title="1.2 framing[æˆå¸§]"></a>1.2 framing[æˆå¸§]</h2><p>æ•°æ®é“¾è·¯å±‚è¦æ£€æµ‹å’Œçº æ­£é”™è¯¯ã€‚</p><p>æ•°æ®é“¾è·¯å±‚é€šå¸¸çš„åšæ³•æ˜¯å°†æ¯”ç‰¹æµæ‹†åˆ†æˆå¤šä¸ªç¦»æ•£çš„å¸§ã€‚</p><p>ä¸ºæ¯ä¸ªå¸§è®¡ç®—ä¸€ä¸ªç§°ä¸ºæ ¡éªŒå’Œçš„çŸ­ä»¤ç‰Œï¼Œæ”¾åœ¨å¸§ä¸­ä¸€èµ·ä¼ è¾“ã€‚</p><p>å¸§åˆ°è¾¾ç›®æ ‡æœºå™¨æ—¶ï¼Œé‡æ–°è®¡ç®—æ ¡éªŒå’Œã€‚å¦‚æœæ–°è®¡ç®—çš„æ ¡éªŒå’Œä¸ä¼ è¾“è¿‡æ¥çš„ä¸åŒï¼Œè¯´æ˜äº§ç”Ÿäº†é”™è¯¯ã€‚</p><p><br/></p><p>æ‹†åˆ†æ–¹æ³•</p><h3 id="1-2-1-Byte-count"><a href="#1-2-1-Byte-count" class="headerlink" title="1.2.1 Byte count"></a>1.2.1 Byte count</h3><p>Method: to use a field in the header to specify the number of characters in the frame.</p><center><img src="image-20191008100755672.png" srcset="/img/loading.gif" alt="image-20191008100755672" style="zoom:35%;" /></center><p>problem:</p><p>é”™äº†ä¸€ä¸ªcharacter countå°±ä¼šå…¨é”™</p><center><img src="image-20191012232424422.png" srcset="/img/loading.gif" alt="image-20191012232424422" style="zoom:50%;" /></center><h3 id="1-2-2-flag-bytes-with-byte-stuffingå­—èŠ‚å¡«å……çš„æ ‡å¿—å­—èŠ‚æ³•"><a href="#1-2-2-flag-bytes-with-byte-stuffingå­—èŠ‚å¡«å……çš„æ ‡å¿—å­—èŠ‚æ³•" class="headerlink" title="1.2.2  flag bytes with byte stuffingå­—èŠ‚å¡«å……çš„æ ‡å¿—å­—èŠ‚æ³•"></a>1.2.2  flag bytes with byte stuffingå­—èŠ‚å¡«å……çš„æ ‡å¿—å­—èŠ‚æ³•</h3><p>è€ƒè™‘åˆ°å‡ºé”™ä¹‹ååˆ°é‡æ–°åŒæ­¥é—®é¢˜ï¼Œç”¨ä¸€äº›æ ‡å¿—å­—èŠ‚(flag byte)ä½œä¸ºä¸€ä¸ªå¸§å¼€å§‹å’Œç»“æŸ</p><center><img src="image-20191012233630323.png" srcset="/img/loading.gif" alt="image-20191012233630323" style="zoom:50%;" /></center><p>å¦‚å›¾æ‰€ç¤ºçš„è¿™ç§frameçš„ç»“æ„</p><p>ä¸¤ä¸ªè¿ç»­çš„flagæ ‡å¿—äº†ä¸€å¸§çš„ç»“æŸå’Œä¸‹ä¸€å¸§çš„å¼€å§‹ã€‚</p><p>problem:</p><p>å¦‚æœæ ‡å¿—å­—èŠ‚åœ¨æ•°æ®ä¸­å‡ºç°ï¼Œä¼šå¹²æ‰°åˆ°å¸§çš„åˆ†ç•Œ</p><p><br/></p><p>æ‰€ä»¥æå‡ºçš„è§£å†³æ–¹æ³•æ˜¯å­—èŠ‚å¡«å……(byte stuffing)ï¼Œå‘é€æ–¹çš„æ•°æ®é“¾è·¯å±‚åœ¨æ•°æ®ä¸­å¶å°”å‡ºç°çš„æ¯ä¸ªæ ‡å¿—å­—èŠ‚å‰é¢æ’å…¥ä¸€ä¸ªç‰¹æ®Šçš„è½¬ä¹‰å­—èŠ‚(ESC),å¦‚æœè½¬ç§»å­—ç¬¦ä¹Ÿå‡ºç°åœ¨æ•°æ®ä¸­ï¼Œå†ç”¨ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦å¡«å……</p><center><img src="image-20191012234408243.png" srcset="/img/loading.gif" alt="image-20191012234408243" style="zoom:35%;" /></center><h3 id="1-2-3-flag-bit-with-bit-stuffing"><a href="#1-2-3-flag-bit-with-bit-stuffing" class="headerlink" title="1.2.3 flag bit with bit stuffing"></a>1.2.3 flag bit with bit stuffing</h3><p>è€ƒè™‘åˆ°å­—èŠ‚å¡«å……åªèƒ½ä½¿ç”¨8bitsçš„å­—èŠ‚ï¼Œè¿™é‡Œbitå¡«å……å¯ä»¥ä½¿å¸§åŒ…å«ä»»æ„å¤§å°å•å…ƒ</p><p>flag bits 01111110</p><p>ä¹Ÿè¦è€ƒè™‘æ•°æ®ä¸­å‡ºç°flagçš„é—®é¢˜ï¼Œæ‰€ä»¥å‘é€æ–¹çš„æ•°æ®é“¾è·¯å±‚åœ¨æ•°æ®ä¸­æ¯é‡åˆ°è¿ç»­çš„5ä¸ª1ï¼Œå°±æ·»åŠ 1ä¸ª0</p><p>æ¥æ”¶æ–¹çœ‹åˆ°5ä¸ªè¿ç»­çš„1ï¼Œåé¢ç´§è·Ÿ1ä¸ª0ï¼Œå°±è‡ªåŠ¨å‰”é™¤è¿™ä¸ª0</p><center><img src="image-20191013180557730.png" srcset="/img/loading.gif" alt="image-20191013180557730" style="zoom:50%;" /> </center><h3 id="1-2-4-physical-layer-encoding-violation"><a href="#1-2-4-physical-layer-encoding-violation" class="headerlink" title="1.2.4 physical layer encoding violation"></a>1.2.4 physical layer encoding violation</h3><p>ç‰©ç†å±‚æœ‰è®²è¿‡4B/5Bçš„ç¼–ç ï¼Œ4ä¸ªæ¯”ç‰¹è¢«æ˜ å°„æˆ5ä¸ªæ¯”ç‰¹ï¼Œè¯´æ˜æœ‰16ç§ä¿¡å·ä¸ä¼šå‡ºç°åœ¨æ•°æ®ä¸­ï¼Œå¯ä»¥ç”¨æ¥ä½œä¸ºflag</p><h2 id="1-3-Error-control"><a href="#1-3-Error-control" class="headerlink" title="1.3 Error control"></a>1.3 Error control</h2><p>å¦‚ä½•ä¿è¯æ‰€æœ‰å¸§æœ€ç»ˆä¼ é€’ç»™ç›®æ ‡æœºå™¨çš„ç½‘ç»œå±‚ï¼Œå¹¶ä¸”ä¿æŒæ­£ç¡®çš„é¡ºåº</p><p>â€“ To provide the sender with some feedback</p><ul><li>Positive acknowledgement (ACK) æ”¶åˆ°ä¿¡å·å›ä¸€ä¸ªack</li><li>Negative acknowledgement (NAK) æ²¡æ”¶åˆ°ä¿¡å·å›ä¸€ä¸ªnackï¼Œ æ½œåœ¨çš„å‡è®¾æ˜¯æˆ‘çŸ¥é“å‘é€çš„åŒ…ä»¥åŠå‘é€çš„é¡ºåº</li></ul><p>â€“ To provide timeout timers</p><ul><li>Resend as necessary</li></ul><p>â€“ To number frames</p><ul><li>To distinguish retransmissions from originals</li></ul><h2 id="1-4-Flow-control"><a href="#1-4-Flow-control" class="headerlink" title="1.4 Flow control"></a>1.4 Flow control</h2><p>å‘é€æ–¹å‘é€å¸§çš„é€Ÿåº¦è¶…è¿‡äº†æ¥æ”¶æ–¹æ¥æ”¶çš„é€Ÿåº¦ï¼Œè¯¥å¦‚ä½•å¤„ç†</p><ul><li><p>To introduce flow control to throttle the sender into sending no faster than the receiver can handle the traffic.</p></li><li><p>Flow control protocol contains well-defined rules about when a sender may transmit the next frame.</p></li><li><p>Two approaches<br>â€“ <strong>Feedback-based flow control</strong> ç”±receiverå†³å®šå‘é€çš„é€Ÿåº¦</p><p>â€“ Rate-based flow control</p></li></ul><h1 id="2-Error-Detection-and-Correction"><a href="#2-Error-Detection-and-Correction" class="headerlink" title="2. Error Detection and Correction"></a>2. Error Detection and Correction</h1><p>Error Types</p><blockquote><p>isolated errorså•ä¸ªçš„é”™è¯¯</p><p>burst errorsä¸€è¿ä¸²çš„é”™è¯¯</p></blockquote><p>approaches: åœ¨æ•°æ®ä¸­å¼•å…¥ä¸€äº›<u>å†—ä½™</u>æ¥è¿›è¡Œerror detectionå’Œerror correction</p><h2 id="2-1-ä¸€äº›æ¦‚å¿µ"><a href="#2-1-ä¸€äº›æ¦‚å¿µ" class="headerlink" title="2.1 ä¸€äº›æ¦‚å¿µ"></a>2.1 ä¸€äº›æ¦‚å¿µ</h2><h3 id="i"><a href="#i" class="headerlink" title="i."></a>i.</h3><p>ä¸€å¸§æœ‰</p><ul><li>mä¸ªæ•°æ®ä½</li><li>rä¸ªå†—ä½™ä½ã€‚rä¸ªæ ¡éªŒä½æ˜¯ç”±mä¸ªæ•°æ®ä½çš„å‡½æ•°è®¡ç®—å¾—åˆ°çš„</li></ul><p>ä»¤æ•°æ®å—æ€»é•¿åº¦ä¸ºn(n=m+r)ï¼Œæˆ‘ä»¬ç§°å…¶ä¸º(n,m)ç ã€‚</p><p><u>ç å­—</u>(codeword): ä¸€ä¸ªåŒ…å«äº†æ•°æ®ä½å’Œæ ¡éªŒä½çš„nä½å•å…ƒ</p><p>ç ç‡(code rate): codewordä¸­æ•°æ®éƒ¨åˆ†å æ¯”m/n</p><h3 id="ii"><a href="#ii" class="headerlink" title="ii."></a>ii.</h3><p>Hamming distance of 2 codewords</p><blockquote><p> ä¸¤ä¸ªcodewordä¸­ä¸ç›¸åŒçš„bitçš„ä¸ªæ•°</p></blockquote><p>Hamming distance of complete code(all valid codewords)</p><blockquote><p>The minimum Hamming distance of two valid codewords in the code</p></blockquote><center><img src="image-20191013185144979.png" srcset="/img/loading.gif" alt="image-20191013185144979" style="zoom:33%;" /></center><p>To detect d errors, you need d+1 Hamming distance code.</p><blockquote><p>å› ä¸ºï¼Œd+1çš„hamming distance,è¯´æ˜ä¸¤ä¸ªcodewordä¹‹é—´æœ€å°‘æœ‰d+1ä½ä¸ç›¸åŒã€‚æ‰€ä»¥å¦‚æœdä¸ªé”™è¯¯å‡ºç°ï¼Œè¿™ä¸ªcodewordä¹Ÿä¸ä¼šé”™æˆä¸€ä¸ªvalid codeword.</p></blockquote><p>To correct d errors, you need 2d+1 Hamming distance code</p><blockquote><p>å› ä¸º,ä¸¤ä¸ªcodewordä¹‹é—´æœ€å°‘æœ‰2d+1ä¸ªbitsä¸ç›¸åŒï¼Œå¦‚æœæœ‰d errors,é‚£ä¹ˆåç¦»åŸcodewordçš„hamming distance ä¸ºd, 2d+1çš„è·ç¦»ä¿è¯äº†ä¸è¿™ä¸ªé”™è¯¯çš„codewordè·ç¦»æœ€è¿‘çš„ä¾ç„¶æ˜¯åŸcodeword</p></blockquote><h2 id="2-2-Error-Correction-codes"><a href="#2-2-Error-Correction-codes" class="headerlink" title="2.2 Error Correction codes"></a>2.2 Error Correction codes</h2><h3 id="2-2-1-Hamming-code-for-single-error"><a href="#2-2-1-Hamming-code-for-single-error" class="headerlink" title="2.2.1 Hamming code for single error"></a>2.2.1 Hamming code for single error</h3><p>å‚è€ƒä»¥ä¸‹ä¸¤ç¯‡blogå¯ä»¥æœ‰ä¸€ä¸ªåŸºæœ¬äº†è§£ï¼Œæˆ‘ç»“åˆä»–ä»¬åšäº†ä¸€ä¸ªæ€»ç»“</p><p><a href="https://blog.csdn.net/Yonggie/article/details/83186280" target="_blank" rel="noopener">https://blog.csdn.net/Yonggie/article/details/83186280</a></p><p><a href="https://blog.csdn.net/blue_starry_sky/article/details/53997548" target="_blank" rel="noopener">https://blog.csdn.net/blue_starry_sky/article/details/53997548</a></p><p>(å›¾ç‰‡ä¸­åº”è¯¥æ˜¯redundancy)</p><table>  <tr>    <td><img src="IMG_5ACFEACB9F7D-1.png" srcset="/img/loading.gif" alt="IMG_5ACFEACB9F7D-1" style="zoom: 30%;" /></td>    <td>    <img src="IMG_AA14DF432E13-1.png" srcset="/img/loading.gif" alt="IMG_AA14DF432E13-1" style="zoom:40%;" /></td>  </tr></table><p>ä¸ºä»€ä¹ˆä¸Šè¿°çº é”™å¯è¡Œå‘¢ï¼Ÿ</p><p>å› ä¸ºå¦‚æœæ²¡æœ‰å‡ºç°é”™è¯¯çš„è¯$hi\oplus(P_iç»„å†…å¼‚æˆ–ç»“æœ)=0$ï¼Œå› ä¸ºæˆ‘ä»¬è®¡ç®—çš„æ—¶å€™$h_i=P_iç»„å†…å¼‚æˆ–ç»“æœ$, è‡ªå·±å’Œè‡ªå·±å¼‚æˆ–ä¸º0ã€‚å¦‚æœå‡ºç°äº†ä¸€ä¸ªé”™è¯¯çš„è¯ï¼Œä¸è¿™ä¸ªé”™è¯¯ç›¸å…³çš„ç»„$hi\oplus(P_iç»„å†…å¼‚æˆ–ç»“æœ)=1$, è¿™äº›ç»„åˆ«æ ‡è¯†äº†é”™è¯¯çš„ä½ç½®</p><p><br/></p><p><br/></p><p>-ä½ çŸ¥é“å—ï¼ŒHamming codesä¹Ÿå¯ä»¥ç”¨æ¥correct burst errorå‘¢ï¼Ÿ</p><p>-å“¦ï¼Ÿæ€ä¹ˆåšå‘¢</p><p>-å˜¿å˜¿å˜¿ï¼Œæœ‰ä¸€ç‚¹tricky</p><ul><li>one codeword per row. k consecutive codewords</li><li>â€“Transmit the matrix by one column at a time.</li></ul><p>è¿™æ ·ä¸€è¡Œçš„è¿ä¸²é”™è¯¯ï¼Œåœ¨åˆ—çœ‹æ¥å°±æ˜¯ä¸€åˆ—å¯ä»¥æœ‰ä¸€ä¸ªé”™è¯¯</p><center><img src="image-20191229155224546.png" srcset="/img/loading.gif" alt="image-20191229155224546" style="zoom:50%;" /></center><h2 id="2-3-Error-Detection-codes"><a href="#2-3-Error-Detection-codes" class="headerlink" title="2.3 Error Detection codes"></a>2.3 Error Detection codes</h2><p>ç›¸æ¯”error correction, error detectionä»£ä»·æ›´å°ã€‚</p><p>error correctionå¼•å…¥å¤ªå¤šredundancy bit, ä¸å¦‚ç”¨error detectionï¼Œå¦‚æœæ£€æµ‹åˆ°error,å°±retransmissionè¿™æ ·ä»£ä»·å°ã€‚</p><h3 id="2-3-1-Parity"><a href="#2-3-1-Parity" class="headerlink" title="2.3.1 Parity"></a>2.3.1 Parity</h3><blockquote><p>Append a parity bit to detect single error.</p></blockquote><p>å¥‡æ ¡éªŒï¼šæ•°æ®bit 1çš„ä¸ªæ•°ä¸ºå¥‡æ•°å°±åŠ ä¸€ä¸ª0bit, æ˜¯å¶æ•°å°±åŠ ä¸€ä¸ª1bitã€‚ä¿æŒ1çš„ä¸ªæ•°ä¸ºå¥‡æ•°</p><p>å¶æ ¡éªŒï¼šæ•°æ®bit 1çš„ä¸ªæ•°ä¸ºå¶æ•°å°±åŠ ä¸€ä¸ª0bit, æ˜¯å¥‡æ•°å°±åŠ ä¸€ä¸ª1bitã€‚ä¿æŒ1ç‚¹ä¸ªæ•°ä¸ºå¶æ•°</p><p>single erroræ˜¾ç„¶æ˜¯å¯ä»¥æ£€æµ‹å‡ºæ¥ï¼Œå…¶å®burst errorä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¦‚ä¸‹å›¾ï¼Œä¸Šæ–‡æåˆ°çš„æŒ‰åˆ—å‘é€</p><center><img src="image-20191024153859898.png" srcset="/img/loading.gif" alt="image-20191024153859898" style="zoom:50%;" /></center><h3 id="2-3-2-Checksum"><a href="#2-3-2-Checksum" class="headerlink" title="2.3.2 Checksum"></a>2.3.2 Checksum</h3><blockquote><p>å°†æ•°æ®åˆ†æˆè‹¥å¹²æ®µï¼ŒåšåŠ æ³•ï¼Œå–æ¨¡</p></blockquote><p>ä¸€ä¸ªinternet checksumçš„ä¾‹å­</p><center><img src="IMG_7FC95B48427A-1.png" srcset="/img/loading.gif" alt="IMG_7FC95B48427A-1" style="zoom: 33%;" />                  </center><p>æ€§è´¨</p><p>â€“ Improved error detection over parity bits</p><p>â€“ Vulnerable to systematic errors, æ¯”å¦‚ï¼šåœ¨åé¢åŠ äº†ä¸€è¿ä¸²0ï¼Œæ£€æµ‹ä¸å‡ºé”™</p><h3 id="2-3-3-CRC"><a href="#2-3-3-CRC" class="headerlink" title="2.3.3 CRC"></a>2.3.3 CRC</h3><center><img src="IMG_BB50334654CE-1.png" srcset="/img/loading.gif" alt="IMG_BB50334654CE-1" style="zoom:36%;" /></center><center><img src="IMG_B37D4802C2E6-1.png" srcset="/img/loading.gif" alt="IMG_B37D4802C2E6-1" style="zoom:40%;" /></center><center><img src="IMG_CAA2C1958BE2-1.png" srcset="/img/loading.gif" alt="IMG_CAA2C1958BE2-1" style="zoom:31%;" /></center><p>æ³¨æ„ä¸€ä¸ª$x^{k-1}+\cdots+1$æ˜¯ä¸€ä¸ª$k-1$é˜¶å¤šé¡¹å¼</p><p>é€‰æ‹©ä½™æ•°çš„ä½æ•°ä¸ºé™¤æ•°çš„é˜¶ã€‚æ¯”å¦‚$x^4+x+1$æ˜¯ä¸€ä¸ª4é˜¶å¤šé¡¹å¼ï¼Œé€‰æ‹©ä½™æ•°ä¸º4é˜¶ã€‚</p><p><br/></p><h1 id="3-åŸºæœ¬æ•°æ®é“¾è·¯å±‚åè®®"><a href="#3-åŸºæœ¬æ•°æ®é“¾è·¯å±‚åè®®" class="headerlink" title="3. åŸºæœ¬æ•°æ®é“¾è·¯å±‚åè®®"></a>3. åŸºæœ¬æ•°æ®é“¾è·¯å±‚åè®®</h1><center><img src="image-20191024230806384.png" srcset="/img/loading.gif" alt="image-20191024230806384" style="zoom:25%;" /></center><h2 id="3-1-Elementary-Data-Link-Protocol"><a href="#3-1-Elementary-Data-Link-Protocol" class="headerlink" title="3.1 Elementary Data Link Protocol"></a>3.1 Elementary Data Link Protocol</h2><h3 id="3-1-2-Some-Assumptions"><a href="#3-1-2-Some-Assumptions" class="headerlink" title="3.1.2 Some Assumptions"></a>3.1.2 Some Assumptions</h3><ul><li>ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚éƒ½æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œé€šè¿‡æ¥å›ä¼ é€’æ¶ˆæ¯è¿›è¡Œé€šä¿¡ã€‚</li><li>æœºå™¨Aå¸Œæœ›ç”¨ä¸€ä¸ªå¯é çš„ã€é¢å‘è¿æ¥çš„æœåŠ¡å‘æœºå™¨Bå‘é€ä¸€ä¸ªé•¿æ•°æ®æµ</li><li>æœºå™¨ä¸ä¼šå´©æºƒ</li></ul><h3 id="3-1-3-å£°æ˜"><a href="#3-1-3-å£°æ˜" class="headerlink" title="3.1.3 å£°æ˜"></a>3.1.3 å£°æ˜</h3><p><code>seq_nr</code>å¯¹å¸§è¿›è¡Œç¼–å·ï¼Œ0~MAX_SEQ</p><p>ä¸€ä¸ªå¸§ç”±4ä¸ªå­—æ®µç»„æˆ:kind, seq, ack, info å‰ä¸‰ä¸ªåŒ…å«æ§åˆ¶ä¿¡æ¯ï¼Œæœ€åä¸€ä¸ªå¯èƒ½åŒ…å«è¦ä¼ è¾“çš„å®é™…æ•°æ®ï¼Œè¿™äº›å­—æ®µåˆèµ·æ¥ç§°ä¸º <strong>å¸§å¤´</strong></p><blockquote><p>kindæŒ‡å‡ºå¸§ä¸­æ˜¯å¦æœ‰æ•°æ®</p><p>seqåºå·</p><p>ackç¡®è®¤</p><p>infoæ•°æ®åŒ…</p></blockquote><p>ä¿¡é“ä¼ è¾“ï¼Œæœ‰æ—¶ä¼šä¸¢å¤±å¸§ï¼Œå‘é€æ–¹ä¼šå¯åŠ¨è®¡æ—¶å™¨ï¼Œåœ¨é¢„è®¾æ—¶é—´é—´éš”æ²¡æœ‰æ”¶åˆ°åº”ç­”ï¼Œåˆ™æ—¶é’Ÿè¶…æ—¶ï¼Œé“¾è·¯å±‚å‘å‡ºç»ˆç«¯ä¿¡å·ã€‚å®ç°</p><blockquote><p>è®©è¿‡ç¨‹ <code>wait for event</code>è¿”å› <code>event= timeout</code> </p><p>è¿‡ç¨‹ <code>start_timer</code> å’Œ <code>stop_timer</code> åˆ†åˆ«æ‰“å¼€å’Œå…³é—­è®¡æ—¶å™¨ã€‚</p><p>åªæœ‰å½“è®¡æ—¶å™¨åœ¨è¿è¡Œå¹¶ä¸”è°ƒç”¨ <code>stop_timer</code> ä¹‹å‰ï¼Œè¶…æ—¶äº‹ä»¶æ‰æœ‰å¯èƒ½å‘ç”Ÿã€‚åœ¨è®¡æ—¶å™¨è¿è¡Œçš„åŒæ—¶ï¼Œå…è®¸æ˜¾å¼åœ°è°ƒç”¨ start_timer: è¿™æ ·çš„è°ƒç”¨åªæ˜¯é‡ç½®æ—¶é’Ÿï¼Œç­‰åˆ°å†ç»è¿‡ä¸€ä¸ªå®Œæ•´çš„æ—¶é’Ÿé—´éš”ä¹‹åå¼•å‘ä¸‹ä¸€æ¬¡è¶…æ—¶äº‹ä»¶ï¼ˆé™¤ éå®ƒå†æ¬¡è¢«é‡ç½®ï¼Œæˆ–è€…è¢«å…³é—­ã€‰ã€‚</p></blockquote><p>è¿‡ç¨‹ <code>start_ack_timer</code> å’Œ <code>stop_ack_timer</code> æ§åˆ¶ä¸€ä¸ªè¾…åŠ©è®¡æ—¶å™¨ï¼Œè¯¥å®šæ—¶å™¨è¢«ç”¨äºåœ¨ç‰¹å®šæ¡ä»¶ä¸‹äº§ç”Ÿç¡®è®¤ã€‚</p><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_PKT 1024</span><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> &#123;<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>&#125; boolean;<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> seq_nr;<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> &#123;</span><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> data[MAX_PKT];&#125; packet;<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> &#123;data, ack, nak&#125; frame_kind;<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> &#123;</span>  frame_kind kind;  seq_nr seq;  seq_nr ack;  packet info;&#125; frame;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">wait_for_event</span><span class="hljs-params">(event_type* event)</span></span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">from_network_layer</span><span class="hljs-params">(packet* p)</span></span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">to_network_layer</span><span class="hljs-params">(packet* p)</span></span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">from_physical_layer</span><span class="hljs-params">(frame* r)</span></span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">start_timer</span><span class="hljs-params">(seq_nr k)</span></span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stop_timer</span><span class="hljs-params">(seq_nr k)</span></span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">start_ack_timer</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stop_ack_timer</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">enable_network_layer</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">disable_network_layer</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;<span class="hljs-comment">//increment k circularly</span><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> inc(k) <span class="hljs-meta-keyword">if</span>(k &lt; MAX_SEQ) k = k + 1; <span class="hljs-meta-keyword">else</span> k = 0</span></code></pre></div><h3 id="3-1-4-ä¸€ä¸ªä¹Œæ‰˜é‚¦å¼çš„å•å·¥åè®®"><a href="#3-1-4-ä¸€ä¸ªä¹Œæ‰˜é‚¦å¼çš„å•å·¥åè®®" class="headerlink" title="3.1.4 ä¸€ä¸ªä¹Œæ‰˜é‚¦å¼çš„å•å·¥åè®®"></a>3.1.4 ä¸€ä¸ªä¹Œæ‰˜é‚¦å¼çš„å•å·¥åè®®</h3><ul><li><p>Data are transmitted in <u>one direction only</u>.</p></li><li><p>The communication channel <u>never damages or loses frames</u>.</p></li><li><p>Both the transmitting and receiving network layers are <u>always ready</u>.</p></li><li><p>Processing time can be ignored.</p></li><li><p>Infinite buffer space is available.</p></li></ul><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> &#123;frame_arrival&#125; event_type;<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"protocol.h"</span></span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sender1</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>&#123;  <span class="hljs-comment">//buffer for an outbound frame</span>  frame s;  <span class="hljs-comment">//buffer for an outbound packet</span>  packet buffer;  <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) &#123;    <span class="hljs-comment">//ä»ç½‘ç»œå±‚æ‹¿ä¸€ä¸ªåŒ…</span>    from_network_layer(&amp;buffer);    <span class="hljs-comment">//æ”¾åˆ°frame</span>    s.info = buffer;    <span class="hljs-comment">//ä¼ åŒ…</span>    to_physical_layer(&amp;s);  &#125;&#125;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">receiver1</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>&#123;  frame r;  <span class="hljs-comment">//filled in by wait, but not used here</span>  event_type event;    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) &#123;    <span class="hljs-comment">//only possibility is frame_arrival</span>    wait_for_event(&amp;event);    <span class="hljs-comment">//go get the inbound frame</span>    from_physical_layer(&amp;r);    <span class="hljs-comment">//pass the data to the network layer</span>    to_network_layer(&amp;r.info);  &#125;&#125;</code></pre></div><h3 id="3-1-5-A-simplex-stop-and-wait-protocol"><a href="#3-1-5-A-simplex-stop-and-wait-protocol" class="headerlink" title="3.1.5 A simplex stop-and-wait protocol"></a>3.1.5 A simplex stop-and-wait protocol</h3><ul><li><p>Data traffic is still <u>simplex protocol</u></p></li><li><p>The communication channel is assumed to be <u>error free</u>. </p></li><li><p>The sender is always ready. <strong><em><u>The receiver is NOT always ready or the receiver has limited buffer space</u></em></strong>.è¿™é‡Œæ”¾å®½äº†protocolçš„é™åˆ¶</p><ul><li>The sender simply inserts a delay into protocol 1 to slow it down sufficiently to keep from swamping the receiver. â€”&gt; low utilization of bandwidth.</li><li>The receiver provides <u>feedback</u> to the sender, permitting the sender to transmit the next frame.</li></ul></li><li><p>Protocol(p2) ensures sender canâ€™t outspace receiver:</p><ul><li>Receiver returns a dummy frame (ack) when ready</li><li>Only one frame out at a time Â± called stop-and-wait</li><li>We added flow control!</li></ul></li></ul><center><img src="image-20191025105854425.png" srcset="/img/loading.gif" alt="image-20191025105854425" style="zoom:30%;" /></center><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> &#123;frame_arrival&#125; event_type;<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"protocol.h"</span></span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sender2</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>&#123;  frame s;  packet buffer;  event_type event;    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) &#123;    from_network_layer(&amp;buffer);    s.info = buffer;    to_physical_layer(&amp;s);    wait_for_event(&amp;event);  &#125;&#125;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">receiver2</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>&#123;  frame r, s;  event_type event;  <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) &#123;    wait_for_event(&amp;event);    from_physical_layer(&amp;r);    to_network_layer(&amp;r.info);    to_physical_layer(&amp;s);  &#125;&#125;</code></pre></div><h3 id="3-1-6-A-simplex-protocol-for-a-noisy-channel"><a href="#3-1-6-A-simplex-protocol-for-a-noisy-channel" class="headerlink" title="3.1.6 A simplex protocol for a noisy channel"></a>3.1.6 A simplex protocol for a noisy channel</h3><ul><li>Data traffic is <u>still simplex</u></li><li>The communication channel is <strong><em><u>NOT free of errors</u></em></strong>.</li><li>The receiver is <strong><em><u>Not always ready</u></em></strong>.</li></ul><p>possible solutions:</p><ul><li><p>Protocol2 + timer â€”-&gt; duplicate packets</p></li><li><p>Protocol2 + timer + to number the frame</p></li></ul><p>å¦‚æœåœ¨ä¸€ä¸ªåè®®ä¸­ï¼Œå‘é€æ–¹åœ¨å‰ç§»åˆ°ä¸‹ä¸€ä¸ªæ•°æ®ä¹‹å‰å¿…é¡»ç­‰å¾…ä¸€ä¸ªè‚¯å®šç¡®è®¤ï¼Œè¿™æ ·çš„åè®®ç§°ä¸ºè‡ªåŠ¨é‡å¤è¯·æ±‚(ARQ, Automatic Repeat Request)æˆ–è€…å¸¦æœ‰é‡ä¼ çš„è‚¯å®šç¡®è®¤(PAR, Positive Acknowledgement with Retransmission)</p><table>  <tr>    <td>      <img src="image-20191025200128444.png" srcset="/img/loading.gif" alt="image-20191025200128444" style="zoom:50%;" />    </td>    <td>      <img src="image-20191025195618998.png" srcset="/img/loading.gif" alt="image-20191025195618998" style="zoom:50%;" />    </td>     <td>      <img src="image-20191025200041993.png" srcset="/img/loading.gif" alt="image-20191025200041993" style="zoom:50%;" />    </td>  </tr></table><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAZ_SEQ1</span><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> &#123;frame_arrival, cksum_err, timeout&#125; event_type;<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"protocol.h"</span></span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sender3</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>&#123;  <span class="hljs-comment">//seq number of next outgoing frame</span>  seq_nr next_frame_to_send;  <span class="hljs-comment">//scratch variable</span>  frame s;  <span class="hljs-comment">//buffer for an outbound packet</span>  packet buffer;  event_type event;  <span class="hljs-comment">//initialize outbound sequence numbers</span>  next_frame_to_send = <span class="hljs-number">0</span>;  <span class="hljs-comment">//fetch first packet</span>  from_network_layer(&amp;buffer);    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) &#123;    <span class="hljs-comment">//construct a frame for transmission</span>    s.info = buffer;    <span class="hljs-comment">//insert sequence number in frame</span>    s.seq = next_frame_to_send;    <span class="hljs-comment">//send it on its way</span>    to_physical_layer(&amp;s);    <span class="hljs-comment">//if answer takes too long, timeout</span>    start_timer(s.seq);    <span class="hljs-comment">//frame_arrival, cksum_err, timeout</span>    wait_for_event(&amp;event);    <span class="hljs-keyword">if</span>(event == frame_arrival)&#123;      <span class="hljs-comment">//get the acknowledgement</span>        from_physical_layer(&amp;s);        <span class="hljs-keyword">if</span>(s.ack == next_frame_to_send) &#123;          <span class="hljs-comment">//turn the timer off</span>          stop_timer(s.ack);          <span class="hljs-comment">//get the next one to send</span>          from_network_layer(&amp;buffer);          <span class="hljs-comment">//invert next_frame_to_send</span>          inc(next_frame_to_send);      &#125;    &#125;  &#125;&#125;</code></pre></div><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">receiver3</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>&#123;  frame r, s;  event_type event;  frame_expected = <span class="hljs-number">0</span>;  <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) &#123;    wait_for_event(&amp;event);<span class="hljs-comment">//frame_arrival, cksum_err</span>    <span class="hljs-keyword">if</span>(event == frame_arrival) &#123;      from_physical_layer(&amp;r);      <span class="hljs-keyword">if</span>(r.seq == frame_expected) &#123;        to_network_layer(&amp;r.info);        inc(frame_expected);      &#125;    &#125;  &#125;  s.ack = <span class="hljs-number">1</span> - frame_expected;&#125;</code></pre></div><table>  <tr>    <td>      <img src="IMG_DA892339BCCD-1.png" srcset="/img/loading.gif" alt="IMG_DA892339BCCD-1" style="zoom:60%;" />    </td>        <td>  <img src="IMG_430578E193A6-1.png" srcset="/img/loading.gif" alt="IMG_430578E193A6-1" style="zoom:70%;" />      </td>   </tr></table><p>â€‹     </p><h3 id="3-1-7-Sliding-window-protocol"><a href="#3-1-7-Sliding-window-protocol" class="headerlink" title="3.1.7 Sliding window protocol"></a>3.1.7 Sliding window protocol</h3><p>å‰é¢çš„åè®®ä¸­ï¼Œæ•°æ®å¸§å•å‘ä¼ è¾“ï¼Œä½†æ˜¯å¤§å¤šæ•°æƒ…å†µï¼Œéœ€è¦åŒå‘ä¼ è¾“ã€‚</p><p>å®ç°å…¨åŒå·¥çš„ä¸€ç§æ–¹æ³•æ˜¯è¿è¡Œå‰é¢åè®®çš„ä¸¤ä¸ªå®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹ä½¿ç”¨ä¸€æ¡ç‹¬ç«‹çš„é“¾è·¯è¿›è¡Œå•å·¥æ•°æ®ä¼ è¾“ã€‚ä½†æ˜¯è¿™æ ·æ¯æ¡é“¾è·¯ç”±ä¸€ä¸ªâ€œå‰å‘â€ä¿¡é“(ç”¨äºæ•°æ®)å’Œä¸€ä¸ªâ€é€†å‘â€ä¿¡é“(ç”¨äºç¡®è®¤)ç»„æˆã€‚ä¸¤ç§æƒ…å†µä¸‹çš„é€†å‘å¸¦å®½å‡ ä¹è¢«å®Œå…¨æµªè´¹äº†ã€‚</p><p>ä¸€ç§æ›´å¥½çš„åšæ³•æ˜¯ä½¿ç”¨åŒä¸€æ¡é“¾è·¯æ¥ä¼ è¾“ä¸¤ä¸ªæ–¹å‘ä¸Šçš„æ•°æ®ã€‚</p><p>æœºå™¨Aå‘æœºå™¨Bå‘é€æ•°æ®å¸§å’Œç¡®è®¤å¸§[ç¡®è®¤æ”¶åˆ°æœºå™¨Bä¸Šä¸€æ¬¡å‘é€çš„å¸§]æ··åˆï¼Œæ¥æ”¶æ–¹åªéœ€æ£€æŸ¥å¸§å¤´éƒ¨kindå­—æ®µï¼Œå°±å¯ä»¥åˆ†è¾¨æ•°æ®å¸§å’Œç¡®è®¤å¸§</p><p><br/></p><p><strong>i. æå¸¦ç¡®è®¤[piggybacking]</strong>ï¼š</p><blockquote><p>æš‚æ—¶å»¶ç¼“ç¡®è®¤ä»¥ä¾¿å°†ç¡®è®¤ä¿¡æ¯æ­è½½åœ¨ä¸‹ä¸€ä¸ªå‡ºå¢ƒæ•°æ®å¸§ä¸Šçš„æŠ€æœ¯ã€‚ç¡®è®¤ä¿¡æ¯è¢«é™„åŠ åœ¨å¾€å¤–å‘é€çš„æ•°æ®å¸§ä¸Š[ä½¿ç”¨å¸§å¤´çš„ackå­—æ®µ]</p><p>ä¼˜åŒ–äº†ä¸Šè¿°å‘é€æ•°æ®å¸§å’Œç¡®è®¤å¸§çš„æ–¹æ³•ï¼Œå‡è½»äº†æ¥æ”¶æ–¹çš„å¤„ç†è´Ÿæ‹…</p></blockquote><p><strong>ii. æ»‘åŠ¨çª—å£[sliding window]</strong>:</p><blockquote><p>æ‰€æœ‰æ»‘åŠ¨çª—å£åè®®çš„æœ¬è´¨æ˜¯åœ¨ä»»ä½•æ—¶åˆ»å‘é€æ–¹æ€»æ˜¯ç»´æŒä¸€ç»„åºå·ï¼Œå¯¹åº”äºå…è®¸å®ƒå‘é€çš„å¸§ã€‚ç§°è¿™äº›å¸§è½åœ¨<u>å‘é€çª—å£</u>[sliding window]å†…ã€‚</p><p>æ¥æ”¶æ–¹ä¹Ÿç»´æŒä¸€ä¸ª<u>æ¥å—çª—å£</u>[receiving window]ï¼Œå¯¹åº”äºä¸€ç»„å…è®¸å®ƒæ¥å—çš„å¸§ã€‚</p><p>å‘é€æ–¹çš„çª—å£å’Œæ¥æ”¶æ–¹çš„çª—å£ä¸å¿…æœ‰åŒæ ·çš„ä¸Šä¸‹ç•Œï¼Œç”šè‡³ä¹Ÿä¸å¿…æœ‰åŒæ ·çš„å¤§å°</p><p>ä»»ä½•ä¸€ä¸ªå‡ºå¢ƒå¸§éƒ½åŒ…å«ä¸€ä¸ªåºå·ï¼Œ èŒƒå›´ä» 0 åˆ°æŸä¸ªæœ€å¤§å€¼ã€‚åºå·çš„æœ€å¤§å€¼é€šå¸¸æ˜¯$2^n-1$ï¼Œè¿™æ ·åºå·æ­£å¥½å¯ä»¥å¡«å…¥åˆ°ä¸€ä¸ªnä½çš„å­—æ®µä¸­ã€‚åœ-ç­‰å¼æ»‘åŠ¨çª—å£åè®®ä½¿ç”¨n=1ï¼Œé™åˆ¶äº†åºå·åªèƒ½æ˜¯ 0 å’Œ 1 ï¼Œä½†æ˜¯æ›´åŠ å¤æ‚çš„åè®®ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨ä»»æ„çš„n</p></blockquote><p><a href="https://blog.csdn.net/wdscq1234/article/details/52444277" target="_blank" rel="noopener">https://blog.csdn.net/wdscq1234/article/details/52444277</a></p><p>æ•°æ®é“¾è·¯å±‚åè®®å°†æ•°æ®åŒ…é€’äº¤ç»™ç½‘ç»œå±‚çš„æ¬¡åºå¿…é¡»  å’Œ  å‘é€æœºå™¨ä¸Šæ•°æ®åŒ…ä»ç½‘ç»œå±‚ä¼ é€’ç»™æ•°æ®é“¾è·¯å±‚çš„æ¬¡åºç›¸åŒã€‚</p><center><img src="image-20191026220230537.png" srcset="/img/loading.gif" alt="image-20191026220230537" style="zoom:50%;" /></center><p><strong><u>A. ä¸€ä½æ»‘åŠ¨çª—å£åè®®</u></strong></p><p>çª—å£å°ºå¯¸ä¸º1ï¼Œå‘é€æ–¹å‘å‡ºä¸€å¸§ä»¥åï¼Œå¿…é¡»ç­‰å¾…å‰ä¸€å¸§çš„ç¡®è®¤çš„åˆ°æ¥æ‰èƒ½å‘é€ä¸‹ä¸€å¸§ï¼Œè¿™ä¸ªåè®®ä½¿ç”¨äº†åœ-ç­‰å¼åŠæ³•</p><table>  <tr>    <td>      <img src="IMG_BE2535BE4B0D.png" srcset="/img/loading.gif" alt="IMG_BE2535BE4B0D-1" style="zoom:55%;" />    </td>    <td>      <img src="https://miaochenlu.github.io/picture/IMG_7FBAD2BAF798-1.png" srcset="/img/loading.gif" alt="IMG_7FBAD2BAF798-1" style="zoom:50%;" />     </td>    </tr></table><center><img src="image-20191025202700163.png" srcset="/img/loading.gif" alt="image-20191025202700163" style="zoom:50%;" /></center><p><strong><u>B. Go back N</u></strong></p><p><a href="http://www.ccs-labs.org/teaching/rn/animations/gbn_sr/" target="_blank" rel="noopener">go back NåŠ¨ç”»</a></p><p><a href="https://media.pearsoncmg.com/aw/ecs_kurose_compnetwork_7/cw/content/interactiveanimations/go-back-n-protocol/index.html" target="_blank" rel="noopener">GBN animination</a></p><p><a href="https://blog.csdn.net/qq_34501940/article/details/51180268" target="_blank" rel="noopener">https://blog.csdn.net/qq_34501940/article/details/51180268</a></p><center><img src="image-20191229212229327.png" srcset="/img/loading.gif" alt="image-20191229212229327" style="zoom:50%;" /></center><blockquote><p>åœ¨å‘é€å®Œä¸€ä¸ªå¸§åï¼Œä¸ç”¨åœä¸‹æ¥ç­‰å¾…ç¡®è®¤ï¼Œè€Œæ˜¯å¯ä»¥è¿ç»­å‘é€å¤šä¸ªæ•°æ®å¸§ã€‚æ”¶åˆ°ç¡®è®¤å¸§æ—¶ï¼Œä»»å¯å‘é€æ•°æ®ï¼Œè¿™æ ·å°±å‡å°‘äº†ç­‰å¾…æ—¶é—´ï¼Œæ•´ä¸ªé€šä¿¡çš„é€šååé‡æé«˜ã€‚<br>å¦‚æœå‰ä¸€ä¸ªå¸§åœ¨è¶…æ—¶æ—¶é—´å†…æœªå¾—åˆ°ç¡®è®¤ï¼Œå°±è®¤ä¸ºä¸¢å¤±æˆ–è¢«ç ´åï¼Œéœ€è¦é‡å‘å‡ºé”™å¸§åŠå…¶åé¢çš„æ‰€æœ‰æ•°æ®å¸§ã€‚è¿™æ ·æœ‰å¯èƒ½æœ‰æŠŠæ­£ç¡®çš„æ•°æ®å¸§é‡ä¼ ä¸€éï¼Œé™ä½äº†ä¼ é€æ•ˆç‡ã€‚<br>çº¿è·¯å¾ˆå·®æ—¶ï¼Œä½¿ç”¨é€€åNå¸§çš„åè®®ä¼šæµªè´¹å¤§é‡çš„å¸¦å®½é‡ä¼ å¸§ã€‚</p></blockquote><p><br/></p><p><br/></p><p><strong><u>C. Selective Repeat ARQ</u></strong></p><p><a href="https://media.pearsoncmg.com/aw/ecs_kurose_compnetwork_7/cw/content/interactiveanimations/selective-repeat-protocol/index.html" target="_blank" rel="noopener">ARQ</a></p><p>å¦‚æœé”™è¯¯å¾ˆå°‘å‘ç”Ÿï¼Œåˆ™å›é€€ n åè®®å¯ä»¥å·¥ä½œå¾—å¾ˆå¥½ï¼šä½†æ˜¯ï¼Œå¦‚æœçº¿è·¯è´¨é‡å¾ˆå·®ï¼Œé‚£ä¹ˆé‡ä¼ çš„å¸§è¦æµªè´¹å¤§é‡å¸¦å®½ã€‚å¦ä¸€ç§å¤„ç†é”™è¯¯çš„ç­–ç•¥æ˜¯é€‰æ‹©é‡ä¼ åè®®ï¼Œå…è®¸æ¥æ”¶æ–¹<strong><em>æ¥å—å¹¶ç¼“å­˜åå¸§</em></strong>æˆ–è€…ä¸¢å¤±å¸§åé¢çš„æ‰€æœ‰å¸§ã€‚</p><center><img src="image-20191229210854474.png" srcset="/img/loading.gif" alt="image-20191229210854474" style="zoom:50%;" /><</center><blockquote><p>NAKï¼šéç¡®è®¤å¸§ï¼Œå½“åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æŸä¸ªæ•°æ®å¸§çš„ACKæ—¶ï¼Œå›å¤ä¸€ä¸ªNACKã€‚<br>åœ¨å‘é€è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ•°æ®å¸§è®¡æ—¶å™¨è¶…æ—¶ï¼Œå°±è®¤ä¸ºè¯¥å¸§ä¸¢å¤±æˆ–è€…è¢«ç ´åï¼Œæ¥æ”¶ç«¯åªæŠŠå‡ºé”™çš„çš„å¸§ä¸¢å¼ƒï¼Œå…¶åé¢çš„æ•°æ®å¸§ä¿å­˜åœ¨ç¼“å­˜ä¸­ï¼Œå¹¶å‘å‘é€ç«¯å›å¤NAKã€‚å‘é€ç«¯æ¥æ”¶åˆ°NAKæ—¶ï¼Œåªå‘é€å‡ºé”™çš„å¸§ã€‚<br>å¦‚æœè½åœ¨çª—å£çš„å¸§ä»æœªæ¥å—è¿‡ï¼Œé‚£ä¹ˆå­˜å‚¨èµ·æ¥ï¼Œç­‰æ¯”å®ƒåºåˆ—å·å°çš„æ‰€æœ‰å¸§éƒ½æŒ‰æ¬¡åºäº¤ç»™ç½‘ç»œå±‚ï¼Œé‚£ä¹ˆæ­¤å¸§æ‰æäº¤ç»™ç½‘ç»œå±‚ã€‚<br>æ¥æ”¶ç«¯æ”¶åˆ°çš„æ•°æ®åŒ…çš„é¡ºåºå¯èƒ½å’Œå‘é€çš„æ•°æ®åŒ…é¡ºåºä¸ä¸€æ ·ã€‚å› æ­¤åœ¨æ•°æ®åŒ…é‡Œå¿…é¡»å«æœ‰é¡ºåºå­—ç¬¦æ¥å¸®åŠ©æ¥å—ç«¯æ¥æ’åºã€‚<br>é€‰æ‹©é‡ä¼ åè®®å¯ä»¥é¿å…é‡å¤ä¼ é€é‚£äº›æ­£ç¡®åˆ°è¾¾æ¥æ”¶ç«¯çš„æ•°æ®å¸§ã€‚ä½†æ˜¯æ¥æ”¶ç«¯è¦è®¾ç½®å…·æœ‰ç›¸å½“å®¹é‡çš„ç¼“å­˜ç©ºé—´ï¼Œè¿™åœ¨è®¸å¤šæƒ…å†µä¸‹æ˜¯ä¸å¤Ÿç»æµçš„ã€‚</p></blockquote><p><strong><em>Window size</em></strong></p><ul><li><p>Send Window $Size &lt;= (MAX_SEQ+1)/2$ æ³¨æ„Max_seqæ˜¯æŒ‡æœ€å¤§åºå·ï¼Œä¸æ˜¯æœ€å¤§æ•°é‡</p></li><li><p>Receive Window Size = Send Window Size</p></li></ul><blockquote><p>è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨åœ¨äºå½“æ¥æ”¶æ–¹å‘å‰ç§»åŠ¨å®ƒçš„çª—å£åï¼Œæ–°çš„æœ‰æ•ˆåºå·èŒƒå›´ä¸è€çš„åºå·èŒƒå›´æœ‰é‡å ã€‚å› æ­¤ï¼Œåç»­çš„ä¸€æ‰¹å¸§å¯èƒ½æ˜¯é‡å¤çš„å¸§ï¼ˆå¦‚æœæ‰€æœ‰çš„ç¡®è®¤éƒ½ä¸¢å¤±äº†ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯æ–°çš„å¸§ï¼ˆå¦‚æœæ‰€æœ‰çš„ç¡®è®¤éƒ½æ¥æ”¶åˆ°äº†)ã€‚æ¥æ”¶æ–¹æ ¹æœ¬æ— æ³•åŒºåˆ†è¿™ä¸¤ç§æƒ…å½¢ã€‚</p></blockquote><center><img src="image-20191229205721964.png" srcset="/img/loading.gif" alt="image-20191229205721964" style="zoom:50%;" /></center><p><img src="image-20200104140132312.png" srcset="/img/loading.gif" alt="image-20200104140132312" style="zoom:50%;" /></p><ol><li>ä»t0-&gt;t1, Node-Bè¿”å›çš„æœ€åä¸€ä¸ªåŒ…æ˜¯R3,3</li></ol><p>è¯´æ˜Node-Bæ”¶åˆ°äº†0ï½2å·åŒ…ï¼Œæ‰€æœ‰ä¸‹ä¸€ä¸ªæœŸå¾…Aå‘é€3å·åŒ…</p><p>å› æ­¤ï¼Œæ”¶åˆ°çš„æœ‰S0,0 &amp; S1,0 &amp; S2,0</p><ol><li>æ³¨æ„ï¼Œé¢˜ç›®ä¸­è¯´ï¼Œtransmission sequence number and acknowledgment sequence numberæ˜¯3bit</li></ol><p>æ‰€æœ‰ä¸€å…±æœ‰8ä¸ªåºå·</p><p>åœ¨GBNåè®®ä¸­ï¼Œåºå·ä¸ªæ•°â‰¥å‘é€çª—å£+1</p><p>æ‰€ä»¥ï¼Œå‘é€çª—å£ä¸º7</p><p><img src="image-20200104140642889.png" srcset="/img/loading.gif" alt="image-20200104140642889" style="zoom:50%;" /></p><p>Aè¿˜å¯ä»¥å‘é€5ä¸ªæ•°æ®åŒ…</p><p>å½“å‘é€ç¬¬ä¸€ä¸ªåºå·ä¸º5çš„æ•°æ®å¸§æ—¶ï¼Œå¯ä»¥åŒæ—¶å¯¹ä¹™æ–¹å‘æ¥çš„ä¸”æŒ‰åºåˆ°è¾¾çš„1å·æ•°æ®å¸§è¿›è¡Œæå¸¦ç¡®è®¤ï¼Œç¡®è®¤åºå·ä¸º2ï¼Œå› æ­¤ç”²æ–¹å‘é€çš„ç¬¬ä¸€ä¸ªæ•°æ®å¸§ä¸ºS5,2ï¼›</p><p>åŒç†ï¼Œå½“å‘é€æœ€åä¸€ä¸ªåºå·ä¸º1çš„æ•°æ®å¸§æ—¶ï¼Œå¯ä»¥åŒæ—¶å¯¹ä¹™æ–¹å‘æ¥çš„ä¸”æŒ‰åºåˆ°è¾¾çš„1å·æ•°æ®å¸§è¿›è¡Œæå¸¦ç¡®è®¤ï¼Œç¡®è®¤åºå·ä¸º2ï¼Œå› æ­¤ç”²æ–¹å‘é€çš„æœ€åä¸€ä¸ªæ•°æ®å¸§æ—¶S1,2ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡ç”²æ–¹æ”¶åˆ°äº†R3,3ï¼Œä¹Ÿå°±æ˜¯ä¹™æ–¹å‘æ¥çš„åºå·ä¸º3çš„æ•°æ®å¸§ï¼Œä½†æ˜¯è¯¥æ•°æ®å¸§å¹¶æœªæŒ‰åºåˆ°è¾¾ï¼Œå› ä¸ºç”²æ–¹ä¹‹å‰æ²¡æœ‰æ”¶åˆ°åºå·ä¸º2çš„æ•°æ®å¸§ï¼Œå› æ­¤ç”²æ–¹ä¸èƒ½å¯¹R3,3è¿›è¡Œæå¸¦ç¡®è®¤ã€‚</p><ol><li><p>æ–¹åœ¨t0æ—¶åˆ»åˆ°t1æ—¶åˆ»æœŸé—´å…±å‘é€äº†åºå·ä¸º0~4çš„5ä¸ªæ•°æ®å¸§ã€‚åœ¨t1æ—¶åˆ»ç”²æ–¹è¶…æ—¶é‡ä¼ 2å·æ•°æ®å¸§ï¼Œè¿™è¡¨æ˜ç”²æ–¹æ²¡æœ‰æ”¶åˆ°ä¹™æ–¹å¯¹2å·æ•°æ®å¸§çš„ç¡®è®¤ï¼Œè¿™å¯èƒ½æ˜¯ç”±äº2å·æ•°æ®å¸§æœªæŒ‰åºåˆ°è¾¾ä¹™æ–¹æˆ–æŒ‰åºåˆ°è¾¾ä¹™æ–¹ä½†å‡ºç°äº†è¯¯ç ã€‚ç”±äºç”²ä¹™åŒæ–¹éƒ½ä½¿ç”¨GBNåè®®ï¼Œå› æ­¤ç”²æ–¹éœ€è¦é‡ä¼ è¶…æ—¶çš„æ•°æ®å¸§åŠå…¶åç»­æ•°æ®å¸§ï¼Œä¹Ÿå°±æ˜¯ç”²æ–¹éœ€è¦é‡ä¼ åºå·ä¸º2~4çš„3ä¸ªæ•°æ®å¸§ã€‚é‡ä¼ çš„ç¬¬ä¸€ä¸ªå¸§çš„åºå·ä¸º2ï¼Œç”±äºä¹‹å‰å·²ç»æŒ‰åºæ­£ç¡®æ”¶åˆ°ä¹™æ–¹å‘æ¥çš„åºå·ä¸º2çš„æ•°æ®å¸§ï¼Œå› æ­¤å¯ä»¥è¿›è¡Œæå¸¦ç¡®è®¤ï¼Œç¡®è®¤å·ä¸º3ï¼Œå› æ­¤é‡ä¼ çš„ç¬¬ä¸€ä¸ªå¸§ä¸ºS2,3ã€‚</p></li><li></li></ol><script type="math/tex; mode=display">\frac{7\times 1000\times 8/100Mbps}{0.96ms+ 1000\times 8/100Mbps}=50\%</script><h1 id="4-æ•°æ®é“¾è·¯å±‚åè®®å®ä¾‹"><a href="#4-æ•°æ®é“¾è·¯å±‚åè®®å®ä¾‹" class="headerlink" title="4. æ•°æ®é“¾è·¯å±‚åè®®å®ä¾‹"></a>4. æ•°æ®é“¾è·¯å±‚åè®®å®ä¾‹</h1><h2 id="4-1-PPP"><a href="#4-1-PPP" class="headerlink" title="4.1 PPP"></a>4.1 PPP</h2><p>A standard protocol called PPP (Point to Point Protocol) is used to send packets over the links, including the SONET fiber optic links and ADSL links</p><center><img src="image-20191229214521665.png" srcset="/img/loading.gif" alt="image-20191229214521665" style="zoom:50%;" /></center><p>PPP åŠŸèƒ½åŒ…æ‹¬å¤„ç†é”™è¯¯æ£€æµ‹é“¾è·¯çš„é…ç½®ã€æ”¯æŒå¤šç§åè®®ã€å…è®¸èº«ä»½è®¤è¯ç­‰ã€‚å®ƒæ˜¯ä¸€ä¸ª æ—©æœŸç®€åŒ–åè®®çš„æ”¹è¿›ï¼Œé‚£ä¸ªåè®®ç§°ä¸ºä¸²è¡Œçº¿è·¯ Internet åè®® ï¼ˆSLIP, Serial Line Internet Protocol ï¼‰ã€‚ä¼´éšç€ä¸€ç»„å¹¿æ³›é€‰é¡¹ï¼Œ PPP æä¾›äº† 3 ä¸ªä¸»è¦ç‰¹æ€§ï¼š</p><ul><li><p>ä¸€ç§æˆå¸§æ–¹æ³•ã€‚å®ƒå¯ä»¥æ¯«æ— æ­§ä¹‰åœ°åŒºåˆ†å‡ºä¸€å¸§çš„ç»“æŸå’Œä¸‹ä¸€å¸§çš„å¼€å§‹ï¼</p></li><li><p>ä¸€ä¸ªé“¾è·¯æ§åˆ¶åè®®ï¼å®ƒå¯ç”¨äºå¯åŠ¨çº¿è·¯ã€æµ‹è¯•çº¿è·¯ã€åå•†å‚æ•°ï¼Œ ä»¥åŠå½“çº¿è·¯ä¸å†éœ€è¦æ—¶æ¸©å’Œåœ°å…³é—­çº¿è·¯ã€‚è¯¥åè®®ç§°ä¸º<strong><em><u>é“¾è·¯æ§åˆ¶åè®® ï¼ˆLCP, Link Control Protocolï¼‰</u></em></strong>ã€‚</p></li><li><p>ä¸€ç§åå•†ç½‘ç»œå±‚é€‰é¡¹çš„æ–¹å¼ã€‚åå•†æ–¹å¼ç‹¬ç«‹äºç½‘ç»œå±‚åè®®ï¼æ‰€é€‰æ‹©çš„æ–¹æ³•æ˜¯é’ˆå¯¹æ¯ä¸€ç§æ”¯æŒçš„ç½‘ç»œå±‚éƒ½æœ‰ä¸€ä¸ªä¸åŒçš„<strong><em><u>ç½‘ç»œæ§åˆ¶åè®® ï¼ˆNCP, Network Control Protocol)</u></em></strong>ã€‚</p></li></ul><p>å› ä¸ºæ²¡æœ‰å¿…è¦é‡æ–°å‘æ˜è½®å­ï¼Œæ‰€ä»¥ PPP å¸§æ ¼å¼çš„é€‰æ‹©é…·ä¼¼ HDLC å¸§æ ¼å¼ã€‚ HDLC æ˜¯<strong><em><u>é«˜çº§æ•°æ®é“¾è·¯æ§åˆ¶åè®® ï¼ˆ High-level Data Link Control ï¼‰</u></em></strong>ï¼Œæ˜¯ä¸€ä¸ªæ—©æœŸè¢«å¹¿æ³›ä½¿ç”¨çš„å®¶åº­åè®®å®ä¾‹ã€‚</p><p>PPP å’Œ HDLC ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š</p><ul><li><p>PPP æ˜¯é¢å‘å­—èŠ‚è€Œä¸æ˜¯é¢å‘æ¯”ç‰¹çš„ï¼ç‰¹åˆ«æ˜¯ PPP ä½¿ç”¨å­—èŠ‚å¡«å……æŠ€æœ¯ï¼Œæ‰€æœ‰å¸§çš„é•¿åº¦å‡æ˜¯å­—èŠ‚çš„æ•´æ•°å€ã€‚ HDLC åè®®åˆ™ä½¿ç”¨æ¯”ç‰¹å¡«å……æŠ€æœ¯ï¼Œ å…è®¸å¸§çš„é•¿åº¦ä¸æ˜¯å­—èŠ‚çš„å€æ•°ï¼Œä¾‹å¦‚ 30.25 å­—èŠ‚ã€‚</p></li><li><p>HDLC åè®®æä¾›äº†å¯é çš„æ•°æ®ä¼ è¾“ï¼Œæ‰€é‡‡ç”¨çš„æ–¹å¼æ­£æ˜¯æˆ‘ä»¬å·²ç†Ÿæ‚‰çš„æ»‘åŠ¨çª—å£ã€ç¡®è®¤å’Œè¶…æ—¶æœºåˆ¶ç­‰ã€‚ PPP ä¹Ÿå¯ä»¥åœ¨è¯¸å¦‚æ— çº¿ç½‘ç»œç­‰å˜ˆæ‚çš„ç¯å¢ƒé‡Œæä¾›å¯é ä¼ è¾“ï¼Œå…·ä½“ç»†èŠ‚ç”±ç›¯Cl663 å®šä¹‰ã€‚ç„¶è€Œï¼Œå®é™…ä¸Šå¾ˆå°‘è¿™æ ·åšï¼ç›¸åï¼Œ Internetå‡ ä¹éƒ½æ˜¯é‡‡ç”¨ä¸€ç§â€œæ— ç¼–å·æ¨¡å¼â€æ¥æä¾›æ— è¿æ¥æ— ç¡®è®¤çš„æœåŠ¡ï¼</p></li></ul><center><img src="image-20191229214119334.png" srcset="/img/loading.gif" alt="image-20191229214119334" style="zoom:45%;" /></center><h2 id="4-2-ADSL"><a href="#4-2-ADSL" class="headerlink" title="4.2 ADSL"></a>4.2 ADSL</h2><center><img src="image-20191229214707273.png" srcset="/img/loading.gif" alt="image-20191229214707273" style="zoom:40%;" /></center><center><img src="image-20191229215124692.png" srcset="/img/loading.gif" alt="image-20191229215124692" style="zoom:50%;" /></center>]]></content>
    
    
    <categories>
      
      <category>Computer Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer Network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CA - Pipeline</title>
    <link href="/2019/10/13/ComputerArchitecture/pipeline/"/>
    <url>/2019/10/13/ComputerArchitecture/pipeline/</url>
    
    <content type="html"><![CDATA[<h1><a name="pipline">é™„å½•Cæµæ°´çº¿</a></h1><h2 id="1-ä»€ä¹ˆæ˜¯æµæ°´çº¿"><a href="#1-ä»€ä¹ˆæ˜¯æµæ°´çº¿" class="headerlink" title="1 ä»€ä¹ˆæ˜¯æµæ°´çº¿"></a>1 ä»€ä¹ˆæ˜¯æµæ°´çº¿</h2><p>æµæ°´çº¿æ˜¯ä¸€ç§å°†å¤šæ¡æŒ‡ä»¤ <strong><em>é‡å æ‰§è¡Œ</em></strong> çš„å®ç°æŠ€æœ¯  </p><p>ä¸€æ¡æ‰§è¡ŒåŒ…å«å¤šç§æ“ä½œï¼Œæµæ°´çº¿å……åˆ†åˆ©ç”¨äº†è¿™äº› <strong><em>æ“ä½œä¹‹é—´çš„å¹¶è¡Œæ€§</em></strong><br><br/></p><p>ä¸ºäº†èƒ½æ›´å½¢è±¡åœ°ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œä¸å¦¨ç”¨æ±½è½¦è£…é…çº¿æ¥åšç±»æ¯”    </p><blockquote><p>æ±½è½¦è£…é…çº¿çš„æ¯ä¸€ç¯èŠ‚è´Ÿè´£ä¸€é¡¹ä»»åŠ¡ï¼Œæ‰€æœ‰ç¯èŠ‚æ˜¯å¹¶è¡Œçš„ï¼ˆä¹Ÿå°±æ˜¯ä¸åŒçš„æ±½è½¦åŒæ—¶åœ¨ä¸åŒçš„ç¯èŠ‚ä¸Šï¼‰  </p><p>åœ¨æµæ°´çº¿ä¸­ï¼ŒæŒ‡ä»¤å°±åƒæ˜¯ä¸€è¾†å¾…è£…é…çš„æ±½è½¦ï¼Œä¸åŒç¯èŠ‚å®ŒæˆæŒ‡ä»¤çš„ä¸€éƒ¨åˆ†,è¿™äº›ç¯èŠ‚çš„æ¯ä¸€æ­¥ç§°ä¸º <strong><em>æµæ°´çº§æˆ–è€…æµæ°´æ®µ</em></strong>ã€‚æµæ°´çº§å‰åç›¸è¿å½¢æˆæµæ°´çº¿  </p><p>æ±½è½¦è£…é…çº¿çš„ <strong><em>ååé‡</em></strong> å®šä¹‰ä¸ºå•ä½æ—¶é—´ç”Ÿäº§çš„æ±½è½¦æ•°é‡ï¼Œç”±å®Œæ•´æ±½è½¦é€€å‡ºè£…é…çº¿çš„é¢‘ç‡å†³å®š</p><p>æµæ°´çº¿çš„ååé‡ç”±æŒ‡ä»¤é€€å‡ºæµæ°´çº¿çš„é¢‘ç‡å†³å®šã€‚ä¸€æ¡æŒ‡ä»¤åœ¨æµæ°´çº¿ä¸­ä¸‹ç§»ä¸€æ­¥éœ€è¦çš„æ—¶é—´ä¸º <strong><em>å¤„ç†å™¨å‘¨æœŸ</em></strong> ã€‚å› ä¸ºå„ä¸ªç¯èŠ‚åŒæ—¶æ‰§è¡Œï¼Œæ‰€ä»¥å¤„ç†å™¨å‘¨æœŸç”±æœ€ç¼“æ…¢çš„æµæ°´çº¿çº§ç¡®å®šã€‚</p></blockquote><p>å¯ä»¥æƒ³è§ï¼Œè¦ä½¿æµæ°´çº¿æ€§èƒ½é«˜ï¼Œå¹³è¡¡å„æµæ°´çº¿çº§å¾ˆé‡è¦  </p><blockquote><p>å› ä¸ºå¤„ç†å™¨å‘¨æœŸç”±æœ€ç¼“æ…¢çš„æµæ°´çº¿çº§ç¡®å®šï¼Œæˆ‘ä»¬æƒ³è¦ä½¿æœ€ç¼“æ…¢ç¯èŠ‚çš„åŠ å¿«ï¼Œå°±è¦å¹³è¡¡å„æµæ°´çº¿çº§ã€‚  [æœ¨æ¡¶åŸç†]</p></blockquote><p>å¦‚æœå„çº§è¾¾åˆ°å®Œç¾å¹³è¡¡ï¼Œé‚£ä¹ˆæ¯æ¡æŒ‡ä»¤åœ¨æµæ°´çº¿å¤„ç†å™¨ä¸­çš„æ—¶é—´ä¸º  </p><script type="math/tex; mode=display">\frac{éæµæ°´çº¿æœºå™¨ä¸Šæ¯æ¡æŒ‡ä»¤çš„æ—¶é—´}{æµæ°´çº§çš„æ•°ç›®}</script><p>åœ¨è¿™äº›æ¡ä»¶ä¸‹ï¼Œæµæ°´çº¿åŠ é€Ÿæ¯”=æµæ°´çº§çš„æ•°ç›®</p><p><br/></p><h1 id="2-RISCæŒ‡ä»¤é›†"><a href="#2-RISCæŒ‡ä»¤é›†" class="headerlink" title="2 RISCæŒ‡ä»¤é›†"></a>2 RISCæŒ‡ä»¤é›†</h1><p>æˆ‘ä»¬ä»¥RISCæŒ‡ä»¤é›†ä¸ºä¾‹æ¥äº†è§£ä¸€ä¸‹æµæ°´çº¿å®ç°ã€‚ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¼šä»‹ç»RISCæŒ‡ä»¤é›†ä»¥åŠæ²¡æœ‰æµæ°´çº¿çš„å®ç°æ–¹å¼ã€‚</p><p>RISCæŒ‡ä»¤é›†å­é›†ä¸­æ¯æ¡æŒ‡ä»¤éƒ½å¯ä»¥åœ¨5ä¸ªæ—¶é’Ÿå‘¨æœŸä»¥å†…å®ç°ã€‚ä»¥MIPSæŒ‡ä»¤é›†ä¸ºä¾‹ä»‹ç»è¿™5ä¸ªæ—¶é’Ÿå‘¨æœŸ</p><ul><li><strong><em>æŒ‡ä»¤æå–å‘¨æœŸ(IF(Instruction Fetch))</em></strong>  </li><li><strong><em>æŒ‡ä»¤è¯‘ç /å¯„å­˜å™¨æå–å‘¨æœŸ(ID)</em></strong>  </li><li><strong><em>æ‰§è¡Œ/æœ‰æ•ˆåœ°å€å‘¨æœŸ(EX)</em></strong>  </li><li><strong><em>å­˜å‚¨å™¨è®¿é—®(MEM)</em></strong></li><li><strong><em>å†™å›å‘¨æœŸ(WB)</em></strong></li></ul><center><img="/Users/jones/Library/Application Support/typora-user-images/image-20191219230108716.png" alt="image-20191219230108716" style="zoom:50%;" /></center><p><a href="http://web.cs.iastate.edu/~prabhu/Tutorial/PIPELINE/DLXimplem.html" target="_blank" rel="noopener">http://web.cs.iastate.edu/~prabhu/Tutorial/PIPELINE/DLXimplem.html</a></p><p><br/></p><h1 id="3-RISCå¤„ç†å™¨ç»å…¸äº”çº§æµæ°´çº¿"><a href="#3-RISCå¤„ç†å™¨ç»å…¸äº”çº§æµæ°´çº¿" class="headerlink" title="3 RISCå¤„ç†å™¨ç»å…¸äº”çº§æµæ°´çº¿"></a>3 RISCå¤„ç†å™¨ç»å…¸äº”çº§æµæ°´çº¿</h1><center><img src="ca20190908-1.png" srcset="/img/loading.gif" width="600"></center><center><img src="ca20190908-2.png" srcset="/img/loading.gif" width="600"></center><p><br/></p><p>åœ¨RISCæµæ°´çº¿ä¸­ï¼Œå¤šæ¡æŒ‡ä»¤çš„æ‰§è¡Œé‡å ä¸ä¼šå¼•å…¥å¤šå°‘å†²çªï¼Œå› ä¸ºä»¥ä¸‹ä¸‰ç‚¹</p><h4 id="A"><a href="#A" class="headerlink" title="A."></a>A.</h4><p>ä½¿ç”¨åˆ†ç¦»çš„æŒ‡ä»¤å­˜å‚¨å™¨å’Œæ•°æ®å­˜å‚¨å™¨ã€‚</p><p>è¿™æ ·åšæ˜¯å› ä¸ºæŒ‡ä»¤æå–å’Œæ•°æ®è®¿é—®éƒ½éœ€è¦è®¿é—®å­˜å‚¨å™¨ï¼Œä¼šå¼•å‘å†²çªï¼Œæ‰€ä»¥åˆ†ç¦»æŒ‡ä»¤å’Œæ•°æ®å­˜å‚¨å™¨ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœæµæ°´çº¿å¤„ç†å™¨æ—¶é’Ÿå‘¨æœŸ=å¤šå‘¨æœŸå¤„ç†å™¨æ—¶é’Ÿå‘¨æœŸï¼Œå­˜å‚¨å™¨éœ€è¦æä¾›<strong>5å€å¸¦å®½</strong></p><h4 id="B"><a href="#B" class="headerlink" title="B."></a>B.</h4><p>ä¸¤ä¸ªé˜¶æ®µä½¿ç”¨äº†å¯„å­˜å™¨å †ï¼š<strong>ID</strong>é˜¶æ®µdecode, <strong>WB</strong>é˜¶æ®µwritebackå†™å…¥</p><p>å› æ­¤ï¼Œæ¯ä¸ªæ—¶é’Ÿå‘¨æœŸå¯„å­˜å™¨éœ€è¦ä¸¤æ¬¡è¯»å–(A=Reg[rs], B=Reg[rt]) å’Œä¸€æ¬¡å†™å…¥</p><p>ä¸ºäº†å‡ºæ°”å¯¹ç›¸åŒå¯„å­˜å™¨å †å¤šæ¬¡è¯»å–å’Œä¸€æ¬¡å†™å…¥ï¼Œ<strong><em>æˆ‘ä»¬åœ¨æ—¶é’Ÿå‘¨æœŸçš„å‰åŠéƒ¨åˆ†å†™å¯„å­˜å™¨ï¼ŒååŠéƒ¨åˆ†è¯»å¯„å­˜å™¨</em></strong></p><h4 id="C"><a href="#C" class="headerlink" title="C."></a>C.</h4><p>ç¨‹åºè®¡æ•°å™¨åœ¨IFé˜¶æ®µè¦é€’å¢</p><p>IDé˜¶æ®µè¦è®¡ç®—æ½œåœ¨çš„åˆ†æ”¯ç›®æ ‡ã€‚è‹¥åˆ†æ”¯åœ¨IDæ”¹å˜ç¨‹åºè®¡æ•°å™¨ï¼Ÿ</p><p><br/></p><p>é™¤äº†è¦ç¡®ä¿æµæ°´çº¿ä¸­çš„æŒ‡ä»¤ä¸ä¼šåœ¨ç›¸åŒæ—¶é—´ä½¿ç”¨ç›¸åŒçš„ç¡¬ä»¶èµ„æºï¼Œè¿˜è¦ç¡®ä¿ä¸åŒæµæ°´çº§çš„æŒ‡ä»¤ä¸ä¼šäº’ç›¸å¹²æ‰°ã€‚è¿™æ˜¯é€šè¿‡åœ¨æµæ°´çº§ä¹‹é—´å¼•å…¥ <u>æµæ°´çº¿å¯„å­˜å™¨</u>æ¥å®ç°çš„ã€‚å°†ä¸€ä¸ªç»™å®šçš„æµæ°´çº§å¾—å‡ºçš„ç»“æœå­˜å‚¨åˆ°æµæ°´çº¿å¯„å­˜å™¨ï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸä½œä¸ºä¸‹ä¸€ä¸ªæµæ°´çº§çš„è¾“å…¥ã€‚</p><center><img src="image-20191013133054888.png" srcset="/img/loading.gif" alt="image-20191013133054888" style="zoom: 30%;" /></center><h1 id="4-æµæ°´åŒ–çš„ä¸»è¦é˜»ç¢-æµæ°´çº¿å†’é™©"><a href="#4-æµæ°´åŒ–çš„ä¸»è¦é˜»ç¢-æµæ°´çº¿å†’é™©" class="headerlink" title="4 æµæ°´åŒ–çš„ä¸»è¦é˜»ç¢-æµæ°´çº¿å†’é™©"></a>4 æµæ°´åŒ–çš„ä¸»è¦é˜»ç¢-æµæ°´çº¿å†’é™©</h1><p>å†’é™©é™ä½æ¥äº†æµæ°´åŒ–æ‰€èƒ½å¸¦æ¥çš„ç†æƒ³åŠ é€Ÿæ¯”<br>å†’é™©å…±æœ‰ä¸€ä¸‹ä¸‰ç±»  </p><ol><li><p>ç»“æ„å†’é™©  </p><p>åœ¨é‡å æ‰§è¡Œæ¨¡å¼ä¸‹ï¼Œç¡¬ä»¶æ— æ³•åŒæ—¶æ”¯æŒæŒ‡ä»¤çš„æ‰€æœ‰å¯èƒ½ç»„åˆï¼Œå°±ä¼šå‡ºç°èµ„æºå†²çª [æ¯”å¦‚å¤§å®¶éƒ½æƒ³è®¿é—®å­˜å‚¨å™¨]</p></li><li><p>æ•°æ®å†’é™©  </p><p>æŒ‡ä»¤ä¹‹é—´å­˜åœ¨å…ˆåé¡ºåºï¼Œä¸€æ¡æŒ‡ä»¤å–å†³äºå…ˆå‰æŒ‡ä»¤çš„ç»“æœ</p></li><li><p>æ§åˆ¶å†’é™© </p><p>åˆ†æ”¯æŒ‡ä»¤ä»¥åŠå…¶ä»–æ”¹å˜ç¨‹åºè®¡æ•°å™¨çš„æŒ‡ä»¤ä¼šå¯¼è‡´æ§åˆ¶å†’é™©</p></li></ol><p>ä¸ºäº†é¿å…å†’é™©ï¼Œè¦æ±‚æµæ°´çº¿ä¸­çš„ä¸€äº›æŒ‡ä»¤å»¶è¿Ÿæ—¶ï¼Œå…¶ä»–æŒ‡ä»¤èƒ½å¤Ÿç»§ç»­æ‰§è¡Œ ã€‚</p><div class="note note-warning">            <p>è¿™é‡Œè®¨è®ºçš„æµæ°´çº¿ï¼Œå½“ä¸€æ¡æŒ‡ä»¤è¢«stallæ—¶ï¼Œåœ¨æŒ‡ä»¤åœé¡¿ä¹‹åå‘å°„çš„<strong><em>æ‰€æœ‰æŒ‡ä»¤ä¹Ÿä¼šè¢«åœé¡¿</em></strong>ï¼Œä¹‹å‰å‘å°„çš„æŒ‡ä»¤ä¸ä¼šè¢«åœé¡¿</p>          </div><p><br/></p><h2 id="4-1-å¸¦æœ‰åœé¡¿çš„æµæ°´çº¿æ€§èƒ½"><a href="#4-1-å¸¦æœ‰åœé¡¿çš„æµæ°´çº¿æ€§èƒ½" class="headerlink" title="4.1 å¸¦æœ‰åœé¡¿çš„æµæ°´çº¿æ€§èƒ½"></a>4.1 å¸¦æœ‰åœé¡¿çš„æµæ°´çº¿æ€§èƒ½</h2><p>$<br>æµæ°´åŒ–åŠ é€Ÿæ¯”=\frac{éæµæ°´åŒ–æŒ‡ä»¤å¹³å‡æ‰§è¡Œæ—¶é—´}{æµæ°´åŒ–æŒ‡ä»¤å¹³å‡æ‰§è¡Œæ—¶é—´}$<br>$=\frac{éæµæ°´åŒ–CPI\times éæµæ°´åŒ–æ—¶é’Ÿå‘¨æœŸ}{æµæ°´åŒ–CPI\times æµæ°´åŒ–æ—¶é’Ÿå‘¨æœŸ}$<br>$=\frac{éæµæ°´åŒ–CPI}{æµæ°´åŒ–CPI}\times \frac{éæµæ°´åŒ–æ—¶é’Ÿå‘¨æœŸ}{æµæ°´åŒ–æ—¶é’Ÿå‘¨æœŸ}$</p><p><br/></p><p>æµæ°´åŒ–å¤„ç†å™¨çš„ç†æƒ³CPIå‡ ä¹æ€»æ˜¯ç­‰äº1ï¼Œç®—ä¸Šåœé¡¿<br>$<br>æµæ°´åŒ–CPI=ç†æƒ³CPI+æ¯æ¡æŒ‡ä»¤çš„æµæ°´çº¿åœé¡¿æ—¶é’Ÿå‘¨æœŸ$<br>$=1+æ¯æ¡æŒ‡ä»¤çš„æµæ°´çº¿åœé¡¿æ—¶é—´å‘¨æœŸ$</p><p>æ‰€ä»¥</p><script type="math/tex; mode=display">åŠ é€Ÿæ¯”=\frac{éæµæ°´åŒ–CPI}{1+æ¯æ¡æŒ‡ä»¤çš„æµæ°´çº¿åœé¡¿å‘¨æœŸ}</script><p>å¦‚æœæ‰€æœ‰æŒ‡ä»¤å‘¨æœŸæ•°ç›¸åŒï¼Œç­‰äºæµæ°´çº§æ•°ç›®(æµæ°´çº¿æ·±åº¦)ï¼Œé‚£ä¹ˆéæµæ°´åŒ–CPI=æµæ°´çº¿æ·±åº¦</p><script type="math/tex; mode=display">åŠ é€Ÿæ¯”=\frac{æµæ°´æ·±åº¦}{1+æ¯æ¡æŒ‡ä»¤çš„æµæ°´çº¿åœé¡¿å‘¨æœŸ}</script><div class="note note-warning">            <p><u>æ‰€ä»¥ï¼Œå¦‚æœæ²¡æœ‰æµæ°´çº¿åœé¡¿ï¼ŒåŠ é€Ÿæ¯”=æµæ°´çº¿æ·±åº¦</u></p>          </div><h2 id="4-2-ç»“æ„å†’é™©"><a href="#4-2-ç»“æ„å†’é™©" class="headerlink" title="4.2 ç»“æ„å†’é™©"></a>4.2 ç»“æ„å†’é™©</h2><p>i. ä»€ä¹ˆæ˜¯ç»“æ„å†’é™©</p><blockquote><p>æŒ‡ä»¤é‡å æ‰§è¡Œéœ€è¦å®ç°åŠŸèƒ½å•å…ƒçš„æµæ°´åŒ–å’Œèµ„æºçš„å¤åˆ¶ï¼Œä»¥å…è®¸åœ¨æµæ°´çº¿ä¸­å‡ºç°æ‰€æœ‰å¯èƒ½çš„æŒ‡ä»¤ç»„åˆ</p><p>å¦‚æœç”±äºèµ„æºå†²çªè€Œä¸èƒ½å®¹è®¸æŸäº›æŒ‡ä»¤ç»„åˆï¼Œå°±è¯´å‡ºç°ç»“æ„å†’é™©</p></blockquote><p>ii. è§£å†³æ–¹å¼</p><p>åœ¨å‘ç”Ÿç»“æ„å†’é™©æ—¶ï¼Œä½¿æµæ°´çº¿åœé¡¿ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸ</p><p>åœé¡¿ç§°ä¸º <u>æµæ°´çº¿æ°”æ³¡</u>ï¼Œä»–ä»¬æ¼‚æµ®ç©¿è¿‡æµæ°´çº¿ï¼Œå æœ‰ç©ºé—´ä½†æ˜¯ä¸æ‰§è¡Œæœ‰æ•ˆå·¥ä½œã€‚å¯¼è‡´CPIå¢å¤§</p><p><br/></p><h2 id="4-3-æ•°æ®å†’é™©"><a href="#4-3-æ•°æ®å†’é™©" class="headerlink" title="4.3 æ•°æ®å†’é™©"></a>4.3 æ•°æ®å†’é™©</h2><p>i. æ•°æ®å†’é™©æ˜¯ä»€ä¹ˆ</p><blockquote><p>æœ‰äº›æŒ‡ä»¤ä¾èµ–äºä¹‹å‰æŒ‡ä»¤çš„ç»“æœ</p></blockquote><div class="hljs"><pre><code class="hljs armasm"><span class="hljs-symbol">DADD</span> <span class="hljs-built_in">R1</span>, <span class="hljs-built_in">R2</span>, <span class="hljs-built_in">R3</span><span class="hljs-symbol">DSUB</span> <span class="hljs-built_in">R4</span>, <span class="hljs-built_in">R1</span>, <span class="hljs-built_in">R5</span><span class="hljs-keyword">AND </span> <span class="hljs-built_in">R6</span>, <span class="hljs-built_in">R1</span>, <span class="hljs-built_in">R7</span><span class="hljs-symbol">OR</span>   <span class="hljs-built_in">R8</span>, <span class="hljs-built_in">R1</span>, <span class="hljs-built_in">R9</span><span class="hljs-symbol">XOR</span>  <span class="hljs-built_in">R10</span>,<span class="hljs-built_in">R1</span>, <span class="hljs-built_in">R11</span></code></pre></div><p>DADDåçš„æ‰€æœ‰æŒ‡ä»¤éƒ½ç”¨åˆ°äº†DADDæŒ‡ä»¤çš„ç»“æœR1</p><p>æ‰€ä»¥åœ¨DADDçš„ç»“æœwritebackä¹‹å‰ï¼Œä¸‹é¢çš„æŒ‡ä»¤éƒ½æ˜¯ä¸èƒ½executeçš„</p><center><img src="image-20191013143518878.png" srcset="/img/loading.gif" alt="image-20191013143518878" style="zoom:30%;" /></center><p>ii. è§£å†³æ–¹æ³•</p><p>A. è½¬å‘(forwarding)</p><p>è½¬å‘æ˜¯ä¸€ä¸ªä»€ä¹ˆæ€æƒ³å‘¢ï¼Ÿ </p><blockquote><p>DSUBéœ€è¦DADDçš„ç»“æœx, é‚£ä¹ˆä¸å¦¨DADDåœ¨ç®—å‡ºxä¹‹åï¼Œå°±æŠŠç»“æœç»™åˆ°DSUBéœ€è¦è¿™ä¸ªxçš„ä½ç½®ï¼Œè€Œä¸ç”¨ç­‰åˆ°writeback</p></blockquote><p>è½¬å‘çš„å·¥ä½œæ–¹å¼</p><ol><li>æ¥è‡ªEX/MEMå’ŒMEM/WBæµæ°´çº¿å¯„å­˜å™¨çš„è¾“å…¥æ€»æ˜¯è¢«åé¦ˆå›ALUçš„è¾“å…¥ç«¯</li><li>å¦‚æœè½¬å‘ç¡¬ä»¶æ£€æµ‹åˆ°å‰ä¸€ä¸ªALUæ“ä½œå·²ç»å¯¹å½“å‰ALUæ“ä½œçš„åŸå¯„å­˜å™¨è¿›è¡Œäº†å†™å…¥æ“ä½œï¼Œåˆ™æ§åˆ¶é€»è¾‘é€‰æ‹©è½¬å‘ç»“æœä½œä¸ºALUè¾“å…¥ï¼Œè€Œä¸æ˜¯é€‰æ‹©ä»å¯„å­˜å™¨å †ä¸­è¯»åŒºçš„å€¼</li></ol><center><img src="https://miaochenlu.github.io/picture/å±å¹•å¿«ç…§ 2019-10-13 ä¸‹åˆ2.56.04.png" srcset="/img/loading.gif" style="zoom: 30%;" /></center><p>B, éœ€è¦åœé¡¿çš„æ•°æ®å†’é™©</p><p>å¹¶éæ‰€æœ‰çš„æ½œåœ¨æ•°æ®å†’é™©éƒ½å¯ä»¥é€šè¿‡è½¬å‘å¤„ç†</p><div class="hljs"><pre><code class="hljs armasm"><span class="hljs-symbol">LD</span>   <span class="hljs-built_in">R1</span>, <span class="hljs-number">0</span>(<span class="hljs-built_in">R2</span>)<span class="hljs-symbol">DSUB</span> <span class="hljs-built_in">R4</span>, <span class="hljs-built_in">R1</span>, <span class="hljs-built_in">R5</span><span class="hljs-keyword">AND </span> <span class="hljs-built_in">R6</span>, <span class="hljs-built_in">R1</span>, <span class="hljs-built_in">R7</span><span class="hljs-symbol">OR</span>   <span class="hljs-built_in">R8</span>, <span class="hljs-built_in">R1</span>, <span class="hljs-built_in">R9</span></code></pre></div><center><img src="image-20191013151122898.png" srcset="/img/loading.gif" alt="image-20191013151122898" style="zoom:30%;" /></center><center><img src="image-20191013151314878.png" srcset="/img/loading.gif" alt="image-20191013151314878" style="zoom:25%;" /></center><h3 id="More-about-data-dependences-and-hazards"><a href="#More-about-data-dependences-and-hazards" class="headerlink" title="More about data dependences and hazards"></a>More about data dependences and hazards</h3><h4 id="A-data-dependences"><a href="#A-data-dependences" class="headerlink" title="A. data dependences"></a>A. data dependences</h4><ol><li>æ•°æ®ç›¸å…³[çœŸæ•°æ®ç›¸å…³]</li></ol><p>æŒ‡ä»¤iç”Ÿæˆçš„ç»“æœå¯èƒ½ä¼šè¢«æŒ‡ä»¤jç”¨åˆ°</p><p>æŒ‡ä»¤jæ•°æ®ç›¸å…³äºæŒ‡ä»¤k, æŒ‡ä»¤kæ•°æ®ç›¸å…³äºæŒ‡ä»¤i</p><center><img="https://miaochenlu.github.io/picture/image-20191223102354535.png" alt="image-20191223102354535" style="zoom:50%;" /></center><ol><li>åç§°ç›¸å…³</li></ol><p>å½“ä¸¤æ¡æŒ‡ä»¤ä½¿ç”¨ç›¸åŒçš„å¯„å­˜å™¨æˆ–è€…å­˜å‚¨å™¨ä½ç½®[ç§°ä¸ºåç§°]ï¼Œ ä½†ä¸è¯¥åç§°ç›¸å…³çš„æŒ‡ä»¤ä¹‹é—´å¹¶æ²¡æœ‰æ•°æ®æµåŠ¨æ—¶ï¼Œå°±ä¼šå‘ç”Ÿåç§°ç›¸å…³ã€‚</p><ul><li><p>Anti-dependence: S1 -&gt; S2 </p><p>(i)  S1 executes before S2<br>(ii) S1 reads from a location that is overwritten later by S2</p></li></ul><div class="note note-warning">            <p>WAR</p><ul><li><p>Output dependence: S1 -&gt; S2 </p><p>(i)  S1 executes before S2<br>(ii) S1 and S2 write to the same location </p></li></ul>          </div><p>WAW</p><p>ç”±äºæ²¡æœ‰åœ¨æŒ‡ä»¤ä¹‹é—´ä¼ é€’å€¼, æ‰€ä»¥antidependenceå’Œoutput dependenceåªæ˜¯åç§°ç›¸å…³ï¼Œä¸æ˜¯çœŸæ•°æ®ç›¸å…³ã€‚æ”¹å˜è¿™äº›æŒ‡ä»¤ä¸­ä½¿ç”¨çš„åç§°[å¯„å­˜å™¨å·æˆ–è€…å­˜å‚¨å™¨ä½ç½®],  å°±å¯ä»¥ä½¿è¿™äº›æŒ‡ä»¤ä¸å†å†²çªã€‚</p><h4 id="B-data-hazards"><a href="#B-data-hazards" class="headerlink" title="B. data hazards"></a>B. data hazards</h4><ul><li>RAW</li><li>WAW: å¯¹åº”äºoutput dependenceã€‚ åªæœ‰åœ¨å‰ä¸€æŒ‡ä»¤stallæ—¶å…è®¸åä¸€æŒ‡ä»¤ç»§ç»­æ‰§è¡Œçš„æµæ°´çº¿ä¸­ï¼Œæ‰ä¼šå­˜åœ¨WAWå†’é™©</li><li>WAR: å¯¹åº”äºantidependenceã€‚</li></ul><h2 id="4-4-åˆ†æ”¯å†’é™©"><a href="#4-4-åˆ†æ”¯å†’é™©" class="headerlink" title="4.4 åˆ†æ”¯å†’é™©"></a>4.4 åˆ†æ”¯å†’é™©</h2><h3 id="i-åˆ†æ”¯å†’é™©æ˜¯ä»€ä¹ˆ"><a href="#i-åˆ†æ”¯å†’é™©æ˜¯ä»€ä¹ˆ" class="headerlink" title="i. åˆ†æ”¯å†’é™©æ˜¯ä»€ä¹ˆ"></a>i. åˆ†æ”¯å†’é™©æ˜¯ä»€ä¹ˆ</h3><p>æ‰§è¡Œåˆ†æ”¯æŒ‡ä»¤æ—¶ï¼Œä¿®æ”¹åçš„PCå¯èƒ½ç­‰äºä¹Ÿå¯èƒ½ä¸ç­‰äºPC+4ã€‚</p><p>å¦‚æœåˆ†æ”¯è®²PCæ”¹åˆ°å…¶ç›®æ ‡åœ°å€ï¼Œå°±æ˜¯é€‰ä¸­äº†åˆ†æ”¯ï¼›å¦åˆ™å°±æ˜¯æ²¡æœ‰é€‰ä¸­åˆ†æ”¯ã€‚ä¸€èˆ¬ç­‰åˆ°IDæœ«å°¾ï¼Œå®Œæˆåœ°å€è®¡ç®—å’Œå¯¹æ¯”ä¹‹åæ‰ä¼šæ”¹å˜PC</p><p>é‚£ä¹ˆè¿˜ä¸çŸ¥åˆ°åˆ†æ”¯æŒ‡ä»¤è·³åˆ°å“ªé‡Œï¼ŒpipelineæŒ‰é¡ºåºæ‰§è¡Œçš„æŒ‡ä»¤å¯èƒ½ä¸ä¼šè¢«æ‰§è¡Œåˆ°ã€‚</p><h3 id="ii-è§£å†³æ–¹æ³•"><a href="#ii-è§£å†³æ–¹æ³•" class="headerlink" title="ii. è§£å†³æ–¹æ³•"></a>ii. è§£å†³æ–¹æ³•</h3><p>ä¸€æ—¦åœ¨IDæœŸé—´æ£€æµ‹åˆ°åˆ†æ”¯ï¼Œå°±å¯¹è¯¥åˆ†æ”¯ä¹‹åçš„æŒ‡ä»¤é‡æ–°å–å€¼ã€‚ä½†æ˜¯è¿™æ ·å¤„ç†çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœåˆ†æ”¯æ²¡æœ‰è¢«é€‰ä¸­ï¼Œæ‰€ä»¥äº‹å®ä¸Šå·²ç»æ­£ç¡®æå–äº†æŒ‡ä»¤ï¼Œæ‰€ä»¥IFçš„é‡å¤æ²¡æœ‰å¿…è¦</p><p><img src="image-20191021095111.png" srcset="/img/loading.gif" alt="image-20191021095111" style="zoom:50%;" /></p><p>æ‰€ä»¥ï¼Œå¦‚ä½•é™ä½æµæ°´çº¿åˆ†æ”¯ä»£ä»·ï¼Ÿ</p><p>4ç§ç®€å•çš„ç¼–è¯‘æ—¶æœºåˆ¶</p><h4 id="A-å†»ç»“æˆ–è€…å†²åˆ·æµæ°´çº¿ï¼Œä¿ç•™æˆ–åˆ é™¤åˆ†æ”¯ä¹‹åçš„æ‰€æœ‰æŒ‡ä»¤ï¼Œç›´åˆ°çŸ¥é“åˆ†æ”¯ç›®æ ‡"><a href="#A-å†»ç»“æˆ–è€…å†²åˆ·æµæ°´çº¿ï¼Œä¿ç•™æˆ–åˆ é™¤åˆ†æ”¯ä¹‹åçš„æ‰€æœ‰æŒ‡ä»¤ï¼Œç›´åˆ°çŸ¥é“åˆ†æ”¯ç›®æ ‡" class="headerlink" title="A. å†»ç»“æˆ–è€…å†²åˆ·æµæ°´çº¿ï¼Œä¿ç•™æˆ–åˆ é™¤åˆ†æ”¯ä¹‹åçš„æ‰€æœ‰æŒ‡ä»¤ï¼Œç›´åˆ°çŸ¥é“åˆ†æ”¯ç›®æ ‡"></a>A. å†»ç»“æˆ–è€…å†²åˆ·æµæ°´çº¿ï¼Œä¿ç•™æˆ–åˆ é™¤åˆ†æ”¯ä¹‹åçš„æ‰€æœ‰æŒ‡ä»¤ï¼Œç›´åˆ°çŸ¥é“åˆ†æ”¯ç›®æ ‡</h4><h4 id="B-å°†æ¯ä¸ªåˆ†æ”¯çœ‹ä½œæœªé€‰ä¸­åˆ†æ”¯ï¼Œå…è®¸ç¡¬ä»¶ç»§ç»­æ‰§è¡Œï¼Œå°±å¥½åƒåˆ†æ”¯æœªè¢«æ‰§è¡Œä¸€æ ·ã€‚"><a href="#B-å°†æ¯ä¸ªåˆ†æ”¯çœ‹ä½œæœªé€‰ä¸­åˆ†æ”¯ï¼Œå…è®¸ç¡¬ä»¶ç»§ç»­æ‰§è¡Œï¼Œå°±å¥½åƒåˆ†æ”¯æœªè¢«æ‰§è¡Œä¸€æ ·ã€‚" class="headerlink" title="B. å°†æ¯ä¸ªåˆ†æ”¯çœ‹ä½œæœªé€‰ä¸­åˆ†æ”¯ï¼Œå…è®¸ç¡¬ä»¶ç»§ç»­æ‰§è¡Œï¼Œå°±å¥½åƒåˆ†æ”¯æœªè¢«æ‰§è¡Œä¸€æ ·ã€‚"></a>B. å°†æ¯ä¸ªåˆ†æ”¯çœ‹ä½œæœªé€‰ä¸­åˆ†æ”¯ï¼Œå…è®¸ç¡¬ä»¶ç»§ç»­æ‰§è¡Œï¼Œå°±å¥½åƒåˆ†æ”¯æœªè¢«æ‰§è¡Œä¸€æ ·ã€‚</h4><p>è¿™ç§é¢„æµ‹æœªé€‰ä¸­æœºåˆ¶çš„å®ç°æ–¹å¼æ˜¯ç»§ç»­æå–æŒ‡ä»¤ï¼Œå°±å¥½åƒåˆ†æ”¯æŒ‡ä»¤æ—¶ä¸€æ¡æ­£å¸¸æŒ‡ä»¤ä¸€æ ·ã€‚ä½†æ˜¯ï¼Œå¦‚æœåˆ†æ”¯è¢«é€‰ä¸­ï¼Œå°±è¦å°†å·²ç»æå–çš„æŒ‡ä»¤è½¬åŒ–ä¸ºç©ºæ“ä½œï¼Œé‡æ–°å¼€å§‹åœ¨ç›®æ ‡åœ°å€æå–æŒ‡ä»¤ã€‚</p><p>è¿™ä¸€æœºåˆ¶çš„å¤æ‚æ€§åœ¨äºè¦çŸ¥é“å¤„ç†å™¨å¯èƒ½ä½•æ—¶è¢«æŒ‡ä»¤æ”¹å˜ï¼Œä»¥åŠå¦‚ä½•æ’¤é”€è¿™ç§æ”¹å˜</p><center><img src="image-20191014112116582.png" srcset="/img/loading.gif" alt="image-20191014112116582" style="zoom:35%;" /></center><h4 id="C-å°†æ‰€æœ‰åˆ†æ”¯éƒ½çœ‹ä½œé€‰ä¸­åˆ†æ”¯"><a href="#C-å°†æ‰€æœ‰åˆ†æ”¯éƒ½çœ‹ä½œé€‰ä¸­åˆ†æ”¯" class="headerlink" title="C. å°†æ‰€æœ‰åˆ†æ”¯éƒ½çœ‹ä½œé€‰ä¸­åˆ†æ”¯"></a>C. å°†æ‰€æœ‰åˆ†æ”¯éƒ½çœ‹ä½œé€‰ä¸­åˆ†æ”¯</h4><p>åªè¦å¯¹åˆ†æ”¯æŒ‡ä»¤è¿›è¡Œäº†è¯‘ç å¹¶ä¸”è®¡ç®—äº†ç›®æ ‡åœ°å€ï¼Œå°±å‡å®šè¯¥åˆ†æ”¯è¢«é€‰ä¸­ï¼Œå¼€å§‹åœ¨ç›®æ ‡ä½ç½®æå–å’Œæ‰§è¡Œã€‚</p><p>ä½†æ˜¯åœ¨æˆ‘ä»¬çš„äº”çº§æµæ°´çº¿ä¸­ï¼Œä¸å¯èƒ½åœ¨çŸ¥é“åˆ†æ”¯è¾“å‡ºç»“æœä¹‹å‰çŸ¥é“ç›®æ ‡åœ°å€ï¼Œæ‰€ä»¥è¿™å¯¹æˆ‘ä»¬æ²¡ä»€ä¹ˆç”¨ã€‚</p><h4 id="D-å»¶è¿Ÿåˆ†æ”¯"><a href="#D-å»¶è¿Ÿåˆ†æ”¯" class="headerlink" title="D. å»¶è¿Ÿåˆ†æ”¯"></a>D. å»¶è¿Ÿåˆ†æ”¯</h4><blockquote><p>åˆ†æ”¯æŒ‡ä»¤</p><p>ä¾åºåç»­æŒ‡ä»¤[ä½äºdelay slots]</p><p>é€‰ä¸­æ—¶çš„åˆ†æ”¯æŒ‡ä»¤</p></blockquote><p>è·å¾—ç¼–è¯‘å™¨æ”¯æŒï¼Œç¼–è¯‘å™¨è®©åç»­æŒ‡ä»¤æœ‰æ•ˆå¹¶ä¸”å¯ç”¨</p><center><img src="image-20191021095901298.png" srcset="/img/loading.gif" alt="image-20191021095901298" style="zoom: 40%;" ></center><p>å»¶è¿Ÿè°ƒåº¦æœ‰å±€é™æ€§ï¼Œè¿™ä¸ªå±€é™æ€§æ˜¯å› ä¸º</p><blockquote><ol><li>å¯ä»¥æ’åœ¨å»¶è¿Ÿæ—¶éš™[delay slots]ä¸­çš„æŒ‡ä»¤æœ‰é™åˆ¶</li><li>ç¼–è¯‘æ—¶é¢„æµ‹ä¸€ä¸ªåˆ†æ”¯æ˜¯å¦å¯èƒ½è¢«é€‰ä¸­çš„èƒ½åŠ›æœ‰é™ã€‚ä¸ºäº†æé«˜ç¼–è¯‘å™¨å¡«å……delay slotsçš„èƒ½åŠ›ï¼Œå¤§å¤šæ•°å…·æœ‰æ¡ä»¶åˆ†æ”¯çš„å¤„ç†å™¨å¼•å…¥äº†<em>canceling</em> or <em>nullifying</em> branch . åœ¨å–æ¶ˆåˆ†æ”¯ä¸­ï¼ŒæŒ‡ä»¤åŒ…å«äº†é¢„æµ‹åˆ†æ”¯çš„æ–¹å‘ã€‚å½“åˆ†æ”¯è¡Œä¸ºå’Œé¢„æœŸä¸€è‡´æ—¶ï¼Œåˆ†æ”¯å»¶è¿Ÿæ—¶éš™ä¸­çš„æŒ‡ä»¤å°±æƒ³æ™®é€šçš„å»¶è¿Ÿåˆ†æ”¯ä¸€æ ·æ‰§è¡Œã€‚é¢„æµ‹é”™è¯¯æ—¶ï¼Œåˆ†æ”¯å»¶è¿Ÿæ—¶éš™ä¸­çš„æŒ‡ä»¤è½¬ä¸ºç©ºæ“ä½œã€‚</li></ol></blockquote><p>çœ‹ä¸€ä¸‹è¿™äº›ä¸åŒçš„è§£å†³æ–¹æ³•æ•ˆç‡æœ‰ä»€ä¹ˆå·®åˆ«</p><center><img src="image-20191021101747938.png" srcset="/img/loading.gif" alt="image-20191021101747938" style="zoom:50%;" ></center><p>è€ƒè™‘flush pipeline</p><p>unconditional branchæŒ‡çš„æ˜¯åƒj, jalè¿™ç§çš„ï¼Œè¿™äº›ç›´åˆ°Decodeæ‰ä¼šçŸ¥é“åˆ†æ”¯ç›®æ ‡ï¼Œæ‰€ä»¥penalty=2</p><p>å…¶ä»–conditionalï¼Œåƒbeqç­‰ï¼Œéœ€è¦EXEæ‰çŸ¥é“æ˜¯å¦è¦è·³è½¬ï¼Œæ‰€ä»¥penalty=3</p><p>è¿™æ ·ï¼Œè€ƒè™‘predicted untaken</p><p>unconditional æŒ‡ä»¤è¢«é¢„æµ‹ä¸æ‰§è¡Œï¼Œä½†æ˜¯ä¸€å®šä¼šæ‰§è¡Œï¼Œä»£ä»·æ˜¯2</p><p>conditionalçš„å¦‚æœæ²¡æœ‰æ‰§è¡Œï¼Œå’Œé¢„æµ‹ä¸€è‡´ï¼Œä»£ä»·ä¸º0ã€‚å¦‚æœå’Œé¢„æµ‹ä¸ä¸€è‡´ï¼Œä»£ä»·ä¸º3</p><p>è€ƒè™‘predicted taken</p><p>å¦‚æœå’Œé¢„æµ‹ä¸€è‡´ã€‚é‚£ä¹ˆåœ¨BranchæŒ‡ä»¤çš„EXEé˜¶æ®µæ‰èƒ½çŸ¥é“åˆ†æ”¯ç›®æ ‡ï¼Œæ‰€ä»¥è¦stall 2ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰èƒ½è·³è½¬</p><p><br></p><p>å½“æµæ°´çº¿è¶Šæ¥è¶Šæ·±ï¼Œåˆ†æ”¯çš„æ½œåœ¨ä»£ä»·å¢åŠ ï¼Œä½¿ç”¨å»¶è¿Ÿåˆ†æ”¯æ˜¯ä¸å¤Ÿçš„ã€‚è¦æ›´ç§¯æåœ°å»é¢„æµ‹åˆ†æ”¯ã€‚é™æ€æœºåˆ¶[ä¾èµ–ç¼–è¯‘æ—¶ä¿¡æ¯ï¼Œæˆæœ¬ä½]ï¼ŒåŠ¨æ€é¢„æµ‹[ä¾æ®ç¨‹åºç‰¹æ€§]</p><h4 id="i-é™æ€åˆ†æ”¯é¢„æµ‹"><a href="#i-é™æ€åˆ†æ”¯é¢„æµ‹" class="headerlink" title="i. é™æ€åˆ†æ”¯é¢„æµ‹"></a>i. é™æ€åˆ†æ”¯é¢„æµ‹</h4><p>äº‹å…ˆæ”¶é›†æ•°æ®ï¼Œæ ¹æ®æ•°æ®æ¥é¢„æµ‹åˆ†æ”¯</p><h4 id="ii-åŠ¨æ€åˆ†æ”¯é¢„æµ‹"><a href="#ii-åŠ¨æ€åˆ†æ”¯é¢„æµ‹" class="headerlink" title="ii. åŠ¨æ€åˆ†æ”¯é¢„æµ‹"></a>ii. åŠ¨æ€åˆ†æ”¯é¢„æµ‹</h4><p>ä½¿ç”¨åˆ†æ”¯é¢„æµ‹ç¼“å†²åŒº[Branch-Prediction Buffer].</p><p>è¿™æ˜¯ä¸€ä¸ªcacheï¼Œåˆ†æ”¯æŒ‡ä»¤åœ°å€çš„ä½ä½éƒ¨åˆ†ç”¨æ¥ç´¢å¼•ï¼Œæ‰€æœ‰è®¿é—®éƒ½ä¼šhitã€‚</p><p>è¿™ä¸ªå­˜å‚¨å™¨åŒ…å«ä¸€ä¸ªbitæ¥æ ‡ç¤ºè¿™ä¸ªåˆ†æ”¯æœ€è¿‘æ˜¯å¦è¢«é€‰ä¸­ã€‚è¿™ä¸ªbitå¯ä»¥ç”¨æ¥ä¸ºæ¥ä¸‹æ¥çš„è¿™æ¡åˆ†æ”¯æä¾›æŒ‡å¯¼ã€‚å¦‚æœé¢„æµ‹ç»“æœå’Œbitä¸ä¸€è‡´ï¼Œåè½¬bit; ä¸€è‡´åˆ™ä¸åè½¬</p><p>ä½†æ˜¯åªæœ‰1bitæ¥æ ‡ç¤ºä¼šå­˜åœ¨ä¸€ç‚¹é—®é¢˜ï¼Œæ¯”å¦‚åˆ†æ”¯ä¸€ç›´è¢«é€‰ä¸­ï¼Œä½†æ˜¯æŸä¸€æ¬¡æ²¡æœ‰è¢«é€‰ä¸­ï¼Œbitä¹Ÿä¼šåè½¬ï¼Œè¿™ç§åè½¬å…¶å®æ²¡æœ‰å¿…è¦ï¼Œä¼šå½±å“æ•ˆç‡ã€‚</p><p>æ‰€ä»¥è¿™é‡Œæå‡ºäº†2ä½é¢„æµ‹æœºåˆ¶ã€‚</p><p>ä¸¤ä½é¢„æµ‹æœºåˆ¶ï¼Œé¢„æµ‹å¿…é¡»è¿ç»­é”™è¿‡ä¸¤æ¬¡æ‰ä¼šè¿›è¡Œä¿®æ”¹ã€‚</p><center><img src="image-20191021103246990.png" srcset="/img/loading.gif" alt="image-20191021103246990" style="zoom:50%;" ></center><h1 id="5-å¦‚ä½•å®ç°æµæ°´çº¿"><a href="#5-å¦‚ä½•å®ç°æµæ°´çº¿" class="headerlink" title="5. å¦‚ä½•å®ç°æµæ°´çº¿"></a>5. å¦‚ä½•å®ç°æµæ°´çº¿</h1><p>MIPS CPUå¤šå‘¨æœŸå®ç°</p><center><img src="image-20191021105802697.png" srcset="/img/loading.gif" alt="image-20191021105802697" style="zoom:45%;" ></center><h2 id="Basic-Pipeline"><a href="#Basic-Pipeline" class="headerlink" title="Basic Pipeline"></a>Basic Pipeline</h2><center><img src="image-20191021110018403.png" srcset="/img/loading.gif" alt="image-20191021110018403" style="zoom:45%;" ></center><h3 id="i-IF"><a href="#i-IF" class="headerlink" title="i. IF"></a>i. IF</h3><div class="hljs"><pre><code class="hljs cpp">IF/ID.IR = Mem[PC];<span class="hljs-comment">//å–æŒ‡ä»¤</span><span class="hljs-keyword">if</span>((EX/MEM.opcode == branch) &amp;&amp; EX/MEM.cond) &#123;  IF/IR.NPC = EX/MEM.ALUOutput;  PC = EX/MEM.ALUOutput;&#125; <span class="hljs-keyword">else</span> &#123;  IF/IR.NPC = PC + <span class="hljs-number">4</span>;  PC = PC + <span class="hljs-number">4</span>;&#125;</code></pre></div><h3 id="ii-ID"><a href="#ii-ID" class="headerlink" title="ii. ID"></a>ii. ID</h3><div class="hljs"><pre><code class="hljs cpp">ID/EX.A = Regs[IF/ID.IR[rs]];ID/EX.B = Regs[IF/ID.IR[rt]];ID/EX.NPC = IF/ID.NPC;ID/EX.IR = IF/ID.IR;ID/EX.Imm = sign-extend(IF/ID.IR[immediate]);</code></pre></div><h3 id="iii-EX"><a href="#iii-EX" class="headerlink" title="iii. EX"></a>iii. EX</h3><h4 id="A-ALU-EX"><a href="#A-ALU-EX" class="headerlink" title="A. ALU EX"></a>A. ALU EX</h4><div class="hljs"><pre><code class="hljs cpp">EX/MEM.IR = ID/EX.IR;æ‰§è¡Œä»¥ä¸‹ä¹‹ä¸€<span class="hljs-number">1.</span> EX/MEM.ALUOutput = ID/EX.A func ID/EX.B;<span class="hljs-number">2.</span> EX/MEM.ALUOutput = ID/EX.A op ID/EX.Imm</code></pre></div><h4 id="B-Load-Store-EX"><a href="#B-Load-Store-EX" class="headerlink" title="B. Load Store EX"></a>B. Load Store EX</h4><div class="hljs"><pre><code class="hljs cpp">EX/MEM.IR to ID/EX.IR;EX/MEM.ALUOutput = ID/EX.A + ID/EX.imm;EX/MEM.B = ID/EX.B;</code></pre></div><h4 id="C-Branch-EX"><a href="#C-Branch-EX" class="headerlink" title="C. Branch EX"></a>C. Branch EX</h4><div class="hljs"><pre><code class="hljs cpp">EX/MEM.ALUOutput = ID/EX.NPC + (ID/EX.Imm &lt;&lt; <span class="hljs-number">2</span>);EX/MEM.cond = (ID/EX.A == <span class="hljs-number">0</span>);</code></pre></div><h3 id="iv-MEM"><a href="#iv-MEM" class="headerlink" title="iv. MEM"></a>iv. MEM</h3><h4 id="A-ALU-MEM"><a href="#A-ALU-MEM" class="headerlink" title="A. ALU MEM"></a>A. ALU MEM</h4><div class="hljs"><pre><code class="hljs cpp">MEM/WB.IR = EX/MEM.IR;MEM/WB.ALUOutput = EX/MEM.ALUOutput;</code></pre></div><h4 id="B-Load-Store-MEM"><a href="#B-Load-Store-MEM" class="headerlink" title="B. Load Store MEM"></a>B. Load Store MEM</h4><div class="hljs"><pre><code class="hljs cpp">MEM/WB.OR = EX/MEM.IR;<span class="hljs-number">1.</span> MEM/WB.LMD = Mem[EX/MEM.ALUOutput];<span class="hljs-number">2.</span> Mem[EX/MEM.ALUOutput] = EX/MEM.B;</code></pre></div><h3 id="v-WB"><a href="#v-WB" class="headerlink" title="v. WB"></a>v. WB</h3><h4 id="A-ALU-WB"><a href="#A-ALU-WB" class="headerlink" title="A. ALU WB"></a>A. ALU WB</h4><div class="hljs"><pre><code class="hljs cpp"><span class="hljs-number">1.</span> Regs[MEM/WB.IR[rd]] = MEM/WB.ALUOutput;<span class="hljs-number">2.</span> Resg[MEM/WB.IR[rt]] = MEM/WB.ALUOutput;</code></pre></div><h4 id="B-Load-Store-WB"><a href="#B-Load-Store-WB" class="headerlink" title="B. Load Store WB"></a>B. Load Store WB</h4><div class="hljs"><pre><code class="hljs cpp">For load onlyRegs[MEM/WB.IR[rt]] = MEM/WB.LMD;</code></pre></div><h2 id="Control-the-Pipeline"><a href="#Control-the-Pipeline" class="headerlink" title="Control the Pipeline"></a>Control the Pipeline</h2><p>instruction issue:</p><blockquote><p>ä¸€æ¡æŒ‡ä»¤ä»IDç§»å…¥EXçš„è¿‡ç¨‹</p></blockquote><p>å¯¹äºæ•´æ•°æµæ°´çº¿ï¼Œæ‰€æœ‰æ•°æ®å†’é™©éƒ½å¯ä»¥åœ¨IDè¿›è¡Œæ£€æŸ¥ã€‚</p><p>å¦‚æœå­˜åœ¨æ•°æ®å†’é™©ï¼Œè¿™ä¸ªæŒ‡ä»¤å°†ä¼šåœ¨issueä¹‹å‰åœé¡¿ã€‚</p><p>åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šåœ¨IDæœŸé—´éœ€è¦å“ªç§è½¬å‘ï¼Œå¹¶è®¾å®šé€‚å½“çš„æ§åˆ¶ã€‚</p><center><img src="image-20191021115323894.png" srcset="/img/loading.gif" alt="image-20191021115323894" style="zoom:35%;" /></center><p>pipeline overhead</p><p>due to stage imbalance, pipeline register setup</p><h3 id="Deal-with-forwarding"><a href="#Deal-with-forwarding" class="headerlink" title="Deal with forwarding"></a>Deal with forwarding</h3><center><img="https://miaochenlu.github.io/picture/image-20191222210658336.png" alt="image-20191222210658336" style="zoom:50%;" /></center><h1 id="6-æ‰©å±•MIPSæµæ°´çº¿ï¼Œä»¥å¤„ç†å¤šå‘¨æœŸæ“ä½œ"><a href="#6-æ‰©å±•MIPSæµæ°´çº¿ï¼Œä»¥å¤„ç†å¤šå‘¨æœŸæ“ä½œ" class="headerlink" title="6. æ‰©å±•MIPSæµæ°´çº¿ï¼Œä»¥å¤„ç†å¤šå‘¨æœŸæ“ä½œ"></a>6. æ‰©å±•MIPSæµæ°´çº¿ï¼Œä»¥å¤„ç†å¤šå‘¨æœŸæ“ä½œ</h1><p>æ‰©å±•mipsæµæ°´çº¿ï¼Œä»¥å¤„ç†æµ®ç‚¹è¿ç®—</p><p>æµ®ç‚¹è¿ç®—çš„é—®é¢˜</p><blockquote><p>è¦æ±‚æ‰€æœ‰æµ®ç‚¹è¿ç®—åœ¨1ä¸ªå‘¨æœŸå†…å®Œæˆæ—¶ä¸ç°å®çš„ï¼Œç”šè‡³2ä¸ªæ—¶é’Ÿå‘¨æœŸéƒ½ä¸å¤ªå¯èƒ½</p><p>å¦‚æœæƒ³è¦åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆï¼Œå°±å¿…é¡»é™ä½clock rate, æˆ–è€…å¢åŠ å¤§é‡çš„é€»è¾‘å•å…ƒã€‚</p><p>æ‰€ä»¥</p><ul><li>ä¸ºäº†å®Œæˆæ“ä½œï¼ŒEXå‘¨æœŸå¯èƒ½è¦æ ¹æ®éœ€è¦é‡å¤å¤šæ¬¡</li><li>å¯èƒ½å­˜åœ¨å¤šä¸ªæµ®ç‚¹åŠŸèƒ½å•å…ƒï¼Œå¦‚æœå¾…å‘å°„æŒ‡ä»¤ä¼šå¯¼è‡´æµ®ç‚¹æ‰€ç”¨åŠŸèƒ½å•å…ƒçš„ç»“æ„å†’é™©ï¼Œæˆ–è€…æ•°æ®å†’é™©ï¼Œå°±ä¼šå‡ºç°åœé¡¿ã€‚</li></ul></blockquote><p>4ä¸ªç‹¬ç«‹çš„åŠŸèƒ½å•å…ƒ</p><ul><li>ä¸»æ•´æ•°å•å…ƒï¼Œå¤„ç†load, store, æ•´æ•°ALU operation, branch</li><li>æµ®ç‚¹ä¸æ•´æ•°ä¹˜æ³•å™¨</li><li>æµ®ç‚¹åŠ æ³•å™¨ï¼Œå¤„ç†æµ®ç‚¹åŠ ã€å‡å’Œè½¬æ¢</li><li>æµ®ç‚¹å’Œæ•´å‹é™¤æ³•å™¨</li></ul><p>å‡å®šè¿™äº›åŠŸèƒ½å•å…ƒçš„æ‰§è¡Œçº§æ²¡æœ‰å®ç°æµæ°´åŒ–</p><center><img="https://miaochenlu.github.io/picture/image-20191111101801471.png" alt="image-20191111101801471" style="zoom:50%;" /></center><p>ä¸¤ä¸ªæŒ‡æ ‡</p><ul><li><p>latency</p><p>the number of intervening cycles between an instruction that produces a result and an instruction that uses the result. ä¸€æ¡æŒ‡ä»¤äº§ç”Ÿç»“æœåï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤ç­‰å¾…å¤šä¹…æ‰å¯ä»¥ä½¿ç”¨è¿™ä¸ªç»“æœã€‚æ³¨æ„ï¼Œæ˜¯ç­‰å¾…ã€‚</p><blockquote><p>Essentially, pipeline <strong>latency</strong> is 1 cycle less than the depth of the execution pipeline, which is the number of stages from the <strong>EX stage</strong> to the stage that produces the result </p></blockquote></li><li><p>initiation/repeat interval</p><p>åŒä¸€ç±»å‹çš„æŒ‡ä»¤æ‰§è¡Œä¹‹é—´å¿…é¡»é—´éš”çš„å‘¨æœŸæ•°ã€‚æ¯”å¦‚ï¼Œinteger ALUçš„ä¸€æ¡æŒ‡ä»¤å¼€å§‹æ‰§è¡Œï¼Œä¸‹ä¸€æ¡integer ALUæŒ‡ä»¤éœ€è¦åœ¨ä»–åé¢ä¸€ä¸ªå‘¨æœŸæ‰èƒ½å¼€å§‹æ‰§è¡Œ</p></li></ul><center><img="https://miaochenlu.github.io/picture/IMG_C3E4F59B24C4-1.png" alt="IMG_C3E4F59B24C4-1" style="zoom:50%;" /></center><p><img src="IMG_C3E4F59B24C4.png" srcset="/img/loading.gif" alt="IMG_C3E4F59B24C4-1" style="zoom:50%;" /></p><p>instruction issue: ä»IDåˆ°EXçš„é˜¶æ®µ</p><p><center><img="image-20191111103138887.png" alt="image-20191111103138887" style="zoom:50%;" /></center></p><p><center><img="image-20191111104720076.png" alt="image-20191111104720076" style="zoom:50%;" /></center></p><table>  <tr>    <td>      <img src="image-20191111103409484.png" srcset="/img/loading.gif" alt="image-20191111103409484" style="zoom:50%;" />    </td>    <td>      <img src="image-20191111103455864.png" srcset="/img/loading.gif" alt="image-20191111103455864" style="zoom:50%;" />    </td>  </tr></table><table>  <tr>    <td>      <img src="image-20191111103637824.png" srcset="/img/loading.gif" alt="image-20191111103637824" style="zoom:50%;" />    </td>    <td>      <img src="image-20191111104058863.png" srcset="/img/loading.gif" alt="image-20191111104058863" style="zoom:50%;" />    </td>  </tr></table>]]></content>
    
    
    <categories>
      
      <category>Computer Architecture</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer Architecture</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Computer network--ç‰©ç†å±‚</title>
    <link href="/2019/09/17/ComputerNetwork/PhysicalLayer/"/>
    <url>/2019/09/17/ComputerNetwork/PhysicalLayer/</url>
    
    <content type="html"><![CDATA[<h1 id="1-æ•°æ®é€šä¿¡çš„ç†è®ºåŸºç¡€"><a href="#1-æ•°æ®é€šä¿¡çš„ç†è®ºåŸºç¡€" class="headerlink" title="1 æ•°æ®é€šä¿¡çš„ç†è®ºåŸºç¡€"></a>1 æ•°æ®é€šä¿¡çš„ç†è®ºåŸºç¡€</h1><h2 id="1-1å‚…é‡Œå¶åˆ†æ"><a href="#1-1å‚…é‡Œå¶åˆ†æ" class="headerlink" title="1.1å‚…é‡Œå¶åˆ†æ"></a>1.1å‚…é‡Œå¶åˆ†æ</h2><p>ä»»ä½•ä¸€ä¸ªè¡Œä¸ºåˆç†å‘¨æœŸä¸ºTçš„å‡½æ•°g(t)ï¼Œéƒ½å¯ä»¥è¡¨ç¤ºæˆæ­£å¼¦å‡½æ•°å’Œä½™å¼¦å‡½æ•°ç»„æˆçš„æ— ç©·çº§æ•°</p><script type="math/tex; mode=display">g(t)=\frac{1}{2}c+\sum_{n=1}^{\infty}a_nsin(2\pi nft)+\sum_{n=1}^{\infty}b_ncos(2\pi nft)</script><p>å…¶ä¸­$f=\frac{1}{T}$æ˜¯åŸºæœ¬é¢‘ç‡ï¼Œ$a_n$å’Œ$b_n$æ˜¯næ¬¡è°æ³¢çš„æ­£å¼¦æŒ¯å¹…å’Œä½™å¼¦æŒ¯å¹…,cæ˜¯å¸¸æ•°</p><p><br/></p><h2 id="1-2-å¸¦å®½æœ‰é™çš„ä¿¡å·"><a href="#1-2-å¸¦å®½æœ‰é™çš„ä¿¡å·" class="headerlink" title="1.2 å¸¦å®½æœ‰é™çš„ä¿¡å·"></a>1.2 å¸¦å®½æœ‰é™çš„ä¿¡å·</h2><p>æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªç‰¹æ®Šçš„ä¾‹å­ï¼š</p><p>ä¼ è¾“ASCIIå­—ç¬¦b,è¿™ä¸ªå­—ç¬¦è¢«ç¼–ç æˆä¸€ä¸ª8æ¯”ç‰¹é•¿çš„å­—èŠ‚ï¼Œ01100010</p><p>å¯ä»¥å¾—åˆ°ç³»æ•°</p><center><img src="image-20190917211816031.png" srcset="/img/loading.gif" alt="image-20190917211816031" style="zoom:50%;" /></center><blockquote><p> æ‰€æœ‰ä¼ è¾“è®¾æ–½åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­éƒ½è¦æŸå¤±ä¸€äº›èƒ½é‡    </p><p> å¦‚æœæ‰€æœ‰å‚…é‡Œå¶åˆ†é‡éƒ½ç­‰é‡è¡°å‡ï¼Œåˆ™ç»“æœä¿¡å·å°†ä¼šåœ¨æŒ¯å¹…ä¸Šæœ‰æ‰€å‡å°ï¼Œä½†å½¢çŠ¶ä¸ä¼šå˜ã€‚  </p><p>ä½†æ˜¯ï¼Œå®é™…æƒ…å†µæ˜¯ï¼Œæ‰€æœ‰ä¼ è¾“è®¾æ–½å¯¹äºä¸åŒå‚…é‡Œå¶åˆ†é‡çš„è¡°å‡ç¨‹åº¦å¹¶ä¸ç›¸åŒï¼Œè¿™ä¼šå¯¼è‡´æ¥æ”¶ç«¯æ¥æ”¶åˆ°çš„ä¿¡å·å‘ç”Ÿ<strong>å˜å½¢</strong>ã€‚  </p><p>ä¸€èˆ¬å¯¹å¯¼çº¿æ¥è¯´ï¼Œåœ¨[0,$f_c$]çš„é¢‘ç‡èŒƒå›´ï¼ŒæŒ¯å¹…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸å›è¡°å‡ï¼Œè€Œåœ¨$f_c$è¿™ä¸ªæˆªæ­¢é¢‘ç‡ä¹‹ä¸Šçš„æ‰€æœ‰é¢‘ç‡çš„æŒ¯å¹…éƒ½ä¼šæœ‰ä¸åŒç¨‹åº¦çš„å‡å¼±ã€‚    </p><p>è¿™ä¸ªåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æŒ¯å¹…ä¸å›æ˜æ˜¾å‡å¼±çš„é¢‘ç‡çš„å®½åº¦å°±ç§°ä¸º<strong>å¸¦å®½</strong>   </p><p>ä½†æ˜¯æˆªæ­¢é¢‘ç‡ä¸æ˜¯ä¸€ä¸ªçªå˜çš„é‡ï¼Œä¸æ˜¯è¯´åˆ°è¾¾æŸä¸ªé˜ˆå€¼ï¼ŒæŒ¯å¹…å°±çªç„¶å‡å¼±äº†ï¼Œæ‰€ä»¥é€šå¸¸å¼•ç”¨çš„å¸¦å®½æ˜¯æŒ‡ä»0åˆ°æ¥æ”¶èƒ½é‡ä¿ç•™ä¸€åŠåˆ°é‚£ä¸ªé¢‘ç‡ä½ç½®</p></blockquote><p>å¸¦å®½æ˜¯ä¼ è¾“ä»‹è´¨çš„ä¸€ç§ç‰©ç†ç‰¹æ€§ï¼Œå–å†³äºä»‹è´¨  </p><p>ä¸€èˆ¬å°†ä»0åˆ°æŸä¸ªæœ€å¤§é¢‘ç‡çš„ä¿¡å·ç§°ä¸º<strong>åŸºå¸¦ä¿¡å·</strong>ï¼Œå°†è¢«æ¬ç§»å¹¶å ç”¨æŸä¸ªæ›´å¤§é¢‘ç‡èŒƒå›´çš„ä¿¡å·ç§°ä¸º<strong>é€šå¸¦ä¿¡å·</strong>  </p><center><img src="image-20190917211449784.png" srcset="/img/loading.gif" alt="image-20190917211449784" style="zoom: 67%;" /></center><p><br/></p><h4 id="å¸¦å®½å¾ˆä½ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"><a href="#å¸¦å®½å¾ˆä½ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¸¦å®½å¾ˆä½ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"></a>å¸¦å®½å¾ˆä½ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h4><p>å¦‚æœå¸¦å®½å¾ˆä½ï¼Œåˆ™åªæœ‰å‡ ä¸ªæœ€ä½é¢‘ç‡æ‰èƒ½è¢«ä¼ è¾“</p><p>å‡è®¾æ¯”ç‰¹ç‡ä¸º$b$ bit/s[æ¯ç§’å‘é€8ä¸ªæ¯”ç‰¹]</p><p>åˆ™å‘é€8ä¸ªæ¯”ç‰¹æ‰€éœ€è¦çš„æ—¶é—´æ˜¯$\frac{8}{b}$ç§’</p><p>æ‰€ä»¥ç¬¬ä¸€ä¸ªè°æ³¢é¢‘ç‡æ˜¯$\frac{b}{8}$èµ«å…¹</p><p>å¦‚æœæˆªæ­¢é¢‘ç‡æ˜¯3000hz,åˆ™å¯ä»¥é€šè¿‡çš„æœ€é«˜è°æ³¢æ•°ä¸º</p><script type="math/tex; mode=display">\frac{3000}{\frac{8}{b}}</script><center><img src="image-20190917213738345.png" srcset="/img/loading.gif" alt="image-20190917213738345" style="zoom:50%;" /></center><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœèƒ½å‘é€çš„é¢‘ç‡æ•°å¾ˆå°‘ï¼Œæˆ‘ä»¬å°±æ²¡åŠæ³•ç²¾ç¡®è¡¨ç¤ºå‘¨æœŸå‡½æ•°</p><p><br/></p><h2 id="1-3-ä¿¡é“çš„æœ€å¤§æ•°æ®é€Ÿç‡"><a href="#1-3-ä¿¡é“çš„æœ€å¤§æ•°æ®é€Ÿç‡" class="headerlink" title="1.3 ä¿¡é“çš„æœ€å¤§æ•°æ®é€Ÿç‡"></a>1.3 ä¿¡é“çš„æœ€å¤§æ•°æ®é€Ÿç‡</h2><p><a href="https://blog.csdn.net/supreme42/article/details/7734763" target="_blank" rel="noopener">ä¸€äº›æ¦‚å¿µ</a></p><p>æ³¢ç‰¹ç‡[baud rate/ symbol rate]</p><blockquote><p>æ³¢ç‰¹ç‡æŒ‡çš„æ˜¯ä¿¡å·æ¯ç§’é’Ÿç”µå¹³å˜åŒ–çš„æ¬¡æ•°ï¼Œå•ä½æ˜¯<em>Hz</em></p></blockquote><p>æ¯”ç‰¹ç‡</p><blockquote><p>ä¿¡å·æ¯ç§’é’Ÿä¼ è¾“çš„æ•°æ®çš„ä½æ•°ã€‚è®¡ç®—æœºä¸­æ•°æ®éƒ½æ˜¯ç”¨<em>0</em>ï¼Œ<em>1</em>è¡¨ç¤ºçš„ï¼Œæ‰€ä»¥æ¯”ç‰¹ç‡ä¹Ÿå°±æ˜¯æ¯ç§’é’Ÿä¼ è¾“<em>0</em>å’Œ<em>1</em>çš„ä¸ªæ•°ï¼Œå•ä½æ˜¯<em>bps</em>[<em>bit per second</em>]</p></blockquote><p>æ³¢ç‰¹ç‡å’Œæ¯”ç‰¹ç‡çš„å…³ç³»</p><blockquote><p>æˆ‘ä»¬å¯ä»¥å‡è®¾ä¸€ä¸ªä¿¡å·åªæœ‰ä¸¤ä¸ªç”µå¹³ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å¯ä»¥æŠŠä½ç”µå¹³ç†è§£ä¸º<em>â€œ0â€</em>ï¼Œé«˜ç”µå¹³ç†è§£ä¸º<em>â€œ1â€</em>ï¼Œè¿™æ ·æ¯ç§’é’Ÿç”µå¹³å˜åŒ–çš„æ¬¡æ•°ä¹Ÿå°±æ˜¯ä¼ è¾“çš„<em>0</em>ï¼Œ<em>1</em>ä¸ªæ•°äº†ï¼Œå³æ¯”ç‰¹ç‡ <em>=</em> æ³¢ç‰¹ç‡ã€‚</p><p>ä½†æ˜¯æœ‰äº›ä¿¡å·å¯èƒ½ä¸æ­¢ä¸¤ä¸ªç”µå¹³ï¼Œæ¯”å¦‚ä¸€ä¸ªå››ç”µå¹³çš„ä¿¡å·ï¼Œé‚£ä¹ˆæ¯ä¸ªç”µå¹³å°±å¯ä»¥è¢«ç†è§£æˆ<em>â€œ00â€</em>ï¼Œ<em>â€œ01â€</em>ï¼Œ<em>â€œ10â€</em>ï¼Œ<em>â€œ11â€</em>ï¼Œè¿™æ ·æ¯æ¬¡ç”µå¹³å˜åŒ–å°±èƒ½ä¼ è¾“ä¸¤ä½çš„æ•°æ®äº†ï¼Œå³æ¯”ç‰¹ç‡ <em>= 2 Ã—</em> æ³¢ç‰¹ç‡ã€‚</p><p>ä¸€èˆ¬çš„ï¼Œ$bit\,rate = buad\,rate Ã— log_2V$ï¼Œè¿™é‡ŒVå°±æ˜¯ä¿¡å·ç”µå¹³çš„ä¸ªæ•°ã€‚</p></blockquote><p>Nyquistè¯æ˜ï¼šå¦‚æœä¸€ä¸ªä»»æ„ä¿¡å·é€šè¿‡ä¸€ä¸ªå¸¦å®½ä¸ºBçš„ä½é€šæ»¤æ³¢å™¨ï¼Œé‚£ä¹ˆåªè¦è¿›è¡Œæ¯ç§’2Bæ¬¡ç¡®åˆ‡é‡‡æ ·[ä¸€ä¸ªå‘¨æœŸé‡‡æ ·2æ¬¡]ï¼Œå°±å¯ä»¥å®Œå…¨é‡æ„å‡ºè¢«è¿‡æ»¤çš„ä¿¡å·</p><p>ä¸è€ƒè™‘å™ªå£°ï¼Œå¦‚æœä¿¡å·åŒ…å«äº†Vä¸ªç¦»æ•£ç­‰çº§ï¼Œé‚£ä¹ˆå…¬å¼å¯ä»¥å†™ä¸º</p><script type="math/tex; mode=display">æœ€å¤§æ•°æ®é€Ÿç‡=2Blog_2V(bit/s)</script><p>[æœ€å¤§symbol rate=$2B\,symbol/s$]</p><blockquote><p>æ¯ç§’é‡‡æ ·2Bæ¬¡ï¼Œä¹Ÿå°±æ˜¯é‡‡æ ·äº†2Bä¸ªç”µå¹³ä¿¡å·</p><p>ä¹Ÿå°±æ˜¯é‡‡æ ·äº†2BlogVä¸ªbits</p></blockquote><p>äº‹å®ä¸Šï¼Œè¦æƒ³é‡æ„å‡ºä¿¡å·ï¼Œæ¯ç§’2Bæ¬¡é‡‡æ ·æ˜¯ä¸å¤Ÿçš„ï¼Œè¦å¤šä¸€äº›æ‰å¤Ÿã€‚</p><center><img src="9FC21EC72573A17040AD0FCD3C37A790.png" srcset="/img/loading.gif" alt="9FC21EC72573A17040AD0FCD3C37A790" style="zoom:10%;" /></center><p><br/></p><h4 id="æ¥ä¸‹æ¥è€ƒè™‘å¦‚æœå­˜åœ¨éšæœºå™ªå£°"><a href="#æ¥ä¸‹æ¥è€ƒè™‘å¦‚æœå­˜åœ¨éšæœºå™ªå£°" class="headerlink" title="æ¥ä¸‹æ¥è€ƒè™‘å¦‚æœå­˜åœ¨éšæœºå™ªå£°"></a>æ¥ä¸‹æ¥è€ƒè™‘å¦‚æœå­˜åœ¨éšæœºå™ªå£°</h4><script type="math/tex; mode=display">ä¿¡å™ªæ¯”(SNR)=\frac{ä¿¡å·åŠŸç‡}{å™ªå£°åŠŸç‡}=\frac{S}{N}</script><p>é€šå¸¸å°†å…¶å†™æˆå¯¹æ•°å½¢å¼$10log_{10}\frac{S}{N}$,å•ä½ä¸ºåˆ†è´. </p><p>é¦™å†œå¾—å‡ºï¼šå¯¹äºä¸€æ¡å¸¦å®½ä¸ºBèµ«å…¹ï¼Œå™ªå£°æ¯”æ˜¯$\frac{S}{N}$çš„æœ‰å™ªå£°é€šé“ï¼Œä»–çš„æœ€å¤§æ•°æ®ä¼ è¾“é€Ÿç‡æ˜¯. </p><script type="math/tex; mode=display">æœ€å¤§æ¯”ç‰¹ç‡=Blog_2{(1+\frac{S}{N})}</script><h2 id="2-å¼•å¯¼æ€§ä¼ è¾“ä»‹è´¨-æœ‰çº¿ä¼ è¾“"><a href="#2-å¼•å¯¼æ€§ä¼ è¾“ä»‹è´¨-æœ‰çº¿ä¼ è¾“" class="headerlink" title="2 å¼•å¯¼æ€§ä¼ è¾“ä»‹è´¨[æœ‰çº¿ä¼ è¾“]"></a>2 å¼•å¯¼æ€§ä¼ è¾“ä»‹è´¨[æœ‰çº¿ä¼ è¾“]</h2><p>ç‰©ç†å±‚çš„ä½œç”¨æ˜¯å°†bitä»ä¸€æ¡æœºå™¨ä¼ è¾“åˆ°å¦ä¸€å°æœºå™¨ã€‚ä¼ è¾“æ‰€ç”¨çš„ç‰©ç†ä»‹è´¨ä¼šåœ¨ä¼ è¾“å¸¦å®½ã€å»¶è¿Ÿã€æˆæœ¬ç­‰æ–¹é¢äº§ç”Ÿå·®åˆ«ã€‚</p><p>å¯ä»¥å°†ä»‹è´¨åˆ†ä¸º</p><ul><li>å¼•å¯¼æ€§ä»‹è´¨ï¼šå¦‚é“œçº¿ã€å…‰çº¤</li><li>éå¼•å¯¼æ€§ä»‹è´¨ï¼šå¦‚å«æ˜Ÿã€æ¿€å…‰</li></ul><p><br/></p><h3 id="2-1-ç£ä»‹è´¨"><a href="#2-1-ç£ä»‹è´¨" class="headerlink" title="2.1 ç£ä»‹è´¨"></a>2.1 ç£ä»‹è´¨</h3><p>Never underestimate the bandwidth of station wagon full of tapes hurtling down the highway.</p><h3 id="2-2-åŒç»çº¿"><a href="#2-2-åŒç»çº¿" class="headerlink" title="2.2 åŒç»çº¿"></a>2.2 åŒç»çº¿</h3><p>æ„æˆ</p><blockquote><p>åŒç»çº¿ç”±ä¸¤æ ¹é“œçº¿ä»¥èºæ—‹çŠ¶çš„å½¢å¼ç´§ç´§åœ°ç»åœ¨ä¸€èµ·ã€‚</p></blockquote><p>ä¹‹æ‰€ä»¥è¦ç»åœ¨ä¸€èµ·ï¼Œæ˜¯å› ä¸ºè¿™æ ·ä¸åŒç”µçº¿äº§ç”Ÿçš„å¹²æ‰°æ³¢ä¼šç›¸äº’æŠµæ¶ˆï¼Œæ˜¾è‘—é™ä½ç”µçº¿çš„è¾å°„ã€‚</p><p>å¹¶ä¸”ï¼Œä¿¡å·ä»¥ä¸¤æ ¹ç”µçº¿çš„ç”µå‹å·®æ¥æ‰¿è½½ï¼Œè¿™æ ·å¯¹å¤–éƒ¨å™ªå£°æœ‰æ›´å¥½çš„å…ç–«åŠ›ï¼Œå› ä¸ºå™ªå£°å¯¹ä¸¤æ ¹ç”µçº¿çš„å¹²æ‰°æ˜¯ç›¸åŒçš„ï¼Œå› æ­¤ç”µå‹å·®ä¸ä¼šæ”¹å˜ã€‚</p><p><br/></p><p>åŒç»çº¿æ—¢å¯ä»¥ä¼ è¾“æ¨¡æ‹Ÿä¿¡å·ï¼Œä¹Ÿå¯ä»¥ä¼ è¾“æ•°å­—ä¿¡å·ã€‚</p><p>ä¼ è¾“æ–¹å‘ï¼š</p><ul><li>å…¨åŒå·¥é“¾è·¯[full-duplex]ï¼šå¯ä»¥åŒå‘åŒæ—¶ä½¿ç”¨çš„é“¾è·¯</li><li>åŠåŒå·¥é“¾è·¯half-duplex]ï¼šå¯ä»¥åŒå‘ä½¿ç”¨ä½†ä¸€æ¬¡åªèƒ½ä½¿ç”¨ä¸€ä¸ªæ–¹å‘</li><li>å•å·¥é“¾è·¯[simplex]ï¼šåªå…è®¸ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“</li></ul><p>åŒç»çº¿çš„type:</p><blockquote><p>â€“ Category 5 [100Mbps, 1Gbps]<br>â€“ Category 6 [10Gbps]<br>â€“ Category 7 [Shielded Twisted Pair]</p></blockquote><center><img src="image-20191007125121828.png" srcset="/img/loading.gif" alt="image-20191007125121828" style="zoom:33%;" /></center><p>åŒç»çº¿çš„ç¼ºç‚¹æ˜¯ï¼š</p><p>ä¼ è¾“è·ç¦»è¿œçš„è¯ï¼Œä¿¡å·è¡°å‡å¾ˆå‰å®³ï¼Œéœ€è¦ä½¿ç”¨ä¸­ç»§å™¨</p><h3 id="2-3-åŒè½´ç”µç¼†-coaxial-cable"><a href="#2-3-åŒè½´ç”µç¼†-coaxial-cable" class="headerlink" title="2.3 åŒè½´ç”µç¼†[coaxial cable]"></a>2.3 åŒè½´ç”µç¼†[coaxial cable]</h3><p>æ„æˆï¼š</p><blockquote><p>ç¡¬çš„é“œèŠ¯ï¼Œå¤–é¢åŒ…ä¸Šä¸€å±‚ç»ç¼˜ææ–™ï¼Œç»ç¼˜ææ–™çš„å¤–é¢æ˜¯ç½‘çŠ¶åœ†æŸ±å¯¼ä½“ï¼Œå¤–å±‚å¯¼ä½“å†è¦†ç›–ä¸Šä¸€å±‚ä¿æŠ¤å¡‘æ–™å¤–å¥—</p></blockquote><center><img src="image-20191007133601513.png" srcset="/img/loading.gif" alt="image-20191007133601513" style="zoom: 33%;" /></center><p>ç‰¹ç‚¹ï¼š</p><blockquote><p>åŒè½´ç”µç¼†çš„ç»“æ„å’Œå±è”½æ€§ä½¿å¾—å®ƒæ—¢æœ‰å¾ˆé«˜çš„å¸¦å®½ï¼Œåˆæœ‰å¾ˆå¥½çš„æŠ—å™ªæ€§ã€‚</p><p>è¿™ç‚¹æ¯”åŒç»çº¿æ›´ä¼˜ç§€ï¼Œå› æ­¤ä¹Ÿæ¯”åŒç»çº¿ä¼ çš„è¿œ</p></blockquote><h3 id="2-4-ç”µåŠ›çº¿-power-line"><a href="#2-4-ç”µåŠ›çº¿-power-line" class="headerlink" title="2.4 ç”µåŠ›çº¿[power line]"></a>2.4 ç”µåŠ›çº¿[power line]</h3><center><img src="image-20191007133946196.png" srcset="/img/loading.gif" alt="image-20191007133946196" style="zoom: 33%;" /></center><h3 id="2-5-Fiber-optics"><a href="#2-5-Fiber-optics" class="headerlink" title="2.5 Fiber optics"></a>2.5 Fiber optics</h3><center><img src="page40image34686176.png" srcset="/img/loading.gif" alt="page40image34686176.jpg" style="zoom:33%;" /></center><p>Types:</p><blockquote><p>Multimodeå¤šæ¨¡ï¼šmany different rays</p><p>Unimodeå•æ¨¡ï¼šsingle rays, longer distance</p></blockquote><p>Transmission of light through fiber:</p><blockquote><p>-Attenuation [è¡°å‡] of light through fiber in the infrared region.</p><p>â€“ Three wavelength bands are used for optical communication. They are centered at 0.85, 1.30, and 1.55 micros [å¾®ç±³].</p></blockquote><center><img src="page41image34714624.png" srcset="/img/loading.gif" alt="page41image34714624.jpg" style="zoom: 33%;" /></center><h4 id="å…‰ç¼†ï¼š"><a href="#å…‰ç¼†ï¼š" class="headerlink" title="å…‰ç¼†ï¼š"></a><u>å…‰ç¼†</u>ï¼š</h4><p>æ„æˆï¼š</p><blockquote><p>ä¸­é—´coreæ˜¯ç»ç’ƒèŠ¯ï¼Œå…‰ç§’å†²é€šè¿‡å®ƒä¼ æ’­</p><p>ç»ç’ƒèŠ¯å¤–é¢æ˜¯ä¸€ä¸ªç»ç’ƒè¦†ç›–å±‚[cladding]ï¼Œè¦†ç›–å±‚çš„æŠ˜å°„ç‡æ¯”ç»ç’ƒä½ï¼Œè¿™æ ·å¯ä»¥é™åˆ¶æ‰€æœ‰å…‰éƒ½é™åˆ¶åœ¨ç»ç’ƒèŠ¯å†…[å…¨åå°„]</p><p>æœ€å¤–é¢æ˜¯ä¸€å±‚å¡‘æ–™å°å¥—[jacket],ç”¨æ¥ä¿æŠ¤é‡Œé¢çš„ç»ç’ƒåŒ…å±‚</p><p>å…‰çº¤é€šå¸¸è¢«æ‰æ†æˆæŸï¼Œæœ€å¤–é¢å†åŠ ä¸€å±‚ä¿æŠ¤å¥—</p></blockquote><center><img src="page42image34731632.png" srcset="/img/loading.gif" alt="page42image34731632.jpg" style="zoom:35%;" /></center><p>ä¿¡å·æºä¸€åŠæœ‰ä¸¤ç§å…‰æºï¼šå‘å…‰LEDå’ŒåŠå¯¼ä½“æ¿€å…‰</p><center><img src="page44image34725184.png" srcset="/img/loading.gif" alt="page44image34725184.jpg" style="zoom:33%;" /></center><h4 id="å…‰çº¤å’Œé“œçº¿çš„æ¯”è¾ƒ"><a href="#å…‰çº¤å’Œé“œçº¿çš„æ¯”è¾ƒ" class="headerlink" title="å…‰çº¤å’Œé“œçº¿çš„æ¯”è¾ƒ"></a><u>å…‰çº¤å’Œé“œçº¿çš„æ¯”è¾ƒ</u></h4><p>â€“ Advantages</p><ul><li>Higher bandwidths and Low attenuation.</li><li>Not being affected by power surges, electromagnetic interference, or power failures.</li><li>Not affected by corrosive chemicals in the air.</li><li>Thin and lightweight.</li><li>Fibers do not leak light and quite difficult to tap.</li></ul><p>â€“ Disadvantages</p><ul><li><p>Less familiar technology.</p><p>è¦æ±‚è¾ƒé«˜çš„æ“ä½œæŠ€èƒ½ï¼Œå…‰çº¤è¢«è¿‡åº¦å¼¯æ›²å®¹æ˜“æŠ˜æ–­</p></li><li><p>Fiber interfaces more expensive.</p></li></ul><p>â€“ Conclusion: For new routes [longer ones], fiber win</p><h1 id="3-æ— çº¿ä¼ è¾“"><a href="#3-æ— çº¿ä¼ è¾“" class="headerlink" title="3 æ— çº¿ä¼ è¾“"></a>3 æ— çº¿ä¼ è¾“</h1><h2 id="3-1ç”µç£é¢‘è°±"><a href="#3-1ç”µç£é¢‘è°±" class="headerlink" title="3.1ç”µç£é¢‘è°±"></a>3.1ç”µç£é¢‘è°±</h2><center><img src="image-20191007140913262.png" srcset="/img/loading.gif" alt="image-20191007140913262" style="zoom:30%;" /></center><p>ç”±é¦™å†œå®šç†æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªç”µç£æ³¢çš„ä¿¡å·èƒ½å¤Ÿæºå¸¦çš„ä¿¡æ¯é‡ä¸å¸¦å®½æˆæ­£æ¯”ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹åˆ°å…‰çº¤å¸¦å®½æ˜¯å¤šä¹ˆå®½</p><p>Some spread its frequency over a <em>wide frequency band</em>[spread spectrum, æ‰©é¢‘].</p><p>â€“ Frequency hopping spread spectrum [military, 802.11, Bluetooth]</p><p>â€“ Direct sequence spread spectrum [3G mobile phones]</p><p>â€“ UWB [UltraWideBand]</p><center><img src="page49image35151168.png" srcset="/img/loading.gif" alt="page49image35151168.jpg" style="zoom:33%;" /></center><h3 id="3-2-Radar"><a href="#3-2-Radar" class="headerlink" title="3.2 Radar"></a>3.2 Radar</h3><h3 id="3-3-Radio-transmission"><a href="#3-3-Radio-transmission" class="headerlink" title="3.3 Radio transmission"></a>3.3 Radio transmission</h3><p>[a] In the VLF, LF, and MF bands, radio waves follow the curvature of the earth.</p><p>[b] In the HF band, they bounce off the ionosphere [ç”µç¦»å±‚].</p><center><img src="page52image35155536.png" srcset="/img/loading.gif" alt="page52image35155536.jpg" style="zoom:33%;" /></center><h3 id="3-4-Microwave-transmission"><a href="#3-4-Microwave-transmission" class="headerlink" title="3.4 Microwave transmission"></a>3.4 Microwave transmission</h3><h1 id="4-æ•°å­—è°ƒåˆ¶ä¸å¤šè·¯å¤ç”¨"><a href="#4-æ•°å­—è°ƒåˆ¶ä¸å¤šè·¯å¤ç”¨" class="headerlink" title="4 æ•°å­—è°ƒåˆ¶ä¸å¤šè·¯å¤ç”¨"></a>4 æ•°å­—è°ƒåˆ¶ä¸å¤šè·¯å¤ç”¨</h1><h4 id="ä»€ä¹ˆæ˜¯æ•°å­—è°ƒåˆ¶ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ•°å­—è°ƒåˆ¶ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ•°å­—è°ƒåˆ¶ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ•°å­—è°ƒåˆ¶ï¼Ÿ</h4><blockquote><p>æ¯”ç‰¹ä¸ä»£è¡¨ä»–ä»¬çš„ä¿¡å·ä¹‹é—´çš„è½¬æ¢è¿‡ç¨‹ç§°ä¸º<strong>æ•°å­—è°ƒåˆ¶</strong></p></blockquote><p><br/></p><p>æˆ‘ä»¬é¦–å…ˆæ¥çœ‹å¦‚ä½•æŠŠ<strong>æ¯”ç‰¹ç›´æ¥è½¬æ¢æˆä¿¡å·</strong>çš„æ–¹æ¡ˆï¼Œè¿™äº›æ–¹æ¡ˆå¯¼è‡´äº†<strong>åŸºå¸¦ä¼ è¾“</strong></p><blockquote><p>åŸºå¸¦ä¼ è¾“æ˜¯æŒ‡ï¼šä¿¡å·çš„ä¼ è¾“å æœ‰ä¼ è¾“ä»‹è´¨ä¸Šä»0åˆ°æœ€å¤§å€¼ä¹‹é—´çš„å…¨éƒ¨é¢‘ç‡</p></blockquote><p>ç„¶åæˆ‘ä»¬çœ‹é€šè¿‡è°ƒèŠ‚è½½æ³¢ä¿¡å·çš„å¹…å€¼ã€ç›¸ä½æˆ–è€…é¢‘ç‡æ¥è¿è½½æ¯”ç‰¹çš„æ¨¡å¼ï¼Œè¿™äº›æ–¹æ¡ˆå¯¼è‡´äº†<strong>é€šå¸¦ä¼ è¾“</strong></p><blockquote><p>é€šå¸¦ä¼ è¾“æ˜¯æŒ‡ï¼šä¿¡å·å æ®äº†ä»¥è½½æ³¢ä¿¡å·é¢‘ç‡ä¸ºä¸­å¿ƒçš„ä¸€æ®µé¢‘å¸¦</p></blockquote><p><br/></p><p>ä¿¡é“é€šå¸¸è¢«å¤šä¸ªä¿¡å·å…±äº«ï¼Œè¿™ç§ä¿¡é“çš„å…±äº«å½¢å¼ç§°ä¸º<strong>å¤šè·¯å¤ç”¨æŠ€æœ¯</strong></p><p>å¤šè·¯å¤ç”¨æŠ€æœ¯å¯ä»¥é€šè¿‡ï¼šæ—¶åˆ†å¤ç”¨ã€é¢‘åˆ†å¤ç”¨ã€ç åˆ†å¤ç”¨ å®ç°</p><h2 id="4-1-åŸºå¸¦ä¼ è¾“"><a href="#4-1-åŸºå¸¦ä¼ è¾“" class="headerlink" title="4.1 åŸºå¸¦ä¼ è¾“"></a>4.1 åŸºå¸¦ä¼ è¾“</h2><center><img src="image-20200101212239647.png" srcset="/img/loading.gif" alt="image-20200101212239647" style="zoom:50%;" /></center><h3 id="NRZ"><a href="#NRZ" class="headerlink" title="NRZ"></a>NRZ</h3><p>ç¿»è½¬ä»£è¡¨1ï¼Œä¸ç¿»è½¬ä»£è¡¨0</p><p>ä¸€æ—¦NRZä¿¡å·è¢«å‘å‡ºå»ï¼Œå®ƒæ²¿çº¿ç¼†ä¼ æ’­ã€‚å¦ä¸€ç«¯çš„æ¥æ”¶å™¨ä»¥ä¸€å®šå‘¨æœŸå¯¹ä¿¡å·é‡‡æ ·ï¼Œç„¶åæŠŠé‡‡æ ·ä¿¡å·è½¬æ¢æˆæ¯”ç‰¹ã€‚</p><p>Problem:</p><blockquote><p>a long run of 0s or 1s leaves the signal unchanged. </p><p>After a while it is hard to tell the bits apart, as 15 zeros look much like 16 zeros unless you have a very accurate clock.</p></blockquote><p>Accurate clock: </p><blockquote><p> For all schemes that encode bits into symbols, the receiver must know <strong>when one symbol ends and the next symbol begins</strong> to correctly decode the bits.</p></blockquote><p>ä¸€èˆ¬æ¥è¯´ï¼Œaccurate clockæ˜¯å¾ˆéš¾åšåˆ°çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><h4 id="Clock-Recovery"><a href="#Clock-Recovery" class="headerlink" title="Clock Recovery"></a><u>Clock Recovery</u></h4><ul><li><p>ä¸€ç§æ–¹æ³•ï¼Œé¢å¤–æ‹‰ä¸€æ ¹æ—¶é’Ÿçº¿ï¼Œç»™æ¥æ”¶å™¨å‘é€å•ç‹¬çš„æ—¶é’Ÿä¿¡å·</p><p>è¿™ä¸ªæ–¹æ³•ä¸å¥½ï¼Œå› ä¸ºè¿™å¾ˆæµªè´¹ï¼Œç”¨ä¸€æ ¹é¢å¤–çš„çº¿æ¥å‘é€æ—¶é’Ÿï¼Œè¿˜ä¸å¦‚ç”¨å®ƒæ¥å‘é€æ•°æ®å‘¢</p></li></ul><ul><li>A clever trick is to mix the clock signal with the data signal by XORing them together so that no extra line is needed.â†’<strong><u>Manchester Encoding</u></strong></li></ul><p>  <strong><u>Manchester Encoding</u></strong>çš„æ–¹æ³•æ˜¯ï¼Œæ—¶é’Ÿçš„é¢‘ç‡æ˜¯æ¯”ç‰¹ç‡çš„ä¸¤å€ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªbit æ—¶é—´å†…ï¼Œæ—¶é’Ÿä¼šäº§ç”Ÿä¸€æ¬¡è·³å˜ã€‚æ—¶é’ŸXOR bitï¼Œäº§ç”Ÿè¾“å‡º</p><p>  å¦‚ä¸Šå›¾æ‰€ç¤º</p><blockquote><p> ç¬¬ä¸€ä¸ªbitæ—¶é—´tå†…ï¼Œä¼ è¾“çš„bitæ˜¯1ï¼Œæ—¶é’Ÿåœ¨[0,t/2]å†…æ˜¯0ï¼Œä¸bit 1å¼‚æˆ–ï¼Œç¼–ç æˆ1; </p><p> åœ¨[t/2, t]å†…æ—¶é’Ÿè·³å˜åˆ°1ï¼Œä¸bit 0å¼‚æˆ–ï¼Œç¼–ç æˆ0.</p><p> å› æ­¤æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªbitæ—¶é—´çœ‹åˆ°çš„ç¼–ç å…ˆæ˜¯1åç¿»è½¬åˆ°0</p></blockquote><p>  é—®é¢˜ï¼šéœ€è¦ä¸¤å€äºNRZçš„å¸¦å®½ï¼Œä¸€ä¸ªbitæ—¶é—´ä»–è¦ä¼ è¾“ä¸¤ä¸ªä¿¡å·</p><ul><li>As a step in the right direction, we can simplify the situation by encoding a 1 as a transition and a 0 as no transition, or vice versa.â†’<strong><u>NRZI</u></strong> [Non-Return-to- Zero Inverted,ä¸å½’é›¶å€’ç›¸åˆ¶, Used in USB]</li></ul><p>  <strong><u>NRZI</u></strong>æ–¹æ³•æ˜¯ï¼šç¼–ç æœ‰è·³å˜è¡¨ç¤º1ï¼Œç¼–ç æ— è·³å˜è¡¨ç¤º0</p><p>  è¿™æ ·ï¼Œå†é•¿çš„ä¸€ä¸²1éƒ½ä¸ä¼šäº§ç”Ÿæ—¶é’Ÿæ¢å¤é—®é¢˜ï¼›ä½†æ˜¯ä¸€é•¿ä¸²çš„0ä»ç„¶æœ‰é—®é¢˜</p><ul><li><p>Problem: long runs of 0s?â†’<strong><u>4B/5B</u></strong></p><p><strong><u>4B/5B</u></strong>çš„æ–¹æ³•æ˜¯ï¼šæ¯4ä¸ªbitsè¢«æ˜ å°„æˆä¸€ä¸ª5bitsçš„æ¨¡å¼ï¼Œæ˜ å°„æŒ‰ç…§ä¸€å¼ å›ºå®šçš„è½¬æ¢è¡¨è¿›è¡Œï¼Œ5bitsçš„é€‰æ‹©ä½¿å¾—æ˜ å°„ç»“æœæ°¸è¿œä¸ä¼šå‡ºç°è¿ç»­3ä¸ª0</p><center><img src="page63image36690640.png" srcset="/img/loading.gif" alt="page63image36690640.png" style="zoom:33%;" /></center><p>é—®é¢˜ï¼šå¢åŠ äº†25%çš„å¸¦å®½</p></li></ul><p><br/></p><h2 id="4-2-é€šå¸¦ä¼ è¾“"><a href="#4-2-é€šå¸¦ä¼ è¾“" class="headerlink" title="4.2 é€šå¸¦ä¼ è¾“"></a>4.2 é€šå¸¦ä¼ è¾“</h2><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªä¿¡é“ä¸Šå‘é€ä¿¡æ¯ä½¿ç”¨çš„é¢‘ç‡èŒƒå›´å¹¶ä¸æ˜¯ä»0å¼€å§‹çš„ã€‚å¯¹äºæ— çº¿ä¿¡é“æ¥è¯´ï¼Œå‘é€éå¸¸ä½é¢‘ç‡çš„ä¿¡å·ä¸åˆ‡å®é™…ï¼Œå› ä¸ºå¤©çº¿çš„å¤§å°ä¸ä¿¡å·çš„æ³¢é•¿æˆæ¯”ä¾‹ï¼Œä½é¢‘ä¿¡å·éœ€è¦å¾ˆå¤§çš„å¤©çº¿ã€‚</p><p>å‘å°„é¢‘ç‡ä¸€èˆ¬æ˜¯ç”±ç›‘ç®¡çº¦æŸå’Œé¿å…å¹²æ‰°çš„éœ€è¦å†³å®šçš„</p><h3 id="4-2-1-æ•°å­—è°ƒè¯•"><a href="#4-2-1-æ•°å­—è°ƒè¯•" class="headerlink" title="4.2.1 æ•°å­—è°ƒè¯•"></a>4.2.1 æ•°å­—è°ƒè¯•</h3><center><img src="image-20191007153614734.png" srcset="/img/loading.gif" alt="image-20191007153614734" style="zoom:50%;" /></center><h4 id="A-å¹…ç§»é”®æ§-ASK-Amplitude-Shift-Keying"><a href="#A-å¹…ç§»é”®æ§-ASK-Amplitude-Shift-Keying" class="headerlink" title="A å¹…ç§»é”®æ§[ASK, Amplitude Shift Keying]"></a>A å¹…ç§»é”®æ§[ASK, Amplitude Shift Keying]</h4><p>é€šè¿‡é‡‡ç”¨ä¸åŒçš„æŒ¯å¹…è¡¨ç¤º0å’Œ1</p><blockquote><p>å¦‚ä¸Šå›¾(b)æ‰€ç¤ºï¼Œè¿™é‡Œé‡‡ç”¨éé›¶å¹…å€¼å’Œä¸€ä¸ªé›¶å¹…å€¼</p></blockquote><h4 id="B-é¢‘ç§»é”®æ§-FSK-Frequency-Shift-Keying"><a href="#B-é¢‘ç§»é”®æ§-FSK-Frequency-Shift-Keying" class="headerlink" title="B é¢‘ç§»é”®æ§[FSK, Frequency Shift Keying]"></a>B é¢‘ç§»é”®æ§[FSK, Frequency Shift Keying]</h4><p>é‡‡ç”¨ä¸¤ä¸ªæˆ–æ›´å¤šçš„é¢‘ç‡</p><blockquote><p>å¦‚ä¸Šå›¾[c]æ‰€ç¤ºï¼Œä½¿ç”¨ä¸¤ä¸ªé¢‘ç‡è¡¨ç¤º0å’Œ1</p></blockquote><h4 id="C-ç›¸ç§»é”®æ§-PSK-Phase-Shift-Keying"><a href="#C-ç›¸ç§»é”®æ§-PSK-Phase-Shift-Keying" class="headerlink" title="C ç›¸ç§»é”®æ§[PSK, Phase Shift Keying]"></a>C ç›¸ç§»é”®æ§[PSK, Phase Shift Keying]</h4><p>åœ¨æ¯ä¸ªç¬¦å·çš„å‘¨æœŸä¸­ï¼Œç³»ç»ŸæŠŠè½½æ³¢æ³¢å½¢åç§»0åº¦æˆ–è€…180åº¦ã€‚ç”±äºåªæœ‰ä¸¤ä¸ªç›¸ä½ï¼Œè¿™ç§è°ƒåˆ¶æ–¹æ³•ç§°ä¸ºäºŒè¿›åˆ¶ç›¸ç§»é”®æ§[BPSK]ï¼Œè¿™é‡Œçš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„æ˜¯ä¸¤ä¸ªç¬¦å·</p><blockquote><p>å¦‚ä¸Šå›¾[d]æ‰€ç¤ºï¼Œä½¿ç”¨ä¸¤ç§ç›¸ä½é‡è¡¨ç¤º0å’Œ1</p></blockquote><p>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ›´å¤šæ•°é‡çš„åç§»ã€‚æ¯”å¦‚ç”¨4ä¸ªåç§»ï¼Œ45ï¼Œ135ï¼Œ225ï¼Œ315ï¼Œé‚£ä¹ˆæ¯ä¸ªç¬¦å·å¯ä»¥è¡¨ç¤º2bitã€‚è¿™ç§ç§°ä¸ºæ­£äº¤ç›¸ç§»é”®æ§[QPSK, Quadrature]</p><h4 id="D-é›†å¤§æˆè€…"><a href="#D-é›†å¤§æˆè€…" class="headerlink" title="D é›†å¤§æˆè€…"></a>D é›†å¤§æˆè€…</h4><p>æˆ‘ä»¬å¯ä»¥ç»¼åˆä»¥ä¸Šè°ƒåˆ¶æ–¹å¼ï¼Œä½¿å¾—æ¯ä¸ªç¬¦å·è¡¨ç¤ºæ›´å¤šçš„bit.</p><p>æˆ‘ä»¬é€‰æ‹©ç»¼åˆæŒ¯å¹…å’Œç›¸ä½ã€‚ä¸ºä»€ä¹ˆä¸è€ƒè™‘é¢‘ç‡å‘¢ï¼Ÿå› ä¸ºé¢‘ç‡å’Œç›¸ä½æœ‰å…³</p><p><br/></p><p>æˆ‘ä»¬ç»™å‡ºæ˜Ÿåº§å›¾</p><blockquote><p> ä¸€ä¸ªç‚¹çš„ç›¸ä½æ˜¯ä»¥ä»–ä¸ºèµ·ç‚¹åˆ°åŸç‚¹çš„çº¿ä¸xè½´æ­£æ–¹å‘çš„å¤¹è§’</p><p> ä¸€ä¸ªç‚¹çš„æŒ¯å¹…æ˜¯ä»–åˆ°åŸç‚¹çš„è·ç¦»</p></blockquote><center><img src="image-20191007154637608.png" srcset="/img/loading.gif" alt="image-20191007154637608" style="zoom: 33%;" /></center><blockquote><p>å¦‚å›¾[b], QAM-16ï¼š</p><p>ä¸€å…±æœ‰16ä¸ªç¬¦å·ï¼Œ16ä¸ªç¬¦å·å¯ä»¥è¡¨ç¤ºå‡º4bitsçš„æ‰€æœ‰ç»„åˆ</p><p>å› æ­¤ä¸€ä¸ªç¬¦å·å¯ä»¥ä¼ è¾“4ä¸ªæ¯”ç‰¹</p><p>åŒæ ·ï¼Œå¦‚å›¾[c], QAM-64</p><p>ä¸€å…±æœ‰64ä¸ªç¬¦å·ï¼Œä¸€ä¸ªç¬¦å·å¯ä»¥ä¼ è¾“6bits [..$2^6=64$]</p></blockquote><h2 id="4-3-Multiplexing"><a href="#4-3-Multiplexing" class="headerlink" title="4.3 Multiplexing"></a>4.3 Multiplexing</h2><h3 id="4-3-1-é¢‘åˆ†å¤ç”¨-FDM-Frequency-Division-Multiplexing"><a href="#4-3-1-é¢‘åˆ†å¤ç”¨-FDM-Frequency-Division-Multiplexing" class="headerlink" title="4.3.1 é¢‘åˆ†å¤ç”¨[FDM,Frequency Division Multiplexing]"></a>4.3.1 é¢‘åˆ†å¤ç”¨[FDM,Frequency Division Multiplexing]</h3><p>åˆ©ç”¨é€šå¸¦ä¼ è¾“çš„ä¼˜åŠ¿ä½¿å¤šä¸ªç”¨æˆ·å…±äº«ä¸€ä¸ªä¿¡é“ã€‚</p><p>FDMå°†é¢‘è°±åˆ†æˆå‡ ä¸ªé¢‘æ®µï¼Œæ¯ä¸ªç”¨æˆ·å®Œå…¨æ‹¥æœ‰å…¶ä¸­ä¸€ä¸ªé¢‘æ®µæ¥å‘é€è‡ªå·±çš„ä¿¡å·</p><center><img src="image-20191005234836200.png" srcset="/img/loading.gif" alt="image-20191005234836200" style="zoom: 40%;" /></center><h4 id="æ­£äº¤é¢‘åˆ†å¤ç”¨-OFDM-orthogonal"><a href="#æ­£äº¤é¢‘åˆ†å¤ç”¨-OFDM-orthogonal" class="headerlink" title="æ­£äº¤é¢‘åˆ†å¤ç”¨[OFDM,orthogonal]"></a>æ­£äº¤é¢‘åˆ†å¤ç”¨[OFDM,orthogonal]</h4><p>ä¿¡é“å¸¦å®½è¢«åˆ†æˆè®¸å¤šç‹¬ç«‹å‘é€æ•°æ®çš„å­è½½æ³¢ï¼Œæ¯ä¸ªå­è½½æ³¢ä¹‹é—´é¢‘ç‡çš„é—´éš”æ˜¯$\Delta f$</p><p>æ¯ä¸ªå­è½½æ³¢å‘å‡ºçš„ä¿¡å·è™½ç„¶å¯ä»¥æ‰©æ•£åˆ°ç›¸é‚»å­è½½æ³¢ï¼Œä½†æ˜¯æ¯ä¸ªå­è½½æ³¢çš„é¢‘ç‡å“åº”è¢«è®¾è®¡æˆåœ¨ç›¸é‚»å­è½½æ³¢çš„ä¸­å¿ƒä¸º0ã€‚å› æ­¤ï¼Œå¯ä»¥åœ¨å­è½½æ³¢ä¸­å¿ƒé¢‘ç‡é‡‡æ ·è€Œä¸ä¼šæ”¶åˆ°å…¶é‚»å±…çš„å¹²æ‰°</p><center><img src="image-20191007160446233.png" srcset="/img/loading.gif" alt="image-20191007160446233" style="zoom:40%;" /></center><h3 id="4-3-2-æ—¶åˆ†å¤ç”¨"><a href="#4-3-2-æ—¶åˆ†å¤ç”¨" class="headerlink" title="4.3.2 æ—¶åˆ†å¤ç”¨"></a>4.3.2 æ—¶åˆ†å¤ç”¨</h3><p>ç”¨æˆ·ä»¥å¾ªç¯çš„æ–¹å¼è½®æµå·¥ä½œã€‚æ¯ä¸ªç”¨æˆ·å‘¨æœŸæ€§è·å¾—æ•´ä¸ªå¸¦å®½éå¸¸çŸ­çš„ä¸€ä¸ªæ—¶é—´</p><center><img src="image-20191005234914576.png" srcset="/img/loading.gif" alt="image-20191005234914576" style="zoom:40%;" /></center><h3 id="4-3-3-ç åˆ†å¤ç”¨"><a href="#4-3-3-ç åˆ†å¤ç”¨" class="headerlink" title="4.3.3 ç åˆ†å¤ç”¨"></a>4.3.3 ç åˆ†å¤ç”¨</h3><p>ä¼ è¾“ä¸€ä¸ªbitçš„æ—¶é—´è¢«åˆ’åˆ†æˆmä¸ªæ›´çŸ­çš„æ—¶é—´é—´éš”ï¼Œç§°è¿™ä¸ªæ—¶é—´é—´éš”ä¸º<u>ç ç‰‡</u>[chip]ã€‚æ¯ä¸ªç«™åˆ†é…å¾—åˆ°å”¯ä¸€çš„mä½ç ï¼Œç§°ä¸º <u>ç ç‰‡åºåˆ—</u></p><p>å¦‚æœè¦å‘é€bit 1,ç«™å°±å‘é€åˆ†é…ç»™ä»–çš„ç ç‰‡åºåˆ—ï¼›å¦‚æœè¦å‘é€bit 0,ç«™å°±å‘é€åˆ†é…ç»™ä»–çš„ç ç‰‡åºåˆ—çš„åç ã€‚</p><blockquote><p>m=8,å³ä¸€ä¸ªbitæ—¶é—´ä¼ è¾“çš„ç ç‰‡åºåˆ—æ˜¯8ä½çš„ã€‚</p><p>å¦‚æœAç«™åˆ†é…åˆ°çš„ç ç‰‡åºåˆ—ä¸º[-1-1-1+1+1-1+1+1]</p><p>é‚£ä¹ˆå¦‚æœAæƒ³å‘é€bit 1ï¼Œå°±å‘é€ç ç‰‡åºåˆ—[-1-1-1+1+1-1+1+1]</p><p>å¦‚æœAæƒ³å‘é€ bit 0, å°±å‘é€ç ç‰‡åºåˆ—[+1+1+1-1-1+1-1-1]</p></blockquote><p>ç ç‰‡åºåˆ—çš„è¦æ±‚ï¼š</p><blockquote><p> æ‰€æœ‰çš„ç ç‰‡åºåˆ—éƒ½è¦ä¸¤ä¸¤æ­£äº¤</p></blockquote><center><img src="image-20191006000007082.png" srcset="/img/loading.gif" alt="image-20191006000007082" style="zoom:35%;" /></center><p>A,B,C,D æ˜¯å‘é€ä¿¡å·çš„4ä¸ªstationï¼Œä»–ä»¬çš„ç ç‰‡åºåˆ—ä¸¤ä¸¤æ­£äº¤ã€‚</p><p>S1,S2,â€¦S6æ˜¯6ä¸ªä¾‹å­,S6è¡¨ç¤ºè¿™ä¸ªæ¯”ç‰¹æ—¶é—´A,B,Då‘é€äº†bit 1ï¼ŒCå‘é€äº†bit 0ã€‚ä½†æ˜¯æˆ‘ä»¬æ”¶åˆ°çš„æ˜¯S6è¿™ä¸ªä¸åŒç«™çš„ä¿¡å·éƒ½æ··æ·†åœ¨ä¸€èµ·çš„æ•´ä½“ã€‚æ€ä¹ˆæŠŠCç«™å‘é€çš„æ¯”ç‰¹æå–å‡ºæ¥å‘¢ï¼Ÿ</p><p>æ–¹æ³•æ˜¯S6ä¸Cåšå½’ä¸€åŒ–å†…ç§¯ã€‚å³$S_6\cdot C=[2-2+0-2+0-2-4+0]/8=-1$</p><p>å› æ­¤æˆ‘ä»¬çŸ¥é“åœ¨S6æ‰€å¤„çš„è¿™ä¸ªæ¯”ç‰¹æ—¶é—´å†…ï¼ŒCç«™ä¼ è¾“äº†bit 0ã€‚</p><blockquote><p>å†…ç§¯ç»“æœ</p><p>=1 è¯´æ˜è¯¥ç«™å‘é€äº† bit 1</p><p>=-1è¯´æ˜è¯¥ç«™å‘é€äº†bit 0</p><p>=0 è¯´æ˜è¯¥ç«™æ²¡æœ‰å‘é€æ•°æ®</p></blockquote><h1 id="5-å…¬å…±ç”µè¯äº¤æ¢ç½‘ç»œ"><a href="#5-å…¬å…±ç”µè¯äº¤æ¢ç½‘ç»œ" class="headerlink" title="5 å…¬å…±ç”µè¯äº¤æ¢ç½‘ç»œ"></a>5 å…¬å…±ç”µè¯äº¤æ¢ç½‘ç»œ</h1><p>How to connect computers?</p><blockquote><p>For small number of computers and a local area</p><ul><li>LAN </li></ul><p>For a large number of computers or a wide area or lacking right of way</p><ul><li>PSTN [Public Switched Telephone Network]</li></ul></blockquote><h2 id="5-1-Structure-of-the-Telephone-System"><a href="#5-1-Structure-of-the-Telephone-System" class="headerlink" title="5.1 Structure of the Telephone System"></a>5.1 Structure of the Telephone System</h2><p>ç”µè¯ç½‘ç»œçš„å˜è¿</p><center><img src="image-20191007161859322.png" srcset="/img/loading.gif" alt="image-20191007161859322" style="zoom:40%;" /></center><p>Bell system model</p><p>Levels:</p><ul><li>End office æœ¬åœ°å±€</li><li>toll office é•¿é€”å±€</li><li>primary office åˆçº§å±€</li><li>Sectional office åœ°åŒºå±€</li><li>Regional office åŒºåŸŸå±€</li></ul><p>Major components </p><ul><li><p>Local loops [æœ¬åœ°å›è·¯]: è¿›å…¥å®¶åº­å’Œå…¬å¸çš„æ¨¡æ‹ŸåŒç»çº¿</p></li><li><p>Trunks [å¹²çº¿]: è¿æ¥äº¤æ¢å±€çš„æ•°å­—å…‰çº¤</p></li><li><p>Switching offices [äº¤æ¢å±€]:ç”µè¯å‘¼å«åœ¨è¿™é‡Œä»ä¸€æ¡ä¸­ç»§çº¿è¢«æ¥å…¥å¦ä¸€æ¡ä¸­ç»§çº¿</p></li></ul><center><img src="image-2019100742053.png" srcset="/img/loading.gif" alt="å±å¹•å¿«ç…§ 2019-10-07 ä¸‹åˆ4.20.53" style="zoom:50%;" /></center><h2 id="5-1-æœ¬åœ°å›è·¯ï¼šè°ƒåˆ¶è§£è°ƒå™¨ã€ADSLã€å…‰çº¤"><a href="#5-1-æœ¬åœ°å›è·¯ï¼šè°ƒåˆ¶è§£è°ƒå™¨ã€ADSLã€å…‰çº¤" class="headerlink" title="5.1 æœ¬åœ°å›è·¯ï¼šè°ƒåˆ¶è§£è°ƒå™¨ã€ADSLã€å…‰çº¤"></a>5.1 æœ¬åœ°å›è·¯ï¼šè°ƒåˆ¶è§£è°ƒå™¨ã€ADSLã€å…‰çº¤</h2><h3 id="A-ç”µè¯è°ƒåˆ¶è§£è°ƒå™¨"><a href="#A-ç”µè¯è°ƒåˆ¶è§£è°ƒå™¨" class="headerlink" title="A ç”µè¯è°ƒåˆ¶è§£è°ƒå™¨"></a>A ç”µè¯è°ƒåˆ¶è§£è°ƒå™¨</h3><p>è¦åœ¨ç‰©ç†ä¿¡é“ä¸Šå‘é€æ¯”ç‰¹ï¼Œå¿…é¡»æŠŠæ¯”ç‰¹è½¬æ¢ä¸ºå¯ä»¥åœ¨ä¿¡é“ä¸Šä¼ è¾“çš„æ¨¡æ‹Ÿä¿¡å·ã€‚è¿™ä¸ªæ–¹å¼æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚å·²ç»å­¦è¿‡ã€‚</p><p>åœ¨ä¿¡å·çš„å¦ä¸€ç«¯ï¼Œæ¨¡æ‹Ÿä¿¡å·è¦è¢«è¿˜åŸæˆæ¯”ç‰¹</p><p><br/></p><p><strong><u>è°ƒåˆ¶è§£è°ƒå™¨</u></strong></p><p>æ˜¯ä»€ä¹ˆ</p><blockquote><p>æ‰§è¡Œæ•°å­—æ¯”ç‰¹æµå’Œæ¨¡æ‹Ÿä¿¡å·æµä¹‹é—´è½¬æ¢çš„è®¾å¤‡å°±æ˜¯è°ƒåˆ¶è§£è°ƒå™¨[modem]</p><p>è°ƒåˆ¶è§£è°ƒå™¨æ˜¯è°ƒåˆ¶å™¨[modulator]å’Œè§£è°ƒå™¨[demodulator]çš„ç¼©å†™</p></blockquote><center><img src="page102image35767104.png" srcset="/img/loading.gif" alt="page102image35767104.png" style="zoom:70%;" /> </center>]]></content>
    
    
    <categories>
      
      <category>Computer Network</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer Network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CA - Instruction Set</title>
    <link href="/2019/09/08/ComputerArchitecture/instructionSet/"/>
    <url>/2019/09/08/ComputerArchitecture/instructionSet/</url>
    
    <content type="html"><![CDATA[<h1 id="é™„å½•A-æŒ‡ä»¤é›†åŸºæœ¬åŸç†"><a href="#é™„å½•A-æŒ‡ä»¤é›†åŸºæœ¬åŸç†" class="headerlink" title="é™„å½•A æŒ‡ä»¤é›†åŸºæœ¬åŸç† "></a><a name="ISA">é™„å½•A æŒ‡ä»¤é›†åŸºæœ¬åŸç† </a></h1><h1 id="1-What-is-ISA"><a href="#1-What-is-ISA" class="headerlink" title="1 What is ISA?"></a>1 What is ISA?</h1><p>ISA: Instruction Set Architecture</p><p><img src="image-20190930101228492.png" srcset="/img/loading.gif" alt="image-20190930101228492" style="zoom:50%;" /></p><h1 id="2-What-types-of-ISA"><a href="#2-What-types-of-ISA" class="headerlink" title="2 What types of ISA?"></a>2 What types of ISA?</h1><h3 id="2-1-Basis"><a href="#2-1-Basis" class="headerlink" title="2.1 Basis"></a>2.1 Basis</h3><ul><li>type of internal storage</li></ul><blockquote><p>stack</p><p>accumulator</p><p>Register-memory</p><p>Register-register/load-store</p></blockquote><p><br/></p><p>å…ˆæ¥è§£é‡Šä¸€ä¸‹implicit operandå’Œexplicit operand</p><ul><li>explicit operand</li></ul><p>æ˜ç¡®åˆ°å“ªä¸ªåœ°æ–¹å»å–çš„æ“ä½œæ•°ï¼Œæ¯”å¦‚åˆ°æŸä¸€ä¸ªç”±æŒ‡ä»¤ç¡®å®šçš„<strong><em>å¯„å­˜å™¨</em></strong>ï¼Œæˆ–è€…å†…å­˜ä¸­ä¸€ä¸ªç”±æŒ‡ä»¤ç¡®å®šçš„<strong><em>å­˜å‚¨å™¨åœ°å€</em></strong></p><ul><li>implicit operand</li></ul><p>ä¸æ˜ç¡®çš„å–å€¼ä½ç½®ï¼Œä½†æ˜¯ç³»ç»Ÿé»˜è®¤äº†ã€‚æ¯”å¦‚stack architectureå°±æ˜¯é»˜è®¤åˆ°stackå¤´éƒ¨å»å–ï¼Œaccumulator architectureå°±æ˜¯é»˜è®¤åˆ°accumulatorä¸­å»å–ã€‚</p><p><br/></p><p><img src="image-20191218224444341.png" srcset="/img/loading.gif" alt="image-20191218224444341" style="zoom:50%;" /></p><p>C=A+Bçš„ä»£ç ç¤ºä¾‹</p><p><img src="image-20191218224500000.png" srcset="/img/loading.gif" alt="image-20191218224500000" style="zoom:50%;" /></p><p>example problem</p><p><img src="image-20191218224924929.png" srcset="/img/loading.gif" alt="image-20191218224924929" style="zoom:50%;" /></p><h4 id="2-1-1-Stack-Architecture"><a href="#2-1-1-Stack-Architecture" class="headerlink" title="2.1.1 Stack Architecture"></a>2.1.1 Stack Architecture</h4><p><strong><em><u>operand</u></em></strong>:</p><blockquote><p> 2 <strong><em><u>implicit</u></em></strong> operands on the top of the stack(<strong><em>TOS</em></strong>)</p></blockquote><p>ç”¨å›¾æ¥çœ‹ä¸€ä¸‹ä»¥ä¸‹æ“ä½œçš„è¿‡ç¨‹</p><div class="hljs"><pre><code class="hljs armasm">C = A + <span class="hljs-keyword">B </span>(memory locations)<span class="hljs-keyword">Push </span>A<span class="hljs-keyword">Push </span><span class="hljs-keyword">B</span><span class="hljs-keyword">Add </span><span class="hljs-keyword">Pop </span>C</code></pre></div> <table>   <tr>     <td>       <img src="image-20190930102555608.png" srcset="/img/loading.gif" alt="image-20190930102555608" title="original"/>     </td>     <td>  <img src="image-20190930102855084.png" srcset="/img/loading.gif" alt="image-20190930102855084" title="push A"/>     </td>     <td>  <img src="image-20190930103000391.png" srcset="/img/loading.gif" alt="image-20190930103000391" title="push B"  />     </td>     <td>  <img src="image-20190930103037853.png" srcset="/img/loading.gif" alt="image-20190930103037853" title="Add"  />     </td>     <td>  <img src="image-20190930103101742.png" srcset="/img/loading.gif" alt="image-20190930103101742" title="pop C" />     </td>   </tr> </table><h4 id="2-1-2-Accumulator-Architecture"><a href="#2-1-2-Accumulator-Architecture" class="headerlink" title="2.1.2 Accumulator Architecture"></a>2.1.2 Accumulator Architecture</h4><p><strong><em><u>operand</u></em></strong></p><blockquote><p>one implicit operand: accumulator</p><p>one explicit operand: mem location</p></blockquote><p>çœ‹ä¸€ä¸‹ä»¥ä¸‹æ“ä½œçš„è¿‡ç¨‹</p><div class="hljs"><pre><code class="hljs fortran">C = A + BLoad AAdd BStore Caccumulator is both an <span class="hljs-keyword">implicit</span> input operand and a result</code></pre></div><table>  <tr>    <td>      <img src="image-20190930115553486.png" srcset="/img/loading.gif" alt="image-20190930115553486" title="original"/>    </td>    <td>  <img src="image-20190930115635931.png" srcset="/img/loading.gif" alt="image-20190930115635931" title="load A"/>    </td>      <td>  <img src="image-20190930115734010.png" srcset="/img/loading.gif" alt="image-20190930115734010" title="add B"/>    </td>    <td>  <img src="image-20190930115804883.png" srcset="/img/loading.gif" alt="image-20190930115804883" title="store C"/>    </td>  </tr></table><h1 id="3-å­˜å‚¨å™¨å¯»å€"><a href="#3-å­˜å‚¨å™¨å¯»å€" class="headerlink" title="3. å­˜å‚¨å™¨å¯»å€"></a>3. å­˜å‚¨å™¨å¯»å€</h1><h2 id="3-1-è§£é‡Šå­˜å‚¨å™¨åœ°å€"><a href="#3-1-è§£é‡Šå­˜å‚¨å™¨åœ°å€" class="headerlink" title="3.1 è§£é‡Šå­˜å‚¨å™¨åœ°å€"></a>3.1 è§£é‡Šå­˜å‚¨å™¨åœ°å€</h2><p>i. å…³äºå¦‚ä½•å¯¹ä¸€ä¸ªè¾ƒå¤§å¯¹è±¡ä¸­çš„å­—èŠ‚æ’åºï¼š</p><ul><li>Little Endian : store least significant byte in the smallest address</li></ul><p><img src="image-20191014101250484.png" srcset="/img/loading.gif" alt="image-20191014101250484" style="zoom:40%;" /></p><ul><li>Big Endian : store most significant byte in the smallest address</li></ul><p><img src="image-20191014101429477.png" srcset="/img/loading.gif" alt="image-20191014101429477" style="zoom:40%;" /></p><p>ii. å­—èŠ‚å¯¹é½</p><p>å¤§å°ä¸ºs bytesçš„å¯¹è±¡ï¼Œå­—èŠ‚åœ°å€ä¸ºA, å¦‚æœ$A\; mod\;s = 0$ , é‚£ä¹ˆæ˜¯å­—èŠ‚å¯¹é½çš„</p><p><img src="image-20191014101703881.png" srcset="/img/loading.gif" alt="image-20191014101703881" style="zoom:40%;" /></p><p>ä¸ºä»€ä¹ˆè¦å¯¹é½</p><blockquote><p>When well aligned, requires only one memory access to read one object;</p><p>If address is not well aligned, each misaligned object requires two memory accesses to fetch.</p></blockquote><h2 id="3-2-Addressing-modes"><a href="#3-2-Addressing-modes" class="headerlink" title="3.2  Addressing modes"></a>3.2  Addressing modes</h2><p><img src="image-20191014102744097-6809392.png" srcset="/img/loading.gif" alt="image-20191014102744097-6809392" style="zoom:50%;" /></p><p>References:  </p><p>[1]è®¡ç®—æœºä½“ç³»ç»“æ„ é‡åŒ–ç ”ç©¶æ–¹æ³•</p>]]></content>
    
    
    <categories>
      
      <category>Computer Architecture</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer Architecture</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
